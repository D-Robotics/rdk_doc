"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[68164],{28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>p});var o=i(96540);const s={},r=o.createContext(s);function d(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function p(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),o.createElement(r.Provider,{value:n},e.children)}},84370:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>p,default:()=>g,frontMatter:()=>d,metadata:()=>o,toc:()=>t});const o=JSON.parse('{"id":"Advanced_development/linux_development/driver_development_s100/driver_gpio_dev","title":"GPIO\u4f7f\u7528","description":"S100 Acore\u82af\u7247\u5185\u4e2d\u5171\u67093\u4e2asys\u6709gpio\u8bbe\u5907\uff0c\u5206\u522b\u662fperi, cam\u548cvideo\uff0c\u6bcf\u4e2a\u8bbe\u5907\u6700\u591a\u670932\u4e2agpio\u5f15\u811a\uff0c\u5e76\u4e14\u6bcf\u4e2agpio\u5f15\u811a\u90fd\u652f\u6301\u4e2d\u65ad\u3002","source":"@site/docs_s/07_Advanced_development/02_linux_development/04_driver_development_s100/04_driver_gpio_dev.md","sourceDirName":"07_Advanced_development/02_linux_development/04_driver_development_s100","slug":"/Advanced_development/linux_development/driver_development_s100/driver_gpio_dev","permalink":"/rdk_doc/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_gpio_dev","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1756459660000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"I2C\u8c03\u8bd5\u6307\u5357","permalink":"/rdk_doc/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_i2c_dev"},"next":{"title":"Pinctrl\u8c03\u8bd5\u6307\u5357","permalink":"/rdk_doc/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_pinctrl_dev"}}');var s=i(74848),r=i(28453);const d={sidebar_position:4},p="GPIO\u4f7f\u7528",l={},t=[{value:"\u9a71\u52a8\u4ee3\u7801",id:"\u9a71\u52a8\u4ee3\u7801",level:2},{value:"\u5185\u6838\u914d\u7f6e",id:"\u5185\u6838\u914d\u7f6e",level:3},{value:"\u5185\u6838DTS\u914d\u7f6e",id:"\u5185\u6838dts\u914d\u7f6e",level:3},{value:"GPIO\u4f7f\u7528",id:"gpio\u4f7f\u7528-1",level:2},{value:"Kernel Space",id:"kernel-space",level:3},{value:"DTS\u914d\u7f6e",id:"dts\u914d\u7f6e",level:4},{value:"\u9a71\u52a8\u4ee3\u7801\u63a5\u53e3",id:"\u9a71\u52a8\u4ee3\u7801\u63a5\u53e3",level:4},{value:"User Space",id:"user-space",level:3},{value:"\u63a7\u5236\u63a5\u53e3",id:"\u63a7\u5236\u63a5\u53e3",level:4},{value:"sysfs\u63a5\u53e3\u4ecb\u7ecd",id:"sysfs\u63a5\u53e3\u4ecb\u7ecd",level:3},{value:"export&amp;unexport",id:"exportunexport",level:4},{value:"direction",id:"direction",level:4},{value:"value",id:"value",level:4},{value:"edge",id:"edge",level:4},{value:"\u8c03\u8bd5",id:"\u8c03\u8bd5",level:2},{value:"\u786e\u5b9agpio-index",id:"\u786e\u5b9agpio-index",level:3},{value:"\u67e5\u770bdrobot-s100-pinctrl.dtsi\uff0c\u83b7\u53d6offset\u548cbase",id:"\u67e5\u770bdrobot-s100-pinctrldtsi\u83b7\u53d6offset\u548cbase",level:3}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"gpio\u4f7f\u7528",children:"GPIO\u4f7f\u7528"})}),"\n",(0,s.jsx)(n.p,{children:"S100 Acore\u82af\u7247\u5185\u4e2d\u5171\u67093\u4e2asys\u6709gpio\u8bbe\u5907\uff0c\u5206\u522b\u662fperi, cam\u548cvideo\uff0c\u6bcf\u4e2a\u8bbe\u5907\u6700\u591a\u670932\u4e2agpio\u5f15\u811a\uff0c\u5e76\u4e14\u6bcf\u4e2agpio\u5f15\u811a\u90fd\u652f\u6301\u4e2d\u65ad\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/gpio_devs.png",alt:"gpio_devs"})}),"\n",(0,s.jsx)(n.h2,{id:"\u9a71\u52a8\u4ee3\u7801",children:"\u9a71\u52a8\u4ee3\u7801"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kernel/drivers/gpio/gpio-dwapb.c # gpio\u9a71\u52a8\u6e90\u6587\u4ef6\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5185\u6838\u914d\u7f6e",children:"\u5185\u6838\u914d\u7f6e"}),"\n",(0,s.jsx)(n.p,{children:"GPIO_DWAPB"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_x5/GPIO_MENUCONFIG.png",alt:"image-GPIO_MENUCONFIG"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5185\u6838dts\u914d\u7f6e",children:"\u5185\u6838DTS\u914d\u7f6e"}),"\n",(0,s.jsx)(n.p,{children:"S100 GPIO\u63a7\u5236\u5668\u7684\u8bbe\u5907\u6811\u5b9a\u4e49\u4f4d\u4e8eSDK\u5305\u7684kernel\u6587\u4ef6\u5939\u4e0b\u7684arch/arm64/boot/dts/hobot/drobot-s100-soc.dtsi\u6587\u4ef6\u5185\u3002"}),"\n",(0,s.jsx)(n.admonition,{title:"\u5907\u6ce8",type:"info",children:(0,s.jsx)(n.p,{children:"s100.dtsi\u4e2d\u7684\u8282\u70b9\u4e3b\u8981\u58f0\u660eSoC\u5171\u6709\u7279\u6027\uff0c\u548c\u5177\u4f53\u7535\u8def\u677f\u65e0\u5173\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u4e0d\u7528\u4fee\u6539\u3002"})}),"\n",(0,s.jsx)(n.h2,{id:"gpio\u4f7f\u7528-1",children:"GPIO\u4f7f\u7528"}),"\n",(0,s.jsx)(n.h3,{id:"kernel-space",children:"Kernel Space"}),"\n",(0,s.jsx)(n.h4,{id:"dts\u914d\u7f6e",children:"DTS\u914d\u7f6e"}),"\n",(0,s.jsxs)(n.p,{children:["s100\u6240\u6709\u5f15\u811a\u7684GPIO\u914d\u7f6e\u4f4d\u4e8eSDK\u5305\u7684kernel\u6587\u4ef6\u5939\u4e0b\u8def\u5f84\u4e3a",(0,s.jsx)(n.code,{children:"arch/arm64/boot/dts/hobot/drobot-s100-soc.dtsi"}),"\u7684\u6587\u4ef6\u5185\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u7528\u6237\u9700\u8981\u914d\u7f6e\u7279\u5b9a\u5f15\u811a\u4e3aGPIO\u529f\u80fd\u65f6\uff0c\u53ef\u4ee5\u76f4\u63a5\u5f15\u7528\u9884\u5b9a\u4e49GPIO\u914d\u7f6e\uff1a"}),"\n",(0,s.jsxs)(n.p,{children:["GPIO\u8bbe\u5907\u6811\u8282\u70b9\u7684\u5c5e\u6027\u547d\u540d\u65b9\u5f0f\u4e00\u822c\u4e3a",(0,s.jsx)(n.code,{children:"<names>-gpios"}),"\u6216",(0,s.jsx)(n.code,{children:"<names>-gpio"}),"\uff0c\u4e3e\u4f8b\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"/**\n* peri_port0\u8868\u793aperi sys\u7684\u7b2c\u4e00\u4e2agpio\u8bbe\u5907\n* \u4e0b\u5217\u8bbe\u5907\u8282\u70b9\u5171\u6709\u56db\u4e2agpio\u5f15\u811a\uff0c\u5206\u522b\u662f\uff1a\n*       peri sys\u7684\u7b2c\u4e00\u4e2agpio\u8bbe\u5907 16\u53f7\u5f15\u811a(\u4ece0\u5f00\u59cb)\n*       peri sys\u7684\u7b2c\u4e8c\u4e2agpio\u8bbe\u5907 17\u53f7\u5f15\u811a(\u4ece0\u5f00\u59cb)\n*        cam sys\u7684\u7b2c\u4e00\u4e2agpio\u8bbe\u5907 28\u53f7\u5f15\u811a(\u4ece0\u5f00\u59cb)\n*      video sys\u7684\u7b2c\u4e00\u4e2agpio\u8bbe\u5907 18\u53f7\u5f15\u811a(\u4ece0\u5f00\u59cb)\n* GPIO_ACTIVE_HIGH\u8868\u793a\u9ad8\u7535\u5e73\u6709\u6548\uff0c\u4e00\u822c\u8bbe\u4e3aGPIO_ACTIVE_HIGH\n*/\ngpio-test {\n        test-gpios = <&peri_port0 16 GPIO_ACTIVE_HIGH\n                      &peri_port1 17 GPIO_ACTIVE_HIGH\n                      &cam_port0 28 GPIO_ACTIVE_HIGH\n                      &video_port0 18 GPIO_ACTIVE_HIGH>;\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u9a71\u52a8\u4ee3\u7801\u63a5\u53e3",children:"\u9a71\u52a8\u4ee3\u7801\u63a5\u53e3"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"/* include/linux/gpio.h */\n/* \u7533\u8bf7GPIO */\nint gpio_request(unsigned gpio, const char *label);\n/* GPIO\u521d\u59cb\u5316\u4e3a\u8f93\u51fa\u3002\u5e76\u8bbe\u7f6e\u8f93\u51fa\u7535\u5e73*/\nint gpio_direction_output(unsigned gpio, int value);\n/* GPIO\u521d\u59cb\u5316\u4e3a\u8f93\u5165 */\nint gpio_direction_input(unsigned gpio);\n/* \u83b7\u53d6GPIO\u7684\u7535\u5e73 */\nint gpio_get_value(unsigned int gpio);\n/* \u8bbe\u7f6eGPIO\u7684\u7535\u5e73 */\nvoid gpio_set_value(unsigned int gpio, int value);\n/* \u91ca\u653eGPIO */\nvoid gpio_free(unsigned gpio);\n/* \u7533\u8bf7GPIO\u4e2d\u65ad\uff0c\u8fd4\u56de\u7684\u503c\u53ef\u4ee5\u4f20\u7ed9request_irq\u548cfree_irq */\nint gpio_to_irq(unsigned int gpio);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"user-space",children:"User Space"}),"\n",(0,s.jsx)(n.h4,{id:"\u63a7\u5236\u63a5\u53e3",children:"\u63a7\u5236\u63a5\u53e3"}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u7528\u6237\u5c42\u53ef\u4ee5\u4f7f\u7528/sys/class/gpio\u8282\u70b9\u6765\u8fdb\u884c\u76f8\u5173gpio\u7684\u64cd\u4f5c\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5728sys\u8282\u70b9\u4e0b\u5b58\u5728\u5982\u4e0b\u8282\u70b9\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"#\u7533\u8bf7gpio\necho <gpio_num> > /sys/class/gpio/export\n#\u91ca\u653egpio\necho <gpio_num> > /sys/class/gpio/unexport\n#\u8bbe\u7f6egpio\u4e3a\u8f93\u51fa\n#\u5f53\u8bbe\u7f6edir\u4e3aout\u65f6\uff0c\u53ef\u4ee5\u5411value\u4e2decho 1/0\uff0c\u5206\u522b\u8868\u793a\u8f93\u5165\u9ad8\u4f4e\u7535\u5e73\u3002\necho out > /sys/class/gpio/gpio<gpio_num>/direction\n#\u8bbe\u7f6e\u9ad8\u7535\u5e73\necho 1 > /sys/class/gpio/gpio<gpio_num>/value\n#\u8bbe\u7f6e\u4f4e\u7535\u5e73\necho 0 > /sys/class/gpio/gpio<gpio_num>/value\n\n#\u8bbe\u7f6egpio\u4e3a\u8f93\u5165, \u5f53\u8bbe\u7f6edir\u4e3ain\u65f6\uff0ccat value\u8868\u793a\u8f93\u5165\u7684\u503c(0-\u4f4e\uff0c1-\u9ad8)\u3002\necho in > /sys/class/gpio/gpio<gpio_num>/direction\n#\u8bfb\u53d6gpio\u7684\u5916\u90e8\u503c\ncat /sys/class/gpio/gpio<gpio_num>/value\n\n\n#\u67e5\u770bgpio\u7684debug\u63a5\u53e3\ncat /sys/kernel/debug/gpio\n\n#\u67e5\u770bgpio\u548cpinctrl\u7684\u5173\u7cfb\n#\u53ef\u4ee5\u770b\u5230\u7cfb\u7edf\u7684\u5f15\u811a\u548cgpio\u7684\u53f7\u5173\u7cfb\ncat /sys/kernel/debug/pinctrl/<pinctrl_dev>/gpio-ranges\n"})}),"\n",(0,s.jsx)(n.h3,{id:"sysfs\u63a5\u53e3\u4ecb\u7ecd",children:"sysfs\u63a5\u53e3\u4ecb\u7ecd"}),"\n",(0,s.jsx)(n.h4,{id:"exportunexport",children:"export&unexport"}),"\n",(0,s.jsx)(n.p,{children:"/sys/class/gpio/export\u548c/sys/class/gpio/unexport\uff0c\u8fd9\u4e24\u4e2a\u8282\u70b9\u53ea\u80fd\u5199\u4e0d\u80fd\u8bfb\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u7528\u6237\u7a0b\u5e8f\u901a\u8fc7\u5199\u5165gpio\u7684\u7f16\u53f7\u6765\u5411\u5185\u6838\u7533\u8bf7\u5c06\u67d0\u4e2agpio\u7684\u63a7\u5236\u6743\u5bfc\u51fa\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u524d\u63d0\u662f\u6ca1\u6709\u5185\u6838\u4ee3\u7801\u7533\u8bf7\u8fd9\u4e2agpio\u7aef\u53e3\uff0c\u5982\u7528\u6237\u7533\u8bf7\u7f16\u53f7\u4e3a480\u7684GPIO\u7684\u547d\u4ee4\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-{.shell}",children:"echo 480 > export\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4e0a\u8ff0\u64cd\u4f5c\u4f1a\u4e3a480\u53f7gpio\u521b\u5efa\u4e00\u4e2a\u8282\u70b9gpio480\uff0c\u6b64\u65f6/sys/class/gpio\u76ee\u5f55\u4e0b\u8fb9\u751f\u6210\u4e00\u4e2agpio480\u7684\u76ee\u5f55\u3002"}),"\n",(0,s.jsx)(n.p,{children:"/sys/class/gpio/unexport\u548c\u5bfc\u51fa\u7684\u6548\u679c\u76f8\u53cd\uff0c\u6bd4\u5982\u79fb\u9664gpio480\u8fd9\u4e2a\u8282\u70b9\u64cd\u4f5c\u547d\u4ee4\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-{.shell}",children:"echo 480 > unexport #\u8be5\u64cd\u4f5c\u5c06\u4f1a\u79fb\u9664gpio480\u8fd9\u4e2a\u8282\u70b9\uff0c\u91ca\u653e\u5e8f\u53f7\u4e3a480\u7684gpio\u3002\n"})}),"\n",(0,s.jsx)(n.h4,{id:"direction",children:"direction"}),"\n",(0,s.jsx)(n.p,{children:"\u5176\u4e2ddirection\u8868\u793agpio\u7aef\u53e3\u7684\u65b9\u5411\uff0c\u8bfb\u53d6\u7ed3\u679c\u662fin\u6216out\u3002\u4e5f\u53ef\u4ee5\u5bf9\u8be5\u6587\u4ef6\u8fdb\u884c\u5199\u64cd\u4f5c\uff0c\u5199\u5165out\u65f6\u8be5gpio\u8bbe\u4e3a\u8f93\u51fa\uff0c\u5199\u5165in\u65f6\u8be5gpio\u8bbe\u4e3a\u8f93\u5165\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"value",children:"value"}),"\n",(0,s.jsx)(n.p,{children:"\u5f53\u8bbe\u7f6edir\u4e3ain\u65f6\uff0ccat value\u8868\u793a\u8f93\u5165\u7684\u503c(0-\u4f4e\uff0c1-\u9ad8)\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5f53\u8bbe\u7f6edir\u4e3aout\u65f6\uff0c\u53ef\u4ee5\u5411value\u4e2decho 1/0\uff0c\u5206\u522b\u8868\u793a\u8f93\u5165\u9ad8\u4f4e\u7535\u5e73\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"edge",children:"edge"}),"\n",(0,s.jsx)(n.p,{children:"\u7528\u6237\u5c42\u8bbe\u7f6e\u4e2d\u65ad\u65f6\uff0cdirection\u9700\u8981\u8bbe\u7f6e\u4e3ain\uff0c\u7136\u540e\u5411edge\u4e2d\u8bbe\u7f6e\u76f8\u5e94\u7684\u503c\u3002"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"edge\u7684\u503c"}),(0,s.jsx)(n.th,{children:"\u542b\u4e49"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"none"}),(0,s.jsx)(n.td,{children:"\u8868\u793a\u5f15\u811a\u4e3a\u8f93\u5165\uff0c\u4e0d\u662f\u4e2d\u65ad\u5f15\u811a"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"rising"}),(0,s.jsx)(n.td,{children:"\u8868\u793a\u5f15\u811a\u4e3a\u4e2d\u65ad\u8f93\u5165\uff0c\u4e0a\u5347\u6cbf\u89e6\u53d1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"falling"}),(0,s.jsx)(n.td,{children:"\u8868\u793a\u5f15\u811a\u4e3a\u4e2d\u65ad\u8f93\u5165\uff0c\u4e0b\u964d\u6cbf\u89e6\u53d1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"both"}),(0,s.jsx)(n.td,{children:"\u8868\u793a\u5f15\u811a\u4e3a\u4e2d\u65ad\u8f93\u5165\uff0c\u8fb9\u6cbf\u89e6\u53d1"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"\u8c03\u8bd5",children:"\u8c03\u8bd5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-{.shell}",children:"cat /sys/kernel/debug/gpio\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u67e5\u8be2\u4e0a\u8ff0\u8282\u70b9\uff0c\u53ef\u4ee5\u83b7\u53d6\u5230\u5f53\u524d\u7cfb\u7edf\u4e2d\u6b63\u5728\u4f7f\u7528\u7684gpio\u548c\u6240\u5904\u7684\u72b6\u6001\uff08in\uff0cout\uff0cIRQ\uff09\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-{.shell}",children:"root@ubuntu:~# cat /sys/kernel/debug/gpio\ngpiochip4: GPIOs 423-438, parent: i2c/3-0076, 3-0076, can sleep:\ngpio-423 (                    |io-ser-reset0       ) out hi\ngpio-424 (                    |io-ser-reset1       ) out hi\ngpio-425 (                    |io-ser-reset2       ) out hi\ngpio-426 (                    |io-ser-reset3       ) out hi\n\ngpiochip3: GPIOs 439-455, parent: platform/360b0000.gpio, 360b0000.gpio:\n\ngpiochip2: GPIOs 456-473, parent: platform/370f5000.gpio, 370f5000.gpio:\n\ngpiochip1: GPIOs 474-479, parent: platform/39500000.gpio, 39500000.gpio:\n\ngpiochip0: GPIOs 480-511, parent: platform/394f0000.gpio, 394f0000.gpio:\ngpio-481 (                    |sysfs               ) out hi ACTIVE LOW\ngpio-491 (                    |sysfs               ) in  hi\ngpio-495 (                    |sysfs               ) in  hi\ngpio-496 (                    |sysfs               ) in  hi\ngpio-498 (                    |sysfs               ) in  hi\ngpio-503 (                    |io-ext-reset        ) out lo\nroot@ubuntu:~#\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u786e\u5b9agpio-index",children:"\u786e\u5b9agpio-index"}),"\n",(0,s.jsx)(n.p,{children:'kernel_index = base + offset\uff0cbase \u901a\u8fc7 "/sys/class/gpio"\n\u6216\u8005"/sys/kernel/debug/gpio" \u83b7\u53d6\uff0coffset\u901a\u8fc7dts\u83b7\u53d6\u3002'}),"\n",(0,s.jsx)(n.p,{children:'\u4ee5pin sensor8_err\u4e3a\u4f8b\uff1a\u901a\u8fc7\u67e5\u770b\ndrobot-s100-pinctrl.dtsi\uff0c\u53ef\u4ee5\u77e5\u9053sensor8_err\u5bf9\u5e94\u7684gpio chip\u662f\nvideo_port0: gpio@360b0000\uff0c\u5bf9\u5e94\u7684offset\u662f 13\u3002\n\u67e5\u770b/sys/kernel/debug/gpio\uff0c\u53ef\u77e5"video_port0:\ngpio@360b0000"\u5bf9\u5e94\u7684base\u662f439 \u5219sensor8_err \u5bf9\u5e94\u7684gpio kernel\nindex\u662f\uff1a439+13 = 452'}),"\n",(0,s.jsx)(n.h3,{id:"\u67e5\u770bdrobot-s100-pinctrldtsi\u83b7\u53d6offset\u548cbase",children:"\u67e5\u770bdrobot-s100-pinctrl.dtsi\uff0c\u83b7\u53d6offset\u548cbase"}),"\n",(0,s.jsx)(n.p,{children:'\u4e0b\u9762\u8bbe\u5907\u6811\u53ef\u77e5sensor8_err\u5bf9\u5e94video_sensor8_err\uff0c\u5bf9\u5e94\u7684gpio\nchip\u662f"video_port0: gpio@360b0000"\u3002\nvideo_gnss_int\u7684offset\u4e3a0\uff0c\u9012\u589e\u8ba1\u6570\uff0c\u5219video_sensor8_err\u7684offset\u4e3a13\u3002'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-{.shell}",children:'pinctrl_video: pinctrl@36090000 {\n   compatible = "drobot,s100-pinctrl";\n   reg = <0x0 0x36090000 0x0 0x1000>,\n         <0x0 0x360a0000 0x0 0x1000>;\n   pctldev-name = "video";\n   status = "okay";\n\n   video_gpio: video_gpio_func {\n      pinmux {\n         function = "video_gpio";\n         pins = "video_gnss_int", "video_peri_rsto",\n                  "video_cam_pint", "video_sd_1v8", "video_sd_bus_pow",\n                  "video_sensor0_err", "video_sensor1_err",\n                  "video_sensor2_err", "video_sensor3_err", "video_sensor4_err",\n                  "video_sensor5_err", "video_sensor6_err",\n                  "video_sensor7_err", "video_sensor8_err",\n                  "video_sensor9_err", "video_sensor10_err", "video_sensor11_err";\n      };\n      pinconf {\n         pins = "video_gnss_int", "video_peri_rsto",\n                  "video_cam_pint", "video_sd_1v8", "video_sd_bus_pow",\n                  "video_sensor0_err", "video_sensor1_err",\n                  "video_sensor2_err", "video_sensor3_err", "video_sensor4_err",\n                  "video_sensor5_err", "video_sensor6_err",\n                  "video_sensor7_err", "video_sensor8_err",\n                  "video_sensor9_err", "video_sensor10_err", "video_sensor11_err";\n         drive-strength = <1>;\n      };\n   };\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:'\u5982\u8fd9\u884c\uff1agpiochip3: GPIOs 439-455, parent: platform/360b0000.gpio,\n360b0000.gpio: "GPIOs 439-455"\u4ee3\u8868base\u662f439'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-{.shell}",children:"cat /sys/kernel/debug/gpio\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-{.shell}",children:"root@ubuntu:~# cat /sys/kernel/debug/gpio\ngpiochip4: GPIOs 423-438, parent: i2c/3-0076, 3-0076, can sleep:\ngpio-423 (                    |io-ser-reset0       ) out hi\ngpio-424 (                    |io-ser-reset1       ) out hi\ngpio-425 (                    |io-ser-reset2       ) out hi\ngpio-426 (                    |io-ser-reset3       ) out hi\n\ngpiochip3: GPIOs 439-455, parent: platform/360b0000.gpio, 360b0000.gpio:\n\ngpiochip2: GPIOs 456-473, parent: platform/370f5000.gpio, 370f5000.gpio:\ngpio-464 (                    |scl                 ) out lo\ngpio-465 (                    |sda                 ) in  lo\ngpio-466 (                    |scl                 ) out lo\ngpio-467 (                    |sda                 ) in  lo\ngpio-468 (                    |scl                 ) out lo\ngpio-469 (                    |sda                 ) in  lo\ngpio-470 (                    |scl                 ) out lo\ngpio-471 (                    |sda                 ) in  lo\ngpio-472 (                    |scl                 ) out lo\ngpio-473 (                    |sda                 ) in  lo\n\ngpiochip1: GPIOs 474-479, parent: platform/39500000.gpio, 39500000.gpio:\n\ngpiochip0: GPIOs 480-511, parent: platform/394f0000.gpio, 394f0000.gpio:\ngpio-495 (                    |scl                 ) out lo\ngpio-496 (                    |sda                 ) in  lo\ngpio-503 (                    |io-ext-reset        ) out lo\n"})})]})}function g(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);