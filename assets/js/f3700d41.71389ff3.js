"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[71314],{28453:(n,e,r)=>{r.d(e,{R:()=>s,x:()=>t});var i=r(96540);const l={},c=i.createContext(l);function s(n){const e=i.useContext(c);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:s(n.components),i.createElement(c.Provider,{value:e},n.children)}},92013:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Advanced_development/mcu_development/S100/mcu_can","title":"CAN\u4f7f\u7528\u6307\u5357","description":"\u57fa\u672c\u6982\u8ff0","source":"@site/docs_s/07_Advanced_development/05_mcu_development/01_S100/09_mcu_can.md","sourceDirName":"07_Advanced_development/05_mcu_development/01_S100","slug":"/Advanced_development/mcu_development/S100/mcu_can","permalink":"/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_can","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1769771560000,"sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"tutorialSidebar","previous":{"title":"IPC\u4f7f\u7528\u6307\u5357","permalink":"/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_ipc"},"next":{"title":"I2C\u4f7f\u7528\u6307\u5357","permalink":"/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_i2c"}}');var l=r(74848),c=r(28453);const s={sidebar_position:9},t="CAN\u4f7f\u7528\u6307\u5357",a={},d=[{value:"\u57fa\u672c\u6982\u8ff0",id:"\u57fa\u672c\u6982\u8ff0",level:2},{value:"\u8f6f\u4ef6\u67b6\u6784",id:"\u8f6f\u4ef6\u67b6\u6784",level:2},{value:"\u786c\u4ef6\u8fde\u63a5\u8bf4\u660e",id:"\u786c\u4ef6\u8fde\u63a5\u8bf4\u660e",level:2},{value:"CAN Filter \u914d\u7f6e",id:"can-filter-\u914d\u7f6e",level:2},{value:"\u8fc7\u6ee4\u5668\u7684\u8bc6\u522b",id:"\u8fc7\u6ee4\u5668\u7684\u8bc6\u522b",level:3},{value:"ONE_ID_FILTER\uff08\u5355ID\u8fc7\u6ee4\u65b9\u5f0f\uff09",id:"one_id_filter\u5355id\u8fc7\u6ee4\u65b9\u5f0f",level:3},{value:"RANGE_ID_FILTER\uff08\u8303\u56f4\u8fc7\u6ee4\u65b9\u5f0f\uff09",id:"range_id_filter\u8303\u56f4\u8fc7\u6ee4\u65b9\u5f0f",level:3},{value:"TWO_ID_FILTER\uff08\u53ccID\u8fc7\u6ee4\u65b9\u5f0f\uff09",id:"two_id_filter\u53ccid\u8fc7\u6ee4\u65b9\u5f0f",level:3},{value:"\u6ce2\u7279\u7387\u914d\u7f6e",id:"\u6ce2\u7279\u7387\u914d\u7f6e",level:2},{value:"\u53d6\u503c\u8303\u56f4\u548c\u516c\u5f0f\u8ba1\u7b97",id:"\u53d6\u503c\u8303\u56f4\u548c\u516c\u5f0f\u8ba1\u7b97",level:3},{value:"\u914d\u7f6e\u4ef2\u88c1\u6bb51M\u6570\u636e\u6bb55M\u5b9e\u4f8b\u8bf4\u660e",id:"\u914d\u7f6e\u4ef2\u88c1\u6bb51m\u6570\u636e\u6bb55m\u5b9e\u4f8b\u8bf4\u660e",level:3},{value:"1. \u57fa\u7840\u53c2\u6570\u786e\u8ba4",id:"1-\u57fa\u7840\u53c2\u6570\u786e\u8ba4",level:4},{value:"2. \u65f6\u95f4\u91cf\u5b50\uff08TQ\uff09\u5206\u914d",id:"2-\u65f6\u95f4\u91cf\u5b50tq\u5206\u914d",level:4},{value:"3. \u5ef6\u8fdf\u8865\u507f\u504f\u79fb\u91cf\uff08Transceiver Delay Compensation Offset\uff09",id:"3-\u5ef6\u8fdf\u8865\u507f\u504f\u79fb\u91cftransceiver-delay-compensation-offset",level:4},{value:"4. \u7ec8\u914d\u7f6e\u53c2\u6570",id:"4-\u7ec8\u914d\u7f6e\u53c2\u6570",level:4},{value:"5. 8M\u7684\u914d\u7f6e\u76f8\u5bf9\u4e8e5M\u8f83\u4e3a\u7279\u6b8a\uff0c\u4f7f\u752860%\u7684\u91c7\u6837",id:"5-8m\u7684\u914d\u7f6e\u76f8\u5bf9\u4e8e5m\u8f83\u4e3a\u7279\u6b8a\u4f7f\u752860\u7684\u91c7\u6837",level:4},{value:"6. \u5c06\u7ed3\u679c\u66f4\u65b0\u5230\u914d\u7f6e\u6587\u4ef6\u4e2d",id:"6-\u5c06\u7ed3\u679c\u66f4\u65b0\u5230\u914d\u7f6e\u6587\u4ef6\u4e2d",level:4},{value:"\u5e94\u7528sample",id:"\u5e94\u7528sample",level:2},{value:"\u4f7f\u7528\u6307\u5357",id:"\u4f7f\u7528\u6307\u5357",level:3},{value:"ACORE\u4fa7\u5b9e\u4f8b\u8bf4\u660e",id:"acore\u4fa7\u5b9e\u4f8b\u8bf4\u660e",level:3},{value:"\u7b80\u5355\u7684can\u6536\u53d1sample",id:"\u7b80\u5355\u7684can\u6536\u53d1sample",level:4},{value:"\u76ee\u5f55\u4ecb\u7ecd",id:"\u76ee\u5f55\u4ecb\u7ecd",level:5},{value:"\u4f7f\u7528\u524d\u63d0",id:"\u4f7f\u7528\u524d\u63d0",level:5},{value:"\u4f7f\u7528\u65b9\u5f0f",id:"\u4f7f\u7528\u65b9\u5f0f",level:5},{value:"\u591a\u901a\u9053\u4f20\u8f93",id:"\u591a\u901a\u9053\u4f20\u8f93",level:4},{value:"\u76ee\u5f55\u4ecb\u7ecd",id:"\u76ee\u5f55\u4ecb\u7ecd-1",level:5},{value:"\u4f9d\u8d56",id:"\u4f9d\u8d56",level:5},{value:"\u901a\u9053\u6620\u5c04\u5173\u7cfb",id:"\u901a\u9053\u6620\u5c04\u5173\u7cfb",level:5},{value:"DEBUG\u5f00\u5173",id:"debug\u5f00\u5173",level:5},{value:"\u53d1\u9001\u7aef",id:"\u53d1\u9001\u7aef",level:5},{value:"\u63a5\u6536\u7aef",id:"\u63a5\u6536\u7aef",level:5},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:5},{value:"\u7f16\u8bd1\u547d\u4ee4",id:"\u7f16\u8bd1\u547d\u4ee4",level:5},{value:"\u547d\u4ee4\u884c\u53c2\u6570",id:"\u547d\u4ee4\u884c\u53c2\u6570",level:5},{value:"\u8fd0\u884c\u547d\u4ee4",id:"\u8fd0\u884c\u547d\u4ee4",level:5},{value:"\u65e5\u5fd7\u5206\u6790",id:"\u65e5\u5fd7\u5206\u6790",level:5},{value:"\u591acan\u7ec4\u7f51\u4f20\u8f93",id:"\u591acan\u7ec4\u7f51\u4f20\u8f93",level:4},{value:"\u5e94\u7528\u5c42\u4fee\u6539can\u6ce2\u7279\u7387\u7b49\u914d\u7f6e",id:"\u5e94\u7528\u5c42\u4fee\u6539can\u6ce2\u7279\u7387\u7b49\u914d\u7f6e",level:4},{value:"\u5e93\u6587\u4ef6\u6253\u5370\u5f00\u5173",id:"\u5e93\u6587\u4ef6\u6253\u5370\u5f00\u5173",level:3},{value:"MCU\u4fa7DEBUG\u5e94\u7528\u8bf4\u660e",id:"mcu\u4fa7debug\u5e94\u7528\u8bf4\u660e",level:3},{value:"\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3",id:"\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3",level:3},{value:"void Can_Init(const Can_ConfigType* Config)",id:"void-can_initconst-can_configtype-config",level:4},{value:"void Can_GetVersionInfo(Std_VersionInfoType* versioninfo)",id:"void-can_getversioninfostd_versioninfotype-versioninfo",level:4},{value:"void Can_DeInit(void)",id:"void-can_deinitvoid",level:4},{value:"Std_ReturnType Can_SetControllerMode(uint8 Controller, Can_ControllerStateType Transition)",id:"std_returntype-can_setcontrollermodeuint8-controller-can_controllerstatetype-transition",level:4},{value:"void Can_DisableControllerInterrupts(uint8 Controller)",id:"void-can_disablecontrollerinterruptsuint8-controller",level:4},{value:"void Can_EnableControllerInterrupts(uint8 Controller)",id:"void-can_enablecontrollerinterruptsuint8-controller",level:4},{value:"Std_ReturnType Can_GetControllerErrorState(uint8 ControllerId, Can_ErrorStateType* ErrorStatePtr)",id:"std_returntype-can_getcontrollererrorstateuint8-controllerid-can_errorstatetype-errorstateptr",level:4},{value:"Std_ReturnType Can_GetControllerMode(uint8 Controller, Can_ControllerStateType* ControllerModePtr)",id:"std_returntype-can_getcontrollermodeuint8-controller-can_controllerstatetype-controllermodeptr",level:4},{value:"Std_ReturnType Can_GetControllerRxErrorCounter(uint8 ControllerId, uint8* RxErrorCounterPtr)",id:"std_returntype-can_getcontrollerrxerrorcounteruint8-controllerid-uint8-rxerrorcounterptr",level:4},{value:"Std_ReturnType Can_GetControllerTxErrorCounter(uint8 ControllerId, uint8* TxErrorCounterPtr)",id:"std_returntype-can_getcontrollertxerrorcounteruint8-controllerid-uint8-txerrorcounterptr",level:4},{value:"Std_ReturnTypeCan_Write(Can_HwHandleType Hth, const Can_PduType* PduInfo)",id:"std_returntypecan_writecan_hwhandletype-hth-const-can_pdutype-pduinfo",level:4},{value:"void Can_MainFunction_Write(Void)",id:"void-can_mainfunction_writevoid",level:4},{value:"void Can_MainFunction_Read(Void)",id:"void-can_mainfunction_readvoid",level:4},{value:"void Can_MainFunction_BusOff(Void)",id:"void-can_mainfunction_busoffvoid",level:4},{value:"void Can_MainFunction_Mode(Void)",id:"void-can_mainfunction_modevoid",level:4}];function o(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"can\u4f7f\u7528\u6307\u5357",children:"CAN\u4f7f\u7528\u6307\u5357"})}),"\n",(0,l.jsx)(e.h2,{id:"\u57fa\u672c\u6982\u8ff0",children:"\u57fa\u672c\u6982\u8ff0"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6700\u5927\u53ef\u4f7f\u7528CAN controller\u6570\u91cf\uff1a10\u3002"}),"\n",(0,l.jsx)(e.li,{children:"CAN\u6700\u9ad8\u4f20\u8f93\u901f\u7387\uff1a8M\u3002(\u53d7\u9650\u4e8etransceiver\u7684\u6ce2\u7279\u7387\u9650\u5236\uff0c\u76ee\u524d\u5b9e\u9a8c\u5ba4\u53ea\u6d4b\u8bd5\u9a8c\u8bc1\u52305M\u6ce2\u7279\u7387\u3002)"}),"\n",(0,l.jsxs)(e.li,{children:["\u4e00\u4e2acontroller\u7684Ram\u5185\u5212\u5206\u7684Block\u4e2a\u6570\uff1a","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CAN0~CAN3\uff1a4 Block (\u53ef\u53d8payload);"}),"\n",(0,l.jsx)(e.li,{children:"CAN4~CAN9\uff1a4 Block (\u53ef\u53d8payload)+ 4 Block(\u56fa\u5b9apayload)\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"\u4e00\u4e2acontroller\u652f\u6301\u7684\u6700\u5927Mailbox\u4e2a\u6570\u4e3a128\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["\u4e00\u4e2acontroller\u652f\u6301\u4e00\u8defRxFIFO\uff0cFIFO\u6df1\u5ea6\u4e3a\uff1a","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CAN0~CAN3\uff1a8 * 64 bytes;"}),"\n",(0,l.jsx)(e.li,{children:"CAN4~CAN9\uff1a32 * 64 bytes\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"\u4e0d\u652f\u6301 TTController\uff0c\u5373\u4e0d\u652f\u6301TTCAN\uff08\u4e00\u79cd\u57fa\u4e8eCAN\u603b\u7ebf\u7684\u9ad8\u5c42\u534f\u8bae\uff09\u3002"}),"\n",(0,l.jsx)(e.li,{children:"CAN\u652f\u6301\u591a\u6838\u4f7f\u7528\uff0c\u53ef\u5c06\u4e0d\u540c\u7684CAN\u63a7\u5236\u5668\u7ed1\u5b9a\u5728\u4e0d\u540c\u7684\u6838\u5fc3\u4e0a\uff0c\u4f46\u4e0d\u652f\u6301\u591a\u4e2a\u6838\u5fc3\u540c\u65f6\u4f7f\u7528\u540c\u4e00\u4e2aCAN\u63a7\u5236\u5668\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u8f6f\u4ef6\u67b6\u6784",children:"\u8f6f\u4ef6\u67b6\u6784"}),"\n",(0,l.jsx)(e.p,{children:"S100\u82af\u7247\u7684CAN\u63a7\u5236\u5668\u4f4d\u4e8eMCU\u57df\uff0c\u8d1f\u8d23CAN\u6570\u636e\u6536\u53d1\u3002\u7531\u4e8e\u611f\u77e5\u7b49\u5e94\u7528\u4f4d\u4e8eAcore\uff0c\u56e0\u6b64\u90e8\u5206CAN\u6570\u636e\u9700\u8981\u901a\u8fc7IPC\u6838\u95f4\u901a\u4fe1\u673a\u5236\u8f6c\u53d1\u5230Acore\u3002\u67b6\u6784\u4fdd\u8bc1\u4f20\u8f93\u53ef\u9760\u6027\uff0c\u8f6c\u53d1\u673a\u5236\u5b9e\u73b0\u6570\u636e\u6b63\u786e\u6027\u68c0\u6d4b\u3001\u4e22\u5305\u68c0\u6d4b\u548c\u4f20\u8f93\u8d85\u65f6\u68c0\u6d4b\u7b49\u673a\u5236\u3002\u6b64\u5916\uff0c\u8fd8\u9700\u8981\u89c4\u907fMCU\u4fa7\u9ad8\u9891\u8f6c\u53d1\u5c0f\u6570\u636e\u5757\u5bfc\u81f4CPU\u5360\u7528\u7387\u8fc7\u9ad8\uff0c\u9020\u6210MCU\u5b9e\u65f6\u6027\u964d\u4f4e\u7b49\u6027\u80fd\u95ee\u9898\u3002"}),"\n",(0,l.jsx)(e.p,{children:"S100 CAN\u8f6c\u53d1\u65b9\u6848\u7684\u6838\u5fc3\u6d41\u7a0b\u5982\u4e0b\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9996\u5148\u901a\u8fc7MCU\u4fa7CAN2IPC\u6a21\u5757\u5c06CAN\u901a\u9053\u6620\u5c04\u5230\u5bf9\u5e94IPC\u901a\u9053\uff0c\u7136\u540e\u901a\u8fc7Acore\u4fa7CANHAL\u6a21\u5757\u5c06IPC\u901a\u9053\u53cd\u6620\u5c04\u4e3a\u865a\u62dfCAN\u8bbe\u5907\u901a\u9053\u3002\u6700\u540e\u7528\u6237\u901a\u8fc7CANHAL\u63d0\u4f9b\u7684API\u63a5\u53e3\u83b7\u53d6\u865a\u62dfCAN\u8bbe\u5907\u4e2d\u7684\u6570\u636e\u3002\u5176\u4e2d\uff0cCAN2IPC\u6a21\u5757\u4e3aMCU\u4fa7\u670d\u52a1\uff0cCANHAL\u6a21\u5757\u4e3aAcore\u4fa7\u63d0\u4f9b\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u52a8\u6001\u5e93\u3002"}),"\n",(0,l.jsx)(e.li,{children:"CAN2IPC\u6a21\u5757\u5468\u671f\u6027\u91c7\u96c6MCU\u4fa7CAN\u6570\u636e\uff0c\u6309\u7167\u6307\u5b9a\u4f20\u8f93\u534f\u8bae\u8fdb\u884c\u6253\u5305\uff0c\u7136\u540e\u901a\u8fc7IPC\u6838\u95f4\u901a\u4fe1\u8f6c\u53d1\u5230Acore\u3002Ipc instance 0\u4e2d\u7684channel0~channel7\u9ed8\u8ba4\u5206\u914d\u7ed9CAN\u8f6c\u53d1\u4f7f\u7528\u3002"}),"\n",(0,l.jsx)(e.li,{children:"CANHAL\u6a21\u5757\u83b7\u53d6\u6765\u81eaMCU\u4fa7\u7684IPC\u6570\u636e\uff0c\u6309\u7167\u6307\u5b9a\u7684\u4f20\u8f93\u534f\u8bae\u89e3\u6790\u6570\u636e\uff0c\u5e76\u652f\u6301\u4e1a\u52a1\u8f6f\u4ef6\u901a\u8fc7API\u83b7\u53d6\u539f\u59cbCAN\u5e27\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/mcu_can.png",alt:"Acore\u4e0eMCU\u4e4b\u95f4\u900f\u4f20CAN\u6570\u636e\u67b6\u6784\u56fe"})}),"\n",(0,l.jsx)(e.p,{children:"\u6570\u636e\u6d41\u5982\u4e0a\u56fe\u6240\u793a\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5916\u8bbe\u6570\u636e\u901a\u8fc7CAN\u7684PHY\u548c\u63a7\u5236\u5668\u5668\u4ef6\u88abMCU\u57dfCAN\u9a71\u52a8\u63a5\u6536\u540e\uff0cCAN\u9a71\u52a8\u5c06\u6570\u636e\u4e0a\u62a5\u5e76\u7f13\u5b58\u5728hobot CANIF\u6a21\u5757\u3002"}),"\n",(0,l.jsx)(e.li,{children:"CAN2IPC Service\u5468\u671f\u6027\u4eceCANIF\u6a21\u5757\u53d6\u51faCAN\u5e27\uff0c\u6309\u7167\u53ef\u9760\u4f20\u8f93\u534f\u8bae\u8fdb\u884c\u6253\u5305\uff0c\u7136\u540e\u901a\u8fc7IPC\u6838\u95f4\u901a\u4fe1\u673a\u5236\u8f6c\u53d1\u7ed9Acore\u3002"}),"\n",(0,l.jsx)(e.li,{children:"CANHAL\u6a21\u5757\u83b7\u53d6\u6765\u81eaMCU\u4fa7\u7684IPC\u6570\u636e\uff0c\u6309\u7167\u6307\u5b9a\u7684\u4f20\u8f93\u534f\u8bae\u89e3\u6790\u6570\u636e\uff0cAcore \u5e94\u7528\u7a0b\u5e8f\u901a\u8fc7CANHAL Lib\u5e93\u63d0\u4f9b\u7684API\u83b7\u53d6CAN\u5e27\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u65b9\u6848\u7279\u6027\u8bf4\u660e\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u6570\u636e\u900f\u4f20\u6b63\u786e\u6027\u6821\u9a8c\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u6570\u636e\u900f\u4f20\u4e22\u5305\u68c0\u6d4b\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u4f20\u8f93\u8d85\u65f6\u68c0\u6d4b\u3002MCU\u4fa7CAN2IPC\u8f6c\u53d1\u6570\u636e\u65f6\u5c06\u6570\u636e\u5305\u6253\u4e0aMCU\u4fa7\u7684\u65f6\u95f4\u6233\uff0cAcore CANHAL\u63a5\u6536\u5230\u6570\u636e\u540e\u4f1a\u8bfb\u53d6Acore\u7684\u65f6\u95f4\u6233\uff0c\u5982\u679c\u4f20\u8f93\u8d85\u65f6\u4f1a\u62a5\u8b66\u3002\u6ce8\u610f\uff0c\u9700\u8981\u63d0\u524d\u542f\u52a8\u65f6\u95f4\u540c\u6b65\u5b8c\u6210MCU RTC\u65f6\u95f4\u548cAcore \u7f51\u5361phc0\u7684\u65f6\u95f4\u540c\u6b65\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u4e2aCAN\u901a\u9053\u5e76\u884c\u4f20\u8f93\u3002MCU\u4fa7\u591a\u4e2aCAN\u63a7\u5236\u5668\u7684\u6570\u636e\u53ef\u540c\u65f6\u88ab\u8f6c\u53d1\u7ed9Acore\uff0cAcore\u5e94\u7528\u7a0b\u5e8f\u901a\u8fc7CANHAL\u4ece\u4e0d\u540c\u901a\u9053\u53f7\u8bfb\u51faCAN\u6570\u636e\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u7531\u4e8eCANHAL\u5e95\u5c42\u901a\u8fc7ipc\u6838\u95f4\u901a\u4fe1\u8fdb\u884c\u4f20\u8f93\uff0c\u800cipc\u76ee\u524d\u4e0d\u652f\u6301\u591a\u4e2a\u8fdb\u7a0b\u6216\u8005\u7ebf\u7a0b\u8bfb\u5199\u540c\u4e00\u4e2a\u901a\u9053\uff0c\u56e0\u6b64CANHAL\u4e5f\u4e0d\u652f\u6301\u8be5\u7279\u6027\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u786c\u4ef6\u8fde\u63a5\u8bf4\u660e",children:"\u786c\u4ef6\u8fde\u63a5\u8bf4\u660e"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["CAN\u7269\u7406\u5c42\u7684\u5f62\u5f0f\u4e3b\u8981\u5206\u4e3a\u95ed\u73af\u603b\u7ebf\u53ca\u5f00\u73af\u603b\u7ebf\u7f51\u7edc\u4e24\u79cd\uff0c\u4e00\u4e2a\u9002\u5408\u4e8e\u9ad8\u901f\u901a\u8baf\uff0c\u4e00\u4e2a\u9002\u5408\u4e8e\u8fdc\u8ddd\u79bb\u901a\u8baf\uff1b",(0,l.jsx)(e.strong,{children:"S100\u7684sample\u9ed8\u8ba4\u91c7\u7528\u95ed\u73af\u603b\u7ebf\u7f51\u7edc\u67b6\u6784"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"CAN\u603b\u7ebf\u7684\u5f15\u811a\u4f4d\u4e8eS100\u7684MCU\u6269\u5c55\u677f\u4e0a\uff0c\u5f15\u51fa\u4e865\u8defCAN\u63a5\u53e3\uff0c\u8fde\u63a5\u5668\u5206\u522b\u5bf9\u5e94\u4e865\u4e2a\u7eff\u8272\u7684\u87ba\u4e1d\u5f0f\u76843 PIN\u8fde\u63a5\u5668\u30021 PIN\uff08\u4e09\u89d2\u6807\u5fd7\uff09\u4e3aGND\uff0c\u4e2d\u95f4PIN\u4e3aCAN_L\uff0c\u5269\u4e0b\u7684\u4e3aCAN_H\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/mcu_can_phy.png",alt:"MCU CAN\u7269\u7406\u56fe\u793a"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"MCU\u5c0f\u677f\u901a\u8fc72pin\u8df3\u5e3d\u7684\u5f62\u5f0f\u6765\u9009\u62e9\u662f\u5426\u5728CAN_H\u548cCAN_L\u4e4b\u95f4\u63a5\u5165120\u6b27\u59c6\u7535\u963b\uff1b\u5f53\u63d2\u5165\u8df3\u5e3d\u65f6\uff0c\u63a5\u5165\u7535\u963b\uff0c\u9002\u7528\u4e8e\u95ed\u73af\u7f51\u7edc\u6240\u9700\u7684\u7ec8\u7aef\u5339\u914d\u963b\u6297\u200c\uff1b\u79fb\u9664\u8df3\u5e3d\u5219\u65ad\u5f00\u7ec8\u7aef\u7535\u963b\uff0c\u9002\u7528\u4e8e\u5f00\u73af\u7f51\u7edc\u6216\u4e2d\u7ee7\u8282\u70b9\u573a\u666f\u200c\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/mcu_can_sche.png",alt:"MCU CAN\u7b80\u7b14\u56fe\u793a"})}),"\n",(0,l.jsx)(e.p,{children:"CAN\u95ed\u73af\u7f51\u7edc\u4f7f\u7528\u4e24\u4e2a120\u6b27\u59c6\u7535\u963b\u662fCAN\u603b\u7ebf\u7684\u6807\u51c6\u914d\u7f6e\uff0c\u4ee5\u4e0b\u4ee5S100\u4e3e\u4f8b\uff0c\u5982\u4f55\u6b63\u786e\u63a5\u5165\u7535\u963b\uff1a"}),"\n",(0,l.jsx)(e.admonition,{title:"\u63d0\u793a",type:"info",children:(0,l.jsxs)(e.p,{children:["\u6574\u4f53\u800c\u8a00\uff0c\u5f00\u73af\u7f51\u7edc\u914d\u7f6e\u4e0d\u9700\u8981\u63a5\u5165120\u6b27\u59c6\u7535\u963b\uff0c\u800c\u95ed\u73af\u7f51\u7edc\u914d\u7f6e\u603b\u5171\u9700\u8981\u63d2\u5165",(0,l.jsx)(e.strong,{children:"\u4e24\u4e2a"}),"120\u6b27\u59c6\u7535\u963b\uff1b"]})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5728\u4f7f\u7528\u5f00\u73af\u7f51\u7edc\u65f6\uff0c\u786e\u4fddCAN_H\u4e0eCAN_L\u7ebf\u8def\u6b63\u786e\u8fde\u63a5\uff0c\u6240\u7528\u5230\u7684CAN\u4e0d\u8981\u63d2\u5165\u8df3\u7ebf\u5e3d(\u5728\u7f51\u7edc\u4e2d\u4e0d\u63a5\u5165120\u6b27\u59c6\u7535\u963b)\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u82e5\u5c06S100\u7684CAN5\u548cCAN6\u8fde\u63a5\u7ec4\u6210\u53cc\u8282\u70b9\u5185\u90e8\u95ed\u73af\u7f51\u7edc\uff0c\u786e\u4fddCAN_H\u4e0eCAN_L\u7ebf\u8def\u6b63\u786e\u8fde\u63a5\uff0c\u8fd8\u9700\u8981\u5728CAN5\u548cCAN6\u63a5\u7ebf\u7aef\u5b50\u540e\u9762\u7684\u63d2\u9488\u63d2\u5165\u8df3\u5e3d(\u5728\u7f51\u7edc\u4e2d\u63d2\u5165\u4e24\u4e2a120\u6b27\u59c6\u7535\u963b)\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u82e5\u5c06S100\u7684CAN5~CAN9\u8fde\u63a5\u7ec4\u6210\u591a\u8282\u70b9\u5185\u90e8\u95ed\u73af\u7f51\u7edc\uff0c\u786e\u4fddCAN_H\u4e0eCAN_L\u7ebf\u8def\u6b63\u786e\u8fde\u63a5\uff0c\u8fd8\u9700\u8981\u63d2\u5165\u4e24\u4e2a\u8df3\u7ebf\u5e3d\uff0c\u4efb\u610f\u9009\u62e9\u4e24\u4e2a\uff0c\u4e25\u7981\u63d2\u5165\u8d85\u8fc72\u4e2a\u8df3\u7ebf\u5e3d\uff0c\u4ee5\u514d\u51fa\u73b0\u4e0d\u53ef\u9884\u6d4b\u7684\u95ee\u9898\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u82e5\u5c06S100\u7684CAN5~CAN9\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u63a7\u5236\u5668\u548c\u5176\u5b83CAN\u8bbe\u5907\u7ec4\u6210\u5916\u90e8\u95ed\u73af\u7f51\u7edc\uff0c\u786e\u4fddCAN_H\u4e0eCAN_L\u7ebf\u8def\u6b63\u786e\u8fde\u63a5\u5916\uff0c\u8fd8\u9700\u8981\u5728RDK\u7684CAN\u63a7\u5236\u5668\u7684\u63a5\u7ebf\u7aef\u5b50\u540e\u9762\u7684\u63d2\u9488\u63d2\u5165\u8df3\u5e3d\uff0c\u5e76\u5728\u7f51\u7edc\u4e2d\u5176\u5b83\u8bbe\u5907\u7aef\u63a5\u5165\u4e00\u4e2a120\u03a9\u7535\u963b\uff1b"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"can-filter-\u914d\u7f6e",children:"CAN Filter \u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u6807\u51c6\u5e27\u7684filter\u6700\u591a\u53ef\u914d\u7f6e128\u4e2a\uff0c\u6269\u5c55\u5e27\u7684filter\u6700\u591a\u53ef\u914d\u7f6e64\u4e2a\uff0c\u53ef\u9009\u62e9\u7684filter\u7c7b\u578b\u5982\u4e0b\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"ONE_ID_FILTER\uff1a\u6307\u5b9aID\u5e76\u53ef\u914d\u7f6eMASK\u6765\u5ffd\u7565ID\u4e2d\u7684\u54ea\u4e9bbit\u8fdb\u884c\u8fc7\u6ee4\uff0c"}),"\n",(0,l.jsx)(e.li,{children:"RANGE_ID_FILTER\uff1a\u6309\u7167ID\u8303\u56f4\u8fdb\u884c\u8fc7\u6ee4\uff0c"}),"\n",(0,l.jsx)(e.li,{children:"TWO_ID_FILTER\uff1a\u6307\u5b9a\u4e24\u4e2aID\u8fdb\u884c\u8fc7\u6ee4\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u8fc7\u6ee4\u5668\u7684\u8bc6\u522b",children:"\u8fc7\u6ee4\u5668\u7684\u8bc6\u522b"}),"\n",(0,l.jsx)(e.p,{children:"\u8fc7\u6ee4\u5668\u7c7b\u578b\u901a\u8fc7\u68c0\u67e5u32HwFilterCode\u7684\u6700\u9ad82\u4f4d\u6765\u786e\u5b9a\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0b00: ONE_ID_FILTER"}),"\n",(0,l.jsx)(e.li,{children:"0b01: RANGE_ID_FILTER"}),"\n",(0,l.jsx)(e.li,{children:"0b10: TWO_ID_FILTER"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"/**\n * @struct Can_HwFilterType\n * @brief Can Hardware Filter\n * @NO{S01E03C01}\n */\ntypedef struct Can_HwFilterType\n{\n    const uint32 u32HwFilterCode;   /**< @brief Specifies (together with the filter mask) the identifiers range that passes the hardware filter. */\n    const uint32 u32HwFilterMask;   /**< @brief Describes a mask for hardware-based filtering of CAN identifiers. */\n}Can_HwFilterType;\n\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u914d\u7f6e\u4e3e\u4f8b\uff1a","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8fd9\u662fCAN 7 \u7684\u8fc7\u6ee4\u5668\u914d\u7f6e\uff0c\u62e5\u6709\u4e24\u4e2a\u8fc7\u6ee4\u5668"}),"\n",(0,l.jsx)(e.li,{children:"\u8fc7\u6ee4\u56680\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u9ad82\u4f4d\u4e3a01\uff0c\u5c5e\u4e8e\u8303\u56f4\u8fc7\u6ee4\u65b9\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"\u6269\u5c55\u5e27\u548c\u6807\u51c6\u5e27\u7684\u8fc7\u6ee4\u76f8\u4e92\u72ec\u7acb\uff0c\u4e92\u4e0d\u5f71\u54cd"}),"\n",(0,l.jsx)(e.li,{children:'\u6807\u51c6\u5e27\u7684\u6240\u6709\u8fc7\u6ee4\u5668\uff0c\u5982\u4e0b\u9762\u7684\u4f8b\u5b50\u8fc7\u6ee4\u56680\u548c\u8fc7\u6ee41\u4e3a"\u6216"\u5173\u7cfb\uff0c\u5373\u5982\u679c\u81f3\u5c11\u6709\u4e00\u4e2a\u8fc7\u6ee4\u5143\u4ef6\u6ee1\u8db3\u5339\u914d\u6807\u51c6\uff0c\u5219CAN\u6d88\u606f\u5185\u5bb9\u5c06\u88ab\u4f20\u8f93\u5230\u589e\u5f3a\u578bRX FIFO\u5b58\u50a8\u5668'}),"\n",(0,l.jsx)(e.li,{children:'\u540c\u7406\uff0c\u6269\u5c55\u5e27\u7684\u6240\u6709\u8fc7\u6ee4\u5668\uff0c\u5982\u4e0b\u9762\u7684\u4f8b\u5b50\u8fc7\u6ee4\u56682\u548c\u8fc7\u6ee43\u4e3a"\u6216"\u5173\u7cfb\uff0c\u5373\u5982\u679c\u81f3\u5c11\u6709\u4e00\u4e2a\u8fc7\u6ee4\u5143\u4ef6\u6ee1\u8db3\u5339\u914d\u6807\u51c6\uff0c\u5219CAN\u6d88\u606f\u5185\u5bb9\u5c06\u88ab\u4f20\u8f93\u5230\u589e\u5f3a\u578bRX FIFO\u5b58\u50a8\u5668'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"// Config/McalCdd/gen_s100_sip_B_mcu1/Can/src/Can_PBcfg.c\nstatic const Can_HwFilterType Can_aHwFilter_Object7[4U]=\n{\n    { /* Standard frame configuration */\n        (uint32)0x400007ffU,    // \u6807\u51c6\u5e27\u914d\u7f6e\uff1a\u63a5\u6536id\u4e3a0x0~0x7ff\u7684\u6d88\u606f\n        (uint32)0x00000000U\n    },\n    { /* Standard frame configuration */\n        (uint32)0x400007ffU,   // \u6807\u51c6\u5e27\u914d\u7f6e\uff1a\u63a5\u6536id\u4e3a0x600~0x7ff\u7684\u6d88\u606f\n        (uint32)0x00000600U\n    },\n    { /* Extended frame configuration */\n        (uint32)0x5fffffffU,   // \u6269\u5c55\u5e27\u914d\u7f6e\uff1a\u63a5\u6536id\u4e3a0x0~0x1fffffff\u7684\u6d88\u606f\n        (uint32)0x00000000U\n    },\n    { /* Extended frame configuration */\n        (uint32)0x5fffffffU,   // \u6269\u5c55\u5e27\u914d\u7f6e\uff1a\u63a5\u6536id\u4e3a0x600~0x1fffffff\u7684\u6d88\u606f\n        (uint32)0x00000600U\n    }\n};\n"})}),"\n",(0,l.jsx)(e.h3,{id:"one_id_filter\u5355id\u8fc7\u6ee4\u65b9\u5f0f",children:"ONE_ID_FILTER\uff08\u5355ID\u8fc7\u6ee4\u65b9\u5f0f\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u662f\u6700\u5e38\u89c1\u7684\u8fc7\u6ee4\u5668\u7c7b\u578b\uff0c\u4f7f\u7528\u8fc7\u6ee4\u5668\u4ee3\u7801\u548c\u63a9\u7801\u8fdb\u884c\u8fc7\u6ee4,\u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"if ((Received_ID & Filter_Mask) == (Filter_Code & Filter_Mask))\n    // \u63a5\u6536\u8be5\u6d88\u606f\nelse\n    // \u4e22\u5f03\u8be5\u6d88\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4ee5\u6807\u51c6\u5e27\u8fc7\u6ee4\u56680\u914d\u7f6e\u4e3a\u4f8b\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"// Config/McalCdd/gen_s100_sip_B_mcu1/Can/src/Can_PBcfg.c\nstatic const Can_HwFilterType Can_aHwFilter_Object7[4U]=\n{\n    { /* Standard frame configuration */\n        (uint32)0x00000400U,  // \u53ea\u63a5\u6536id = 0x400&0x7ff = 0x400 \u6d88\u606f\n        (uint32)0x000007ffU\n    },\n    {  /* Standard frame configuration */\n        (uint32)0x400007ffU,  // \u8303\u56f4\u8fc7\u6ee4\u65b9\u5f0f\uff0c\u652f\u6301\u6df7\u7528\n        (uint32)0x00000600U\n    }\n    { /* Extended frame configuration */\n        (uint32)0x5fffffffU,   // \u6269\u5c55\u5e27\u914d\u7f6e\uff1a\u63a5\u6536id\u4e3a0x0~0x1fffffff\u7684\u6d88\u606f\n        (uint32)0x00000000U\n    },\n    { /* Extended frame configuration */\n        (uint32)0x5fffffffU,   // \u6269\u5c55\u5e27\u914d\u7f6e\uff1a\u63a5\u6536id\u4e3a0x600~0x1fffffff\u7684\u6d88\u606f\n        (uint32)0x00000600U\n    }\n};\n"})}),"\n",(0,l.jsx)(e.h3,{id:"range_id_filter\u8303\u56f4\u8fc7\u6ee4\u65b9\u5f0f",children:"RANGE_ID_FILTER\uff08\u8303\u56f4\u8fc7\u6ee4\u65b9\u5f0f\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528\u8303\u56f4\u8fc7\u6ee4\u903b\u8f91\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"if (id1 <= Received_ID <= id2)\n    // \u63a5\u6536\u8be5\u6d88\u606f\nelse\n    // \u4e22\u5f03\u8be5\u6d88\u606f\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u4e5f\u662fS100 MCU\u9ed8\u8ba4\u7684\u8fc7\u6ee4\u65b9\u5f0f\uff0c\u4e5f\u662f\u6700\u5e38\u7528\u7684\u8fc7\u6ee4\u65b9\u5f0f;\u4e3e\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"// Config/McalCdd/gen_s100_sip_B_mcu1/Can/src/Can_PBcfg.c\nstatic const Can_HwFilterType Can_aHwFilter_Object7[4U]=\n{\n    { /* Standard frame configuration */\n        (uint32)0x00000400U,  // \u53ea\u63a5\u6536id = 0x400&0x7ff = 0x400 \u6d88\u606f\n        (uint32)0x000007ffU\n    },\n    {  /* Standard frame configuration */\n        (uint32)0x400007ffU,  // \u8303\u56f4\u8fc7\u6ee4\u65b9\u5f0f\uff0c\u652f\u6301\u6df7\u7528\n        (uint32)0x00000600U\n    }\n    { /* Extended frame configuration */\n        (uint32)0x5fffffffU,   // \u6269\u5c55\u5e27\u914d\u7f6e\uff1a\u63a5\u6536id\u4e3a0x0~0x1fffffff\u7684\u6d88\u606f\n        (uint32)0x00000000U\n    },\n    { /* Extended frame configuration */\n        (uint32)0x5fffffffU,   // \u6269\u5c55\u5e27\u914d\u7f6e\uff1a\u63a5\u6536id\u4e3a0x600~0x1fffffff\u7684\u6d88\u606f\n        (uint32)0x00000600U\n    }\n};\n"})}),"\n",(0,l.jsx)(e.h3,{id:"two_id_filter\u53ccid\u8fc7\u6ee4\u65b9\u5f0f",children:"TWO_ID_FILTER\uff08\u53ccID\u8fc7\u6ee4\u65b9\u5f0f\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u79cd\u7c7b\u578b\u5141\u8bb8\u6307\u5b9a\u4e24\u4e2a\u72ec\u7acb\u7684ID\u8fdb\u884c\u5339\u914d\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"id1: \u7b2c\u4e00\u4e2a\u5339\u914dID"}),"\n",(0,l.jsx)(e.li,{children:"id2: \u7b2c\u4e8c\u4e2a\u5339\u914dID"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"if (Received_ID == id1 || Received_ID == id2)\n    // \u63a5\u6536\u8be5\u6d88\u606f\nelse\n    // \u4e22\u5f03\u8be5\u6d88\u606f\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4ee5\u6807\u51c6\u5e27\u8fc7\u6ee4\u56680\u914d\u7f6e\u4e3a\u4f8b\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"// Config/McalCdd/gen_s100_sip_B_mcu1/Can/src/Can_PBcfg.c\nstatic const Can_HwFilterType Can_aHwFilter_Object7[4U]=\n{\n    { /* Standard frame configuration */\n        (uint32)0x80000404U,// \u53ea\u63a5\u6536id\u4e3a404\u7684\u6d88\u606f\n        (uint32)0x00000303U // \u53ea\u63a5\u6536id\u4e3a303\u7684\u6d88\u606f\n    },\n    { /* Standard frame configuration */\n        (uint32)0x400007ffU,  // \u8303\u56f4\u8fc7\u6ee4\u65b9\u5f0f\uff0c\u652f\u6301\u6df7\u7528\n        (uint32)0x00000600U\n    }\n    { /* Extended frame configuration */\n        (uint32)0x5fffffffU,   // \u6269\u5c55\u5e27\u914d\u7f6e\uff1a\u63a5\u6536id\u4e3a0x0~0x1fffffff\u7684\u6d88\u606f\n        (uint32)0x00000000U\n    },\n    { /* Extended frame configuration */\n        (uint32)0x5fffffffU,   // \u6269\u5c55\u5e27\u914d\u7f6e\uff1a\u63a5\u6536id\u4e3a0x600~0x1fffffff\u7684\u6d88\u606f\n        (uint32)0x00000600U\n    }\n};\n"})}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"RDK S100\u8f6f\u786c\u4ef6\u652f\u6301\u6536\u53d1\u6269\u5c55\u5e27\u548c\u6807\u51c6\u5e27\uff0c\u800c\u4e0d\u9700\u8981\u4fee\u6539\u914d\u7f6e"}),"\n",(0,l.jsx)(e.li,{children:"RDK S100\u8f6f\u786c\u4ef6\u652f\u6301\u5bf9\u6269\u5c55\u5e27\u548c\u6807\u51c6\u5e27\u5206\u522b\u8fc7\u6ee4"}),"\n",(0,l.jsx)(e.li,{children:"\u6ce8\u610fid\u7684\u957f\u5ea6\u914d\u7f6e\uff0c\u8d85\u51fa\u89c4\u5b9a\u957f\u5ea6\u5c06\u53d1\u751f\u622a\u65ad\uff0c\u6269\u5c55\u5e27\u7684id\u957f\u5ea6\u6700\u9ad8\u4e3a29\u4f4d\uff0c\u5373\u6700\u5927\u4e3a0x1FFFFFFF\uff0c\u6807\u51c6\u5e27\u7684id\u957f\u5ea6\u6700\u9ad8\u4e3a11\u4f4d\uff0c\u5373\u6700\u5927\u4e3a0x7FF"}),"\n"]})}),"\n",(0,l.jsx)(e.h2,{id:"\u6ce2\u7279\u7387\u914d\u7f6e",children:"\u6ce2\u7279\u7387\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"CAN\u7684\u6807\u79f0\u4f4d\u65f6\uff08Nominal bit timing\uff09\u53ef\u4ee5\u5206\u4e3a\u56db\u4e2a\u6bb5\uff1a"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u540c\u6b65\u6bb5(sync_seg)\u200c\uff1a\u7528\u4e8e\u8282\u70b9\u95f4\u7684\u65f6\u949f\u540c\u6b65\uff0c\u6240\u6709\u8282\u70b9\u5728\u6b64\u6bb5\u5185\u68c0\u6d4b\u4fe1\u53f7\u8fb9\u6cbf\u3002\u5176\u957f\u5ea6\u56fa\u5b9a\u4e3a1\u4e2a\u65f6\u95f4\u5355\u4f4d(TQ)"}),"\n",(0,l.jsx)(e.li,{children:"\u4f20\u64ad\u6bb5(prop_seg)\u200c\uff1a\u8865\u507f\u4fe1\u53f7\u5728\u7269\u7406\u7ebf\u8def\u4e0a\u7684\u4f20\u64ad\u5ef6\u8fdf\u3002\u5176\u957f\u5ea6\u53ef\u8c03\u6574\uff0c\u7528\u4e8e\u786e\u4fdd\u4fe1\u53f7\u5728\u7269\u7406\u4ecb\u8d28\u4e0a\u7684\u4f20\u8f93\u65f6\u95f4"}),"\n",(0,l.jsx)(e.li,{children:"\u76f8\u4f4d\u7f13\u51b2\u6bb51(phase_seg1)\u200c\uff1a\u7528\u4e8e\u8c03\u6574\u76f8\u4f4d\u8bef\u5dee\uff0c\u786e\u4fdd\u91c7\u6837\u70b9\u7684\u51c6\u786e\u6027\uff0c\u53ef\u4ee5\u6269\u5c55\u91cd\u540c\u6b65"}),"\n",(0,l.jsx)(e.li,{children:"\u76f8\u4f4d\u7f13\u51b2\u6bb52(phase_seg2)\u200c\uff1a\u540c\u6837\u7528\u4e8e\u8c03\u6574\u76f8\u4f4d\u8bef\u5dee\uff0c\u4f46\u53ef\u4ee5\u7f29\u77ed\n\u8fd9\u4e9b\u6bb5\u7684\u603b\u548c\u51b3\u5b9a\u4e86CAN\u7684\u603b\u4f4d\u65f6\u95f4\uff0c\u901a\u8fc7\u8c03\u6574\u8fd9\u4e9b\u6bb5\u7684\u957f\u5ea6\uff0c\u53ef\u4ee5\u914d\u7f6e\u4e0d\u540c\u7684\u6ce2\u7279\u7387\u3002\n\u6b64\u5916\u8fd8\u6709\u4ee5\u4e0b\u51e0\u4e2a\u91cd\u8981\u6982\u5ff5\uff1a"}),"\n",(0,l.jsx)(e.li,{children:"\u540c\u6b65\u8df3\u8f6c\u5bbd\u5ea6(SJW\uff0csynchronization jump width)\uff1aCAN \u603b\u7ebf\u540c\u6b65\u673a\u5236\u4e2d\u5141\u8bb8\u8c03\u6574\u76f8\u4f4d\u7f13\u51b2\u6bb5\u7684\u6700\u5927\u65f6\u95f4\u91cf\uff0c\u5728 \u786c\u540c\u6b65 \u548c \u91cd\u540c\u6b65 \u8fc7\u7a0b\u4e2d\u8865\u507f\u8282\u70b9\u95f4\u7684\u65f6\u949f\u504f\u5dee\uff0c\u786e\u4fdd\u91c7\u6837\u70b9\u5bf9\u9f50\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5ef6\u8fdf\u8865\u507f\u504f\u79fb\u91cf(Transceiver Delay Compensation Offset)\uff1a\u4ec5 CAN FD \u652f\u6301\uff0c\u7528\u4e8e\u89e3\u51b3\u6570\u636e\u6bb5\u9ad8\u901f\u4f20\u8f93\u65f6\u7684\u7269\u7406\u5c42\u65f6\u5e8f\u504f\u79fb\u7528\u4e8e\u8865\u507f CAN FD \u6a21\u5f0f\u4e0b \u6536\u53d1\u5668\u73af\u8def\u5ef6\u8fdf \u548c \u4fe1\u53f7\u4f20\u64ad\u65f6\u95f4 \u7684\u56fa\u5b9a\u4fee\u6b63\u503c"}),"\n",(0,l.jsx)(e.li,{children:"\u91c7\u6837\u70b9\uff1aCAN\u63a7\u5236\u5668\u5728\u4f4d\u65f6\u95f4\u5185\u5bf9\u603b\u7ebf\u7535\u5e73\u8fdb\u884c\u91c7\u6837\u7684\u7cbe\u786e\u65f6\u523b\uff0c\u7528\u4e8e\u5224\u5b9a\u4f4d\u7684\u903b\u8f91\u503c\uff08\u663e\u60270\u6216\u9690\u60271\uff09"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u53d6\u503c\u8303\u56f4\u548c\u516c\u5f0f\u8ba1\u7b97",children:"\u53d6\u503c\u8303\u56f4\u548c\u516c\u5f0f\u8ba1\u7b97"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u91c7\u6837\u70b9\u8ba1\u7b97\uff1a\uff08sync_seg + prop_seg + phase_seg1\uff09/\uff08sync_seg + prop_seg + phase_seg1 + phase_seg2\uff09\xd7100%"}),"\n",(0,l.jsx)(e.li,{children:"\u540c\u6b65\u6bb5\u56fa\u5b9a\u4e00\u4e2atq"}),"\n",(0,l.jsx)(e.li,{children:"prop_seg + phase_seg1>phase_seg2"}),"\n",(0,l.jsx)(e.li,{children:"SJW \u2264 min(Phase_Seg1, Phase_Seg2)"}),"\n",(0,l.jsx)(e.li,{children:"\u5f53\u914d\u7f6e5M\u53ca\u4ee5\u4e0a\u6ce2\u7279\u7387\u65f6\uff0c\u9700\u914d\u7f6e\u8865\u507f\u53c2\u6570\uff0c\u8865\u507f\u53c2\u6570\u8ba1\u7b97\u516c\u5f0f\u5982\u4e0b\uff1a"}),"\n"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"TDC offset = (PropSeg + Seg1 + 1) * Fd Prescaler"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u914d\u7f6e\u4ef2\u88c1\u6bb51m\u6570\u636e\u6bb55m\u5b9e\u4f8b\u8bf4\u660e",children:"\u914d\u7f6e\u4ef2\u88c1\u6bb51M\u6570\u636e\u6bb55M\u5b9e\u4f8b\u8bf4\u660e"}),"\n",(0,l.jsx)(e.h4,{id:"1-\u57fa\u7840\u53c2\u6570\u786e\u8ba4",children:"1. \u57fa\u7840\u53c2\u6570\u786e\u8ba4"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CAN\u65f6\u949f\u9891\u7387\uff08CAN_CLK\uff09: 40 MHz"}),"\n",(0,l.jsx)(e.li,{children:"\u76ee\u6807\u6ce2\u7279\u7387\uff08Bit Rate\uff09: 5 Mbps"}),"\n",(0,l.jsx)(e.li,{children:"\u9884\u5206\u9891\u503c\uff08Prescaler\uff09: 1\uff08\u4e0d\u5206\u9891\uff09"}),"\n",(0,l.jsx)(e.li,{children:"\u5355Bit\u65f6\u95f4\u5185\u7684TQ\u603b\u6570: TQ = CAN_CLK/(Bit Rate\xd7Prescaler)=40MHz/5Mbps\xd71=8TQ"}),"\n",(0,l.jsx)(e.li,{children:"\u65f6\u95f4\u91cf\u5b50\uff1aTq time = 1 / (40M / prescaler) = 1/40M = 25ns"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"2-\u65f6\u95f4\u91cf\u5b50tq\u5206\u914d",children:"2. \u65f6\u95f4\u91cf\u5b50\uff08TQ\uff09\u5206\u914d"}),"\n",(0,l.jsx)(e.p,{children:"Sync_Seg\uff08\u56fa\u5b9a\u6bb5\uff09: 1 TQ\uff08\u540c\u6b65\u6bb5\u4e0d\u53ef\u4fee\u6539\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u5269\u4f59TQ\u5206\u914d: Prop_Seg+Phase_Seg1+Phase_Seg2=8\u22121=7TQ"}),"\n",(0,l.jsx)(e.p,{children:"\u6b64\u5904\u53d6Prop_Seg=1\uff0cPhase_Seg1=4\uff0cPhase_Seg2=2\uff0c\u5219\u91c7\u6837\u70b9= (Sync_Seg+Prop_Seg+Phase_Seg1)/Total TQ x 100% = (1+4+1)/8 x 100%= 75%"}),"\n",(0,l.jsx)(e.h4,{id:"3-\u5ef6\u8fdf\u8865\u507f\u504f\u79fb\u91cftransceiver-delay-compensation-offset",children:"3. \u5ef6\u8fdf\u8865\u507f\u504f\u79fb\u91cf\uff08Transceiver Delay Compensation Offset\uff09"}),"\n",(0,l.jsx)(e.p,{children:"Offset=(Prop_Seg+Phase_Seg1+1)\xd7Prescaler = (1+4+1)\xd71=6TQ"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"SJW\uff08Synchronization Jump Width\uff09\u8bbe\u7f6e"}),"\uff1a"]}),"\n",(0,l.jsx)(e.p,{children:"SJW\u5fc5\u987b\u6ee1\u8db3: SJW\u2264min\u2061(Phase_Seg1,Phase_Seg2)=min\u2061(4,2)=2"}),"\n",(0,l.jsx)(e.p,{children:"\u56e0\u6b64\uff0c\u914d\u7f6e SJW = 2 TQ\u3002"}),"\n",(0,l.jsx)(e.h4,{id:"4-\u7ec8\u914d\u7f6e\u53c2\u6570",children:"4. \u7ec8\u914d\u7f6e\u53c2\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u6839\u636e\u4e0a\u8ff0\u7684\u65b9\u5f0f\u540c\u7406\u53ef\u4ee5\u8ba1\u7b97\u52301M\u60c5\u51b5\u4e0b\u7684\u53c2\u6570\uff0c\u7531\u4e8e\u90e8\u5206\u5bc4\u5b58\u5668\u83b7\u53d6\u5230\u7684\u503c\u4f1a\u81ea\u52a8\u52a0\u4e00\uff0c\u6240\u4ee5\u5b9e\u9645\u5199\u5165\u7684\u503c\u8981\u51cf\u4e00\uff0c\u5177\u4f53\u53ef\u770b\u4e0b\u8868"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"5M 75%\u6570\u636e\u6bb5\u914d\u7f6e"}),"\n"]}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u53c2\u6570\u540d"}),(0,l.jsx)(e.th,{children:"\u503c\uff08TQ\u6216\u65f6\u95f4\uff09"}),(0,l.jsx)(e.th,{children:"\u9700\u5199\u5165\u5bc4\u5b58\u5668\u7684\u503c"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Sync_Seg"}),(0,l.jsx)(e.td,{children:"1 TQ"}),(0,l.jsx)(e.td,{children:"\u65e0\u9700\u5199\u5165\uff0c\u56fa\u5b9a\u4e3a1"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Prop_Seg"}),(0,l.jsx)(e.td,{children:"1 TQ"}),(0,l.jsx)(e.td,{children:"1"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Phase_Seg1"}),(0,l.jsx)(e.td,{children:"4 TQ"}),(0,l.jsx)(e.td,{children:"3"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Phase_Seg2"}),(0,l.jsx)(e.td,{children:"2 TQ"}),(0,l.jsx)(e.td,{children:"1"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Prescaler"}),(0,l.jsx)(e.td,{children:"1"}),(0,l.jsx)(e.td,{children:"0"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"SJW"}),(0,l.jsx)(e.td,{children:"2 TQ"}),(0,l.jsx)(e.td,{children:"1"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5ef6\u8fdf\u8865\u507f\u504f\u79fb\u91cf"}),(0,l.jsx)(e.td,{children:"6 TQ"}),(0,l.jsx)(e.td,{children:"6"})]})]})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"1M 80%\u4ef2\u88c1\u6bb5\u914d\u7f6e"}),"\n"]}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u53c2\u6570\u540d"}),(0,l.jsx)(e.th,{children:"\u503c\uff08TQ\u6216\u65f6\u95f4\uff09"}),(0,l.jsx)(e.th,{children:"\u9700\u5199\u5165\u5bc4\u5b58\u5668\u7684\u503c"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Sync_Seg"}),(0,l.jsx)(e.td,{children:"1 TQ"}),(0,l.jsx)(e.td,{children:"\u65e0\u9700\u5199\u5165\uff0c\u56fa\u5b9a\u4e3a1"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Prop_Seg"}),(0,l.jsx)(e.td,{children:"7 TQ"}),(0,l.jsx)(e.td,{children:"6"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Phase_Seg1"}),(0,l.jsx)(e.td,{children:"8 TQ"}),(0,l.jsx)(e.td,{children:"7"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Phase_Seg2"}),(0,l.jsx)(e.td,{children:"4 TQ"}),(0,l.jsx)(e.td,{children:"3"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Prescaler"}),(0,l.jsx)(e.td,{children:"2"}),(0,l.jsx)(e.td,{children:"1"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"SJW"}),(0,l.jsx)(e.td,{children:"2 TQ"}),(0,l.jsx)(e.td,{children:"1"})]})]})]}),"\n",(0,l.jsx)(e.h4,{id:"5-8m\u7684\u914d\u7f6e\u76f8\u5bf9\u4e8e5m\u8f83\u4e3a\u7279\u6b8a\u4f7f\u752860\u7684\u91c7\u6837",children:"5. 8M\u7684\u914d\u7f6e\u76f8\u5bf9\u4e8e5M\u8f83\u4e3a\u7279\u6b8a\uff0c\u4f7f\u752860%\u7684\u91c7\u6837"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u53c2\u6570\u540d"}),(0,l.jsx)(e.th,{children:"\u503c\uff08TQ\u6216\u65f6\u95f4\uff09"}),(0,l.jsx)(e.th,{children:"\u9700\u5199\u5165\u5bc4\u5b58\u5668\u7684\u503c"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Sync_Seg"}),(0,l.jsx)(e.td,{children:"1 TQ"}),(0,l.jsx)(e.td,{children:"\u65e0\u9700\u5199\u5165\uff0c\u56fa\u5b9a\u4e3a1"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Prop_Seg"}),(0,l.jsx)(e.td,{children:"1 TQ"}),(0,l.jsx)(e.td,{children:"1"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Phase_Seg1"}),(0,l.jsx)(e.td,{children:"1 TQ"}),(0,l.jsx)(e.td,{children:"0"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Phase_Seg2"}),(0,l.jsx)(e.td,{children:"2 TQ"}),(0,l.jsx)(e.td,{children:"1"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Prescaler"}),(0,l.jsx)(e.td,{children:"1"}),(0,l.jsx)(e.td,{children:"0"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"SJW"}),(0,l.jsx)(e.td,{children:"1 TQ"}),(0,l.jsx)(e.td,{children:"0"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5ef6\u8fdf\u8865\u507f\u504f\u79fb\u91cf"}),(0,l.jsx)(e.td,{children:"3 TQ"}),(0,l.jsx)(e.td,{children:"3"})]})]})]}),"\n",(0,l.jsx)(e.h4,{id:"6-\u5c06\u7ed3\u679c\u66f4\u65b0\u5230\u914d\u7f6e\u6587\u4ef6\u4e2d",children:"6. \u5c06\u7ed3\u679c\u66f4\u65b0\u5230\u914d\u7f6e\u6587\u4ef6\u4e2d"}),"\n",(0,l.jsx)(e.p,{children:"\u914d\u7f6e\u6587\u4ef6\u8def\u5f84:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"${mcu_sdk}/Config/McalCdd/gen_s100_sip_B_mcu1/Can/src/Can_PBcfg.c\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b58\u5728\u4e24\u4e2a\u6ce2\u7279\u7387\u76f8\u5173\u7684\u91cd\u8981\u7ed3\u6784\u4f53\uff0c\u4e0b\u9762\u4ee5CAN5\u4e3a\u4f8b\u5206\u522b\u8bf4\u660e\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Can_aControllerConfig\uff1a\u7528\u4e8e\u914d\u7f6e CAN \u63a7\u5236\u5668\u3002\u6bcf\u4e2a\u63a7\u5236\u5668\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u914d\u7f6e\u9879"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"static const Can_ControllerConfigType Can_aControllerConfig[CAN_CONTROLLER_CONFIG_COUNT]=\n{\n    ...\n {\n        /* Controller ID configured */\n        (uint8)5U,\n        /* Hw controller Offset */\n        (uint8)5U,\n        /* Base Address */\n        FLEXCAN_5_BASE,\n        /* Activation or not */\n        (boolean)TRUE,\n        /* Bus Off uses polling or not */\n        (boolean)TRUE,\n        /* Global mask of Legacy FIFO (not used) */\n        (uint32)0xFFFFFFFFU,\n        /* Acceptance Mode of Legacy FIFO (not used)*/\n        CAN_LEGACY_FIFO_FORMAT_A,\n        /* Legacy FIFO Warning Notification */\n        NULL_PTR,\n        /* Legacy FIFO Overflow Notification */\n        NULL_PTR,\n        /* Enhanced FIFO Overflow Notification */\n        NULL_PTR,\n        /* Error interrupt enable or not */\n        (boolean)TRUE,\n        /* Can Error Notification */\n        Can_ErrorNotif,\n        /* CanFd Error Notification */\n        CanFd_ErrorNotif,\n        /* Default Baudrate ID, 4--1M+5M 5--1M+8M */\n        (uint16)4U,\n         /* Baudrate config Count*/\n        (uint16)6U,\n        /* Pointer to baudrate config Structure */\n        Can_aBaudrateConfig_Ctrl5,\n        /* Pointer to LLD structure to IP config */\n        &Flexcan_aCtrlConfigPB[5U],\n        /* HwObject count */\n        (uint8)9U,\n        /* Point to group of HwObject that referenced to the current Controller */\n        Can_apHwObject_Ctrl5\n    },\n    ...\n}\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Can_aBaudrateConfig_Ctrl5\uff1a\u7528\u4e8e\u5b9a\u4e49\u7279\u5b9a\u63a7\u5236\u5668\u7684\u6ce2\u7279\u7387\u914d\u7f6e\uff0c\u8fd9\u662f\u4e00\u4e2a\u5927\u6570\u7ec4\uff0c\u4e0a\u8ff0\u6b65\u9aa4\u4e2d\u751f\u6210\u7684\u53c2\u6570\u5747\u5199\u5230\u8fd9\u4e2a\u6570\u7ec4\u4e2d"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"static const Can_BaudrateConfigType Can_aBaudrateConfig_Ctrl5[6U]=\n{\n    {\n        /*Enhance CBT support */\n        (boolean)TRUE,\n        /* Tx Bit Rate Switch or not */\n        (boolean)TRUE,\n        /* CanFd support */\n        (boolean)TRUE,\n        /* Nominal bit rate */ //\u4ef2\u88c1\u6bb5\u914d\u7f6e\n        {\n            (uint8)6U, // \u4f20\u64ad\u6bb5(prop_seg)\u200c\n            (uint8)7U, // \u76f8\u4f4d\u7f13\u51b2\u6bb51(phase_seg1)\u200c\n            (uint8)3U, // \u76f8\u4f4d\u7f13\u51b2\u6bb52(phase_seg2)\u200c\n            (uint16)3U, // \u9884\u5206\u9891\u503c\uff08Prescaler\uff09\n            (uint8)1U //\u540c\u6b65\u8df3\u8f6c\u5bbd\u5ea6(SJW)\n        },\n        /* Data bit rate */ //\u6570\u636e\u6bb5\u914d\u7f6e\n        {\n            (uint8)3U,\n            (uint8)3U,\n            (uint8)1U,\n            (uint16)3U,\n            (uint8)1U\n        },\n\n        /* Tx Arbitration Start delay */\n        (uint8)12U, // \u5ef6\u8fdf\u8865\u507f\u504f\u79fb\u91cf(Transceiver Delay Compensation Offset)\n        /* Tranceiver Delay Disable */\n        (boolean)FALSE,\n        (uint8)0U\n    },\n    ...\n"})}),"\n",(0,l.jsx)(e.p,{children:"RDK S100\u9ed8\u8ba4\u914d\u7f6e\u4e866\u7ec4\u53c2\u6570\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539Can_aControllerConfig\u4e2d\u7684u16DefaultBaudrateID\u6210\u5458\u503c\u6765\u9009\u62e9\u6ce2\u7279\u7387,\u4e0b\u8868\u4e3a\u7d22\u5f15\u5bf9\u5e94\u7684\u6ce2\u7279\u7387\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"u16DefaultBaudrateID"}),(0,l.jsx)(e.th,{children:"\u4ef2\u88c1\u6bb5\u9891\u7387"}),(0,l.jsx)(e.th,{children:"\u6570\u636e\u6bb5\u9891\u7387"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"0"}),(0,l.jsx)(e.td,{children:"500K"}),(0,l.jsx)(e.td,{children:"1M"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"1"}),(0,l.jsx)(e.td,{children:"500K"}),(0,l.jsx)(e.td,{children:"2M"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"2"}),(0,l.jsx)(e.td,{children:"1M"}),(0,l.jsx)(e.td,{children:"2M"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"3"}),(0,l.jsx)(e.td,{children:"1M"}),(0,l.jsx)(e.td,{children:"5M\uff08\u77ed\u8ddd\u79bb:\u5c0f\u4e8e50m\uff09"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"4"}),(0,l.jsx)(e.td,{children:"1M"}),(0,l.jsx)(e.td,{children:"5M\uff08\u957f\u8ddd\u79bb:\u5927\u4e8e50m\uff09"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"5"}),(0,l.jsx)(e.td,{children:"1M"}),(0,l.jsx)(e.td,{children:"8M"})]})]})]}),"\n",(0,l.jsx)(e.h2,{id:"\u5e94\u7528sample",children:"\u5e94\u7528sample"}),"\n",(0,l.jsx)(e.h3,{id:"\u4f7f\u7528\u6307\u5357",children:"\u4f7f\u7528\u6307\u5357"}),"\n",(0,l.jsx)(e.admonition,{title:"\u63d0\u793a",type:"info",children:(0,l.jsxs)(e.p,{children:["\u6267\u884c sample \u4e4b\u524d\u9700\u8981\u5148\u5f00\u542fMCU1\uff0cMCU1\u5f00\u542f\u7684\u6d41\u7a0b\u53c2\u8003",(0,l.jsx)(e.a,{href:"/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/basic_information#mcu1%E5%90%AF%E5%8A%A8%E5%85%B3%E9%97%AD%E6%B5%81%E7%A8%8B",children:"\u5f00\u542f MCU"}),"\u3002"]})}),"\n",(0,l.jsx)(e.p,{children:"Acore canhal\u4f7f\u7528\u53ef\u53c2\u8003sample\u6e90\u7801\u76ee\u5f55\uff1asource/hobot-io-samples/debian/app/Can\uff0c\u53ef\u4ee5\u5728S100\u7684/app/Can\u76ee\u5f55\u4e0b\u76f4\u63a5make\u7f16\u8bd1\u4f7f\u7528\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u4ee5\u591a\u8def\u900f\u4f20\u4e3a\u4f8b\uff0c\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"$ tree /app/Can/can_multi_ch\n.\n\u251c\u2500\u2500 Makefile // \u4e3b\u7f16\u8bd1\u811a\u672c\n\u251c\u2500\u2500 config  // \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 channels.json // \u901a\u9053\u6620\u5c04\u914d\u7f6e\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 ipcf_channel.json // IPCF\u901a\u9053\u6620\u5c04\u914d\u7f6e\u6587\u4ef6\n\u2502   \u2514\u2500\u2500 nodes.json // Can\u865a\u62df\u8bbe\u5907\u6620\u5c04\u914d\u7f6e\u6587\u4ef6\n\u251c\u2500\u2500 main.cpp // \u4e3b\u7a0b\u5e8f\n\u251c\u2500\u2500 readme.md // \u8bf4\u660e\u6587\u4ef6\n\u251c\u2500\u2500 can_multich_log.h // \u65e5\u5fd7\u5934\u6587\u4ef6\n\u2514\u2500\u2500 run.sh // \u8fd0\u884c\u811a\u672c\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"json\u6587\u4ef6\u914d\u7f6e\u4e3b\u8981\u5305\u62ec3\u4e2ajson\u914d\u7f6e\u6587\u4ef6\uff1anode.json\u3001ipcf_channel.json\u3001channels.json\u3002\u76ee\u524d\u4e3a\u4e86\u652f\u6301\u591a\u8fdb\u7a0b\uff0c\u5404\u4e2a\u8fdb\u7a0b\u90fd\u4f1a\u53bb\u5f53\u524d\u8def\u5f84\u4e0b\u7684config\u76ee\u5f55\u4e0b\u5bfb\u627e\u8fd93\u4e2a\u914d\u7f6e\u6587\u4ef6\u3002"}),"\n",(0,l.jsx)(e.p,{children:"node.json\u8d1f\u8d23\u521b\u5efa\u865a\u62dfCAN\u8bbe\u5907\u8282\u70b9\u7ed9CANHAL API\u8bbf\u95ee\u3002\u5173\u952e\u914d\u7f6e\u9009\u9879\u5305\u62ec\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"channel_id\u5b57\u6bb5\u6307\u5b9a\u8be5\u865a\u62dfCAN\u8bbe\u5907\u4eceipc\u914d\u7f6e\u6587\u4ef6ipcf_channel.json\u4e2d\u54ea\u4e00\u4e2a\u8282\u70b9\u83b7\u53d6\u6570\u636e\u3002"}),"\n",(0,l.jsx)(e.li,{children:"target\u5b57\u6bb5\u8868\u793a\u8be5\u865a\u62dfCAN\u8bbe\u5907\u8282\u70b9\u7684\u540d\u79f0\uff0cCANHAL API\u901a\u8fc7\u8be5\u540d\u79f0\u8bbf\u95ee\u6307\u5b9a\u7684\u8282\u70b9\u3002"}),"\n",(0,l.jsx)(e.li,{children:"enable\u5b57\u6bb5\u8868\u793a\u8be5\u8282\u70b9\u662f\u5426\u4f7f\u80fd\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'{\n  "nodes" : [\n    {\n      "id" : 0,\n      "enable" : true,\n      "mode_comment" : "value_table: R, W, RW",\n      "mode" : "RW",\n      "target" : "can6_ins0ch6",\n      "clk_source" : "/dev/hrtc0",\n      "io_channel" : {\n        "device_type_comment" : "value_table: can, eth, ipcf, spi",\n        "device_type" : "ipcf",\n        "channel_id" : 0\n      },\n      "raw_protocol" : "built_1.0"\n    },\n    .....\n    {\n      "id" : 4,\n      "enable" : true,\n      "mode_comment" : "value_table: R, W, RW",\n      "mode" : "RW",\n      "target" : "can5_ins0ch4",\n      "clk_source" : "/dev/hrtc0",\n      "io_channel" : {\n        "device_type_comment" : "value_table: can, eth, ipcf, spi",\n        "device_type" : "ipcf",\n        "channel_id" : 4\n      },\n      "raw_protocol" : "built_1.0"\n    }\n  ]\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:"ipcf_channel.json\u5c06node.json\u4e2d\u7528\u5230\u7684ipc\u8282\u70b9\u6620\u5c04\u5230\u5177\u4f53\u7684instance\u548cchannel\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'{\n  "enable" : true,\n  "libipcf_path" : "/usr/hobot/lib/libhbipcfhal.so.1",\n  "channels" : [\n    {\n      "id" : 0,\n      "channel" : {\n        "name" : "can6_ins0ch6",\n        "instance": 0,\n        "channel": 6,\n        "fifo_size": 64000,\n        "fifo_type": 0,\n        "pkg_size_max": 4096,\n        "dev_path":"/dev/ipcdrv",\n        "dev_name":"ipcdrv",\n        "recv_timeout" : 4000\n      }\n    },\n    ......\n    {\n      "id" : 4,\n      "channel" : {\n        "name" : "can5_ins0ch4",\n        "instance": 0,\n        "channel": 4,\n        "fifo_size": 64000,\n        "fifo_type": 0,\n        "pkg_size_max": 4096,\n        "dev_path":"/dev/ipcdrv",\n        "dev_name":"ipcdrv",\n        "recv_timeout" : 4000\n      }\n    }\n  ]\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:"channels.json\u6307\u5b9aipc\u914d\u7f6e\u6587\u4ef6\uff0c\u7528\u6237\u4e00\u822c\u4e0d\u9700\u8981\u66f4\u6539\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'{\n  "io_channels" : {\n   "ipcf" : "./config/ipcf_channel.json"\n }\n}\n'})}),"\n",(0,l.jsxs)(e.p,{children:["Acore\u65e0\u6cd5\u76f4\u63a5\u64cd\u4f5cCAN\u5916\u8bbe\uff0c\u9700\u8981\u901a\u8fc7\u501f\u52a9Ipc\u6a21\u5757\u6765\u4e2d\u8f6c\u6570\u636e\uff0c\u4e0e\u5916\u8bbe\u901a\u9053\u7684\u6620\u5c04\u5173\u7cfb\u53ef\u4ee5\u67e5\u9605 ",(0,l.jsx)(e.a,{href:"/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_ipc",children:"MCU IPC\u4f7f\u7528\u6307\u5357"})," \u4e2d\u7684IPC \u4f7f\u7528\u60c5\u51b5\u7ae0\u8282\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"Acore\u5e94\u7528\u7a0b\u5e8f\u901a\u8fc7CANHAL\u83b7\u53d6MCU\u4fa7CAN\u5e27\u7684\u6d41\u7a0b\u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'void send_frame_data(void *arg)\n{\n    ... do\n    {\n        ret = canSendMsgFrame(test_params->target, &frame[0], &pack);\n        if (ret > 0) { /* \u53d1\u9001\u6210\u529f */\n            send_count++;\n            PRINT_DEBUG("Send length %d\\n", ret);\n            break;\n        } else if (ret == -CAN_TRY_AGAIN && /* \u7531\u4e8eIPC\u6216\u8005\u5176\u4ed6\u8d44\u6e90\u4e0d\u8db3\uff0c\u91cd\u8bd5 */\n                   retry++ < MAX_RETRY) {\n            usleep(2);\n            continue;\n        } else { /* \u53d1\u9001\u5931\u8d25 */\n            PRINT_ERR("Send failed after retries, exiting...\\n");\n            break;\n        }\n    }\n    while (1)\n        ;\n}\n\nvoid *recv_frame_data(void *arg)\n{\n    while (!exit_flag) {\n        ret = canRecvMsgFrame(target, frame, &pack); // non blocking\n        if (ret < 0) {\n            if (ret == -CAN_TRY_AGAIN) { /* \u7531\u4e8eIPC\u6216\u8005\u5176\u4ed6\u8d44\u6e90\u4e0d\u8db3\uff0c\u91cd\u8bd5 */\n                PRINT_DEBUG("canRecvMsgFrame try again\\n");\n                continue;\n            } else {\n                PRINT_ERR("canRecvMsgFrame failed ret: %d\\n", ret);\n                gettimeofday(&current_time, NULL);\n                double elapsed =\n                        difftime(current_time.tv_sec, last_recv_time.tv_sec);\n                if (elapsed > RECV_TIMEOUT) { /* \u8d85\u65f6\u9000\u51fa */\n                    PRINT_INFO(\n                            "No data received for %d seconds. Exiting thread.\\n",\n                            RECV_TIMEOUT);\n                    goto can_recv_exit;\n                }\n                continue;\n            }\n        }\n    }\n}\n\nint main(int argc, char *argv[])\n{\n    ret = canInit();\n    pthread_create(&send_thread, NULL, send_frame_data, &tx_params);\n    pthread_create(&rx_threads[i], NULL, recv_frame_data, &rx_params[i])\n\n            pthread_join(send_thread, NULL);\n    pthread_join(rx_threads[i], NULL);\n    canDeInit();\n}\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9996\u5148\u6267\u884ccanInit()\u5b8c\u6210\u521d\u59cb\u5316,\u7136\u540e\u521b\u5efa\u53d1\u9001\u7ebf\u7a0b\u548c\u63a5\u6536\u7ebf\u7a0b"}),"\n",(0,l.jsx)(e.li,{children:"\u53d1\u9001\u7ebf\u7a0b\u8c03\u7528canSendMsgFrame()\u53d1\u9001\u6570\u636e\u5305\uff0c\u63a5\u6536\u7ebf\u7a0b\u8c03\u7528canRecvMsgFrame()\u63a5\u6536\u6570\u636e\u5305\uff0c\u5176\u4e2dtarget\u53c2\u6570\u4e3ajson\u6587\u4ef6\u4e2d\u914d\u7f6e\u597d\u7684\u901a\u9053\u3002"}),"\n",(0,l.jsx)(e.li,{children:"pack\u4fe1\u606f\u5305\u542b\u8fd9\u4e00\u5305\u6570\u636e\u7684\u4fe1\u606f\uff0c\u5305\u62eccan\u5e27\u6570\u91cf\u3001mcu\u4fa7\u7684\u65f6\u95f4\u6233\u4ee5\u53caacore\u4fa7\u7684monotic\u65f6\u95f4\u6233\u7b49\u4fe1\u606f\u3002"}),"\n",(0,l.jsx)(e.li,{children:"canhal\u4f1a\u4ece\u8fd9\u4e00\u5305ipc\u6570\u636e\u4e2d\u89e3\u6790\u51facan\u5e27\uff0c\u7528\u6237\u901a\u8fc7frame\u6307\u9488\u8bfb\u53d6\u51fa\u6240\u6709can\u5e27\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u6700\u540e\u6267\u884ccanDeInit()\u91ca\u653e\u8d44\u6e90\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsx)(e.p,{children:"can\u7684\u63a5\u6536\u548c\u53d1\u9001\u51fd\u6570\u4f9d\u8d56IPC\u7684\u8d44\u6e90\uff0c\u5f53\u4f20\u8f93\u901f\u7387\u8fc7\u5feb\u65f6\u4f1a\u51fa\u73b0\u8d44\u6e90\u8017\u5c3d\u7684\u60c5\u51b5\uff0c\u6b64\u65f6\u53ef\u4ee5\u8fdb\u884c\u964d\u901f\u548c\u91cd\u4f20\u3002"})}),"\n",(0,l.jsx)(e.h3,{id:"acore\u4fa7\u5b9e\u4f8b\u8bf4\u660e",children:"ACORE\u4fa7\u5b9e\u4f8b\u8bf4\u660e"}),"\n",(0,l.jsx)(e.h4,{id:"\u7b80\u5355\u7684can\u6536\u53d1sample",children:"\u7b80\u5355\u7684can\u6536\u53d1sample"}),"\n",(0,l.jsx)(e.h5,{id:"\u76ee\u5f55\u4ecb\u7ecd",children:"\u76ee\u5f55\u4ecb\u7ecd"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"// /app/Can/can_send\n.\n\u251c\u2500\u2500 Makefile // \u4e3b\u7f16\u8bd1\u811a\u672c\n\u251c\u2500\u2500 canhal_send.c // \u53d1\u9001\u4e00\u5e27\u6807\u51c6\u5e27\u6570\u636e\n\u2514\u2500\u2500 config // \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\n    \u251c\u2500\u2500 channels.json  // \u901a\u9053\u6620\u5c04\u914d\u7f6e\u6587\u4ef6\n    \u251c\u2500\u2500 ipcf_channel.json  // \u901a\u9053\u6620\u5c04\u914d\u7f6e\u6587\u4ef6\n    \u2514\u2500\u2500 nodes.json // \u901a\u9053\u6620\u5c04\u914d\u7f6e\u6587\u4ef6\n\n// /app/Can/can_get\n.\n\u251c\u2500\u2500 Makefile // \u4e3b\u7f16\u8bd1\u811a\u672c\n\u251c\u2500\u2500 canhal_get.c // while 1\u5faa\u73af\uff0c\u63a5\u6536\u6570\u636e\n\u2514\u2500\u2500 config // \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\n    \u251c\u2500\u2500 channels.json   // \u901a\u9053\u6620\u5c04\u914d\u7f6e\u6587\u4ef6\n    \u251c\u2500\u2500 ipcf_channel.json  // \u901a\u9053\u6620\u5c04\u914d\u7f6e\u6587\u4ef6\n    \u2514\u2500\u2500 nodes.json  // \u901a\u9053\u6620\u5c04\u914d\u7f6e\u6587\u4ef6\n"})}),"\n",(0,l.jsx)(e.h5,{id:"\u4f7f\u7528\u524d\u63d0",children:"\u4f7f\u7528\u524d\u63d0"}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u91cc\u4ec5\u7ed9\u51fa\u4e00\u4e2a\u7b80\u5355\u7684sample\uff0c\u5b9e\u9645\u5e94\u7528\u4e2d\u9700\u8981\u6839\u636e\u5b9e\u9645\u9700\u6c42\u8fdb\u884c\u4fee\u6539\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528\u524d\u63d0\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"MCU1\u6b63\u5e38\u8fd0\u884c"}),"\n",(0,l.jsx)(e.li,{children:"\u786c\u4ef6\u8fde\u63a5\uff1a\u4f7f\u7528CAN\u95ed\u73af\u603b\u7ebf\u7f51\u7edc\uff0cCAN5\u8fde\u63a5CAN6\uff0cCAN_H\u548cCAN_L\u4e4b\u95f4\u63a5\u5165120\u6b27\u59c6\u7535\u963b\uff08CAN5\u548cCAN6\u63a5\u7ebf\u67f1\u540e\u9762\u76842 PIN\u5f15\u811a\u4f7f\u7528\u8df3\u7ebf\u5e3d\u6216\u675c\u90a6\u7ebf\u77ed\u63a5\uff09\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["\u7531\u4e8ecan_send\u548ccan_get\u90fd\u4f7f\u7528\u7684instance channel4(\u9ed8\u8ba4\u6620\u5c04\u6765\u81eaCAN5\u7684\u6570\u636e)\uff0c",(0,l.jsx)(e.strong,{children:"\u7531\u4e8eIpc\u5355\u4e2achannel\u53ea\u80fd\u88ab\u4e00\u4e2a\u7ebf\u7a0b\u4f7f\u7528"}),"\uff0c\u56e0\u6b64\u4fee\u6539can_send\u4e2d\u7684ipcf_channel.json\uff0c\u6539\u4e3a\u4f7f\u7528instance channel6\uff0c\u6539\u52a8\u5982\u4e0b"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'{\n  "enable" : true,\n  "libipcf_path" : "/usr/hobot/lib/libhbipcfhal.so.1",\n  "channels" : [\n    {\n      "id" : 0,\n      "channel" : {\n        "name" : "bypass",\n        "instance": 0,\n        "channel": 6, // \u8fd9\u91cc\u75314\u6539\u6210\u4e866\n        "fifo_size": 64000,\n        "fifo_type": 0,\n        "pkg_size_max": 4096,\n        "dev_path":"/dev/ipcdrv",\n        "dev_name":"ipcdrv",\n        "recv_timeout" : 4000\n      }\n    }\n  ]\n}\n'})}),"\n",(0,l.jsx)(e.h5,{id:"\u4f7f\u7528\u65b9\u5f0f",children:"\u4f7f\u7528\u65b9\u5f0f"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5206\u522b\u7f16\u8bd1can_send\u548ccan_get\u4e24\u4e2asample"}),"\n",(0,l.jsx)(e.li,{children:"\u8fdb\u5165can_get\u76ee\u5f55\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"./canhal_get bypass &\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"3",children:["\n",(0,l.jsx)(e.li,{children:"\u8fdb\u5165can_send\u76ee\u5f55\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"root@ubuntu:/app/Can/can_send# ./canhal_send bypass 6\n[CANHAL][INFO][ipcf_dev.cpp:32][2025-2-20 21:43:47.522]:the path of ipcf plugin is /usr/hobot/lib/libhbipcfhal.so.1.\ngroup name is bypass\n[CANHAL][INFO][comps_mgr.cpp:158][2025-2-20 21:43:47.523]:channel constructor Register dev: ipcf success.\n[CANHAL][INFO][node.cpp:17][2025-2-20 21:43:47.523]:channel id is 0\n[INFO][hb_ipcf_hal.cpp:282] [channel] bypass [ins] 0 [id] 6 init success.\n[INFO][hb_ipcf_hal.cpp:333] [channel] bypass [ins] 0 [id] 6 config success.\n[CANHAL][INFO][node.cpp:39][2025-2-20 21:43:47.523]:io_channel init successful\n[CANHAL][INFO][node.cpp:44][2025-2-20 21:43:47.523]:protocol is built_1.0\nSend end, send package total: 1 frame total: 1\n[CANHAL][INFO][can_hal_impl.cpp:120][2025-2-20 21:43:47.524]:Deinit node: bypass\n[INFO][hb_ipcf_hal.cpp:553] [channel] bypass [ins] 0 [id] 6 deinit success.\n[CANHAL][INFO][can_hal_impl.cpp:128][2025-2-20 21:43:47.524]:Deinit node: bypass\n[CANHAL][INFO][channel_ctor.cpp:47][2025-2-20 21:43:47.524]:Deinit device: ipcf\n*********************************************\n[bypass] [pack]length: 1 soc_ts: 1186831 mcu_ts: 1191955\n[canhal_get] [bypass] [canframe] canid is 0x00000131 timestamp is 0x123013 data is:\n 0x0  0xaa  0xaa  0xaa  0xaa  0xaa  0xaa  0xfc\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"4",children:["\n",(0,l.jsx)(e.li,{children:"\u51fa\u73b0\u5982\u4e0b\u6253\u5370\u5219\u6d4b\u8bd5\u6210\u529f\uff1a"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"[canhal_get] [bypass] [canframe] canid is 0x00000131 timestamp is 0x10b221 data is:\n 0x0  0xaa  0xaa  0xaa  0xaa  0xaa  0xaa  0xfc\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u591a\u901a\u9053\u4f20\u8f93",children:"\u591a\u901a\u9053\u4f20\u8f93"}),"\n",(0,l.jsx)(e.h5,{id:"\u76ee\u5f55\u4ecb\u7ecd-1",children:"\u76ee\u5f55\u4ecb\u7ecd"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"// /app/Can/can_multi_ch\n.\n\u251c\u2500\u2500 Makefile // \u4e3b\u7f16\u8bd1\u811a\u672c\n\u251c\u2500\u2500 config  // \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 channels.json // \u901a\u9053\u6620\u5c04\u914d\u7f6e\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 ipcf_channel.json // IPCF\u901a\u9053\u6620\u5c04\u914d\u7f6e\u6587\u4ef6\n\u2502   \u2514\u2500\u2500 nodes.json // Can\u865a\u62df\u8bbe\u5907\u6620\u5c04\u914d\u7f6e\u6587\u4ef6\n\u251c\u2500\u2500 main.cpp // \u4e3b\u7a0b\u5e8f\n\u251c\u2500\u2500 readme.md // \u8bf4\u660e\u6587\u4ef6\n\u251c\u2500\u2500 can_multich_log.h // \u65e5\u5fd7\u5934\u6587\u4ef6\n\u2514\u2500\u2500 run.sh // \u8fd0\u884c\u811a\u672c\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u672c\u7a0b\u5e8f\u5b9e\u73b0CAN\u603b\u7ebf\u591a\u901a\u9053\u6570\u636e\u53d1\u9001\u4e0e\u63a5\u6536\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u786c\u4ef6\u8fde\u63a5"}),"\uff1a\u4f7f\u7528CAN\u95ed\u73af\u603b\u7ebf\u7f51\u7edc\uff0cCan6\u8fde\u63a5Can7\uff0c Can8\u8fde\u63a5Can9\uff0cCan5\u5355\u72ec\u901a\u9053\u4e0d\u63a5\uff0cCAN_H\u548cCAN_L\u4e4b\u95f4\u63a5\u5165120\u6b27\u59c6\u7535\u963b\uff08\u628a\u6240\u7528\u5230\u7684CAN\u603b\u7ebf\u7684\u63a5\u7ebf\u67f1\u540e\u9762\u76842 PIN\u5f15\u811a\u4f7f\u7528\u8df3\u7ebf\u5e3d\u6216\u675c\u90a6\u7ebf\u77ed\u63a5\uff09\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u53d1\u9001\u7ebf\u7a0b"}),"\uff1a\u4e3a\u6bcf\u4e2a\u901a\u9053\u521b\u5efa\u72ec\u7acb\u7ebf\u7a0b\u53d1\u9001\u6570\u636e\uff0c\u5f53\u4f7f\u7528CANFD\u65f6\uff0c\u6570\u636e\u5305\u542b\u8ba1\u6570\u5668\u548c\u65f6\u95f4\u6233,\u5f53\u4f7f\u7528\u7ecf\u5178CAN\u65f6\uff0c\u6570\u636e\u4e3a\u51680x55\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u63a5\u6536\u7ebf\u7a0b"}),"\uff1a\u4e3a\u6bcf\u4e2a\u901a\u9053\u521b\u5efa\u72ec\u7acb\u7ebf\u7a0b\u63a5\u6536\u6570\u636e\u5e76\u9a8c\u8bc1\u6570\u636e\u6b63\u786e\u6027\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u53d1\u9001\u7b56\u7565\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u76f8\u9694\u56fa\u5b9a\u65f6\u95f4\u901a\u8fc7Can\u53d1\u9001\u6570\u636e\uff0c\u53ef\u901a\u8fc7\u4fee\u6539\u5ef6\u65f6\u8c03\u6574\u53d1\u9001\u9891\u7387\uff0c\u9891\u7387\u8fc7\u9ad8\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e22\u5305\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u76ee\u6807\u901a\u9053\uff1a\u63a7\u5236CAN5~CAN9\u5e7f\u64ad\u6570\u636e"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u63a5\u6536\u7b56\u7565:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u88ab\u52a8\u63a5\u6536\u6570\u636e\uff0c\u9a8c\u8bc1\u63a5\u6536\u6570\u636e\u7684\u8ba1\u6570\u5668\u548c\u8ba1\u7b97\u4f20\u8f93\u65f6\u5ef6"}),"\n",(0,l.jsx)(e.li,{children:"\u8d85\u8fc7100\u79d2\u672a\u6536\u5230\u6570\u636e\u5219\u9000\u51fa\u7a0b\u5e8f\uff08\u4ee3\u7801\u4e2d\u5b9a\u4e49\u7684\u8d85\u65f6\u65f6\u95f4\uff09"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u4f9d\u8d56",children:"\u4f9d\u8d56"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"pthread"}),": \u7ebf\u7a0b\u5e93"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"hobot_can_hal "}),": CAN\u63a5\u53e3\u5e93"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"hb_ipcf_hal"}),": IPCF\u63a5\u53e3\u5e93"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"alog"}),": Android\u65e5\u5fd7\u5e93"]}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u901a\u9053\u6620\u5c04\u5173\u7cfb",children:"\u901a\u9053\u6620\u5c04\u5173\u7cfb"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u901a\u9053"}),(0,l.jsx)(e.th,{children:"\u5bf9\u5e94\u7ebf\u7a0b\u540d\u79f0"}),(0,l.jsx)(e.th,{children:"\u8bbe\u5907\u540d"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"CAN5"}),(0,l.jsx)(e.td,{children:"CAN5RX"}),(0,l.jsx)(e.td,{children:'"can5_ins0ch4"'})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"CAN6"}),(0,l.jsx)(e.td,{children:"CAN6RX"}),(0,l.jsx)(e.td,{children:'"can6_ins0ch6"'})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"CAN7"}),(0,l.jsx)(e.td,{children:"CAN7RX"}),(0,l.jsx)(e.td,{children:'"can7_ins0ch7"'})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"CAN8"}),(0,l.jsx)(e.td,{children:"CAN8RX"}),(0,l.jsx)(e.td,{children:'"can8_ins0ch2"'})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"CAN9"}),(0,l.jsx)(e.td,{children:"CAN9RX"}),(0,l.jsx)(e.td,{children:'"can9_ins0ch3"'})]})]})]}),"\n",(0,l.jsx)(e.h5,{id:"debug\u5f00\u5173",children:"DEBUG\u5f00\u5173"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-C",children:"// can_multich_log.h\n#define VERBOSE 0 //\u4fee\u6539\u4e3a1\u65f6\u6253\u5370\u8c03\u8bd5\u4fe1\u606f\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e5f\u53ef\u4ee5\u4f7f\u7528logcat\u67e5\u770b\u66f4\u591a\u65e5\u5fd7"}),"\n",(0,l.jsx)(e.h5,{id:"\u53d1\u9001\u7aef",children:"\u53d1\u9001\u7aef"}),"\n",(0,l.jsx)(e.p,{children:"\u53d1\u9001\u7b56\u7565\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u76f8\u9694\u56fa\u5b9a\u65f6\u95f4\u901a\u8fc7Can\u53d1\u9001\u6570\u636e\uff0c\u53ef\u901a\u8fc7\u4fee\u6539\u5ef6\u65f6\u8c03\u6574\u53d1\u9001\u9891\u7387\uff0c\u9891\u7387\u8fc7\u9ad8\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e22\u5305\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u6570\u636e\u5185\u5bb9\uff1a\u901a\u8fc7CANFD\u53d1\u9001\u6269\u5c55\u5e27(64bytes)\u7684\u6570\u636e\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u76ee\u6807\u901a\u9053\uff1aCAN5~CAN9\u6bcf\u4e2a\u901a\u9053\u90fd\u53d1\u9001\u6570\u636e"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u63a5\u6536\u7aef",children:"\u63a5\u6536\u7aef"}),"\n",(0,l.jsx)(e.p,{children:"\u63a5\u6536\u7b56\u7565:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u88ab\u52a8\u63a5\u6536\u6570\u636e\uff0c\u9a8c\u8bc1\u63a5\u6536\u6570\u636e\u7684\u8ba1\u6570\u5668\u548c\u8ba1\u7b97\u4f20\u8f93\u65f6\u5ef6"}),"\n",(0,l.jsx)(e.li,{children:"\u8d85\u8fc7100\u79d2\u672a\u6536\u5230\u6570\u636e\u5219\u9000\u51fa\u7a0b\u5e8f\uff08\u4ee3\u7801\u4e2d\u5b9a\u4e49\u7684\u8d85\u65f6\u65f6\u95f4\uff09"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u6ce8\u610f\u4e8b\u9879",children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7a0b\u5e8f\u9000\u51fa\u65f6\u4f1a\u81ea\u52a8\u91ca\u653eCAN\u8bbe\u5907\u8d44\u6e90"}),"\n",(0,l.jsx)(e.li,{children:"\u6309Ctrl+C\u53ef\u4e2d\u65ad\u7a0b\u5e8f\u8fd0\u884c"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u547d\u4ee4\u884c\u53c2\u6570\u914d\u7f6e\u53d1\u9001\u5e27\u6570\u3001CAN\u5e27\u7c7b\u578b\u548c\u6570\u636e\u957f\u5ea6"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u7f16\u8bd1\u547d\u4ee4",children:"\u7f16\u8bd1\u547d\u4ee4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"make # \u7f16\u8bd1\nmake clean # \u6e05\u9664\u7f16\u8bd1\u6587\u4ef6\n"})}),"\n",(0,l.jsx)(e.h5,{id:"\u547d\u4ee4\u884c\u53c2\u6570",children:"\u547d\u4ee4\u884c\u53c2\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u7a0b\u5e8f\u652f\u6301\u4ee5\u4e0b\u547d\u4ee4\u884c\u53c2\u6570\u6765\u81ea\u5b9a\u4e49\u8fd0\u884c\u53c2\u6570\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"-n <can_tran_num>                 \u6307\u5b9a\u8981\u53d1\u9001\u7684\u5e27\u6570 (\u9ed8\u8ba4: 1)\n-t <can_type>                     \u6307\u5b9aCAN\u5e27\u7c7b\u578b (0: \u6807\u51c6\u5e27, 1: \u6269\u5c55\u5e27, 2: FD\u6807\u51c6\u5e27, 3: FD\u6269\u5c55\u5e27) (\u9ed8\u8ba4: 2)\n-l <can_length>                   \u6307\u5b9aCAN\u5e27\u957f\u5ea6 (8: 8\u5b57\u8282, 64: 64\u5b57\u8282) (\u9ed8\u8ba4: 64)\n-h, --help                        \u663e\u793a\u5e2e\u52a9\u4fe1\u606f\n"})}),"\n",(0,l.jsx)(e.h5,{id:"\u8fd0\u884c\u547d\u4ee4",children:"\u8fd0\u884c\u547d\u4ee4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"export CAN_HAL_DEBUG_LEVEL=6 //  \u8bbe\u7f6eCAN\u63a5\u53e3\u5e93\u8c03\u8bd5\u7b49\u7ea7\uff0c\u4e0d\u6253\u5370\u4efb\u4f55\u65e5\u5fd7;\u6253\u5370\u8f83\u591a\u7684\u60c5\u51b5\u4e0b\u4f1a\u5f71\u54cd\u53d1\u9001\u9891\u7387\n./can_multi_ch\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6216\u8005\u4f7f\u7528\u53c2\u6570\u8fd0\u884c\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"./can_multi_ch -t 2 -l 64 -n 5\n"})}),"\n",(0,l.jsx)(e.h5,{id:"\u65e5\u5fd7\u5206\u6790",children:"\u65e5\u5fd7\u5206\u6790"}),"\n",(0,l.jsxs)(e.p,{children:["\u4ee5\u8fd0\u884c ",(0,l.jsx)(e.code,{children:"./can_multi_ch -t 2 -l 64 -n 5 "}),"\u4e3a\u4f8b:"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5f53\u524d\u9ed8\u8ba4\u53c2\u6570\u914d\u7f6e:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"[param_config_display 389] [INFO]: Current parameter configuration:\n[param_config_display 390] [INFO]:   CAN Transmit Number: 1\n[param_config_display 391] [INFO]:   CAN Type: CAN_FD_STANDARD\n[param_config_display 392] [INFO]:   CAN Length: 64\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528\u7684\u786c\u4ef6\u914d\u7f6e\uff0cCAN\u63a7\u5236\u5668\uff0cIPC\u7684\u5b9e\u4f8b\u548c\u901a\u9053"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"group name is can6_ins0ch6\ngroup name is can7_ins0ch7\ngroup name is can8_ins0ch2\ngroup name is can9_ins0ch3\ngroup name is can5_ins0ch4\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528\u7684\u786c\u4ef6\u914d\u7f6e\uff0cCAN\u63a7\u5236\u5668\uff0cIPC\u7684\u5b9e\u4f8b\u548c\u901a\u9053"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"group name is can6_ins0ch6\ngroup name is can7_ins0ch7\ngroup name is can8_ins0ch2\ngroup name is can9_ins0ch3\ngroup name is can5_ins0ch4\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u901a\u9053\u521d\u59cb\u5316\u4fe1\u606f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"[INFO][hb_ipcf_hal.cpp:282] [channel] can6_ins0ch6 [ins] 0 [id] 6 init success.\n[INFO][hb_ipcf_hal.cpp:333] [channel] can6_ins0ch6 [ins] 0 [id] 6 config success.\n[INFO][hb_ipcf_hal.cpp:282] [channel] can7_ins0ch7 [ins] 0 [id] 7 init success.\n[INFO][hb_ipcf_hal.cpp:333] [channel] can7_ins0ch7 [ins] 0 [id] 7 config success.\n[INFO][hb_ipcf_hal.cpp:282] [channel] can8_ins0ch2 [ins] 0 [id] 2 init success.\n[INFO][hb_ipcf_hal.cpp:333] [channel] can8_ins0ch2 [ins] 0 [id] 2 config success.\n[INFO][hb_ipcf_hal.cpp:282] [channel] can9_ins0ch3 [ins] 0 [id] 3 init success.\n[INFO][hb_ipcf_hal.cpp:333] [channel] can9_ins0ch3 [ins] 0 [id] 3 config success.\n[INFO][hb_ipcf_hal.cpp:282] [channel] can5_ins0ch4 [ins] 0 [id] 4 init success.\n[INFO][hb_ipcf_hal.cpp:333] [channel] can5_ins0ch4 [ins] 0 [id] 4 config success.\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u53d1\u9001\u7ebf\u7a0b\u53d1\u9001\u7684\u6570\u636e\u6253\u5370\uff0c\u53ef\u4ee5\u770b\u5230\u53d1\u5230\u6210\u529f\u5c06\u591a\u5c11\u5e27\u6570\u636e\u8f6c\u53d1\u5230MCU\uff0c\u901f\u7387\u5982\u4f55"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"[send_frame_data 266] [INFO]: Target can5_ins0ch4 Time: 0.005230s\n[send_frame_data 268] [INFO]: Send success count: 5 Total:5\n[send_frame_data 271] [INFO]: 61185.468750 byte/s -> 59.751434kb/s\n[send_frame_data 274] [INFO]: Sending FPS: 956.02 frames/s\n[send_frame_data 276] [INFO]: Send end, send package total: 5 frame total: 5\n[send_frame_data 278] [INFO]: Send thread exiting...\n[send_frame_data 266] [INFO]: Target can6_ins0ch6 Time: 0.005074s\n[send_frame_data 268] [INFO]: Send success count: 5 Total:5\n[send_frame_data 271] [INFO]: 63066.613281 byte/s -> 61.588490kb/s\n[send_frame_data 274] [INFO]: Sending FPS: 985.42 frames/s\n[send_frame_data 276] [INFO]: Send end, send package total: 5 frame total: 5\n[send_frame_data 278] [INFO]: Send thread exiting...\n[send_frame_data 266] [INFO]: Target can7_ins0ch7 Time: 0.004979s\n.....\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u63a5\u6536\u8d85\u65f6,\u8d77\u63a5\u6536\u7ebf\u7a0b\u540e\u4f1a\u7b49\u5f85\u63a5\u6536\u6570\u636e\uff0c\u957f\u65f6\u95f4\u6ca1\u6709\u63a5\u6536\u9519\u8bef\u4f1a\u62a5-303\u9519\u8bef\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5224\u65ad\u662f\u5426\u5b58\u5728\u5f02\u5e38\uff0c\u5f53\u8d85\u8fc7100s\u65f6\u5019\uff0c\u4f1a\u9000\u51fa\u7ebf\u7a0b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303\n[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303\n[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303\n[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303\n[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303\n[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303\n[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303\n[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303\n[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303\n[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303\n[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303\n[recv_frame_data 314] [INFO]: No data received for 100 seconds. Exiting thread.\n\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u6309ctrl+c\u9000\u51fa\u540e\u53ef\u4ee5\u770b\u5230\u5404\u4e2a\u63a5\u6536\u7ebf\u7a0b\u4e2d\u6536\u5230\u5305\u7684\u6570\u91cf\uff0c\u63a5\u6536\u7684\u6700\u5927\u5ef6\u8fdf(\u4ec5CAN FD\u652f\u6301)\uff0c\u7531\u4e8eCAN5\u6ca1\u6709\u63a5\u8bbe\u5907\uff0c\u6240\u4ee5\u63a5\u6536\u5230\u7684\u5305\u6570\u91cf\u4e3a0"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Target :can7_ins0ch7 recv frame num: 5 Total recv frame num: 5 Maximum transmission time:32209 us\nTarget :can6_ins0ch6 recv frame num: 5 Total recv frame num: 5 Maximum transmission time:41182 us\nTarget :can8_ins0ch2 recv frame num: 5 Total recv frame num: 5 Maximum transmission time:22676 us\nTarget :can9_ins0ch3 recv frame num: 5 Total recv frame num: 5 Maximum transmission time:11395 us\nTarget :can5_ins0ch4 recv frame num: 0 Total recv frame num: 5 Maximum transmission time:0 us\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u8d44\u6e90\u91ca\u653e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"[INFO][hb_ipcf_hal.cpp:553] [channel] can5_ins0ch4 [ins] 0 [id] 4 deinit success.\n[INFO][hb_ipcf_hal.cpp:553] [channel] can8_ins0ch2 [ins] 0 [id] 2 deinit success.\n[INFO][hb_ipcf_hal.cpp:553] [channel] can9_ins0ch3 [ins] 0 [id] 3 deinit success.\n[INFO][hb_ipcf_hal.cpp:553] [channel] can7_ins0ch7 [ins] 0 [id] 7 deinit success.\n[INFO][hb_ipcf_hal.cpp:553] [channel] can6_ins0ch6 [ins] 0 [id] 6 deinit success.\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u591acan\u7ec4\u7f51\u4f20\u8f93",children:"\u591acan\u7ec4\u7f51\u4f20\u8f93"}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsx)(e.p,{children:"\u6301\u7eed\u66f4\u65b0\u4e2d"})}),"\n",(0,l.jsx)(e.h4,{id:"\u5e94\u7528\u5c42\u4fee\u6539can\u6ce2\u7279\u7387\u7b49\u914d\u7f6e",children:"\u5e94\u7528\u5c42\u4fee\u6539can\u6ce2\u7279\u7387\u7b49\u914d\u7f6e"}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsx)(e.p,{children:"\u6301\u7eed\u66f4\u65b0\u4e2d"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5e93\u6587\u4ef6\u6253\u5370\u5f00\u5173",children:"\u5e93\u6587\u4ef6\u6253\u5370\u5f00\u5173"}),"\n",(0,l.jsx)(e.p,{children:"CAN_HAL_DEBUG_LEVEL \u662f\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\uff0c\u7528\u4e8e\u63a7\u5236\u5e93\u6587\u4ef6libhbcanhal.so\u65e5\u5fd7\u8f93\u51fa\u7684\u7ea7\u522b\u3002\u5b83\u7684\u4e0d\u540c\u503c\u4ee3\u8868\u4e0d\u540c\u7684\u65e5\u5fd7\u7ea7\u522b\uff0c\u8fd9\u4e9b\u7ea7\u522b\u51b3\u5b9a\u4e86\u54ea\u4e9b\u65e5\u5fd7\u4fe1\u606f\u4f1a\u88ab\u8bb0\u5f55\u4e0b\u6765"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"0 (log_trace): \u8ddf\u8e2a\u7ea7\u522b\u3002\n1 (log_debug): \u8c03\u8bd5\u7ea7\u522b\u3002\n2 (log_info): \u4fe1\u606f\u7ea7\u522b\u3002\n3 (log_warn): \u8b66\u544a\u7ea7\u522b\u3002\n4 (log_err): \u9519\u8bef\u7ea7\u522b\u3002\n5 (log_critical): \u81f4\u547d\u7ea7\u522b\u3002\n6 (log_never): \u4e0d\u6253\u5370\u4efb\u4f55\u65e5\u5fd7\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u901a\u8fc7\u8bbe\u7f6e CAN_HAL_DEBUG_LEVEL \u7684\u503c\uff0c\u53ef\u4ee5\u63a7\u5236\u65e5\u5fd7\u8f93\u51fa\u7684\u8be6\u7ec6\u7a0b\u5ea6\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a 2\uff0c\u90a3\u4e48\u53ea\u6709 log_info\u3001log_warn\u3001log_err \u548c log_critical \u7ea7\u522b\u7684\u65e5\u5fd7\u4f1a\u88ab\u6253\u5370"}),"\n",(0,l.jsx)(e.h3,{id:"mcu\u4fa7debug\u5e94\u7528\u8bf4\u660e",children:"MCU\u4fa7DEBUG\u5e94\u7528\u8bf4\u660e"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u8fdb\u5165MCU1\u7684\u63a7\u5236\u53f0"}),"\n",(0,l.jsx)(e.li,{children:"\u8f93\u5165\u547d\u4ee4\uff1acan_tran_debug"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"can_tran_debug\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"3",children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u5728 ",(0,l.jsx)(e.code,{children:"/sys/class/remoteproc/remoteproc_mcu1"})," \u8def\u5f84\u4e0b\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"cat log"})," \u547d\u4ee4\u67e5\u770b\u7ed3\u679c"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/s100_debug.jpg",alt:"Debug\u65e5\u5fd7"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3",children:"\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3"}),"\n",(0,l.jsx)(e.h4,{id:"void-can_initconst-can_configtype-config",children:"void Can_Init(const Can_ConfigType* Config)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aThis function initializes the module.\n\nSync/Async: Synchronous\nParameters(in)\n    Config: Pointer to driver configuration.\nParameters(inout)\n    None\nParameters(out)\n    None\nReturn value\uff1aNone\n"})}),"\n",(0,l.jsx)(e.h4,{id:"void-can_getversioninfostd_versioninfotype-versioninfo",children:"void Can_GetVersionInfo(Std_VersionInfoType* versioninfo)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aReturns the version information of this module.\n\nSync/Async: Synchronous\nParameters(in)\n    None\nParameters(inout)\n    None\nParameters(out)\n    versioninfo: Pointer to where to store the version information of this module.\nReturn value\uff1aNone\n"})}),"\n",(0,l.jsx)(e.h4,{id:"void-can_deinitvoid",children:"void Can_DeInit(void)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aThis function de-initializes the module.\n\nSync/Async: Synchronous\nParameters(in)\n    None\nParameters(inout)\n    None\nParameters(out)\n    None\nReturn value\uff1aNone\n"})}),"\n",(0,l.jsx)(e.h4,{id:"std_returntype-can_setcontrollermodeuint8-controller-can_controllerstatetype-transition",children:"Std_ReturnType Can_SetControllerMode(uint8 Controller, Can_ControllerStateType Transition)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aThis function performs software triggered state transitions of the CAN controller State machine.\n\nSync/Async: Synchronous\nParameters(in)\n    Controller: CAN controller for which the status shall be changed.\n    Transition: Transition value to request new CAN controller state.\nParameters(inout)\n    None\nParameters(out)\n    None\nReturn value\uff1aStd_ReturnType\n\tE_OK: request accepted.\n    E_NOT_OK: request not accepted, a development error occurred.\n"})}),"\n",(0,l.jsx)(e.h4,{id:"void-can_disablecontrollerinterruptsuint8-controller",children:"void Can_DisableControllerInterrupts(uint8 Controller)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aThis function disables all interrupts for this CAN controller.\n\nSync/Async: Synchronous\nParameters(in)\n    Controller: CAN controller for which interrupts shall be disabled.\nParameters(inout)\n    None\nParameters(out)\n    None\nReturn value\uff1aNone\n"})}),"\n",(0,l.jsx)(e.h4,{id:"void-can_enablecontrollerinterruptsuint8-controller",children:"void Can_EnableControllerInterrupts(uint8 Controller)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aThis function enables all allowed interrupts.\n\nSync/Async: Synchronous\nParameters(in)\n    Controller: CAN controller for which interrupts shall be re-enabled.\nParameters(inout)\n    None\nParameters(out)\n    None\nReturn value\uff1aNone\n"})}),"\n",(0,l.jsx)(e.h4,{id:"std_returntype-can_getcontrollererrorstateuint8-controllerid-can_errorstatetype-errorstateptr",children:"Std_ReturnType Can_GetControllerErrorState(uint8 ControllerId, Can_ErrorStateType* ErrorStatePtr)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aThis service obtains the error state of the CAN controller.\n\nSync/Async: Synchronous\nParameters(in)\n    ControllerId: Abstracted CanIf ControllerId which is assigned to a CAN controller, which is requested for ErrorState.\nParameters(inout)\n    None\nParameters(out)\n    ErrorStatePtr:Pointer to a memory location, where the error state of the CAN controller will be stored.\nReturn value\uff1aStd_ReturnType\n\tE_OK: Error state request has been accepted.\n    E_NOT_OK: Error state request has not been accepted.\n"})}),"\n",(0,l.jsx)(e.h4,{id:"std_returntype-can_getcontrollermodeuint8-controller-can_controllerstatetype-controllermodeptr",children:"Std_ReturnType Can_GetControllerMode(uint8 Controller, Can_ControllerStateType* ControllerModePtr)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aThis service reports about the current status of the requested CAN controller.\n\nSync/Async: Synchronous\nParameters(in)\n    Controller: CAN controller for which the status shall be requested.\nParameters(inout)\n    None\nParameters(out)\n    ControllerModePtr: Pointer to a memory location, where the current mode of the CAN controller will be stored.\nReturn value\uff1aStd_ReturnType\n    E_OK: Controller mode request has been accepted.\n    E_NOT_OK: Controller mode request has not been accepted.\n"})}),"\n",(0,l.jsx)(e.h4,{id:"std_returntype-can_getcontrollerrxerrorcounteruint8-controllerid-uint8-rxerrorcounterptr",children:"Std_ReturnType Can_GetControllerRxErrorCounter(uint8 ControllerId, uint8* RxErrorCounterPtr)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aReturns the Rx error counter for a CAN controller.\n             This value might not be available for all CAN controllers, in which case E_NOT_OK would be\n             returned.Please note that the value of the counter might not be correct at the moment the\n             API returns it, because the Rx counter is handled as ynchronously in hardware.Applications\n             should not trust this value for any assumption about the current bus state.\n\nSync/Async: Synchronous\nParameters(in)\n    ControllerId: CAN controller, whose current Rx error counter shall be acquired.\nParameters(inout)\n    None\nParameters(out)\n    RxErrorCounterPtr: Pointer to a memory location, where the current Rx error counter of the\n                       CAN controller will be stored.\nReturn value\uff1aStd_ReturnType\n    E_OK: Rx error counter available.\n    E_NOT_OK: Wrong ControllerId, or Rx error counter not available.\n"})}),"\n",(0,l.jsx)(e.h4,{id:"std_returntype-can_getcontrollertxerrorcounteruint8-controllerid-uint8-txerrorcounterptr",children:"Std_ReturnType Can_GetControllerTxErrorCounter(uint8 ControllerId, uint8* TxErrorCounterPtr)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aReturns the Tx error counter for a CAN controller. This value might not be available\n             for all CAN controllers, in which case E_NOT_OK would be returned.Please note that the\n             value of the counter might not be correct at the moment the API returns it, because the\n             Tx counter is handled as ynchronously in hardware.Applications should not trust this\n             value for any assumption about the current bus state.\n\nSync/Async: Synchronous\nParameters(in)\n    ControllerId: CAN controller, whose current Rx error counter shall be acquired.\nParameters(inout)\n    None\nParameters(out)\n    TxErrorCounterPtr:Pointer to a memory location, where the current Tx error counter\n                      of the CAN controller will be stored.\nReturn value\uff1aStd_ReturnType\n    E_OK: Rx error counter available.\n    E_NOT_OK: Wrong ControllerId, or Rx error counter not available.\n"})}),"\n",(0,l.jsx)(e.h4,{id:"std_returntypecan_writecan_hwhandletype-hth-const-can_pdutype-pduinfo",children:"Std_ReturnTypeCan_Write(Can_HwHandleType Hth, const Can_PduType* PduInfo)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aThis function is called by CanIf to pass a CAN message to CanDrv for tran smission.\n\nSync/Async: Synchronous\nParameters(in)\n    Hth:information which HW-transmit handle shall be used for transmit.Implicitly this is\n        also the information about the controller to use because the Hth numbers are unique\n        inside one hardware unit.\nParameters(inout)\n    None\nParameters(out)\n    None\nReturn value\uff1aStd_ReturnType\n    E_OK: Write command has been accepted.\n    E_NOT_OK: development error occurred.\n    CAN_BUSY: No TX hardware buffer available or pre-emptive call of Can_Write that can\u2019t be\n              implemented re-entrant (see Can_ReturnType).\n"})}),"\n",(0,l.jsx)(e.h4,{id:"void-can_mainfunction_writevoid",children:"void Can_MainFunction_Write(Void)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aThis function performs the polling of TX confirmation when CAN_TX_PROCESSING\n             is set to POLLING.\n\nSync/Async: Synchronous\nParameters(in)\n    None\nParameters(inout)\n    None\nParameters(out)\n    None\nReturn value: None\n"})}),"\n",(0,l.jsx)(e.h4,{id:"void-can_mainfunction_readvoid",children:"void Can_MainFunction_Read(Void)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aReturns the value of the specified CAN channel.This function performs the\n             polling of RX indications when CAN_RX_PROCESSING is set to POLLING.\n\nSync/Async: Synchronous\nParameters(in)\n    None\nParameters(inout)\n    None\nParameters(out)\n    None\nReturn value\uff1aNone\n"})}),"\n",(0,l.jsx)(e.h4,{id:"void-can_mainfunction_busoffvoid",children:"void Can_MainFunction_BusOff(Void)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aThis function performs the polling of bus-off events that are configured statically\n             as \u2018to be polled\u2019.\n\nSync/Async: Synchronous\nParameters(in)\n    None\nParameters(inout)\n    None\nParameters(out)\n    None\nReturn value\uff1aNone\n"})}),"\n",(0,l.jsx)(e.h4,{id:"void-can_mainfunction_modevoid",children:"void Can_MainFunction_Mode(Void)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"Description\uff1aThis function performs the polling of CAN controller mode transitions.\n\nSync/Async: Synchronous\nParameters(in)\n    None\nParameters(inout)\n    None\nParameters(out)\n    None\nReturn value\uff1aNone\n"})})]})}function h(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(o,{...n})}):o(n)}}}]);