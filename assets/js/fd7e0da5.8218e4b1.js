"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[49363],{28453:(e,d,n)=>{n.d(d,{R:()=>r,x:()=>c});var s=n(96540);const i={},l=s.createContext(i);function r(e){const d=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(d):{...d,...e}},[d,e])}function c(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(l.Provider,{value:d},e.children)}},91452:(e,d,n)=>{n.r(d),n.d(d,{assets:()=>o,contentTitle:()=>c,default:()=>t,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Advanced_development/hardware_development/rdk_x5/V4l2","title":"V4L2\u4f7f\u7528","description":"RDK X5\u652f\u6301V4L2\u63a5\u53e3\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7V4L2\u63a5\u53e3\u8bbf\u95eeRDK X5\u7684mipi\u63a5\u53e3\u6444\u50cf\u5934\uff0c\u83b7\u53d6VIN\u3001ISP\u3001VSE\u7b49\u9636\u6bb5\u7684\u56fe\u50cf\u6570\u636e\u3002","source":"@site/docs/07_Advanced_development/01_hardware_development/rdk_x5/V4l2.md","sourceDirName":"07_Advanced_development/01_hardware_development/rdk_x5","slug":"/Advanced_development/hardware_development/rdk_x5/V4l2","permalink":"/rdk_doc/Advanced_development/hardware_development/rdk_x5/V4l2","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1761551631000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"PoE\u4f9b\u7535\u4f7f\u7528","permalink":"/rdk_doc/Advanced_development/hardware_development/rdk_x5/POE"},"next":{"title":"\u786c\u4ef6\u8d44\u6599","permalink":"/rdk_doc/Advanced_development/hardware_development/rdk_x5_module/hardware"}}');var i=n(74848),l=n(28453);const r={sidebar_position:6},c="V4L2\u4f7f\u7528",o={},a=[{value:"\u80cc\u666f\u77e5\u8bc6",id:"\u80cc\u666f\u77e5\u8bc6",level:2},{value:"HBN\u6846\u67b6",id:"hbn\u6846\u67b6",level:3},{value:"\u6a21\u5f0f\u5207\u6362",id:"\u6a21\u5f0f\u5207\u6362",level:2},{value:"\u6a21\u5f0f\u4ecb\u7ecd",id:"\u6a21\u5f0f\u4ecb\u7ecd",level:2},{value:"\u914d\u7f6eCamera",id:"\u914d\u7f6ecamera",level:2},{value:"\u8bbe\u5907\u62d3\u6251",id:"\u8bbe\u5907\u62d3\u6251",level:2},{value:"\u4f7f\u7528\u8bf4\u660e",id:"\u4f7f\u7528\u8bf4\u660e",level:2},{value:"V4L2-CTL\u6307\u4ee4",id:"v4l2-ctl\u6307\u4ee4",level:3},{value:"V4L2 \u793a\u4f8b\u4ee3\u7801",id:"v4l2-\u793a\u4f8b\u4ee3\u7801",level:3},{value:"\u591a\u5a92\u4f53\u5e94\u7528",id:"\u591a\u5a92\u4f53\u5e94\u7528",level:3},{value:"\u5df2\u77e5\u95ee\u9898",id:"\u5df2\u77e5\u95ee\u9898",level:2}];function h(e){const d={admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.header,{children:(0,i.jsx)(d.h1,{id:"v4l2\u4f7f\u7528",children:"V4L2\u4f7f\u7528"})}),"\n",(0,i.jsx)(d.p,{children:"RDK X5\u652f\u6301V4L2\u63a5\u53e3\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7V4L2\u63a5\u53e3\u8bbf\u95eeRDK X5\u7684mipi\u63a5\u53e3\u6444\u50cf\u5934\uff0c\u83b7\u53d6VIN\u3001ISP\u3001VSE\u7b49\u9636\u6bb5\u7684\u56fe\u50cf\u6570\u636e\u3002"}),"\n",(0,i.jsx)(d.h2,{id:"\u80cc\u666f\u77e5\u8bc6",children:"\u80cc\u666f\u77e5\u8bc6"}),"\n",(0,i.jsx)(d.h3,{id:"hbn\u6846\u67b6",children:"HBN\u6846\u67b6"}),"\n",(0,i.jsxs)(d.p,{children:["HBN\u6846\u67b6\u8986\u76d6\u4e86 Camera Sensor \u91c7\u96c6\u94fe\u8def\u4e2d\u5927\u90e8\u5206\u7684\u6a21\u5757\uff0c\u5305\u62ec ",(0,i.jsx)(d.code,{children:"VIN"}),"\u3001 ",(0,i.jsx)(d.code,{children:"ISP"}),"\u3001 ",(0,i.jsx)(d.code,{children:"VSE"}),"\u3001 ",(0,i.jsx)(d.code,{children:"GDC"}),"\u3001 ",(0,i.jsx)(d.code,{children:"N2D"}),"\u3002\u5176\u4e2d",(0,i.jsx)(d.code,{children:"VIN"}),"\u3001 ",(0,i.jsx)(d.code,{children:"ISP"}),"\u3001 ",(0,i.jsx)(d.code,{children:"VSE"}),"\u53ef\u4ee5\u901a\u8fc7V4L2\u63a5\u53e3\u8bbf\u95ee\u3002"]}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"\u6a21\u5757"}),(0,i.jsx)(d.th,{children:"\u5168\u79f0"}),(0,i.jsx)(d.th,{children:"\u89e3\u91ca"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"VIN"}),(0,i.jsx)(d.td,{children:"Video Input"}),(0,i.jsx)(d.td,{children:"\u8f6f\u4ef6\u6982\u5ff5\uff0c\u5305\u542b MIPI\u3001 SIF\uff0c\u63a5\u6536\u5355\u8def\u6216\u591a\u8def Camera sensor \u6570\u636e\uff0c\u76f4\u63a5\u9001\u7ed9\u4e0b\u6e38 ISP \u6216\u5199\u5230 DDR"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"SIF"}),(0,i.jsx)(d.td,{children:"Sensor Interface"}),(0,i.jsx)(d.td,{children:"\u8854\u63a5 MIPI \u53e3\uff0c\u628a MIPI \u63a5\u53e3\u6536\u5230\u7684\u6570\u636e\u5e27\u9001\u7ed9\u4e0b\u6e38 ISP \u6216\u76f4\u63a5\u5199\u5230 DDR"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"ISP"}),(0,i.jsx)(d.td,{children:"Image Signal Processor"}),(0,i.jsx)(d.td,{children:"\u56fe\u50cf\u4fe1\u53f7\u5904\u7406\u5668"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"VSE"}),(0,i.jsx)(d.td,{children:"Video Scaler"}),(0,i.jsx)(d.td,{children:"\u56fe\u50cf\u7684\u88c1\u526a\u3001\u7f29\u653e\u3001\u989c\u8272\u7a7a\u95f4\u8f6c\u6362"})]})]})]}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.code,{children:"VIN"})," \u7528\u4e8e\u56fe\u5f62\u91c7\u96c6\uff0c\u53ef\u4ee5\u4ece4\u8def",(0,i.jsx)(d.code,{children:"SIF"}),"\u63a5\u53e3\u4e2d\u91c7\u96c6\u5230\u539f\u751f\u56fe\u5f62\uff0c\u4e00\u822c\u4e3aRAW\u683c\u5f0f\uff1b"]}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.code,{children:"ISP"})," (Image Signal Processor) \u7528\u4e8e\u56fe\u50cf\u4fe1\u53f7\u5904\u7406\uff0cRDK X5 \u652f\u6301\u4e86\u591a\u6b3esensor\uff0c\u5747\u5df2\u5b8c\u6210ISP\u8c03\u8bd5\uff0c\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\u5230\u5904\u7406\u540e\u7684NV12\u683c\u5f0f\u56fe\u50cf\uff1b"]}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.code,{children:"VSE"})," (Video Scale Enginer) \u7528\u4e8e\u56fe\u50cf\u7f29\u653e \u652f\u6301 6 \u4e2a\u7f29\u653e\u901a\u9053\uff0c\u53ef\u4ee5\u83b7\u53d6\u5230\u5904\u7406\u540e\u7684NV12\u683c\u5f0f\u56fe\u50cf\uff0c\u901a\u9053\u7279\u6027\u5982\u4e0b:"]}),"\n",(0,i.jsxs)(d.ul,{children:["\n",(0,i.jsxs)(d.li,{children:["\n",(0,i.jsx)(d.p,{children:"\u6700\u5927\u5904\u7406\u80fd\u529b: 3840x2160@60fps"}),"\n"]}),"\n",(0,i.jsxs)(d.li,{children:["\n",(0,i.jsx)(d.p,{children:"\u652f\u6301\u8f93\u5165\u88c1\u526a\uff0c\u5206\u522b\u5728\u6c34\u5e73\u548c\u5782\u76f4\u65b9\u5411\u4e0a\u8fdb\u884c\u7f29\u653e\uff0c\u5e76\u4e14\u5bf9\u8272\u5ea6\u548c\u4eae\u5ea6\u5206\u91cf\u8fdb\u884c\u5355\u72ec\u5904\u7406"}),"\n"]}),"\n",(0,i.jsxs)(d.li,{children:["\n",(0,i.jsx)(d.p,{children:"5\u4e2a downscale \u901a\u9053"}),"\n"]}),"\n",(0,i.jsxs)(d.li,{children:["\n",(0,i.jsx)(d.p,{children:"\u6700\u5927\u5206\u8fa8\u7387\u652f\u6301\u5206\u522b\u4e3a 4K/1080P/1080P/720P/720P"}),"\n"]}),"\n",(0,i.jsxs)(d.li,{children:["\n",(0,i.jsx)(d.p,{children:"\u6700\u5c0f\u5206\u8fa8\u7387\u4e3a 64x64\uff0c\u652f\u6301\u4efb\u610f downscale factor"}),"\n"]}),"\n",(0,i.jsxs)(d.li,{children:["\n",(0,i.jsx)(d.p,{children:"1\u4e2a upscale \u901a\u9053"}),"\n"]}),"\n",(0,i.jsxs)(d.li,{children:["\n",(0,i.jsx)(d.p,{children:"\u6700\u5927\u5206\u8fa8\u7387\u652f\u6301 4K\uff0c\u6700\u5927\u653e\u5927\u500d\u6570 4X, \u653e\u5927\u500d\u6570\u652f\u6301 0 - 4"}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"\u8f93\u51fa\u901a\u9053\u7f16\u53f7"}),(0,i.jsx)(d.th,{children:"\u7c7b\u578b"}),(0,i.jsx)(d.th,{children:"\u901a\u9053\u529f\u80fd"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"0"}),(0,i.jsx)(d.td,{children:"offline"}),(0,i.jsx)(d.td,{children:"4K Downscale"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"1"}),(0,i.jsx)(d.td,{children:"offline"}),(0,i.jsx)(d.td,{children:"1080P Downscale"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"2"}),(0,i.jsx)(d.td,{children:"offline"}),(0,i.jsx)(d.td,{children:"1080P Downscale"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"3"}),(0,i.jsx)(d.td,{children:"offline"}),(0,i.jsx)(d.td,{children:"720P Downscale"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"4"}),(0,i.jsx)(d.td,{children:"offline"}),(0,i.jsx)(d.td,{children:"720P Downscale"})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:"5"}),(0,i.jsx)(d.td,{children:"offline"}),(0,i.jsx)(d.td,{children:"4K Upscale"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(d.h2,{id:"\u6a21\u5f0f\u5207\u6362",children:"\u6a21\u5f0f\u5207\u6362"}),"\n",(0,i.jsxs)(d.p,{children:["\u4f7f\u7528",(0,i.jsx)(d.code,{children:"srpi-config"}),"\u914d\u7f6ecamera\u91c7\u96c6\u6a21\u5f0f",(0,i.jsx)(d.br,{}),"\n","\u8fdb\u5165",(0,i.jsx)(d.code,{children:"3 Interface Options"}),"->",(0,i.jsx)(d.code,{children:"I7 V4L2"}),(0,i.jsx)(d.br,{}),"\n","\u9009\u62e9",(0,i.jsx)(d.code,{children:"I1 V4L2 Enable/disable V4L2 interface for camera"}),"\n",(0,i.jsx)(d.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/01_hardware_development/rdk_x5/img-20250523-191348.png",alt:"img-20250523-191348"})]}),"\n",(0,i.jsx)(d.h2,{id:"\u6a21\u5f0f\u4ecb\u7ecd",children:"\u6a21\u5f0f\u4ecb\u7ecd"}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.code,{children:"HBN"})," ",(0,i.jsx)(d.strong,{children:"\u5e38\u89c4\u6a21\u5f0f"}),(0,i.jsx)(d.br,{}),"\n","Camera\u662f\u5355\u72ec\u4e00\u5957API\uff0cCamera\u4e4b\u540e\u7684\u6a21\u5757\u7528vnode\u6765\u62bd\u8c61\uff0cvnode\u62bd\u8c61\u7684\u6a21\u5757\u5305\u62ecVIN\u3001ISP\u3001VSE\u3001GDC\u3001Codec\u3002 \u591a\u4e2avnode\u7ec4\u6210\u4e00\u6761vflow\uff08\u7c7b\u4f3c\u4e8e\u4e00\u6761pipeline\uff09\u3002Camera\u548cVIN\u901a\u8fc7attach\u63a5\u53e3\u7ed1\u5b9a\u8d77\u6765\u3002 \u7528\u6237\u53ea\u9700\u8981\u8c03\u7528HBN\u63a5\u53e3\u5b8c\u6210\u6a21\u5757\u7684\u521d\u59cb\u5316\u548c\u7ed1\u5b9a\uff0cvflow\u5efa\u7acb\u5e76\u542f\u52a8\u540e\uff0c\u7528\u6237\u65e0\u987b\u5173\u5fc3\u6570\u636e\u5e27\u7684\u4f20\u9012\uff0cX5\u5185\u90e8\u4f1a\u5c06\u6570\u636e\u5e27\u7531\u4e0a\u6e38\u4f20\u9012\u5230\u4e0b\u6e38\u3002"]}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.code,{children:"V4L2 sif-isp-vse"})," ",(0,i.jsx)(d.strong,{children:"V4L2\u6570\u636e\u6d41\u6a21\u5f0f"}),(0,i.jsx)(d.br,{}),"\n","camera \u901a\u8fc7 V4l2 snesor \u9a71\u52a8\u6dfb\u52a0\uff0cVIN\u3001ISP\u3001VSE\u90fd\u63d0\u4f9b\u4e86\u5bf9\u5e94\u7684v4l2 video\u8bbe\u5907\u8282\u70b9\uff0c\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7v4l2 api\u83b7\u53d6\u76f8\u5e94\u7684\u6570\u636e\u3002"]}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.code,{children:"V4L2 vse alone"})," ",(0,i.jsx)(d.strong,{children:"V4L2 VSE \u5355\u72ec\u4f7f\u7528\u6a21\u5f0f"}),(0,i.jsx)(d.br,{}),"\n","\u63d0\u4f9bVSE\u901a\u9053\u7684v4l2 video\u8bbe\u5907\u8282\u70b9\uff0c\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7v4l2 api\u56de\u704c\u56fe\u50cf\u7ed9VSE\u6a21\u5757\u8fdb\u884c\u5904\u7406\u3002"]}),"\n",(0,i.jsx)(d.h2,{id:"\u914d\u7f6ecamera",children:"\u914d\u7f6eCamera"}),"\n",(0,i.jsxs)(d.p,{children:["\u5982\u679c\u9009\u62e9",(0,i.jsx)(d.code,{children:"sif-isp-vse"})," \u4f1a\u5f39\u51faCAM0\uff0cCAM1\u6444\u50cf\u5934\u9009\u62e9",(0,i.jsx)(d.br,{}),"\n","X5 RDK cam0 \u9760\u8fd1\u7f51\u53e3\uff0ccam1 \u8fdc\u79bb\u7f51\u53e3\uff1b",(0,i.jsx)(d.br,{}),"\n","X5 MD \u53ef\u4ee5\u89c2\u5bdf\u8f7d\u677f\u7684\u4e1d\u5370\uff1b"]}),"\n",(0,i.jsx)(d.p,{children:(0,i.jsx)(d.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/01_hardware_development/rdk_x5/img-20250523-191636.png",alt:"img-20250523-191636"})}),"\n",(0,i.jsx)(d.p,{children:(0,i.jsx)(d.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/01_hardware_development/rdk_x5/img-20250523-191648.png",alt:"img-20250523-191648"})}),"\n",(0,i.jsxs)(d.p,{children:["\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u91cd\u542f\u677f\u5361\uff1b",(0,i.jsx)(d.br,{}),"\n","\u786e\u8ba4V4L2\u6a21\u5f0f\u751f\u6548\uff1a",(0,i.jsx)(d.br,{}),"\n","\u4f7f\u7528lsmod \u67e5\u770b\u9a71\u52a8\uff0c\u53ef\u4ee5\u770b\u5230v4l\u76f8\u5173\u9a71\u52a8\uff0c\u548csensor\u76f8\u5173\u9a71\u52a8"]}),"\n",(0,i.jsx)(d.p,{children:(0,i.jsx)(d.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/01_hardware_development/rdk_x5/img-20250523-1918.png",alt:"img-20250523-1918"})}),"\n",(0,i.jsx)(d.h2,{id:"\u8bbe\u5907\u62d3\u6251",children:"\u8bbe\u5907\u62d3\u6251"}),"\n",(0,i.jsxs)(d.p,{children:["\u5728",(0,i.jsx)(d.code,{children:"V4L2 sif-isp-vse"}),"\u6a21\u5f0f\u751f\u6548\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u8bbe\u5907\u62d3\u6251\u56fe\uff0c\u5b83\u5c55\u793a\u4e86 /dev/media0 \u8bbe\u5907\u7684 \u5a92\u4f53\u7ba1\u9053\uff08Media Pipeline\uff09 \u7ed3\u6784\uff0c\u5305\u62ec \u4f20\u611f\u5668\u3001ISP\u3001\u89c6\u9891\u8282\u70b9\u3001\u6570\u636e\u6d41\u8def\u5f84 \u7b49\u4fe1\u606f\u3002"]}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-bash",children:"media-ctl -d /dev/media0 --print-dot > media0.dot\ndot -Tpng media0.dot -o media0.png\n"})}),"\n",(0,i.jsx)(d.p,{children:(0,i.jsx)(d.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/01_hardware_development/rdk_x5/img-media0.png",alt:"img-media0"})}),"\n",(0,i.jsx)(d.p,{children:"\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u4e0b\u8868\u4e2d\u67e5\u8be2\uff1a"}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-bash",children:'VIDEO_DEV_CSI0_SIF "/dev/video0"\nVIDEO_DEV_CSI0_ISP "/dev/video4"\nVIDEO_DEV_CSI0_VSE0 "/dev/video8"\nVIDEO_DEV_CSI0_VSE1 "/dev/video9"\nVIDEO_DEV_CSI0_VSE2 "/dev/video10"\nVIDEO_DEV_CSI0_VSE3 "/dev/video11"\nVIDEO_DEV_CSI0_VSE4 "/dev/video12"\nVIDEO_DEV_CSI0_VSE5 "/dev/video13"\n\nVIDEO_DEV_CSI1_SIF "/dev/video1"\nVIDEO_DEV_CSI1_ISP "/dev/video5"\nVIDEO_DEV_CSI1_VSE0 "/dev/video14"\nVIDEO_DEV_CSI1_VSE1 "/dev/video15"\nVIDEO_DEV_CSI1_VSE2 "/dev/video16"\nVIDEO_DEV_CSI1_VSE3 "/dev/video17"\nVIDEO_DEV_CSI1_VSE4 "/dev/video18"\nVIDEO_DEV_CSI1_VSE5 "/dev/video19"\n\nVIDEO_DEV_CSI2_SIF "/dev/video2"\nVIDEO_DEV_CSI2_ISP "/dev/video6"\nVIDEO_DEV_CSI2_VSE0 "/dev/video20"\nVIDEO_DEV_CSI2_VSE1 "/dev/video21"\nVIDEO_DEV_CSI2_VSE2 "/dev/video22"\nVIDEO_DEV_CSI2_VSE3 "/dev/video23"\nVIDEO_DEV_CSI2_VSE4 "/dev/video24"\nVIDEO_DEV_CSI2_VSE5 "/dev/video25"\n\nVIDEO_DEV_CSI3_SIF "/dev/video3"\nVIDEO_DEV_CSI3_ISP "/dev/video7"\nVIDEO_DEV_CSI3_VSE0 "/dev/video26"\nVIDEO_DEV_CSI3_VSE1 "/dev/video27"\nVIDEO_DEV_CSI3_VSE2 "/dev/video28"\nVIDEO_DEV_CSI3_VSE3 "/dev/video29"\nVIDEO_DEV_CSI3_VSE4 "/dev/video30"\nVIDEO_DEV_CSI3_VSE5 "/dev/video31"\n'})}),"\n",(0,i.jsx)(d.p,{children:"\u5bf9\u4e8eRDK \u677f\u5361\u6765\u8bf4\uff0c\u62d3\u6251\u5173\u7cfb\u53ef\u4ee5\u7b80\u5316\u4e3a"}),"\n",(0,i.jsx)(d.p,{children:(0,i.jsx)(d.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/01_hardware_development/rdk_x5/image-v4l2-media.png",alt:"image-v4l2-media"})}),"\n",(0,i.jsx)(d.h2,{id:"\u4f7f\u7528\u8bf4\u660e",children:"\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,i.jsx)(d.h3,{id:"v4l2-ctl\u6307\u4ee4",children:"V4L2-CTL\u6307\u4ee4"}),"\n",(0,i.jsxs)(d.p,{children:["1\uff0c\u4f7f\u7528v4l2-ctl --list-formats-ext \u67e5\u8be2\u652f\u6301\u7684\u5206\u8fa8\u7387\uff0c\u7f16\u7801\u65b9\u5f0f\uff0c\u4e5f\u8ba9\u9a71\u52a8\u5b8c\u6210\u521d\u59cb\u5316\uff1b",(0,i.jsx)(d.br,{}),"\n","2\uff0c\u4f7f\u7528v4l2-ctl -d /dev/video4\u83b7\u53d6\u89c6\u9891\u6570\u636e;"]}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-bash",children:"v4l2-ctl --list-formats-ext --device /dev/video4\nv4l2-ctl -d /dev/video4 \\\n        --set-fmt-video=width=640,height=480,pixelformat=NV12 \\\n        --stream-mmap=3 \\\n        --stream-skip=3 \\\n--stream-to=/tmp/nv12.yuv \\\n        --stream-count=1 \\\n        --stream-poll\n"})}),"\n",(0,i.jsx)(d.h3,{id:"v4l2-\u793a\u4f8b\u4ee3\u7801",children:"V4L2 \u793a\u4f8b\u4ee3\u7801"}),"\n",(0,i.jsx)(d.p,{children:"\u793a\u4f8b\u4ee3\u7801\u4ee5\u6e90\u7801\u5f62\u5f0f\u63d0\u4f9b\uff0c\u9700\u8981\u4f7f\u7528 make \u547d\u4ee4\u8fdb\u884c\u7f16\u8bd1\u540e\u8fd0\u884c\uff1a"}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-bash",children:"cd /app/cdev_demo/v4l2/\nsudo make\n"})}),"\n",(0,i.jsx)(d.p,{children:(0,i.jsx)(d.strong,{children:"\u53c2\u6570\u8bf4\u660e"})}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-bash",children:"-w sensor\u8f93\u51fa\u5bbd\n-h sensor\u8f93\u51fa\u9ad8\n-c \u91c7\u96c6\u56fe\u7247\u6570\u91cf\n-n sensor\u91c7\u96c6video\u8282\u70b9\n-o \u8f93\u5165NV12\u56fe\u50cfvideo\u8282\u70b9\n-i \u8f93\u5165NV12\u56fe\u50cf\u8def\u5f84\n"})}),"\n",(0,i.jsxs)(d.p,{children:["1,",(0,i.jsx)(d.code,{children:"V4L2 sif-isp-vse"}),"\u6a21\u5f0f \u91c7\u96c6\u56fe\u50cf\uff0c\u4fdd\u5b58\u4e3a\u6587\u4ef6"]}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-bash",children:"./v4l2 -w 1920 -h 1080 -c 10 -n 4\n"})}),"\n",(0,i.jsxs)(d.p,{children:["2,",(0,i.jsx)(d.code,{children:"V4L2 vse alone"}),"\u6a21\u5f0f,\u5355\u72ec\u4f7f\u7528VSE\u8282\u70b9\uff0c1080p.yuv\u4f5c\u4e3a\u8f93\u5165\u56fe\u50cf\uff0c\u7f29\u653e\u540e\u7684\u56fe\u7247\u4fdd\u5b58\u4e3a\u6587\u4ef6"]}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-bash",children:"./v4l2 -w 1920 -h 1080 -c 10 -n 2 -o 2 -i ./1080p.yuv\n"})}),"\n",(0,i.jsx)(d.h3,{id:"\u591a\u5a92\u4f53\u5e94\u7528",children:"\u591a\u5a92\u4f53\u5e94\u7528"}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.code,{children:"hbn"}),"\u6a21\u5f0f\u548c",(0,i.jsx)(d.code,{children:"V4L2 sif-isp-vse"}),"\u6a21\u5f0f\u4f7f\u7528\u540c\u4e00\u5957\u793a\u4f8b\u7a0b\u5e8f\uff0chobot-spdev\u4f1a\u6839\u636e\u5f53\u524d\u7684\u9a71\u52a8\u81ea\u52a8\u9009\u62e9\u5de5\u4f5c\u6a21\u5f0f\uff0c\u4e24\u8005\u7684\u6253\u5370\u4fe1\u606f\u7565\u6709\u4e0d\u540c"]}),"\n",(0,i.jsx)(d.admonition,{title:"\u6ce8\u610f",type:"info",children:(0,i.jsxs)(d.p,{children:["\u591a\u5a92\u4f53\u793a\u4f8b\u4f1a\u6839\u636e",(0,i.jsx)(d.code,{children:"srpi-config"}),"\u914d\u7f6e\u81ea\u52a8\u9009\u62e9\u6444\u50cf\u5934\uff0c\u8bf7\u786e\u4fdd\u6444\u50cf\u5934\u914d\u7f6e\u6b63\u786e\u3002\u5982\u679c",(0,i.jsx)(d.code,{children:"cam0"})," ",(0,i.jsx)(d.code,{children:"cam1"}),"\u90fd\u914d\u7f6e\uff0c\u5219\u9ed8\u8ba4\u9009\u62e9",(0,i.jsx)(d.code,{children:"cam1"})]})}),"\n",(0,i.jsx)(d.p,{children:(0,i.jsx)(d.strong,{children:"\u652f\u6301\u7684\u4f8b\u7a0b"})}),"\n",(0,i.jsx)(d.p,{children:"\u6d89\u53ca\u5230hdmi\u663e\u793a\uff0c\u9700\u8981\u5148\u5173\u95ed\u684c\u9762"}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-bash",children:"sudo systemctl stop lightdm\n"})}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-bash",children:"/app/cdev_demo/vio2display\n/app/cdev_demo/vio_capture\n/app/cdev_demo/vio2encoder\n/app/cdev_demo/bpu ./sample -f /app/model/basic/yolov5s_672x672_nv12.bin -m 0\n/app/pydev_demo/03_mipi_camera_sample\n"})}),"\n",(0,i.jsx)(d.h2,{id:"\u5df2\u77e5\u95ee\u9898",children:"\u5df2\u77e5\u95ee\u9898"}),"\n",(0,i.jsxs)(d.p,{children:["1\uff0c\u53d6VSE\u6d41\u65f6\uff0c\u5f3a\u5236\u9009\u62e91920x1080\u5206\u8fa8\u7387\u7684ISP sensor \u914d\u7f6e\u6587\u4ef6\uff1b",(0,i.jsx)(d.br,{}),"\n","2\uff0c",(0,i.jsx)(d.code,{children:"V4L2 vse alone"}),"\u6a21\u5f0f\uff0c\u4ec5\u652f\u6301\u4f7f\u7528VSE\u901a\u90532\uff0c\u56de\u704c\u56fe\u50cf\uff0c\u83b7\u53d6\u5904\u7406\u7ed3\u679c\uff1b"]})]})}function t(e={}){const{wrapper:d}={...(0,l.R)(),...e.components};return d?(0,i.jsx)(d,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);