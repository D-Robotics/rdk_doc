"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[49972],{25713:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>r,contentTitle:()=>a,default:()=>o,frontMatter:()=>d,metadata:()=>c,toc:()=>p});const c=JSON.parse('{"id":"Advanced_development/linux_development/driver_development_s100/driver_ipc","title":"IPC\u6a21\u5757\u4ecb\u7ecd","description":"IPC\uff08Inter-Processor Communication\uff09\u6a21\u5757\u662f\u7528\u4e8e\u591a\u6838\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u652f\u6301\u540c\u6784\u6838\u548c\u5f02\u6784\u6838\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u8f6f\u4ef6\u4e0a\u57fa\u4e8ebuffer-ring\u8fdb\u884c\u5171\u4eab\u5185\u5b58\u7684\u7ba1\u7406\uff0c\u786c\u4ef6\u4e0a\u57fa\u4e8eMailBox\u5b9e\u73b0\u6838\u95f4\u4e2d\u65ad\u3002IPCF\u5177\u6709\u591a\u8def\u901a\u9053\uff0c\u5927\u6570\u636e\u4f20\u8f93\uff0c\u9002\u7528\u591a\u79cd\u5e73\u53f0\u7684\u7279\u70b9\u3002RPMSG\u57fa\u4e8e\u5f00\u6e90\u534f\u8bae\u6846\u67b6\uff0c\u652f\u6301Acore\u4e0eVDSP\u7684\u6838\u95f4\u901a\u4fe1\u3002","source":"@site/docs_s/07_Advanced_development/02_linux_development/04_driver_development_s100/06_driver_ipc.md","sourceDirName":"07_Advanced_development/02_linux_development/04_driver_development_s100","slug":"/Advanced_development/linux_development/driver_development_s100/driver_ipc","permalink":"/rdk_doc/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_ipc","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1751967390000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Pinctrl\u8c03\u8bd5\u6307\u5357","permalink":"/rdk_doc/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_pinctrl_dev"},"next":{"title":"SPI\u8c03\u8bd5\u6307\u5357","permalink":"/rdk_doc/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_spi_dev"}}');var l=i(74848),s=i(28453);const d={sidebar_position:6},a="IPC\u6a21\u5757\u4ecb\u7ecd",r={},p=[{value:"IPCF\u8f6f\u786c\u4ef6\u7ec4\u4ef6\u6846\u56fe",id:"ipcf\u8f6f\u786c\u4ef6\u7ec4\u4ef6\u6846\u56fe",level:2},{value:"IPC\u5178\u578b\u4f7f\u7528\u573a\u666f",id:"ipc\u5178\u578b\u4f7f\u7528\u573a\u666f",level:2},{value:"IPC\u5b9e\u4f8b\u5206\u914d\u65b9\u6848",id:"ipc\u5b9e\u4f8b\u5206\u914d\u65b9\u6848",level:2},{value:"Acore\u4fa7\u914d\u7f6e\u5b9e\u4f8b\u65b9\u6cd5",id:"acore\u4fa7\u914d\u7f6e\u5b9e\u4f8b\u65b9\u6cd5",level:3},{value:"\u8bbe\u5907\u6811\u914d\u7f6e\u8bf4\u660e",id:"\u8bbe\u5907\u6811\u914d\u7f6e\u8bf4\u660e",level:3},{value:"\u7528\u6237\u6001IPC\u5e94\u7528\u548c\u914d\u7f6e\u6587\u4ef6\u7684\u4f7f\u7528\u65b9\u6cd5",id:"\u7528\u6237\u6001ipc\u5e94\u7528\u548c\u914d\u7f6e\u6587\u4ef6\u7684\u4f7f\u7528\u65b9\u6cd5",level:2},{value:"\u786c\u4ef6\u6570\u636e\u6d41\u8bf4\u660e",id:"\u786c\u4ef6\u6570\u636e\u6d41\u8bf4\u660e",level:3},{value:"Acore\u4fa7Sample\u4ee3\u7801\u4f4d\u7f6e\u4e0e\u76ee\u5f55\u7ed3\u6784",id:"acore\u4fa7sample\u4ee3\u7801\u4f4d\u7f6e\u4e0e\u76ee\u5f55\u7ed3\u6784",level:3},{value:"API\u6d41\u7a0b\u8bf4\u660e",id:"api\u6d41\u7a0b\u8bf4\u660e",level:3},{value:"\u901a\u8def\u914d\u7f6e",id:"\u901a\u8def\u914d\u7f6e",level:3},{value:"\u5b9e\u4f8b\u8bf4\u660e",id:"\u5b9e\u4f8b\u8bf4\u660e",level:3},{value:"C++ \u5e94\u7528",id:"c-\u5e94\u7528",level:3},{value:"RunCmd\u5e94\u7528",id:"runcmd\u5e94\u7528",level:4},{value:"Uart\u900f\u4f20",id:"uart\u900f\u4f20",level:4},{value:"Python\u5e94\u7528",id:"python\u5e94\u7528",level:3},{value:"Acore\u4e0eMCU\u7684\u4f20\u8f93\u6d41\u7a0b",id:"acore\u4e0emcu\u7684\u4f20\u8f93\u6d41\u7a0b",level:2},{value:"MCU\u53d1\u9001\u6570\u636e\u5230Acore",id:"mcu\u53d1\u9001\u6570\u636e\u5230acore",level:3},{value:"Acore\u53d1\u9001\u6570\u636e\u5230MCU",id:"acore\u53d1\u9001\u6570\u636e\u5230mcu",level:3},{value:"IPCFHAL\u63a5\u53e3\u4f7f\u7528\u5e8f\u5217",id:"ipcfhal\u63a5\u53e3\u4f7f\u7528\u5e8f\u5217",level:3},{value:"IPCFHAL\u4f7f\u7528\u6ce8\u610f\u4e8b\u9879",id:"ipcfhal\u4f7f\u7528\u6ce8\u610f\u4e8b\u9879",level:3},{value:"IPCFHAL\u8c03\u8bd5\u65b9\u6cd5",id:"ipcfhal\u8c03\u8bd5\u65b9\u6cd5",level:3},{value:"\u8c03\u8bd5\u65e5\u5fd7",id:"\u8c03\u8bd5\u65e5\u5fd7",level:4},{value:"error code (api \u8fd4\u56de\u503c)",id:"error-code-api-\u8fd4\u56de\u503c",level:4},{value:"sysfs\u8c03\u8bd5\u8282\u70b9(Acore\u4fa7)",id:"sysfs\u8c03\u8bd5\u8282\u70b9acore\u4fa7",level:2},{value:"statistic\u8c03\u8bd5\u8282\u70b9",id:"statistic\u8c03\u8bd5\u8282\u70b9",level:3},{value:"\u3010\u8282\u70b9\u8def\u5f84\u3011",id:"\u8282\u70b9\u8def\u5f84",level:4},{value:"\u3010\u8282\u70b9\u4f5c\u7528\u3011",id:"\u8282\u70b9\u4f5c\u7528",level:4},{value:"\u3010\u8282\u70b9\u4f7f\u7528\u3011",id:"\u8282\u70b9\u4f7f\u7528",level:4},{value:"\u3010log\u3011",id:"log",level:4},{value:"tsdump\u8c03\u8bd5\u8282\u70b9",id:"tsdump\u8c03\u8bd5\u8282\u70b9",level:3},{value:"\u3010\u8282\u70b9\u8def\u5f84\u3011",id:"\u8282\u70b9\u8def\u5f84-1",level:4},{value:"\u3010\u8282\u70b9\u4f5c\u7528\u3011",id:"\u8282\u70b9\u4f5c\u7528-1",level:4},{value:"\u3010\u8282\u70b9\u4f7f\u7528\u3011",id:"\u8282\u70b9\u4f7f\u7528-1",level:4},{value:"\u3010log\u3011",id:"log-1",level:4},{value:"\u3010\u8282\u70b9\u8def\u5f84\u3011",id:"\u8282\u70b9\u8def\u5f84-2",level:4},{value:"\u3010\u8282\u70b9\u4f5c\u7528\u3011",id:"\u8282\u70b9\u4f5c\u7528-2",level:4},{value:"\u3010\u8282\u70b9\u4f7f\u7528\u3011",id:"\u8282\u70b9\u4f7f\u7528-2",level:4},{value:"\u3010log\u3011",id:"log-2",level:4},{value:"rdump\u8c03\u8bd5\u8282\u70b9",id:"rdump\u8c03\u8bd5\u8282\u70b9",level:3},{value:"\u3010\u8282\u70b9\u8def\u5f84\u3011",id:"\u8282\u70b9\u8def\u5f84-3",level:4},{value:"\u3010\u8282\u70b9\u4f5c\u7528\u3011",id:"\u8282\u70b9\u4f5c\u7528-3",level:4},{value:"\u3010\u8282\u70b9\u4f7f\u7528\u3011",id:"\u8282\u70b9\u4f7f\u7528-3",level:4},{value:"\u3010log\u3011",id:"log-3",level:4},{value:"dumplen\u8c03\u8bd5\u8282\u70b9",id:"dumplen\u8c03\u8bd5\u8282\u70b9",level:3},{value:"\u3010\u8282\u70b9\u4f5c\u7528\u3011",id:"\u8282\u70b9\u4f5c\u7528-4",level:4},{value:"\u3010\u8282\u70b9\u4f7f\u7528\u3011",id:"\u8282\u70b9\u4f7f\u7528-4",level:4},{value:"\u3010log\u3011",id:"log-4",level:4}];function t(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"ipc\u6a21\u5757\u4ecb\u7ecd",children:"IPC\u6a21\u5757\u4ecb\u7ecd"})}),"\n",(0,l.jsx)(e.p,{children:"IPC\uff08Inter-Processor Communication\uff09\u6a21\u5757\u662f\u7528\u4e8e\u591a\u6838\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u652f\u6301\u540c\u6784\u6838\u548c\u5f02\u6784\u6838\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u8f6f\u4ef6\u4e0a\u57fa\u4e8ebuffer-ring\u8fdb\u884c\u5171\u4eab\u5185\u5b58\u7684\u7ba1\u7406\uff0c\u786c\u4ef6\u4e0a\u57fa\u4e8eMailBox\u5b9e\u73b0\u6838\u95f4\u4e2d\u65ad\u3002IPCF\u5177\u6709\u591a\u8def\u901a\u9053\uff0c\u5927\u6570\u636e\u4f20\u8f93\uff0c\u9002\u7528\u591a\u79cd\u5e73\u53f0\u7684\u7279\u70b9\u3002RPMSG\u57fa\u4e8e\u5f00\u6e90\u534f\u8bae\u6846\u67b6\uff0c\u652f\u6301Acore\u4e0eVDSP\u7684\u6838\u95f4\u901a\u4fe1\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"ipcf\u8f6f\u786c\u4ef6\u7ec4\u4ef6\u6846\u56fe",children:"IPCF\u8f6f\u786c\u4ef6\u7ec4\u4ef6\u6846\u56fe"}),"\n",(0,l.jsx)(e.p,{children:"Acore\u4e0eMCU\u4e4b\u95f4\u7684\u6838\u95f4\u901a\u4fe1\uff0cAcore\u4fa7\u4e3b\u8981\u4f7f\u7528IPCFHAL\uff0cMCU\u4fa7\u4f7f\u7528IPCF\uff0c\u5176\u4e2dIPCFHAL\u662f\u57fa\u4e8eIPCF\u5c01\u88c5\u4e86\u4e00\u5c42\u63a5\u53e3\uff0c\u7528\u4e8e\u7528\u6237\u6001\u4e0e\u5185\u6838\u6001\u7684\u6570\u636e\u4f20\u9012\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/linux-ipc.jpg",alt:"IPCF\u8f6f\u786c\u4ef6\u7ec4\u4ef6\u6846\u56fe"})}),"\n",(0,l.jsx)(e.h2,{id:"ipc\u5178\u578b\u4f7f\u7528\u573a\u666f",children:"IPC\u5178\u578b\u4f7f\u7528\u573a\u666f"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/imageipcscen.png",alt:"IPC\u5178\u578b\u4f7f\u7528\u573a\u666f\u56fe"})}),"\n",(0,l.jsx)(e.p,{children:"IPC\u5178\u578b\u5e94\u7528\u573a\u666f\u6709OTA\u6a21\u5757\u3001\u8bca\u65ad\u6a21\u5757\u3001\u89c4\u63a7\u3001CANHAL\u7b49\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"ipc\u5b9e\u4f8b\u5206\u914d\u65b9\u6848",children:"IPC\u5b9e\u4f8b\u5206\u914d\u65b9\u6848"}),"\n",(0,l.jsxs)(e.p,{children:["IPC Acore\u4fa7\u5b9e\u4f8b\u7f16\u53f7\u8303\u56f4\u4e3a[0-34]\uff0c\u5206\u522b\u7528\u4e8eAcore\u4e0eMCU\u901a\u4fe1\u7684\u5b9e\u4f8b[0-14]\u3001Acore\u4e0eVDSP\u901a\u4fe1\u7684\u5b9e\u4f8b[22-24]\u3001Acore\u4e0eBPU\u901a\u4fe1\u7684\u5b9e\u4f8b[32-34]\uff0c\u5176\u4f59\u5b9e\u4f8b\u505a\u5176\u5b83\u79c1\u6709\u7528\u9014\u3002Acore\u4e0eMCU\u901a\u4fe1\u53ef\u4f7f\u7528\u5b9e\u4f8b[0-8]\uff0c\u5b9e\u4f8b[4-6]\u9ed8\u8ba4\u4e3a\u5ba2\u6237\u9884\u7559\uff0c\u82e5\u7528\u6237\u4e0d\u9700\u8981CANHAL\u3001\u89c4\u63a7\u7b49\u4e1a\u52a1\uff0c\u53ef\u4ee5\u81ea\u884c\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u3002S100\u4e2dAOCRE\u4e0eMCU\u7684IPC\u901a\u4fe1\u60c5\u51b5\u53ef\u4ee5\u67e5\u9605 ",(0,l.jsx)(e.a,{href:"/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_ipc",children:"MCU IPC\u4f7f\u7528\u6307\u5357"})," \u4e2d\u7684IPC \u4f7f\u7528\u60c5\u51b5\u7ae0\u8282\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"acore\u4fa7\u914d\u7f6e\u5b9e\u4f8b\u65b9\u6cd5",children:"Acore\u4fa7\u914d\u7f6e\u5b9e\u4f8b\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.p,{children:"Acore\u4fa7\u914d\u7f6e\u5b9e\u4f8b\u53ef\u901a\u8fc7\u8bbe\u5907\u6811\u6587\u4ef6\u914d\u7f6e\uff0c\u914d\u7f6e\u8def\u5f84\u4e3a\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-dts",children:"source/hobot-drivers/kernel-dts/drobot-s100-ipc.dtsi\nsource/hobot-drivers/kernel-dts/include/drobot_s100_ipc.h\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8bbe\u5907\u6811\u914d\u7f6e\u4fe1\u606f\u5982\u4e0b\uff08\u4ec5\u4f9b\u53c2\u8003\uff09\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-dts",children:'ipcfhal_cfg: ipcfhal_cfg {\n    status = "okay"; #\u8282\u70b9\u72b6\u6001\uff0c\u4e0d\u9700\u8981\u6539\u52a8\n    compatible = "hobot,hobot-ipcfhal";  #\u8282\u70b9\u5c5e\u6027\uff0c\u4e0d\u53ef\u6539\u52a8\n\n    /****************instance--num_chans--num_bufs--buf_size****************/\n    ipc-ins = <&ipc_instance0\t8\t8\t0x2000>, #(Acore&MCU)\u7528\u4e8eCANHAL\n            <&ipc_instance1\t8\t8\t0x1000>, #(Acore&MCU)\u7528\u4e8e\u89c4\u63a7\n            <&ipc_instance2\t2\t8\t0x800>, #(Acore&MCU)\u7528\u4e8e\u89c4\u63a7\n            <&ipc_instance3\t8\t8\t0x1000>, #(Acore&MCU)\u7528\u4e8ecrypto\n            <&ipc_instance4\t8\t8\t0x1000>, #(Acore&MCU)\u7a7a\u95f2\uff0c\u7528\u6237\u53ef\u81ea\u884c\u914d\u7f6e\n            <&ipc_instance5\t8\t8\t0x1000>, #(Acore&MCU)\u7a7a\u95f2\uff0c\u7528\u6237\u53ef\u81ea\u884c\u914d\u7f6e\n            <&ipc_instance6\t8\t8\t0x1000>, #(Acore&MCU)\u7a7a\u95f2\uff0c\u7528\u6237\u53ef\u81ea\u884c\u914d\u7f6e\n            <&ipc_instance7\t8\t8\t0x1000>, #(Acore&MCU)\u900f\u4f20uart\uff0cspi\uff0ci2c\u7b49\u5916\u8bbe\u548c\u8fd0\u884cmcu\u4fa7cmd\u5e94\u7528\n            <&ipc_instance8\t8\t8\t0x1000>, #(Acore&MCU)\u90e8\u5206\u7a7a\u95f2\uff0c\u7528\u6237\u53ef\u81ea\u884c\u914d\u7f6e\n            <&ipc_instance9\t2\t5\t0x400>,  #(Acore&MCU)\u79c1\u6709\u5b9e\u4f8b\uff0c\u5185\u90e8\u9884\u7559\n            <&ipc_instance10\t1\t5\t0x200>, #(Acore&MCU)\u79c1\u6709\u5b9e\u4f8b\uff0c\u5185\u90e8\u9884\u7559\n            <&ipc_instance22\t8\t8\t0x1000>, #(Acore&VDSP)VDSP\u9884\u7559\uff0c\u6682\u672a\u5bf9\u5ba2\u6237\u5f00\u653e\n            <&ipc_instance23\t8\t8\t0x1000>, #(Acore&VDSP)VDSP\u9884\u7559\uff0c\u6682\u672a\u5bf9\u5ba2\u6237\u5f00\u653e\n            <&ipc_instance24\t8\t8\t0x1000>; #(Acore&VDSP)VDSP\u9884\u7559\uff0c\u6682\u672a\u5bf9\u5ba2\u6237\u5f00\u653e\n};\n\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u8bbe\u5907\u6811\u914d\u7f6e\u8bf4\u660e",children:"\u8bbe\u5907\u6811\u914d\u7f6e\u8bf4\u660e"}),"\n",(0,l.jsx)(e.p,{children:"\u8bbe\u5907\u6811ipcfhal_cfg\u8282\u70b9\u9ed8\u8ba4\u914d\u7f6e\u4e86\u4e00\u4e9b\u5b9e\u4f8b\u7684\u5c5e\u6027\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5c5e\u6027\u4e2d\u7b2c\u4e00\u5217\u8868\u793a\u5b9e\u4f8b\u7f16\u53f7\uff0c\u5fc5\u987b\u552f\u4e00\u4e14\u5728\u6709\u6548\u8303\u56f4"}),"\n",(0,l.jsx)(e.li,{children:"\u5c5e\u6027\u7684\u7b2c\u4e8c\u5217\u8868\u793a\u8be5\u5b9e\u4f8b\u5206\u914d\u7684\u901a\u9053\u6570\u91cf\uff0c\u7528\u6237\u53ef\u4ee5\u81ea\u884c\u914d\u7f6e\uff0c\u6700\u5927\u503c\u4e3a32\u4e2a"}),"\n",(0,l.jsx)(e.li,{children:"\u5c5e\u6027\u7684\u7b2c\u4e09\u5217\u8868\u793a\u6bcf\u4e2a\u901a\u9053\u7684\u7f13\u51b2buf\u7684\u4e2a\u6570\uff0c\u7528\u6237\u53ef\u4ee5\u81ea\u884c\u914d\u7f6e\uff0c\u6700\u5927\u503c\u4e3a1024\u4e2a\uff0c\u4f46\u53d7\u63a7\u5236\u7a7a\u95f4\u5927\u5c0f\u7684\u9650\u5236\u3002\u5c5e\u6027\u7b2c\u56db\u5217\u8868\u793a\u7f13\u51b2buf\u7684\u5927\u5c0f\uff0c\u5355\u4f4d\u662fBytes\uff0c\u7528\u6237\u53ef\u4ee5\u81ea\u884c\u914d\u7f6e\uff0c\u901a\u9053\u4e2a\u6570*\u7f13\u51b2buf\u4e2a\u6570*buf\u5927\u5c0f\u9700\u8981\u5c0f\u4e8e\u7b49\u4e8e0.5MB\uff08\u76ee\u524d\u6bcf\u4e2a\u5b9e\u4f8b\u9884\u5206\u914d\u4e861MB\u7684\u6570\u636e\u7a7a\u95f4\uff0c\u6682\u4e0d\u6269\u589e\uff09\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u5355\u4e2a\u5b9e\u4f8b\u7684\u8bbe\u5907\u6811\u8282\u70b9\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-dts",children:'#Not used, User can apply for it\nipc_instance3: ipc_instance3 {\n        status = "okay"; #\u8282\u70b9\u72b6\u6001\uff0c\u4e0d\u9700\u8981\u6539\u52a8\n        compatible = "hobot,hobot-ipc"; #\u8282\u70b9\u5c5e\u6027\uff0c\u4e0d\u53ef\u6539\u52a8\n        mbox-names = "mbox-chan"; #mailbox\u540d\u5b57\u5c5e\u6027\uff0c\u4e0d\u53ef\u6539\u52a8\n        mboxes = <&mailbox0 3 19 3>; #mailbox\u901a\u4fe1\u65b9\u5411\uff0c\u5b9e\u4f8b5\u548c\u5b9e\u4f8b6\u9700\u8981\u6539\u52a8\uff0c\u5176\u5b83\u5b9e\u4f8b\u4e0d\u9700\u8981\u6539\u52a8\n        instance = <3>; #\u5b9e\u4f8bid\uff0c\u4e0d\u9700\u8981\u6539\u52a8\n        data_local_addr = /bits/ 64 <IPC_INS3_DATA_LOCAL>; #Acore\u6570\u636e\u6bb5\uff0c\u5b9e\u4f8b5\u548c\u5b9e\u4f8b6\u9700\u8981\u6539\u52a8\uff0c\u5176\u5b83\u5b9e\u4f8b\u4e0d\u9700\u8981\u6539\u52a8\n        data_remote_addr = /bits/ 64 <IPC_INS3_DATA_REMOTE>; #MCU\u6570\u636e\u6bb5\uff0c\u5b9e\u4f8b5\u548c\u5b9e\u4f8b6\u9700\u8981\u6539\u52a8\uff0c\u5176\u5b83\u5b9e\u4f8b\u4e0d\u9700\u8981\u6539\u52a8\n        data_size = <IPC_SINGLE_DATA_SIZE>; #\u6570\u636e\u6bb5\u5927\u5c0f\uff0c\u4e0d\u53ef\u6539\u52a8\uff0c\u5355\u4f4dBytes\n        ctrl_local_addr = /bits/ 64 <IPC_INS3_CTRL_LOCAL>; #Acore\u63a7\u5236\u6bb5\uff0c\u5b9e\u4f8b5\u548c\u5b9e\u4f8b6\u9700\u8981\u6539\u52a8\uff0c\u5176\u5b83\u5b9e\u4f8b\u4e0d\u9700\u8981\u6539\u52a8\n        ctrl_remote_addr = /bits/ 64 <IPC_INS3_CTRL_REMOTE>; #MCU\u63a7\u5236\u6bb5\uff0c\u5b9e\u4f8b5\u548c\u5b9e\u4f8b6\u9700\u8981\u6539\u52a8\uff0c\u5176\u5b83\u5b9e\u4f8b\u4e0d\u9700\u8981\u6539\u52a8\n        ctrl_size = <IPC_SINGLE_CTRL_SIZE>; #\u6570\u636e\u6bb5\u5927\u5c0f\uff0c\u4e0d\u53ef\u6539\u52a8\uff0c\u5355\u4f4dBytes\n};\n\n'})}),"\n",(0,l.jsx)(e.p,{children:"\u7531\u4e8e\u5b9e\u4f8b5\u548c\u5b9e\u4f8b6\u5185\u90e8\u7528\u4e8e\u6d4b\u8bd5\uff0c\u5916\u90e8\u5ba2\u6237\u82e5\u9700\u8981\u4f7f\u7528\uff0c\u9700\u8981\u81ea\u884c\u914d\u7f6e\uff0c\u914d\u7f6e\u4fe1\u606f\u5982\u4e0b\uff0c\u4e0d\u9700\u8981\u6539\u52a8\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-dts",children:'ipc_instance5: ipc_instance5 {\n        status = "okay";\n        compatible = "hobot,hobot-ipc";\n        mbox-names = "mbox-chan";\n        mboxes = <&mailbox0 5 21 5>;\n        instance = <5>;\n        data_local_addr = /bits/ 64 <IPC_INS5_DATA_LOCAL>;\n        data_remote_addr = /bits/ 64 <IPC_INS5_DATA_REMOTE>;\n        data_size = <IPC_SINGLE_DATA_SIZE>;\n        ctrl_local_addr = /bits/ 64 <IPC_INS5_CTRL_LOCAL>;\n        ctrl_remote_addr = /bits/ 64 <IPC_INS5_CTRL_REMOTE>;\n        ctrl_size = <IPC_SINGLE_CTRL_SIZE>;\n};\n\nipc_instance6: ipc_instance6 {\n        status = "okay";\n        compatible = "hobot,hobot-ipc";\n        mbox-names = "mbox-chan";\n        mboxes = <&mailbox0 6 22 6>;\n        instance = <6>;\n        data_local_addr = /bits/ 64 <IPC_INS6_DATA_LOCAL>;\n        data_remote_addr = /bits/ 64 <IPC_INS6_DATA_REMOTE>;\n        data_size = <IPC_SINGLE_DATA_SIZE>;\n        ctrl_local_addr = /bits/ 64 <IPC_INS6_CTRL_LOCAL>;\n        ctrl_remote_addr = /bits/ 64 <IPC_INS6_CTRL_REMOTE>;\n        ctrl_size = <IPC_SINGLE_CTRL_SIZE>;\n};\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u8bbe\u5907\u6811\u914d\u7f6e\u6ce8\u610f\u4e8b\u9879:"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5b9e\u4f8b3~8\u6570\u636e\u6bb5\u9ed8\u8ba4\u9884\u5206\u914d\u4e861MB\u7a7a\u95f4\uff0cAcore\u4fa7\u4f7f\u75280.5MB\uff0cMCU\u4fa7\u4f7f\u75280.5MB\uff0c\u6240\u4ee5\u901a\u9053\u4e2a\u6570*\u7f13\u51b2buf\u4e2a\u6570*buf\u5927\u5c0f\u9700\u8981\u5c0f\u4e8e\u7b49\u4e8e0.5MB\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5b9e\u4f8b3~8\u63a7\u5236\u6bb5\u9ed8\u8ba4\u9884\u5206\u914d\u4e865KB\u7a7a\u95f4\uff0cAcore\u4fa7\u4f7f\u75282.5KB\uff0cMCU\u4fa7\u4f7f\u75282.5KB\uff0c\u5b58\u653e\u73af\u5f62buf\u7684\u63a7\u5236\u4fe1\u606f\u548c\u72b6\u6001\u4fe1\u606f\uff0c\u6240\u4ee5(\u7f13\u51b2buf\u4e2a\u6570+2)*16*\u901a\u9053\u4e2a\u6570+8\u9700\u8981\u5c0f\u4e8e\u7b49\u4e8e2.5KB\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5b9e\u4f8b5~6\u7528\u4e8e\u5730\u74dc\u673a\u5668\u4eba\u5185\u90e8\u6d4b\u8bd5\uff0c\u7528\u6237\u53ef\u6309\u7167\u4e0a\u9762\u914d\u7f6e\uff0c\u4fee\u6539\u8bbe\u5907\u6811\u8282\u70b9\u5373\u53ef\u3002 // TODO:\u53ef\u4ee5\u5b8c\u5168\u653e\u5f00\u7ed9\u5230\u5ba2\u6237"}),"\n",(0,l.jsx)(e.li,{children:"\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u901a\u9053\u6570\u91cf\u9700\u8981\u5c0f\u4e8e\u7b49\u4e8e32\uff0c\u7f13\u51b2buf\u4e2a\u6570\u9700\u8981\u5c0f\u4e8e\u7b49\u4e8e1024\uff0c\u540c\u65f6\u9700\u8981\u6ee1\u8db3\u524d\u4e24\u70b9\u7684\u4e0d\u7b49\u5f0f\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u591a\u4e2a\u4e1a\u52a1\u4f7f\u7528\u540c\u4e00\u4e2a\u5b9e\u4f8b\u7684\u4e0d\u540c\u901a\u9053\u6216\u8005\u4f7f\u7528\u4e0d\u540c\u5b9e\u4f8b\u5bf9\u4f20\u8f93\u5f71\u54cd\u4e0d\u5927\uff0c\u4e3b\u8981\u662f\u53c2\u8003buf_size/buf_num\u662f\u5426\u5408\u9002\u4ee5\u53ca\u4e1a\u52a1\u7684\u5f00\u53d1\u548c\u7ef4\u62a4\u662f\u5426\u65b9\u4fbf\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5e95\u5c42Mailbox\u4e2d\u65ad\u5206\u914d\u4e0d\u652f\u6301\u4fee\u6539\u3002"}),"\n",(0,l.jsx)(e.li,{children:"Acore\u4e0eMCU\u7684\u901a\u9053\u4e2a\u6570\u3001\u7f13\u51b2buf\u4e2a\u6570\u548c\u5927\u5c0f\u9700\u8981\u4fdd\u6301\u4e00\u81f4\uff0c\u6570\u636e\u6bb5\u548c\u63a7\u5236\u6bb5\u7684local\u548cremote\u9700\u8981\u76f8\u53cd\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5b9e\u4f8b\u7684\u63a7\u5236\u6bb5\u9996\u5730\u5740\u5b58\u50a8\u5b9e\u4f8b\u662f\u5426\u521d\u59cb\u5316\u7684\u72b6\u6001\uff0c\u53ef\u7528\u4e8e\u5224\u65ad\u5b9e\u4f8b\u662f\u5426\u521d\u59cb\u5316\uff0c\u5176\u4e2dAcore\u9ed8\u8ba4\u542f\u52a8kernel\u65f6\u5b8c\u6210\u521d\u59cb\u5316\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u82e5\u7528\u6237\u9700\u8981\u81ea\u884c\u5206\u914d\u6570\u636e\u6bb5\u548c\u5730\u5740\u6bb5\uff0c\u5219\u9700\u8981\u4fee\u6539Acore\u8bbe\u5907\u6811\u6587\u4ef6\u3001Uboot\u8bbe\u5907\u6811\u6587\u4ef6\u4ee5\u53caMCU\u914d\u7f6e\u6587\u4ef6\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5728\u540c\u4e00\u4e2a channel \u4e2d\uff0c\u53d1\u9001\uff08push\uff09\u548c\u63a5\u6536\uff08pop\uff09\u4f7f\u7528\u72ec\u7acb\u7684 ring buffer \u548c\u4e2d\u65ad\u673a\u5236\uff0c\u56e0\u6b64\u6536\u53d1\u64cd\u4f5c\u662f\u76f8\u4e92\u72ec\u7acb\u3001\u4e92\u4e0d\u5f71\u54cd\u7684\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u7528\u6237\u6001ipc\u5e94\u7528\u548c\u914d\u7f6e\u6587\u4ef6\u7684\u4f7f\u7528\u65b9\u6cd5",children:"\u7528\u6237\u6001IPC\u5e94\u7528\u548c\u914d\u7f6e\u6587\u4ef6\u7684\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.p,{children:"IPC Sample\u5b9e\u73b0Acore\u4e0eMCU\u4e4b\u95f4\u7684IPC\u6536\u53d1\u901a\u4fe1\uff0c\u5c55\u793aIPC\u591a\u5b9e\u4f8b\u591a\u901a\u9053\u591a\u7ebf\u7a0b\u7684\u4f7f\u7528\u793a\u4f8b\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/sampleframeware.png",alt:"Acore\u4e0eMCU\u4e4b\u95f4\u7684IPC\u6536\u53d1\u901a\u4fe1"})}),"\n",(0,l.jsx)(e.p,{children:"Sample\u8f6f\u4ef6\u67b6\u6784\u56fe\u4e2dAcore\u4f7f\u7528libipcfhal\u7684\u63a5\u53e3\u8fdb\u884c\u6570\u636e\u6536\u53d1\uff0c\u5e95\u5c42\u57fa\u4e8eipcf\u7684\u9a71\u52a8\uff0cMCU\u76f4\u63a5\u4f7f\u7528ipcf\u7684\u63a5\u53e3\u8fdb\u884c\u6536\u53d1\u3002\u5176\u4e2d\u7531\u4e8eAcore\u4fa7\u6709\u591a\u5957IPC\u63a5\u53e3\uff0c\u4fbf\u4e8e\u533a\u5206\uff0c\u5206\u522b\u63cf\u8ff0\u4e3aIPCFHAL\u3001RPMSG\u3001IPCF\uff0cMCU\u4fa7\u53ea\u6709\u4e00\u5957IPC\u63a5\u53e3\uff0c\u56e0\u6b64IPCF\u5728MCU\u4fa7\u6587\u6863\u7edf\u4e00\u63cf\u8ff0\u4e3aIPC\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u786c\u4ef6\u6570\u636e\u6d41\u8bf4\u660e",children:"\u786c\u4ef6\u6570\u636e\u6d41\u8bf4\u660e"}),"\n",(0,l.jsx)(e.p,{children:"Sample\u7684\u5171\u4eab\u5185\u5b58\u6570\u636e\u6d41\u548c\u4e2d\u65ad\u4fe1\u53f7\u6d41"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/sampledataflow.png",alt:"\u5171\u4eab\u5185\u5b58\u6570\u636e\u6d41\u548c\u4e2d\u65ad\u4fe1\u53f7\u6d41"})}),"\n",(0,l.jsx)(e.p,{children:"Sample\u4e2dAcore\u4e0eMCU\u901a\u8fc7\u5171\u4eab\u5185\u5b58\u4f20\u8f93\u6570\u636e\uff0c\u901a\u8fc7mailbox\u4e2d\u65ad\u901a\u77e5\u53cc\u65b9\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"acore\u4fa7sample\u4ee3\u7801\u4f4d\u7f6e\u4e0e\u76ee\u5f55\u7ed3\u6784",children:"Acore\u4fa7Sample\u4ee3\u7801\u4f4d\u7f6e\u4e0e\u76ee\u5f55\u7ed3\u6784"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4ee3\u7801\u8def\u5f84\uff1a"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# Sample\u6e90\u7801\u8def\u5f84\n${SDK}/source/hobot-io-samples/debian/app/ipcbox_sample  # ipc C++  Sample\n${SDK}/source/hobot-io-samples/debian/app/pyhbipchal_sample # ipc python Sample\n${SDK}/source/hobot-io/debian/app/pyhbipchal # ipc C++\u5e93\u4e3a\u8f6c\u6362pyhton\u5e93\u6e90\u7801\n\n\n# \u6e90\u7801\u968f\u56fa\u4ef6\u4e00\u540c\u6253\u5305\uff0c\u53ef\u5728S100\u81ea\u884c\u7f16\u8bd1, \u8def\u5f84\u5982\u4e0b\n${S100}/app/ipcbox_sample\n${S100}/app/pyhbipchal_sample\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u76ee\u5f55\u7ed3\u6784\uff1a"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"root@ubuntu:/app/ipcbox_sample# tree .\n.\n\u251c\u2500\u2500 ipcbox_runcmd # \u8fd0\u884cmcu\u4fa7cmd\u547d\u4ee4Sample\n\u2502\xa0\xa0 \u251c\u2500\u2500 Makefile # Sample\u7f16\u8bd1\u6846\u67b6\n\u2502\xa0\xa0 \u251c\u2500\u2500 ipcbox_runcmd.cpp # Sample\u4ee3\u7801\n\u2502\xa0\xa0 \u2514\u2500\u2500 ipcfhal_sample_config.json # Sample\u914d\u7f6e\u6587\u4ef6\n\u2514\u2500\u2500 ipcbox_uart # ipc\u900f\u4f20uart Sample\n    \u251c\u2500\u2500 Makefile # Sample\u7f16\u8bd1\u6846\u67b6\n    \u251c\u2500\u2500 ipcbox_uart.cpp # Sample\u4ee3\u7801\n    \u2514\u2500\u2500 ipcfhal_sample_config.json # Sample\u914d\u7f6e\u6587\u4ef6\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"api\u6d41\u7a0b\u8bf4\u660e",children:"API\u6d41\u7a0b\u8bf4\u660e"}),"\n",(0,l.jsxs)(e.p,{children:["Acore\u4e0eMCU(IRQ\u65b9\u5f0f)\u4e4b\u95f4API Sample\u8fd0\u884c\u6d41\u7a0b\u56fe\n",(0,l.jsx)(e.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/sampleirqapi.png",alt:"Acore\u4e0eMCU(IRQ\u65b9\u5f0f)\u4e4b\u95f4API Sample\u8fd0\u884c\u6d41\u7a0b\u56fe"})]}),"\n",(0,l.jsxs)(e.p,{children:["Acore\u4e0eMCU(POLL\u65b9\u5f0f)\u4e4b\u95f4API Sample\u8fd0\u884c\u6d41\u7a0b\u56fe\n",(0,l.jsx)(e.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/samplepollapi.png",alt:"Acore\u4e0eMCU(POLL\u65b9\u5f0f)\u4e4b\u95f4API Sample\u8fd0\u884c\u6d41\u7a0b\u56fe"})]}),"\n",(0,l.jsx)(e.h3,{id:"\u901a\u8def\u914d\u7f6e",children:"\u901a\u8def\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u53ef\u4ee5\u589e\u52a0Json\u6587\u4ef6\u4e2d\u7684\u901a\u9053\u6570\u91cfconfig_num\uff0c\u5e76\u589e\u52a0\u901a\u9053\u4fe1\u606f\uff0c\u672cSample\u672a\u652f\u6301\u589e\u52a0\u901a\u9053\u7684\u529f\u80fd\uff0c\u82e5\u9700\u8981\u589e\u52a0\u901a\u9053\uff0c\u9700\u8981\u4fee\u6539Acore\u548cMCU\u4e24\u4fa7\u914d\u7f6e\u6587\u4ef6\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'{\n        "log_level": 0, # \u65e5\u5fd7\u7b49\u7ea7\uff0c\u53ef\u7701\u7565\n        "config_num": 4, # \u914d\u7f6e\u901a\u9053\u6570\u91cf\n        "config_num_max":256, #\u914d\u7f6e\u901a\u9053\u6570\u91cf\u6700\u5927\u503c\n        "config_0": { # \u914d\u7f6e\u901a\u9053\n                "name": "cpu2mcu_ins7ch0", # \u901a\u9053\u540d\u5b57\n                "instance": 7, # \u5b9e\u4f8bid\n                "channel": 0, # \u901a\u9053id\n                "pkg_size_max": 4096, # \u53d1\u9001\u5305\u6700\u5927\u5b57\u8282\uff0c\u63a8\u8350\u5c0f\u4e8e\u7b49\u4e8e4096Bytes\n                "fifo_size": 64000, # \u7f13\u51b2fifo\u7684\u5927\u5c0f\uff0c\u53d6\u51b3\u4e8e\u9700\u8981\u7f13\u51b2\u7684\u4e2a\u6570\n                "fifo_type": 0, # \u7f13\u51b2fifo\u7684\u7c7b\u578b\uff0c\u4ec5\u652f\u63010\n                "ipcf_dev_path":"/dev/ipcdrv", # \u5b57\u7b26\u8bbe\u5907\u9a71\u52a8\uff0c\u4ec5\u652f\u6301/dev/ipcdrv\n                "ipcf_dev_name":"ipcdrv" # \u5b57\u7b26\u8bbe\u5907\u9a71\u52a8\u540d\u5b57\uff0c\u4ec5\u652f\u6301ipcdrv\n        },\n        "config_1": {\n                "name": "cpu2mcu_ins7ch1",\n                "instance": 7,\n                "channel": 1,\n                "pkg_size_max": 4096,\n                "fifo_size": 64000,\n                "fifo_type": 0,\n                "ipcf_dev_path":"/dev/ipcdrv",\n                "ipcf_dev_name":"ipcdrv"\n        },\n        "config_2": {\n                "name": "cpu2mcu_ins8ch0",\n                "instance": 8,\n                "channel": 0,\n                "pkg_size_max": 4096,\n                "fifo_size": 64000,\n                "fifo_type": 0,\n                "ipcf_dev_path":"/dev/ipcdrv",\n                "ipcf_dev_name":"ipcdrv"\n        },\n        "config_3": {\n                "name": "cpu2mcu_ins8ch1",\n                "instance": 8,\n                "channel": 1,\n                "pkg_size_max": 4096,\n                "fifo_size": 64000,\n                "fifo_type": 0,\n                "ipcf_dev_path":"/dev/ipcdrv",\n                "ipcf_dev_name":"ipcdrv"\n        }\n}\n\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u5b9e\u4f8b\u8bf4\u660e",children:"\u5b9e\u4f8b\u8bf4\u660e"}),"\n",(0,l.jsx)(e.h3,{id:"c-\u5e94\u7528",children:"C++ \u5e94\u7528"}),"\n",(0,l.jsx)(e.h4,{id:"runcmd\u5e94\u7528",children:"RunCmd\u5e94\u7528"}),"\n",(0,l.jsx)(e.p,{children:"\u6b64sample\u5b9e\u73b0\u4e86\u5bf9\u8bfb\u53d6\u4e86ADC chanel\u7684\u7535\u538b\u3002"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5f00\u673a\u8fdb\u5165S100\u540e\uff0c\u6253\u5f00\u5e94\u7528\u76ee\u5f55/app/ipcbox_sample/ipcbox_runcmd"}),"\n",(0,l.jsx)(e.li,{children:"\u7f16\u8bd1\uff1amake"}),"\n",(0,l.jsx)(e.li,{children:"\u8fd0\u884c: ./ipcbox_runcmd"}),"\n",(0,l.jsxs)(e.li,{children:["\u51fa\u73b0",(0,l.jsx)(e.code,{children:'Extracted adc data:{"adc_ch":1,"adc_result":2411,"adc_mv":1059}'}),"\u6253\u5370\u5219\u6d4b\u8bd5\u901a\u8fc7\n\u5176\u4e2d\u8868\u793aadc\u5bf9\u5e94pin\u53e3\uff0cadc_mv\u8868\u793a\u8bfb\u51fa\u6765\u7684\u7535\u538b\u503c"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:'root@ubuntu:/app/ipcbox_sample/ipcbox_runcmd# ./ipcbox_runcmd\n[INFO][hb_ipcf_hal.cpp:282] [channel] cpu2mcu_ins7ch0 [ins] 7 [id] 0 init success.\n[INFO][hb_ipcf_hal.cpp:333] [channel] cpu2mcu_ins7ch0 [ins] 7 [id] 0 config success.\n[INFO][hb_ipcf_hal.cpp:282] [channel] cpu2mcu_ins7ch1 [ins] 7 [id] 1 init success.\n[INFO][hb_ipcf_hal.cpp:333] [channel] cpu2mcu_ins7ch1 [ins] 7 [id] 1 config success.\nExtracted adc data:{"adc_ch":1,"adc_result":2411,"adc_mv":1059}\nTxCmdItem(96)\n44 2D 49 50 43 42 4F 58 01 00 00 00 55 07 00 00\n69 70 63 73 65 6E 64 5F 61 64 63 20 31 00 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n60 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n\nrx_packet(160):D-IPCBOX\n44 2D 49 50 43 42 4F 58 01 00 00 00 4B 10 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\nA0 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n7B 22 61 64 63 5F 63 68 22 3A 31 2C 22 61 64 63\n5F 72 65 73 75 6C 74 22 3A 32 34 31 31 2C 22 61\n64 63 5F 6D 76 22 3A 31 30 35 39 7D 00 00 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n00 C9 F5 5A 58 13 C3 E8 F0 1C E7 DE FF FF 00 00\nCC 74 22 8A FF FF 00 00 74 47 67 8A FF FF 00 00\nA4 0F 1F D4 AA AA 00 00 06 00 00 00 01 00 00 00\n58 1D E7 DE FF FF 00 00 58 1D E7 DE FF FF 00 00\n01 00 00 00 00 00 00 00 D8 1C 20 D4 AA AA 00 00\n40 C0 69 8A FF FF 00 00 A4 0F 1F D4 AA AA 00 00\n\n[INFO][hb_ipcf_hal.cpp:553] [channel] cpu2mcu_ins7ch0 [ins] 7 [id] 0 deinit success.\n[INFO][hb_ipcf_hal.cpp:553] [channel] cpu2mcu_ins7ch1 [ins] 7 [id] 1 deinit success.\n'})}),"\n",(0,l.jsx)(e.h4,{id:"uart\u900f\u4f20",children:"Uart\u900f\u4f20"}),"\n",(0,l.jsx)(e.p,{children:"\u6b64sample\u5b9e\u73b0\u4e86\u5bf9Uart5\u7684\u900f\u4f20\uff0c\u6d4b\u8bd5\u65f6\u9700\u8981\u5c06uart5\u7684TX\u548cRX\u77ed\u63a5\u3002"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5f00\u673a\u8fdb\u5165S100\u540e\uff0c\u6253\u5f00\u5e94\u7528\u76ee\u5f55cd /app/ipcbox_sample/ipcbox_uart"}),"\n",(0,l.jsx)(e.li,{children:"\u7f16\u8bd1\uff1amake"}),"\n",(0,l.jsx)(e.li,{children:"\u8fd0\u884c: ./ipcbox_uart"}),"\n",(0,l.jsx)(e.li,{children:"\u51fa\u73b0tx_data and rx_data are identical.\u6253\u5370\u5219\u6d4b\u8bd5\u901a\u8fc7, \u53c2\u8003log\u5982\u4e0b\uff1a"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"# ./ipcbox_uart\n[INFO][hb_ipcf_hal.cpp:282] [channel] cpu2mcu_ins7ch4 [ins] 7 [id] 4 init success.\n[INFO][hb_ipcf_hal.cpp:333] [channel] cpu2mcu_ins7ch4 [ins] 7 [id] 4 config success.\ntx_data(64)\n69 70 63 5F 72 75 6E 63 6D 64 5F 73 65 6E 64 20\n37 20 30 20 31 32 33 34 35 36 37 38 39 20 31 30\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n\nrx_data(64)\n69 70 63 5F 72 75 6E 63 6D 64 5F 73 65 6E 64 20\n37 20 30 20 31 32 33 34 35 36 37 38 39 20 31 30\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n\ntx_data and rx_data are identical.\n[INFO][hb_ipcf_hal.cpp:553] [channel] cpu2mcu_ins7ch4 [ins] 7 [id] 4 deinit success.\n"})}),"\n",(0,l.jsx)(e.h3,{id:"python\u5e94\u7528",children:"Python\u5e94\u7528"}),"\n",(0,l.jsx)(e.p,{children:"S100\u63d0\u4f9bpython\u5e93\u6587\u4ef6\u4f7f\u7528IPC\uff0c\u5176\u539f\u7406\u4e3a\u901a\u8fc7pybind11\u8c03\u7528C++\u63a5\u53e3\uff0c\u51fd\u6570\u540d\u4e0e\u5b8f\u5b9a\u4e49\u7b49\u4e24\u7aef\u4fdd\u6301\u4e00\u81f4\u3002"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5305\u7684\u5bfc\u5165"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"import pyhbipchal as pyipc\nimport pyhbipchal_utils as ipc_utils\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"2",children:["\n",(0,l.jsx)(e.li,{children:"\u6e90\u7801\u8def\u5f84"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"root@ubuntu:/app/pyhbipchal_sample# tree\n.\n\u251c\u2500\u2500 ipcfhal_sample_config.json // \u914d\u7f6e\u6587\u4ef6\uff0c\u7528\u4e8e\u521d\u59cb\u5316ipc\n\u251c\u2500\u2500 pyhbipchal_test.py // \u4f7f\u7528pyhbipchal\u5e93\u7f16\u5199\u57fa\u7840python\u5e94\u7528\u6d4b\u8bd5\u8fc7\u7528\u4f8b\n\u251c\u2500\u2500 pyhbipchal_utils.py // pyhbipchal_utils\u5bf9\u8c61\u6e90\u7801\uff0cpyhbipchal\u8fdb\u884c\u4e8c\u6b21\u5c01\u88c5,\u76f8\u8f83\u4e8epyhbipchal\u66f4\u7b26\u5408pyhton\u7684\u7f16\u7a0b\u4e60\u60ef\n\u2514\u2500\u2500 pyhbipchal_utils_test.py // pyhbipchal_utils\u6d4b\u8bd5\u7528\u4f8b\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"3",children:["\n",(0,l.jsx)(e.li,{children:"\u793a\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u6d4b\u8bd5python\u5e93\u7684\u6548\u679c\u4e0eC++\u63d0\u4f9b\u7684\u63a5\u53e3\u662f\u5426\u4e00\u81f4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"root@ubuntu:/app/pyhbipchal_sample# python pyhbipchal_test.py\nLibrary version: 1.0.0\n====================test error code==================\n\nIPCF_HAL_E_OK (0): General OK\n\nIPCF_HAL_E_NOK (-1): General Not OK\n\nIPCF_HAL_E_CONFIG_FAIL (-2): Config fail\n\nIPCF_HAL_E_WRONG_CONFIGURATION (-3): Wrong configuration\n\nIPCF_HAL_E_NULL_POINTER (-4): A null pointer was passed as an argument\n\nIPCF_HAL_E_PARAM_INVALID (-5): A parameter was invalid\n\nIPCF_HAL_E_LENGTH_TOO_SMALL (-6): Length too small\n\nIPCF_HAL_E_INIT_FAILED (-7): Initialization failed\n\nIPCF_HAL_E_UNINIT (-8): Called before initialization\n\nIPCF_HAL_E_BUFFER_OVERFLOW (-9): Source address or destination address Buffer overflow\n\nIPCF_HAL_E_ALLOC_FAIL (-10): Source alloc fail\n\nIPCF_HAL_E_TIMEOUT (-11): Expired the time out\n\nIPCF_HAL_E_REINIT (-12): Re initilize\n\nIPCF_HAL_E_BUSY (-13): Busy\n\nIPCF_HAL_E_CHANNEL_INVALID (-14): Channel is invalid\n\n=====================test OK=======================\n\n[INFO][hb_ipcf_hal.cpp:282] [channel] cpu2mcu_ins7ch4 [ins] 7 [id] 4 init success.\n[INFO][hb_ipcf_hal.cpp:333] [channel] cpu2mcu_ins7ch4 [ins] 7 [id] 4 config success.\ntx_data(64)\n69 70 63 5F 72 75 6E 63 6D 64 5F 73 65 6E 64 20\n37 20 30 20 31 32 33 34 35 36 37 38 39 20 31 30\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n\nrx_data(64)\n69 70 63 5F 72 75 6E 63 6D 64 5F 73 65 6E 64 20\n37 20 30 20 31 32 33 34 35 36 37 38 39 20 31 30\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n\ntx_data and rx_data are identical.\n[INFO][hb_ipcf_hal.cpp:553] [channel] cpu2mcu_ins7ch4 [ins] 7 [id] 4 deinit success.\nroot@ubuntu:/app/pyhbipchal_sample#\n\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6d4b\u8bd5pyhbipchal_utils\u5305\u7684IPC\u901a\u4fe1\u529f\u80fd\u662f\u5426\u6b63\u5e38\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"root@ubuntu:/app/pyhbipchal_sample# python pyhbipchal_utils_test.py\n[INFO][hb_ipcf_hal.cpp:282] [channel] cpu2mcu_ins7ch4 [ins] 7 [id] 4 init success.\n[INFO][hb_ipcf_hal.cpp:333] [channel] cpu2mcu_ins7ch4 [ins] 7 [id] 4 config success.\nTx: b'ipc_runcmd_send 7 0 123456789 10' | Rx: b'ipc_runcmd_send 7 0 123456789 10'\n[INFO][hb_ipcf_hal.cpp:553] [channel] cpu2mcu_ins7ch4 [ins] 7 [id] 4 deinit success.\n"})}),"\n",(0,l.jsx)(e.h2,{id:"acore\u4e0emcu\u7684\u4f20\u8f93\u6d41\u7a0b",children:"Acore\u4e0eMCU\u7684\u4f20\u8f93\u6d41\u7a0b"}),"\n",(0,l.jsx)(e.p,{children:"Acore\u4e0eMCU IPC\u901a\u4fe1\u4f7f\u7528MCU MDMA\u5c06\u6570\u636e\u5728DDR\u4e0eMCU SRAM\u4e4b\u95f4\u642c\u8fd0\uff0cMCU\u53d1\u9001\u6570\u636e\u5230Acore\u7684\u6d41\u7a0b\u4e2d\uff0cMCU\u5148\u4f7f\u7528MDMA\u5c06\u6570\u636e\u4eceSRAM\u642c\u8fd0\u5230DDR\uff0c\u518d\u53d1\u9001\u4e2d\u65ad\u901a\u77e5\uff0c Acore\u53d1\u9001\u6570\u636e\u5230MCU\u7684\u6d41\u7a0b\u4e2d\uff0cMCU\u6536\u5230\u4e2d\u65ad\u901a\u77e5\u540e\uff0c\u4f7f\u7528MDMA\u5c06\u6570\u636e\u4eceDDR\u642c\u8fd0\u5230SRAM\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"mcu\u53d1\u9001\u6570\u636e\u5230acore",children:"MCU\u53d1\u9001\u6570\u636e\u5230Acore"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/imager52a78.png",alt:"MCU\u53d1\u9001\u6570\u636e\u5230Acore"})}),"\n",(0,l.jsx)(e.h3,{id:"acore\u53d1\u9001\u6570\u636e\u5230mcu",children:"Acore\u53d1\u9001\u6570\u636e\u5230MCU"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/imagea78r52.png",alt:"Acore\u53d1\u9001\u6570\u636e\u5230MCU"})}),"\n",(0,l.jsx)(e.h3,{id:"ipcfhal\u63a5\u53e3\u4f7f\u7528\u5e8f\u5217",children:"IPCFHAL\u63a5\u53e3\u4f7f\u7528\u5e8f\u5217"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/imageipcfhalapi.png",alt:"Acore\u53d1\u9001\u6570\u636e\u5230MCU"})}),"\n",(0,l.jsx)(e.p,{children:"IPCFHAL\u5728Acore\u4e0eMCU\u901a\u4fe1\u65f6\uff0cMCU\u4fa7\u7528\u6237\u4f7f\u7528IPCF\u63a5\u53e3\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"ipcfhal\u4f7f\u7528\u6ce8\u610f\u4e8b\u9879",children:"IPCFHAL\u4f7f\u7528\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"ipcfhal\u540c\u4e00\u4e2a\u901a\u9053\u4e0d\u652f\u6301\u591a\u8fdb\u7a0b\uff1b\u82e5\u4f7f\u7528\u591a\u7ebf\u7a0b\u6536\u53d1\uff0c\u6536\u53d1\u65f6\u5e8f\u548c\u903b\u8f91\u9700\u8981\u7528\u6237\u4fdd\u969c\u3002"}),"\n",(0,l.jsx)(e.li,{children:"MCU\u4fa7SRAM fifo \u592a\u5c0f\u4ec5\u7528\u4e8e\u5185\u90e8\u4f7f\u7528\u3002\u51fa\u4e8e\u8282\u7701SRAM\u7684\u89d2\u5ea6\uff0c\u5ba2\u6237\u53ef\u4ee5\u4f7f\u7528DDR\u65b9\u6848\u3002"}),"\n",(0,l.jsx)(e.li,{children:"Acore\u4fa7\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u4e2d\u65ad\u5bf9\u5e94\u7684\u4f18\u5148\u7ea7\u4e0d\u53ef\u914d\u7f6e\uff0cMCU\u53ef\u914d\u7f6e\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u82e5\u5e94\u7528\u5bf9\u7cfb\u7edf\u8c03\u5ea6\u5ef6\u65f6\u7684\u6ce2\u52a8\u6bd4\u8f83\u654f\u611f\uff0c\u53ef\u8c03\u6574\u5e94\u7528\u7a0b\u5e8f\u7684\u8c03\u5ea6\u7b56\u7565\u4e3aSCHED_FIFO\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"ipcfhal\u8c03\u8bd5\u65b9\u6cd5",children:"IPCFHAL\u8c03\u8bd5\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.h4,{id:"\u8c03\u8bd5\u65e5\u5fd7",children:"\u8c03\u8bd5\u65e5\u5fd7"}),"\n",(0,l.jsx)(e.p,{children:"IPCFHAL\u53ca\u5e95\u5c42\u7684IPCF\u3001Mailbox\u9a71\u52a8\u90fd\u63d0\u4f9b\u4e86\u8f83\u5b8c\u6574\u7684log\u4fe1\u606f\uff0c\u82e5\u6709\u8c03\u8bd5\u95ee\u9898\uff0c\u53ef\u67e5\u770blog\u8f93\u51fa\uff0c\u5e2e\u52a9\u5b9a\u4f4d\u95ee\u9898\u3002"}),"\n",(0,l.jsx)(e.h4,{id:"error-code-api-\u8fd4\u56de\u503c",children:"error code (api \u8fd4\u56de\u503c)"}),"\n",(0,l.jsx)(e.p,{children:"IPCFHAL\u5b9a\u4e49\u4e86\u4e00\u4e9berror code\uff0c\u8986\u76d6\u4e86\u5e38\u89c1\u7684\u9519\u8bef\u7c7b\u578b\uff0c\u53ef\u4f7f\u7528\u63a5\u53e3\uff1ahb_ipcfhal_trans_err\u5c06error code\u8f6c\u6362\u4e3a\u9519\u8bef\u63cf\u8ff0\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"sysfs\u8c03\u8bd5\u8282\u70b9acore\u4fa7",children:"sysfs\u8c03\u8bd5\u8282\u70b9(Acore\u4fa7)"}),"\n",(0,l.jsx)(e.h3,{id:"statistic\u8c03\u8bd5\u8282\u70b9",children:"statistic\u8c03\u8bd5\u8282\u70b9"}),"\n",(0,l.jsx)(e.p,{children:"\u6253\u5370\u7edf\u8ba1\u7684\u901a\u4fe1\u4fe1\u606f\uff0c\u5305\u62ecpkg\uff0cpkg_len\uff0cerr_acq\uff0cerr_shm_tx\uff0cerr_cb\u3002"}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u8def\u5f84",children:"\u3010\u8282\u70b9\u8def\u5f84\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"//ins-X\u8868\u793ainsid\uff0c\u82e5insid\u662f5\uff0c\u5219\u4e3ains-5\n/sys/kernel/debug/ipcdrv-ins-5/statistic\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u4f5c\u7528",children:"\u3010\u8282\u70b9\u4f5c\u7528\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"//\u4ee5instance\u4e3a\u5355\u4f4d\uff0c\u7edf\u8ba1\u6240\u6709channel\u63a5\u6536&\u53d1\u9001\u7684count\nstruct ipc_statistic_t {\n        uint32_t acq_cnt;/**< tx: acquire buf count*/\n        uint32_t shm_tx_cnt;/**< tx: send count*/\n        uint32_t cb_cnt;/**< rx: callback count*/\n        uint32_t err_acq;/**< tx: error acquire buf count*/\n        uint32_t err_shm_tx;/**< tx: error send count*/\n        uint32_t err_cb;/**< rx: error callback count*/\n\n        uint32_t packages;/**< tx/rx: packages count*/\n        uint64_t datalen;/**< tx/rx: datalen*/\n};\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u4f7f\u7528",children:"\u3010\u8282\u70b9\u4f7f\u7528\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"//\u65b9\u6cd5\u4e00\uff1a\u76f4\u63a5\u64cd\u4f5csys\u8282\u70b9\n//\u901a\u9053\u5b8c\u6210\u521d\u59cb\u5316\uff0c\u672a\u6536\u53d1\u6570\u636e\u65f6, enable\necho 0 > /sys/kernel/debug/ipcdrv-ins-5/statistic\n//\u6536\u53d1\u6570\u636e\u7ed3\u675f\uff0c\u4e14\u901a\u9053\u672a\u53bb\u521d\u59cb\u5316\u65f6\uff0cget\ncat /sys/kernel/debug/ipcdrv-ins-5/statistic\n\n\n//\u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528open/write/read/close\u64cd\u4f5c\nfd= open(/sys/kernel/debug/ipcdrv-ins-5/statistic, O_RDWR);\nwrite(fd, buf, 1024);\n//tx/rx\uff0c\u6536\u53d1\u6570\u636e\nread(fd, buf, 1024);\nclose(fd);\n"})}),"\n",(0,l.jsx)(e.h4,{id:"log",children:"\u3010log\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"DataLink:\n                                pkg              pkg_len    err_acq err_shm_tx     err_cb\n        INS5CH0 TX:              1                   32          0          0          0\n        INS5CH0 RX:              1                   32          0          0          0\n        INS5CH1 TX:              0                    0          0          0          0\n        INS5CH1 RX:              0                    0          0          0          0\n        INS5CH2 TX:              0                    0          0          0          0\n        INS5CH2 RX:              0                    0          0          0          0\n        INS5CH3 TX:              0                    0          0          0          0\n        INS5CH3 RX:              0                    0          0          0          0\n        INS5CH4 TX:              0                    0          0          0          0\n        INS5CH4 RX:              0                    0          0          0          0\n        INS5CH5 TX:              0                    0          0          0          0\n        INS5CH5 RX:              0                    0          0          0          0\n        INS5CH6 TX:              0                    0          0          0          0\n        INS5CH6 RX:              0                    0          0          0          0\n        INS5CH7 TX:              0                    0          0          0          0\n        INS5CH7 RX:              0                    0          0          0          0\n"})}),"\n",(0,l.jsx)(e.h3,{id:"tsdump\u8c03\u8bd5\u8282\u70b9",children:"tsdump\u8c03\u8bd5\u8282\u70b9"}),"\n",(0,l.jsx)(e.p,{children:"\u4ee5channel\u4e3a\u5355\u4f4d\uff0c\u6536\u53d1\u6570\u636e\u65f6\u6253\u5370\u65f6\u95f4\u6233\u3002"}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u8def\u5f84-1",children:"\u3010\u8282\u70b9\u8def\u5f84\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"//ins-X\u8868\u793ainsid\uff0c\u82e5insid\u662f5\uff0c\u5219\u4e3ains-5\n/sys/kernel/debug/ipcdrv-ins-5/tsdump\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u4f5c\u7528-1",children:"\u3010\u8282\u70b9\u4f5c\u7528\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"//\u4ee5channel\u4e3a\u5355\u4f4d\uff0c\u4f7f\u80fd\u6536\u53d1\u6570\u636e\u65f6\uff0c\u6253\u5370\u65f6\u95f4\u6233log\nint32_t tsdump;/**< >=0, \u4f7f\u80fd\u6307\u5b9achannel\u7684\u65f6\u95f4\u6233\u6253\u5370log\uff0c <0, \u5173\u95ed\u65f6\u95f4\u6233log*/\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u4f7f\u7528-1",children:"\u3010\u8282\u70b9\u4f7f\u7528\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"//\u65b9\u6cd5\u4e00\uff1a\u76f4\u63a5\u64cd\u4f5csys\u8282\u70b9\n//\u901a\u9053\u5b8c\u6210\u521d\u59cb\u5316\uff0c\u672a\u6536\u53d1\u6570\u636e\u65f6, enable\necho 0 > /sys/kernel/debug/ipcdrv-ins-5/tsdump\n//\u6536\u53d1\u6570\u636e\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u6253\u5370\u65f6\u95f4\u6233log\n//\u6536\u53d1\u6570\u636e\u7ed3\u675f\uff0c\u4e14\u901a\u9053\u672a\u53bb\u521d\u59cb\u5316\u65f6\uff0cget\ncat /sys/kernel/debug/ipcdrv-ins-5/tsdump\n\n\n//\u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528open/write/read/close\u64cd\u4f5c\nfd= open(/sys/kernel/debug/ipcdrv-ins-5/tsdump, O_RDWR);\nwrite(fd, buf, 1024);\n//tx/rx\uff0c\u6253\u5370\u65f6\u95f4\u6233log\nread(fd, buf, 1024);\nclose(fd);\n"})}),"\n",(0,l.jsx)(e.h4,{id:"log-1",children:"\u3010log\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"[ 1173.246630] ipc-shm-hal: dev_print_timestamp()[515]: [5][0] tx wt sta: 1717558158.887241446\n[ 1173.246642] ipc-shm-hal: dev_print_timestamp()[515]: [5][0] tx wt end: 1717558158.887253646\n[ 1173.246717] ipc-shm-hal: dev_print_timestamp()[515]: [5][0] rx cb sta: 1717558158.887327971\n[ 1173.246723] ipc-shm-hal: dev_print_timestamp()[515]: [5][0] rx cb end: 1717558158.887334796\n[ 1173.246725] ipc-shm-hal: dev_print_timestamp()[515]: [5][0] rx rd sta: 1717558158.887336446\n[ 1173.246727] ipc-shm-hal: dev_print_timestamp()[515]: [5][0] rx sm sta: 1717558158.887338496\n[ 1173.246729] ipc-shm-hal: dev_print_timestamp()[515]: [5][0] rx sm end: 1717558158.887340121\n[ 1173.246730] ipc-shm-hal: dev_print_timestamp()[515]: [5][0] rx rd end: 1717558158.887341646\nlibipcfhal-test: TestBody() [2328] info :\ntsdump: 0\n\nlibipcfhal-test: TestBody() [2329] info :\ntsdump: 0\n"})}),"\n",(0,l.jsx)(e.p,{children:"wdump\u8c03\u8bd5\u8282\u70b9\n\u4ee5channel\u4e3a\u5355\u4f4d\uff0c\u6253\u5370\u53d1\u9001\u7684\u6570\u636e\u3002"}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u8def\u5f84-2",children:"\u3010\u8282\u70b9\u8def\u5f84\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"//ins-X\u8868\u793ainsid\uff0c\u82e5insid\u662f5\uff0c\u5219\u4e3ains-5\n/sys/kernel/debug/ipcdrv-ins-5/wdump\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u4f5c\u7528-2",children:"\u3010\u8282\u70b9\u4f5c\u7528\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"//\u4ee5channel\u4e3a\u5355\u4f4d\uff0c\u4f7f\u80fd\u53d1\u9001\u6570\u636edump\uff0c\u6253\u5370\u53d1\u9001\u7684\u6570\u636e\n//\u6253\u5370\u7684\u957f\u5ea6\u53d6\u51b3\u4e8edumplen\uff0c\u82e5\u672a\u914d\u7f6edumplen\uff0c\u5219\u9ed8\u8ba4\u6253\u5370\u5168\u90e8\nint32_t wdump;/**< =chan_id, \u4f7f\u80fd\u53d1\u9001dump\uff0c \u5426\u5219, \u5173\u95ed\u53d1\u9001dump*/\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u4f7f\u7528-2",children:"\u3010\u8282\u70b9\u4f7f\u7528\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"//\u65b9\u6cd5\u4e00\uff1a\u76f4\u63a5\u64cd\u4f5csys\u8282\u70b9\n//\u901a\u9053\u5b8c\u6210\u521d\u59cb\u5316\uff0c\u672a\u53d1\u9001\u6570\u636e\u65f6, enable\necho 0 > /sys/kernel/debug/ipcdrv-ins-5/wdump\n//\u53d1\u9001\u6570\u636e\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u6253\u5370\u53d1\u9001\u7684\u6570\u636e\n//\u6536\u53d1\u6570\u636e\u7ed3\u675f\uff0c\u4e14\u901a\u9053\u672a\u53bb\u521d\u59cb\u5316\u65f6\uff0cget\ncat /sys/kernel/debug/ipcdrv-ins-5/wdump\n\n\n//\u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528open/write/read/close\u64cd\u4f5c\nfd= open(/sys/kernel/debug/ipcdrv-ins-5/wdump, O_RDWR);\nwrite(fd, buf, 1024);\n//tx/rx\uff0c\u6253\u5370\u53d1\u9001\u7684\u6570\u636e\nread(fd, buf, 1024);\nclose(fd);\n"})}),"\n",(0,l.jsx)(e.h4,{id:"log-2",children:"\u3010log\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"[ 1022.271650] ipc-shm-hal: hal_ipc_shm_write()[926]: [5][0] tx size 32\n[ 1022.271666] ipc-shm-hal: ipcf_dump_data()[519]: dump info: tx data len[32] mul[1] remain[0]\n[ 1022.271700] ipc-shm-hal: ipcf_dump_data()[522]: 0x0000: 00 01 02 03 04 05 06 07 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n[ 1022.273489] ipc-shm-hal: hal_ipc_shm_write()[926]: [6][0] tx size 32\n[ 1022.273505] ipc-shm-hal: ipcf_dump_data()[519]: dump info: tx data len[32] mul[1] remain[0]\n[ 1022.273733] ipc-shm-hal: ipcf_dump_data()[522]: 0x0000: 00 01 02 03 04 05 06 07 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\nlibipcfhal-test: TestBody() [2403] info :\nwdump: 0\n\nlibipcfhal-test: TestBody() [2404] info :\nwdump: 0\n"})}),"\n",(0,l.jsx)(e.h3,{id:"rdump\u8c03\u8bd5\u8282\u70b9",children:"rdump\u8c03\u8bd5\u8282\u70b9"}),"\n",(0,l.jsx)(e.p,{children:"\u4ee5channel\u4e3a\u5355\u4f4d\uff0c\u6253\u5370\u63a5\u6536\u7684\u6570\u636e\u3002"}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u8def\u5f84-3",children:"\u3010\u8282\u70b9\u8def\u5f84\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"//ins-X\u8868\u793ainsid\uff0c\u82e5insid\u662f5\uff0c\u5219\u4e3ains-5\n/sys/kernel/debug/ipcdrv-ins-5/rdump\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u4f5c\u7528-3",children:"\u3010\u8282\u70b9\u4f5c\u7528\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"//\u4ee5channel\u4e3a\u5355\u4f4d\uff0c\u4f7f\u80fd\u63a5\u6536\u6570\u636edump\uff0c\u6253\u5370\u63a5\u6536\u7684\u6570\u636e\n//\u6253\u5370\u7684\u957f\u5ea6\u53d6\u51b3\u4e8edumplen\uff0c\u82e5\u672a\u914d\u7f6edumplen\uff0c\u5219\u9ed8\u8ba4\u6253\u5370\u5168\u90e8\nuint32_t rdump;/**< =chan_id, \u4f7f\u80fd\u63a5\u6536dump\uff0c\u5426\u5219\uff0c\u5173\u95ed\u63a5\u6536dump*/\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u4f7f\u7528-3",children:"\u3010\u8282\u70b9\u4f7f\u7528\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"//\u65b9\u6cd5\u4e00\uff1a\u76f4\u63a5\u64cd\u4f5csys\u8282\u70b9\n//\u901a\u9053\u5b8c\u6210\u521d\u59cb\u5316\uff0c\u672a\u6536\u53d1\u6570\u636e\u65f6, enable\necho 0 > /sys/kernel/debug/ipcdrv-ins-5/rdump\n//\u53d1\u9001\u6570\u636e\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u6253\u5370\u63a5\u6536\u7684\u6570\u636e\n//\u6536\u53d1\u6570\u636e\u7ed3\u675f\uff0c\u4e14\u901a\u9053\u672a\u53bb\u521d\u59cb\u5316\u65f6\uff0cget\ncat /sys/kernel/debug/ipcdrv-ins-5/rdump\n\n\n//\u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528open/write/read/close\u64cd\u4f5c\nfd= open(/sys/kernel/debug/ipcdrv-ins-5/rdump, O_RDWR);\nwrite(fd, buf, DEV_README_BUFSIZE);\n//tx/rx\uff0c\u6253\u5370\u63a5\u6536\u7684\u6570\u636e\nread(fd, buf, DEV_README_BUFSIZE);\nclose(fd);\n"})}),"\n",(0,l.jsx)(e.h4,{id:"log-3",children:"\u3010log\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"[  983.730497] ipc-shm-hal: data_callback()[803]: [6][0] callback size 32\n[  983.730524] ipc-shm-hal: ipcf_dump_data()[519]: dump info: callback rx len[32] mul[1] remain[0]\n[  983.730540] ipc-shm-hal: ipcf_dump_data()[522]: 0x0000: 00 01 02 03 04 05 06 07 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n[  983.731415] ipc-shm-hal: data_callback()[803]: [5][0] callback size 32\n[  983.731431] ipc-shm-hal: ipcf_dump_data()[519]: dump info: callback rx len[32] mul[1] remain[0]\n[  983.731443] ipc-shm-hal: ipcf_dump_data()[522]: 0x0000: 00 01 02 03 04 05 06 07 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\nlibipcfhal-test: TestBody() [2478] info :\nrdump: 0\n\nlibipcfhal-test: TestBody() [2479] info :\nrdump: 0\n"})}),"\n",(0,l.jsx)(e.h3,{id:"dumplen\u8c03\u8bd5\u8282\u70b9",children:"dumplen\u8c03\u8bd5\u8282\u70b9"}),"\n",(0,l.jsx)(e.p,{children:"\u4ee5channel\u4e3a\u5355\u4f4d\uff0c\u914d\u7f6edump\u6570\u636e\u957f\u5ea6\u3002\n\u3010\u8282\u70b9\u8def\u5f84\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"//ins-X\u8868\u793ainsid\uff0c\u82e5insid\u662f5\uff0c\u5219\u4e3ains-5\n/sys/kernel/debug/ipcdrv-ins-5/dumplen\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u4f5c\u7528-4",children:"\u3010\u8282\u70b9\u4f5c\u7528\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"//\u4ee5channel\u4e3a\u5355\u4f4d\uff0c\u914d\u7f6edump\u6570\u636e\u7684\u957f\u5ea6\n//dumplen>0\u4e14dumplen<data_len\u65f6\u6709\u6548\n//\u524d\u63d0\u6761\u4ef6\u662f\u4f7f\u80fdwdump\u6216rdump\nuint32_t dumplen;/**< dump\u6570\u636e\u65f6\uff0c\u6253\u5370\u6570\u636e\u7684\u5b57\u8282\u6570*/\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u8282\u70b9\u4f7f\u7528-4",children:"\u3010\u8282\u70b9\u4f7f\u7528\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"//\u65b9\u6cd5\u4e00\uff1a\u76f4\u63a5\u64cd\u4f5csys\u8282\u70b9\n//\u901a\u9053\u5b8c\u6210\u521d\u59cb\u5316\uff0c\u672a\u53d1\u9001\u6570\u636e\u65f6, enable\necho 0 > /sys/kernel/debug/ipcdrv-ins-5/dumplen\n//\u53d1\u9001\u6570\u636e\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u6253\u5370\u53d1\u9001\u7684\u6570\u636e\n//\u6536\u53d1\u6570\u636e\u7ed3\u675f\uff0c\u4e14\u901a\u9053\u672a\u53bb\u521d\u59cb\u5316\u65f6\uff0cget\ncat /sys/kernel/debug/ipcdrv-ins-5/dumplen\n\n\n//\u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528open/write/read/close\u64cd\u4f5c\nfd= open(/sys/kernel/debug/ipcdrv-ins-5/dumplen, O_RDWR);\nwrite(fd, buf, DEV_README_BUFSIZE);\n//tx/rx\uff0c\u6253\u5370\u53d1\u9001\u7684\u6570\u636e\nread(fd, buf, DEV_README_BUFSIZE);\nclose(fd);\n"})}),"\n",(0,l.jsx)(e.h4,{id:"log-4",children:"\u3010log\u3011"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"[  852.898250] ipc-shm-hal: hal_ipc_shm_write()[926]: [5][0] tx size 32\n[  852.898283] ipc-shm-hal: ipcf_dump_data()[519]: dump info: tx data len[16] mul[0] remain[16]\n[  852.898315] ipc-shm-hal: ipcf_dump_data()[539]: 0x0000: 00 01 02 03 04 05 06 07 00 00 00 00 00 00 00 00\n[  852.898519] ipc-shm-hal: data_callback()[803]: [6][0] callback size 32\n[  852.898542] ipc-shm-hal: ipcf_dump_data()[519]: dump info: callback rx len[16] mul[0] remain[16]\n[  852.898571] ipc-shm-hal: ipcf_dump_data()[539]: 0x0000: 00 01 02 03 04 05 06 07 00 00 00 00 00 00 00 00\n[  853.900076] ipc-shm-hal: hal_ipc_shm_write()[926]: [6][0] tx size 32\n[  853.900112] ipc-shm-hal: ipcf_dump_data()[519]: dump info: tx data len[16] mul[0] remain[16]\n[  853.900143] ipc-shm-hal: ipcf_dump_data()[539]: 0x0000: 00 01 02 03 04 05 06 07 00 00 00 00 00 00 00 00\n[  853.900359] ipc-shm-hal: data_callback()[803]: [5][0] callback size 32\n[  853.900373] ipc-shm-hal: ipcf_dump_data()[519]: dump info: callback rx len[16] mul[0] remain[16]\n[  853.900401] ipc-shm-hal: ipcf_dump_data()[539]: 0x0000: 00 01 02 03 04 05 06 07 00 00 00 00 00 00 00 00\nlibipcfhal-test: TestBody() [2576] info :\ndumplen: 16\n\nlibipcfhal-test: TestBody() [2577] info :\ndumplen: 16\n\nlibipcfhal-test: TestBody() [2584] info :\nrdump: 0\n\nlibipcfhal-test: TestBody() [2585] info :\nrdump: 0\n\nlibipcfhal-test: TestBody() [2592] info :\nwdump: 0\n\nlibipcfhal-test: TestBody() [2593] info :\nwdump: 0\n"})})]})}function o(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>d,x:()=>a});var c=i(96540);const l={},s=c.createContext(l);function d(n){const e=c.useContext(s);return c.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:d(n.components),c.createElement(s.Provider,{value:e},n.children)}}}]);