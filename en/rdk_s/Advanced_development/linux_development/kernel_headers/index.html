<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-docs_s docs-version-current docs-doc-page docs-doc-id-Advanced_development/linux_development/kernel_headers" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">7.2.2 Kernel Headers | RDK DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/linux_development/kernel_headers"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-docs_s-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs_s-current"><meta data-rh="true" property="og:title" content="7.2.2 Kernel Headers | RDK DOC"><meta data-rh="true" name="description" content="If you need to compile kernel modules or similar code on your development board, you must install the Linux kernel headers. These header files contain various constant definitions, macro definitions, function interface declarations, and data structure definitions from the Linux kernel, and are essential dependencies required to compile kernel module code."><meta data-rh="true" property="og:description" content="If you need to compile kernel modules or similar code on your development board, you must install the Linux kernel headers. These header files contain various constant definitions, macro definitions, function interface declarations, and data structure definitions from the Linux kernel, and are essential dependencies required to compile kernel module code."><link data-rh="true" rel="icon" href="/rdk_doc/en/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/linux_development/kernel_headers"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development/linux_development/kernel_headers" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/linux_development/kernel_headers" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development/linux_development/kernel_headers" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"7. Advanced Development","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development"},{"@type":"ListItem","position":2,"name":"7.2. Linux Development Guide","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/linux_development"},{"@type":"ListItem","position":3,"name":"7.2.2 Kernel Headers","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/linux_development/kernel_headers"}]}</script><script src="https://hm.baidu.com/hm.js?24dd63cad43b63889ea6bede5fd1ab9e" async></script><link rel="stylesheet" href="/rdk_doc/en/assets/css/styles.0fbd7d27.css">
<script src="/rdk_doc/en/assets/js/runtime~main.fc4b2a1c.js" defer="defer"></script>
<script src="/rdk_doc/en/assets/js/main.b93fbcc4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a class="navbar__item navbar__link" href="/rdk_doc/en/RDK">RDK X3 / X5</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rdk_doc/en/rdk_s/RDK">RDK S100</a><a href="https://developer.d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>EN</a><ul class="dropdown__menu"><li><a href="/rdk_doc/rdk_s/Advanced_development/linux_development/kernel_headers" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">CN</a></li><li><a href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/kernel_headers" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">EN</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rdk_doc/en/rdk_s/RDK">D-Robotics RDK Kit</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Quick_start">1. Quick Start</a><button aria-label="Expand sidebar category &#x27;1. Quick Start&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/System_configuration">2. System Configuration</a><button aria-label="Expand sidebar category &#x27;2. System Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Basic_Application">3. Basic Application Development</a><button aria-label="Expand sidebar category &#x27;3. Basic Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Basic_Development">4. Algorithm Application Development</a><button aria-label="Expand sidebar category &#x27;4. Algorithm Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Robot_development">5. Robotics Application Development</a><button aria-label="Expand sidebar category &#x27;5. Robotics Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Application_case">6. Application Development Guide</a><button aria-label="Expand sidebar category &#x27;6. Application Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rdk_doc/en/rdk_s/Advanced_development">7. Advanced Development</a><button aria-label="Collapse sidebar category &#x27;7. Advanced Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/hardware_development">7.1 Hardware Development Guide</a><button aria-label="Expand sidebar category &#x27;7.1 Hardware Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/en/rdk_s/linux_development">7.2. Linux Development Guide</a><button aria-label="Collapse sidebar category &#x27;7.2. Linux Development Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/environment_build">7.2.1 Development Environment Setup and Build Instructions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/kernel_headers">7.2.2 Kernel Headers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/realtime_kernel">7.2.3 Applying the Real-Time Kernel</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/driver_development_s100">7.2.4 RDK S100 Driver Development Guide</a><button aria-label="Expand sidebar category &#x27;7.2.4 RDK S100 Driver Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/hardware_unit_test">7.2.5 Hardware Unit Testing</a><button aria-label="Expand sidebar category &#x27;7.2.5 Hardware Unit Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/OTA">7.2.6 OTA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/kernel_debug">7.2.7 Introduction to Linux Debugging Features</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/03_multimedia_development">7.3 Multimedia Development Guide</a><button aria-label="Expand sidebar category &#x27;7.3 Multimedia Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/04_toolchain_development">7.4 Algorithm Toolchain Development Guide</a><button aria-label="Expand sidebar category &#x27;7.4 Algorithm Toolchain Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/05_MCU_development">7.5 MCU Development Guide</a><button aria-label="Expand sidebar category &#x27;7.5 MCU Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/rdk_gen">7.6 RDK S100 Build System Development Guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/FAQ">8. FAQ</a><button aria-label="Expand sidebar category &#x27;8. FAQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Appendix">9. Appendix</a><button aria-label="Expand sidebar category &#x27;9. Appendix&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rdk_doc/en/rdk_s/Release_Note/roadmap">10. Version release</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rdk_doc/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/rdk_s/Advanced_development"><span>7. Advanced Development</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/rdk_s/linux_development"><span>7.2. Linux Development Guide</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">7.2.2 Kernel Headers</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>7.2.2 Kernel Headers</h1></header>
<p>If you need to compile kernel modules or similar code on your development board, you must install the Linux kernel headers. These header files contain various constant definitions, macro definitions, function interface declarations, and data structure definitions from the Linux kernel, and are essential dependencies required to compile kernel module code.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2>
<p>You can install the kernel headers and kernel compilation dependencies using the following commands:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install linux-headers-6.1.112-rt43</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install bison flex</span><br></span></code></pre></div></div>
<p>After successful execution, the kernel headers will be installed under the <code>/usr/src</code> directory:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~$ ls /usr/src/linux-headers-$(uname -r)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Documentation  Makefile        arch   crypto   include   ipc     mm    samples   sound  virt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Kbuild         Module.symvers  block  drivers  init      kernel  net   scripts   tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Kconfig        System.map      certs  fs       io_uring  lib     rust  security  usr</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Do not</strong> run the <code>make clean</code> command inside the <code>/usr/src/linux-headers-$(uname -r)</code> directory, as this will break the kernel module compilation environment on your board.<br>
<!-- -->If you have already executed <code>make clean</code>, please reinstall the <code>linux-headers-6.1.112-rt43</code> package to restore the environment.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage-example">Usage Example<a href="#usage-example" class="hash-link" aria-label="Direct link to Usage Example" title="Direct link to Usage Example">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hello-world-kernel-module">Hello World Kernel Module<a href="#hello-world-kernel-module" class="hash-link" aria-label="Direct link to Hello World Kernel Module" title="Direct link to Hello World Kernel Module">​</a></h3>
<p>We&#x27;ll demonstrate how to use kernel headers by developing a simple <code>Hello World</code> kernel module. The general steps are as follows:</p>
<ul>
<li>Prepare the source code (using <code>${HOME}/test_ko</code> under the <code>sunrise</code> user as an example)</li>
<li>Write a Makefile to compile the driver module</li>
<li>Sign the driver module</li>
<li>Test loading and unloading the module</li>
<li>(Optional) Configure automatic module loading at boot</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="writing-the-hello-world-kernel-module">Writing the Hello World Kernel Module<a href="#writing-the-hello-world-kernel-module" class="hash-link" aria-label="Direct link to Writing the Hello World Kernel Module" title="Direct link to Writing the Hello World Kernel Module">​</a></h4>
<p>Open your preferred editor (e.g., VIM) and create a file named <code>hello.c</code> with the following content:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;linux/module.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;linux/kernel.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;linux/init.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">MODULE_LICENSE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;GPL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">MODULE_AUTHOR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Your Name&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">MODULE_DESCRIPTION</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Simple Hello World kernel module&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> __init </span><span class="token function" style="color:#d73a49">hello_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">printk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KERN_INFO </span><span class="token string" style="color:#e3116c">&quot;Hello, World! Kernel module loaded.\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> __exit </span><span class="token function" style="color:#d73a49">hello_exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">printk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KERN_INFO </span><span class="token string" style="color:#e3116c">&quot;Goodbye, World! Kernel module unloaded.\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">module_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hello_init</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">module_exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hello_exit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>This module prints <code>Hello, World!</code> when loaded and <code>Goodbye, World!</code> when unloaded.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="writing-the-makefile">Writing the Makefile<a href="#writing-the-makefile" class="hash-link" aria-label="Direct link to Writing the Makefile" title="Direct link to Writing the Makefile">​</a></h4>
<p>Open your preferred editor (e.g., VIM) and create a file named <code>Makefile</code> with the following content:</p>
<div class="language-makefile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-makefile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ifneq ($(KERNELRELEASE),)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj-m := hello.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KERN_VER ?= $(shell uname -r)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KERN_DIR ?= /lib/modules/$(KERN_VER)/build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PWD := $(shell pwd)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.PHONY := all prepare clean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">all: prepare</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	$(MAKE) -C $(KERN_DIR) M=$(PWD) modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	$(MAKE) -C $(KERN_DIR) KERNELRELEASE=$(KERN_VER) M=$(PWD) modules_install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prepare:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	$(MAKE) -C $(KERN_DIR) prepare</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clean:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	$(MAKE) -C $(KERN_DIR) M=$(PWD) clean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">endif</span><br></span></code></pre></div></div>
<ul>
<li><code>PWD</code> specifies the source code path (i.e., the location of <code>hello.c</code>);</li>
<li><code>KERN_DIR</code> specifies the kernel source path;</li>
<li><code>KERNELRELEASE</code> is a variable defined in the top-level kernel Makefile, typically used to determine whether the current build is running under the <code>Kbuild</code> framework;</li>
<li>Invoke the kernel&#x27;s native <code>prepare</code> target to set up the tools required for compiling and installing kernel modules;</li>
<li>Invoke the kernel&#x27;s native <code>modules</code> target to compile the kernel module;</li>
<li>Invoke the kernel&#x27;s native <code>modules_install</code> target to sign and install the compiled kernel module into the system&#x27;s module directory.</li>
</ul>
<p>After saving the <code>Makefile</code>, run the <code>make</code> command to compile the module and generate the <code>hello.ko</code> file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~/test_ko$ sudo make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make -C /lib/modules/6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8/build prepare</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make[1]: Entering directory &#x27;/usr/src/linux-headers-6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SYNC    include/config/auto.conf.cmd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/basic/fixdep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/kconfig/conf.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/kconfig/confdata.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/kconfig/expr.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LEX     scripts/kconfig/lexer.lex.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  YACC    scripts/kconfig/parser.tab.[ch]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/kconfig/lexer.lex.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/kconfig/menu.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/kconfig/parser.tab.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/kconfig/preprocess.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/kconfig/symbol.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/kconfig/util.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTLD  scripts/kconfig/conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/dtc.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/flattree.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/fstree.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/data.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/livetree.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/treesource.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/srcpos.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/checks.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/util.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LEX     scripts/dtc/dtc-lexer.lex.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  YACC    scripts/dtc/dtc-parser.tab.[ch]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/dtc-lexer.lex.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/dtc-parser.tab.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTLD  scripts/dtc/dtc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/libfdt/fdt.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/libfdt/fdt_ro.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/libfdt/fdt_wip.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/libfdt/fdt_sw.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/libfdt/fdt_rw.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/libfdt/fdt_strerror.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/libfdt/fdt_empty_tree.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/libfdt/fdt_addresses.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/libfdt/fdt_overlay.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/dtc/fdtoverlay.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTLD  scripts/dtc/fdtoverlay</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/kallsyms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/sorttable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/asn1_compiler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/sign-file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  UPD     include/config/kernel.release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  UPD     include/generated/utsrelease.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  UPD     include/generated/compile.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  GEN     arch/arm64/include/generated/asm/cpucaps.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  GEN     arch/arm64/include/generated/asm/sysreg-defs.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC      scripts/mod/empty.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/mod/mk_elfconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  MKELF   scripts/mod/elfconfig.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/mod/modpost.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC      scripts/mod/devicetable-offsets.s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  UPD     scripts/mod/devicetable-offsets.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/mod/file2alias.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTCC  scripts/mod/sumversion.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOSTLD  scripts/mod/modpost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CALL    scripts/checksyscalls.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CHKSHA1 include/linux/atomic/atomic-arch-fallback.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CHKSHA1 include/linux/atomic/atomic-instrumented.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CHKSHA1 include/linux/atomic/atomic-long.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LD      arch/arm64/kernel/vdso/vdso.so.dbg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  VDSOSYM include/generated/vdso-offsets.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  OBJCOPY arch/arm64/kernel/vdso/vdso.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make[1]: Leaving directory &#x27;/usr/src/linux-headers-6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make -C /lib/modules/6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8/build M=/home/sunrise/test_ko modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make[1]: Entering directory &#x27;/usr/src/linux-headers-6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC [M]  /home/sunrise/test_ko/hello.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  MODPOST /home/sunrise/test_ko/Module.symvers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC [M]  /home/sunrise/test_ko/hello.mod.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LD [M]  /home/sunrise/test_ko/hello.ko</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make[1]: Leaving directory &#x27;/usr/src/linux-headers-6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make -C /lib/modules/6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8/build KERNELRELEASE=6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8 M=/home/sunrise/test_ko modules_install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make[1]: Entering directory &#x27;/usr/src/linux-headers-6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  INSTALL /lib/modules/6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8/extra/hello.ko</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SIGN    /lib/modules/6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8/extra/hello.ko</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DEPMOD  /lib/modules/6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make[1]: Leaving directory &#x27;/usr/src/linux-headers-6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8&#x27;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><ul>
<li>The kernel version shown in the output above will vary depending on your system version;</li>
<li>For more details on compiling external kernel modules, please refer to: <a href="https://kernel.org/doc/html/v6.1/kbuild/modules.html" target="_blank" rel="noopener noreferrer">Linux Kernel Doc | Building External Modules</a>.</li>
</ul></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="module-signing">Module Signing<a href="#module-signing" class="hash-link" aria-label="Direct link to Module Signing" title="Direct link to Module Signing">​</a></h4>
<p>The compiled driver module has already been automatically signed via <code>modules_install</code>. If you wish to sign it manually, execute the following commands:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Create a signing script.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~/test_ko#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt; EOF &gt; drobot-sign-file.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">signing_ko=\$1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output_f=\$2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ ! -f &quot;\${signing_ko}&quot; ];then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	echo &quot;\${signing_ko} not found!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module_build_dir=/lib/modules/\$(uname -r)/build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">signing_algo=\$(cat \${module_build_dir}/.config | grep -w CONFIG_MODULE_SIG_HASH | awk -F &#x27;=&#x27; &#x27;{print \$2}&#x27; | tr -d &#x27;&quot;&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">signing_key_name=\$(cat \${module_build_dir}/.config | grep -w CONFIG_MODULE_SIG_KEY | awk -F &#x27;=&#x27; &#x27;{print \$2}&#x27; | tr -d &#x27;&quot;&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">signing_key_f=\${module_build_dir}/\${signing_key_name}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">signing_key_x509_f=\${module_build_dir}/certs/signing_key.x509</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -z &quot;\${output_f}&quot; ];then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	echo -n &quot;Saving signed module to \${signing_ko} ...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	echo -n &quot;Saving signed module to \${output_f} ...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\${module_build_dir}/scripts/sign-file \${signing_algo} \${signing_key_f} \${signing_key_x509_f} \${signing_ko} \${output_f}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Done!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~/test_ko# chmod +x ./drobot-sign-file.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~/test_ko# ./drobot-sign-file.sh hello.ko</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Saving signed module to hello.ko ...Done!</span><br></span></code></pre></div></div>
<p>If you load the driver module without signing it, the following error will occur:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: could not insert module hello.ko: Required key not available</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="load-the-module">Load the module<a href="#load-the-module" class="hash-link" aria-label="Direct link to Load the module" title="Direct link to Load the module">​</a></h4>
<p>Load the ko: <code>modprobe hello</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~/test_ko# sudo modprobe hello</span><br></span></code></pre></div></div>
<p>Check if the ko is loaded: <code>lsmod | grep hello</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~/test_ko# lsmod | grep hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello                  262144  0</span><br></span></code></pre></div></div>
<p>Unload the ko: <code>modprobe -r hello</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~/test_ko# sudo modprobe -r  hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 3136.909409] Goodbye, World!</span><br></span></code></pre></div></div>
<p>Run the command <code>dmesg</code> to view the kernel log messages as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~/test_ko$ dmesg | tail -n 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  525.710661] Hello, World! Kernel module loaded.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  612.716435] Goodbye, World! Kernel module unloaded.</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-automatic-loading-at-boot">Configure automatic loading at boot<a href="#configure-automatic-loading-at-boot" class="hash-link" aria-label="Direct link to Configure automatic loading at boot" title="Direct link to Configure automatic loading at boot">​</a></h4>
<p>Create a new configuration file with the <code>.conf</code> extension under the <code>/lib/modules-load.d</code> directory, for example <code>hello.conf</code>. Add the name of the module you want to load automatically in this configuration file (without the <code>.ko</code> extension). For example, to automatically load <code>hello.ko</code>, add a line containing <code>hello</code>. If multiple modules need to be loaded, you can list each module on a separate line in a single configuration file. You can easily create and configure the file using the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo echo hello &gt; /lib/modules-load.d/hello.conf</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="third-party-kernel-driver-module-compilation-example">Third-party kernel driver module compilation example<a href="#third-party-kernel-driver-module-compilation-example" class="hash-link" aria-label="Direct link to Third-party kernel driver module compilation example" title="Direct link to Third-party kernel driver module compilation example">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p><strong>Disclaimer</strong>:</p><ul>
<li>
<p>D-Robotics assumes no responsibility for the development/maintenance of any third-party driver modules.</p>
</li>
<li>
<p>D-Robotics is not liable for any issues arising from running third-party source code on the D-Robotics platform.</p>
</li>
</ul></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="pcan">PCAN<a href="#pcan" class="hash-link" aria-label="Direct link to PCAN" title="Direct link to PCAN">​</a></h4>
<ol>
<li>
<p>Please ensure your RDK development board is properly connected to the internet and can access the PCAN official website. For example, use the command <code>ping peak-system.com</code>. Sample output is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sunrise@ubuntu:~$ ping peak-system.com -c 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PING peak-system.com (37.202.3.222) 56(84) bytes of data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">64 bytes from r2096.agenturserver.it (37.202.3.222): icmp_seq=1 ttl=45 time=280 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">64 bytes from r2096.agenturserver.it (37.202.3.222): icmp_seq=3 ttl=45 time=279 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">64 bytes from r2096.agenturserver.it (37.202.3.222): icmp_seq=4 ttl=45 time=278 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">64 bytes from r2096.agenturserver.it (37.202.3.222): icmp_seq=5 ttl=45 time=277 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- peak-system.com ping statistics ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5 packets transmitted, 4 received, 20% packet loss, time 4024ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rtt min/avg/max/mdev = 277.180/278.460/280.280/1.152 ms</span><br></span></code></pre></div></div>
</li>
<li>
<p>According to the official <code>peak-system</code> instructions, download the <code>pcan-kernel-version.sh</code> script and confirm the driver version you need to download:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Download pcan-kernel-version.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://www.peak-system.com/fileadmin/media/linux/files/pcan-kernel-version.sh.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Extract script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -xzf pcan-kernel-version.sh.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run the script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./pcan-kernel-version.sh</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>D-Robotics RDK Super series only supports Linux kernel version 6.1.</p></div></div>
</li>
<li>
<p>Download the PCAN driver:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Depending on the actual internet environment, the download may take minutes to hours</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget --content-disposition https://www.peak-system.com/quick/PCAN-Linux-Driver</span><br></span></code></pre></div></div>
<ul>
<li>The <code>--content-disposition</code> option: saves the file locally using the filename provided by the server;</li>
</ul>
</li>
<li>
<p>Extract the PCAN driver archive. Here we use the PCAN driver version &quot;8.20.0&quot; released on 2025-08-16 as an example. Please adjust the command according to the actual file you downloaded:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tar -xzf peak-linux-driver-8.20.0.tar.gz</span><br></span></code></pre></div></div>
</li>
<li>
<p>Compile the driver:</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Please ensure that the linux-headers-6.1.112-rt43 package on your board is version 4.0.3 or higher.</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Install local module build prerequisites</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install flex bison -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install PCAN driver prerequisites</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install libpopt-dev -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Setup local module build environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo make -C /usr/src/linux-headers-$(uname -r) prepare</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Build PCAN Driver modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd peak-linux-driver-8.20.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install PCAN drivers and libraries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo make install</span><br></span></code></pre></div></div>
</li>
<li>
<p>Sign and use the PCAN driver. The following example uses PCAN driver version 8.20.0, where the driver modules are installed by default to <code>/lib/modules/6.1.112/misc/</code>:</p>
<ol>
<li>Create a signing script as described in the <a href="#module-signing">Module Signing</a> section;</li>
<li>Run the signing command:<!-- -->
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Sign file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo bash drobot-sign-file.sh /lib/modules/6.1.112/misc/pcan.ko</span><br></span></code></pre></div></div>
</li>
<li>Use the PCAN driver:<!-- -->
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Insert PCAN driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo insmod /lib/modules/6.1.112/misc/pcan.ko</span><br></span></code></pre></div></div>
</li>
</ol>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-12-03T09:23:59.000Z" itemprop="dateModified">Dec 3, 2025</time></b></span></div></div></footer></article><nav class="pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/environment_build"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">7.2.1 Development Environment Setup and Build Instructions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/realtime_kernel"><div class="pagination-nav__sublabel">Next </div><div class="pagination-nav__label">7.2.3 Applying the Real-Time Kernel</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#usage-example" class="table-of-contents__link toc-highlight">Usage Example</a><ul><li><a href="#hello-world-kernel-module" class="table-of-contents__link toc-highlight">Hello World Kernel Module</a><ul><li><a href="#writing-the-hello-world-kernel-module" class="table-of-contents__link toc-highlight">Writing the Hello World Kernel Module</a></li><li><a href="#writing-the-makefile" class="table-of-contents__link toc-highlight">Writing the Makefile</a></li><li><a href="#module-signing" class="table-of-contents__link toc-highlight">Module Signing</a></li><li><a href="#load-the-module" class="table-of-contents__link toc-highlight">Load the module</a></li><li><a href="#configure-automatic-loading-at-boot" class="table-of-contents__link toc-highlight">Configure automatic loading at boot</a></li></ul></li><li><a href="#third-party-kernel-driver-module-compilation-example" class="table-of-contents__link toc-highlight">Third-party kernel driver module compilation example</a><ul><li><a href="#pcan" class="table-of-contents__link toc-highlight">PCAN</a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.guyuehome.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GuYueHome<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact US</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 D-Robotics.</div></div></div></footer></div>
</body>
</html>