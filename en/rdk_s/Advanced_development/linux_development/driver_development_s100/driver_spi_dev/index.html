<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-docs_s docs-version-current docs-doc-page docs-doc-id-Advanced_development/linux_development/driver_development_s100/driver_spi_dev" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">SPI Debugging Guide | RDK DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_spi_dev"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-docs_s-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs_s-current"><meta data-rh="true" property="og:title" content="SPI Debugging Guide | RDK DOC"><meta data-rh="true" name="description" content="SPI Hardware Support"><meta data-rh="true" property="og:description" content="SPI Hardware Support"><link data-rh="true" rel="icon" href="/rdk_doc/en/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_spi_dev"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_spi_dev" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_spi_dev" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_spi_dev" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"7. Advanced Development","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development"},{"@type":"ListItem","position":2,"name":"7.2. Linux Development Guide","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/linux_development"},{"@type":"ListItem","position":3,"name":"7.2.4 RDK S100 Driver Development Guide","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/driver_development_s100"},{"@type":"ListItem","position":4,"name":"SPI Debugging Guide","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_spi_dev"}]}</script><script src="https://hm.baidu.com/hm.js?24dd63cad43b63889ea6bede5fd1ab9e" async></script><link rel="stylesheet" href="/rdk_doc/en/assets/css/styles.0fbd7d27.css">
<script src="/rdk_doc/en/assets/js/runtime~main.fc4b2a1c.js" defer="defer"></script>
<script src="/rdk_doc/en/assets/js/main.b93fbcc4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a class="navbar__item navbar__link" href="/rdk_doc/en/RDK">RDK X3 / X5</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rdk_doc/en/rdk_s/RDK">RDK S100</a><a href="https://developer.d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>EN</a><ul class="dropdown__menu"><li><a href="/rdk_doc/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_spi_dev" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">CN</a></li><li><a href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_spi_dev" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">EN</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rdk_doc/en/rdk_s/RDK">D-Robotics RDK Kit</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Quick_start">1. Quick Start</a><button aria-label="Expand sidebar category &#x27;1. Quick Start&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/System_configuration">2. System Configuration</a><button aria-label="Expand sidebar category &#x27;2. System Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Basic_Application">3. Basic Application Development</a><button aria-label="Expand sidebar category &#x27;3. Basic Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Basic_Development">4. Algorithm Application Development</a><button aria-label="Expand sidebar category &#x27;4. Algorithm Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Robot_development">5. Robotics Application Development</a><button aria-label="Expand sidebar category &#x27;5. Robotics Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Application_case">6. Application Development Guide</a><button aria-label="Expand sidebar category &#x27;6. Application Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rdk_doc/en/rdk_s/Advanced_development">7. Advanced Development</a><button aria-label="Collapse sidebar category &#x27;7. Advanced Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/hardware_development">7.1 Hardware Development Guide</a><button aria-label="Expand sidebar category &#x27;7.1 Hardware Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/en/rdk_s/linux_development">7.2. Linux Development Guide</a><button aria-label="Collapse sidebar category &#x27;7.2. Linux Development Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/environment_build">7.2.1 Development Environment Setup and Build Instructions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/kernel_headers">7.2.2 Kernel Headers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/realtime_kernel">7.2.3 Applying the Real-Time Kernel</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/en/rdk_s/driver_development_s100">7.2.4 RDK S100 Driver Development Guide</a><button aria-label="Collapse sidebar category &#x27;7.2.4 RDK S100 Driver Development Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/uboot_kernel_config">Configure Uboot and Kernel Option Parameters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_uart_dev">UART Driver Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_i2c_dev">I2C Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_gpio_dev">GPIO Usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_pinctrl_dev">Pinctrl Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_ipc">Introduction to the IPC Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_spi_dev">SPI Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_pwm">PWM Driver Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_thermal_dev">Thermal System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_lowpower">Low Power Mode Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_audio">Audio Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_timesync">Time Synchronization Solutions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/13_driver_pcie">PCIe Usage Guide</a><button aria-label="Expand sidebar category &#x27;PCIe Usage Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_wifi">WiFi Driver Debugging Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/15_driver_hbmem">HBMEM Usage Guide</a><button aria-label="Expand sidebar category &#x27;HBMEM Usage Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/16_driver_ethernet">Ethernet Usage Development Guide</a><button aria-label="Expand sidebar category &#x27;Ethernet Usage Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/hardware_unit_test">7.2.5 Hardware Unit Testing</a><button aria-label="Expand sidebar category &#x27;7.2.5 Hardware Unit Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/OTA">7.2.6 OTA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/kernel_debug">7.2.7 Introduction to Linux Debugging Features</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/03_multimedia_development">7.3 Multimedia Development Guide</a><button aria-label="Expand sidebar category &#x27;7.3 Multimedia Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/04_toolchain_development">7.4 Algorithm Toolchain Development Guide</a><button aria-label="Expand sidebar category &#x27;7.4 Algorithm Toolchain Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/05_MCU_development">7.5 MCU Development Guide</a><button aria-label="Expand sidebar category &#x27;7.5 MCU Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/rdk_gen">7.6 RDK S100 Build System Development Guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/FAQ">8. FAQ</a><button aria-label="Expand sidebar category &#x27;8. FAQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Appendix">9. Appendix</a><button aria-label="Expand sidebar category &#x27;9. Appendix&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rdk_doc/en/rdk_s/Release_Note/roadmap">10. Version release</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rdk_doc/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/rdk_s/Advanced_development"><span>7. Advanced Development</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/rdk_s/linux_development"><span>7.2. Linux Development Guide</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/rdk_s/driver_development_s100"><span>7.2.4 RDK S100 Driver Development Guide</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">SPI Debugging Guide</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>SPI Debugging Guide</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="spi-hardware-support">SPI Hardware Support<a href="#spi-hardware-support" class="hash-link" aria-label="Direct link to SPI Hardware Support" title="Direct link to SPI Hardware Support">​</a></h2>
<p>The S100 Acore supports two SPI interfaces, and SPI0 and SPI1 can only operate as SPI Masters.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="software-architecture">Software Architecture<a href="#software-architecture" class="hash-link" aria-label="Direct link to Software Architecture" title="Direct link to Software Architecture">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/image-spi_software.png" alt="image-spi_software" class="img_ev3q"></p>
<p>The above figure illustrates the SPI software architecture. From bottom to top, it can be divided into the hardware IP layer, kernel layer, and user space layer. Each layer is introduced below.</p>
<ul>
<li><strong>Hardware IP Layer</strong>: This layer represents the SPI hardware.</li>
<li><strong>Kernel Layer</strong>: This layer can be further subdivided into three sub-layers:<!-- -->
<ul>
<li><strong>SPI Driver Layer</strong>: Primarily implements operations for the SPI hardware IP and also implements interfaces defined by the SPI framework.</li>
<li><strong>SPI Framework Layer</strong>: Acts as an adaptation layer for the SPI driver. It defines a set of interfaces that the driver layer must implement for the lower layer and provides generic interfaces to the upper layer, abstracting hardware details.</li>
<li><strong>SPI Char Device Layer</strong>: Provides device nodes for user space, facilitating data exchange between user space and kernel space. Currently, the kernel’s built-in <code>spidev</code> character device is used.</li>
</ul>
</li>
<li><strong>Application Layer</strong>: Consists of various applications that interact with kernel space by calling character device drivers to exchange data.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="code-paths">Code Paths<a href="#code-paths" class="hash-link" aria-label="Direct link to Code Paths" title="Direct link to Code Paths">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hobot-spi-protocol-code">Hobot SPI Protocol Code<a href="#hobot-spi-protocol-code" class="hash-link" aria-label="Direct link to Hobot SPI Protocol Code" title="Direct link to Hobot SPI Protocol Code">​</a></h3>
<p>All Hobot SPI driver-related code is located under the <strong>$project/hobot-drivers/spi</strong> directory.</p>
<div class="language-{.text} codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-{.text} codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oops@tiger$ tree . -L 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Kconfig                       # Kconfig-related files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──spi_drv                        # SPI driver-related files</span><br></span></code></pre></div></div>
<p>Description of the <strong>$project/hobot-drivers/spi/spi_drv</strong> directory:</p>
<div class="language-{.text} codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-{.text} codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oops@tiger$ tree . -L 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Makefile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── spi-dw.c                       # Core SPI driver code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── spi-dw.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── spi-dw-mmio.c                  # SPI driver MMIO code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── spi-dw-mmio-dma.c              # SPI driver DMA code</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-spi-framework-code">Linux SPI Framework Code<a href="#linux-spi-framework-code" class="hash-link" aria-label="Direct link to Linux SPI Framework Code" title="Direct link to Linux SPI Framework Code">​</a></h3>
<p>All Linux SPI protocol-related code resides in the <strong>$project/kernel/drivers/spi</strong> directory.</p>
<div class="language-{.text} codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-{.text} codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oops@tiger$ tree kernel/drivers/spi/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drivers/spi/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── spi.c                             # SPI framework code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oops@tiger$</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="spi-device-tree-code">SPI Device Tree Code<a href="#spi-device-tree-code" class="hash-link" aria-label="Direct link to SPI Device Tree Code" title="Direct link to SPI Device Tree Code">​</a></h3>
<p>The following DTS files in S100 involve SPI-related configurations:</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> drobot</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">s100</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">pinctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dtsi       # SPI pinctrl configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> drobot</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">s100</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">soc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dtsi           # SPI device node configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> drobot</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">s100</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">pdma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dtsi          # SPI PDMA usage configuration</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="spi-device-tree-configuration-explanation">SPI Device Tree Configuration Explanation<a href="#spi-device-tree-configuration-explanation" class="hash-link" aria-label="Direct link to SPI Device Tree Configuration Explanation" title="Direct link to SPI Device Tree Configuration Explanation">​</a></h3>
<div class="language-dts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spi0: spi@39800000 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		compatible = &quot;hobot,hb-dw-spi&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		reg-io-width = &lt;4&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		#address-cells = &lt;1&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		#size-cells = &lt;0&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		reg = &lt;0x0 0x39800000 0x0 0x1000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		interrupts = &lt;GIC_SPI PERISYS_SPI0_SSI_INTR PERISYS_SPI0_SSI_INTR_TRIG_TYPE&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		status = &quot;okay&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		num-cs = &lt;2&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		resets = &lt;&amp;smc_reset RST_IDX_IP_PERI_SPIM0&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&lt;&amp;smc_reset RST_IDX_IP_PERI_SPIM0_APB&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		reset-names = &quot;spi_reset&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		clocks = &lt;&amp;scmi_smc_clk CLK_IDX_TOP_PERI_SPI_M0&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		clock-names = &quot;spi_pclk&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		power-domains = &lt;&amp;scmi_smc_pd PD_IDX_LSPERI_TOP&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		freq-pclk = &lt;200000000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		sample-delay = &lt;1&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		pinctrl-names = &quot;default&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		pinctrl-0 = &lt;&amp;peri_spi0&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		dmas = &lt;&amp;pdma0 8                        /* read channel */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&amp;pdma0 9        &gt;;              /* write channel */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		dma-names = &quot;rx&quot;, &quot;tx&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		spidev@0 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				compatible = &quot;rohm,dh2228fv&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				spi-max-frequency = &lt;50000000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				reg = &lt;0&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spi1: spi@39810000 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		compatible = &quot;hobot,hb-dw-spi&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		reg-io-width = &lt;4&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		#address-cells = &lt;1&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		#size-cells = &lt;0&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		reg = &lt;0x0 0x39810000 0x0 0x1000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		interrupts = &lt;GIC_SPI PERISYS_SPI1_SSI_INTR PERISYS_SPI1_SSI_INTR_TRIG_TYPE&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		status = &quot;okay&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		num-cs = &lt;2&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		resets = &lt;&amp;smc_reset RST_IDX_IP_PERI_SPIM1&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								&lt;&amp;smc_reset RST_IDX_IP_PERI_SPIM1_APB&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		reset-names = &quot;spi_reset&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		clocks = &lt;&amp;scmi_smc_clk CLK_IDX_TOP_PERI_SPI_M1&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		clock-names = &quot;spi_pclk&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		power-domains = &lt;&amp;scmi_smc_pd PD_IDX_LSPERI_TOP&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		freq-pclk = &lt;200000000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		sample-delay = &lt;1&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		pinctrl-names = &quot;default&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		pinctrl-0 = &lt;&amp;peri_spi1&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		dmas = &lt;&amp;pdma0 10                       /* read channel */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						&amp;pdma0 11       &gt;;              /* write channel */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		dma-names = &quot;rx&quot;, &quot;tx&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		spidev@0 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				compatible = &quot;rohm,dh2228fv&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				spi-max-frequency = &lt;50000000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				reg = &lt;0&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Key newly added configuration items for S100 SPI are explained below:</p>
<ul>
<li><strong>sample-delay</strong>: When the SPI controller operates as a master, this value specifies the sampling delay for received data. If bit misalignment occurs in received data, adjust this value accordingly.</li>
<li><strong>num-cs</strong>: When the SPI controller operates as a master, this specifies the number of chip selects (CS) supported. The S100 SPI supports up to two chip selects in master mode.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="spi-verification-and-debugging">SPI Verification and Debugging<a href="#spi-verification-and-debugging" class="hash-link" aria-label="Direct link to SPI Verification and Debugging" title="Direct link to SPI Verification and Debugging">​</a></h2>
<p>This section introduces how to verify basic SPI functionality on the S100, including environment setup, execution of test commands, and locations of test code.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-environment-preparation">Test Environment Preparation<a href="#test-environment-preparation" class="hash-link" aria-label="Direct link to Test Environment Preparation" title="Direct link to Test Environment Preparation">​</a></h3>
<p><code>spidev_test</code> is an open-source SPI testing utility. Users can directly obtain and compile it from the following directory in the Linux source code:</p>
<p>Source location: <code>kernel/tools/spi/spidev_test.c</code>.</p>
<p>Common parameters for <code>spidev_test</code> are explained below:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@ubuntu:/map# ./spidev_test -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./spidev_test: invalid option -- &#x27;h&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: ./spidev_test [-DsbdlHOLC3vpNR24SI]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -D --device   device to use (default /dev/spidev1.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -s --speed    max speed (Hz)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -d --delay    delay (usec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -b --bpw      bits per word</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -i --input    input data from a file (e.g. &quot;test.bin&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -o --output   output data to a file (e.g. &quot;results.bin&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -l --loop     loopback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -H --cpha     clock phase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -O --cpol     clock polarity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -L --lsb      least significant bit first</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -C --cs-high  chip select active high</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -3 --3wire    SI/SO signals shared</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -v --verbose  Verbose (show tx buffer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -p            Send data (e.g. &quot;1234\xde\xad&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -N --no-cs    no chip select</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -R --ready    slave pulls low to pause</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -2 --dual     dual transfer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -4 --quad     quad transfer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -8 --octal    octal transfer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -S --size     transfer size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -I --iter     iterations</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="spi-internal-loopback-test">SPI Internal Loopback Test<a href="#spi-internal-loopback-test" class="hash-link" aria-label="Direct link to SPI Internal Loopback Test" title="Direct link to SPI Internal Loopback Test">​</a></h3>
<p>The SPI internal loopback test is supported only when operating as an SPI Master. The principle involves the SPI hardware IP’s TX FIFO sending data directly to the RX FIFO to form a loopback.</p>
<p>Example test command and results:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@ubuntu:/map# ./spidev_test -D /dev/spidev1.0 -s 1000000 -S 100 -l -v -p &quot;\x01\x02\x03\x04&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spi mode: 0x20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bits per word: 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max speed: 1000000 Hz (1000 kHz)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TX | 01 02 03 04 __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __  |....|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RX | 01 02 03 04 __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __  |....|</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="spi-external-loopback-test">SPI External Loopback Test<a href="#spi-external-loopback-test" class="hash-link" aria-label="Direct link to SPI External Loopback Test" title="Direct link to SPI External Loopback Test">​</a></h3>
<p>SPI external loopback test refers to connecting an SPI Master to an SPI Slave.</p>
<p>The Master can be selected as SPI1, and the SPI Slave should be an external SPI device (chosen by the customer).</p>
<p>The command for sending test data from the S100 side is as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@ubuntu:/map# ./spidev_test -D /dev/spidev1.0 -s 1000000 -S 100  -v -p &quot;\x01\x02\x03\x04&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spi mode: 0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bits per word: 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max speed: 1000000 Hz (1000 kHz)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TX | 01 02 03 04 __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __  |....|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RX | FF FF FF FF __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __  |....|</span><br></span></code></pre></div></div>
<p>The Slave device will receive the data sent by the Master on the S100 side.</p>
<p><strong>Note: When performing the external loopback test, the SPI Slave program must be executed first, followed by the SPI Master program. If the SPI Master program is executed before the SPI Slave program, data loss may occur due to desynchronization between the Master and Slave.</strong></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-12-03T09:23:59.000Z" itemprop="dateModified">Dec 3, 2025</time></b></span></div></div></footer></article><nav class="pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_ipc"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction to the IPC Module</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_pwm"><div class="pagination-nav__sublabel">Next </div><div class="pagination-nav__label">PWM Driver Debugging Guide</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#spi-hardware-support" class="table-of-contents__link toc-highlight">SPI Hardware Support</a></li><li><a href="#software-architecture" class="table-of-contents__link toc-highlight">Software Architecture</a></li><li><a href="#code-paths" class="table-of-contents__link toc-highlight">Code Paths</a><ul><li><a href="#hobot-spi-protocol-code" class="table-of-contents__link toc-highlight">Hobot SPI Protocol Code</a></li><li><a href="#linux-spi-framework-code" class="table-of-contents__link toc-highlight">Linux SPI Framework Code</a></li><li><a href="#spi-device-tree-code" class="table-of-contents__link toc-highlight">SPI Device Tree Code</a></li><li><a href="#spi-device-tree-configuration-explanation" class="table-of-contents__link toc-highlight">SPI Device Tree Configuration Explanation</a></li></ul></li><li><a href="#spi-verification-and-debugging" class="table-of-contents__link toc-highlight">SPI Verification and Debugging</a><ul><li><a href="#test-environment-preparation" class="table-of-contents__link toc-highlight">Test Environment Preparation</a></li><li><a href="#spi-internal-loopback-test" class="table-of-contents__link toc-highlight">SPI Internal Loopback Test</a></li><li><a href="#spi-external-loopback-test" class="table-of-contents__link toc-highlight">SPI External Loopback Test</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.guyuehome.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GuYueHome<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact US</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 D-Robotics.</div></div></div></footer></div>
</body>
</html>