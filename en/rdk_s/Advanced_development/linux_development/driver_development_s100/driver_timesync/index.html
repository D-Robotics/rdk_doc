<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-docs_s docs-version-current docs-doc-page docs-doc-id-Advanced_development/linux_development/driver_development_s100/driver_timesync" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Time Synchronization Solutions | RDK DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_timesync"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-docs_s-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs_s-current"><meta data-rh="true" property="og:title" content="Time Synchronization Solutions | RDK DOC"><meta data-rh="true" name="description" content="Abbreviations and Explanations"><meta data-rh="true" property="og:description" content="Abbreviations and Explanations"><link data-rh="true" rel="icon" href="/rdk_doc/en/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_timesync"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_timesync" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_timesync" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_timesync" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"7. Advanced Development","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development"},{"@type":"ListItem","position":2,"name":"7.2. Linux Development Guide","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/linux_development"},{"@type":"ListItem","position":3,"name":"7.2.4 RDK S100 Driver Development Guide","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/driver_development_s100"},{"@type":"ListItem","position":4,"name":"Time Synchronization Solutions","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_timesync"}]}</script><script src="https://hm.baidu.com/hm.js?24dd63cad43b63889ea6bede5fd1ab9e" async></script>
<script src="/rdk_doc/js/dify-config.js"></script>
<script src="https://rdk.d-robotics.cc/embed.min.js" id="MltLQTHPb5EeP7uz" defer="defer"></script><link rel="stylesheet" href="/rdk_doc/en/assets/css/styles.e31f7a90.css">
<script src="/rdk_doc/en/assets/js/runtime~main.730faba8.js" defer="defer"></script>
<script src="/rdk_doc/en/assets/js/main.defb7dc0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a class="navbar__item navbar__link" href="/rdk_doc/en/RDK">RDK X3 / X5</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rdk_doc/en/rdk_s/RDK">RDK S100</a><a href="https://developer.d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>EN</a><ul class="dropdown__menu"><li><a href="/rdk_doc/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_timesync" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">CN</a></li><li><a href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_timesync" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">EN</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rdk_doc/en/rdk_s/RDK">D-Robotics RDK Kit</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Quick_start">1. Quick Start</a><button aria-label="Expand sidebar category &#x27;1. Quick Start&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/System_configuration">2. System Configuration</a><button aria-label="Expand sidebar category &#x27;2. System Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Basic_Application">3. Basic Application Development</a><button aria-label="Expand sidebar category &#x27;3. Basic Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Basic_Development">4. Algorithm Application Development</a><button aria-label="Expand sidebar category &#x27;4. Algorithm Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Robot_development">5. Robotics Application Development</a><button aria-label="Expand sidebar category &#x27;5. Robotics Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Application_case">6. Application Development Guide</a><button aria-label="Expand sidebar category &#x27;6. Application Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rdk_doc/en/rdk_s/Advanced_development">7. Advanced Development</a><button aria-label="Collapse sidebar category &#x27;7. Advanced Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/hardware_development">7.1 Hardware Development Guide</a><button aria-label="Expand sidebar category &#x27;7.1 Hardware Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/en/rdk_s/linux_development">7.2. Linux Development Guide</a><button aria-label="Collapse sidebar category &#x27;7.2. Linux Development Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/environment_build">7.2.1 Development Environment Setup and Build Instructions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/kernel_headers">7.2.2 Kernel Headers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/realtime_kernel">7.2.3 Applying the Real-Time Kernel</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/en/rdk_s/driver_development_s100">7.2.4 RDK S100 Driver Development Guide</a><button aria-label="Collapse sidebar category &#x27;7.2.4 RDK S100 Driver Development Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/uboot_kernel_config">Configure Uboot and Kernel Option Parameters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_uart_dev">UART Driver Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_i2c_dev">I2C Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_gpio_dev">GPIO Usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_pinctrl_dev">Pinctrl Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_ipc">Introduction to the IPC Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_spi_dev">SPI Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_pwm">PWM Driver Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_thermal_dev">Thermal System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_lowpower">Low Power Mode Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_audio">Audio Debugging Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_timesync">Time Synchronization Solutions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/13_driver_pcie">PCIe Usage Guide</a><button aria-label="Expand sidebar category &#x27;PCIe Usage Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_wifi">WiFi Driver Debugging Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/15_driver_hbmem">HBMEM Usage Guide</a><button aria-label="Expand sidebar category &#x27;HBMEM Usage Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/16_driver_ethernet">Ethernet Usage Development Guide</a><button aria-label="Expand sidebar category &#x27;Ethernet Usage Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/hardware_unit_test">7.2.5 Hardware Unit Testing</a><button aria-label="Expand sidebar category &#x27;7.2.5 Hardware Unit Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/OTA">7.2.6 OTA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/kernel_debug">7.2.7 Introduction to Linux Debugging Features</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/03_multimedia_development">7.3 Multimedia Development Guide</a><button aria-label="Expand sidebar category &#x27;7.3 Multimedia Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/04_toolchain_development">7.4 Algorithm Toolchain Development Guide</a><button aria-label="Expand sidebar category &#x27;7.4 Algorithm Toolchain Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/05_MCU_development">7.5 MCU Development Guide</a><button aria-label="Expand sidebar category &#x27;7.5 MCU Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/rdk_gen">7.6 RDK S100 Build System Development Guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/FAQ">8. FAQ</a><button aria-label="Expand sidebar category &#x27;8. FAQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Appendix">9. Appendix</a><button aria-label="Expand sidebar category &#x27;9. Appendix&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rdk_doc/en/rdk_s/Release_Note/roadmap">10. Version release</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rdk_doc/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/rdk_s/Advanced_development"><span>7. Advanced Development</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/rdk_s/linux_development"><span>7.2. Linux Development Guide</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/rdk_s/driver_development_s100"><span>7.2.4 RDK S100 Driver Development Guide</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Time Synchronization Solutions</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Time Synchronization Solutions</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="abbreviations-and-explanations">Abbreviations and Explanations<a href="#abbreviations-and-explanations" class="hash-link" aria-label="Direct link to Abbreviations and Explanations" title="Direct link to Abbreviations and Explanations">​</a></h2>
<table><thead><tr><th><strong>Abbreviation</strong></th><th><strong>Explanation</strong></th></tr></thead><tbody><tr><td>GPS</td><td>Global Positioning System</td></tr><tr><td>RTC</td><td>Real_Time Clock</td></tr><tr><td>PHC</td><td>PTP hardware clock</td></tr><tr><td>PTP</td><td>Precision Time Protocol</td></tr><tr><td>gPTP</td><td>Generalized Precision Time Protocol, an extension of the PTP protocol</td></tr><tr><td>MCU</td><td>Microcontroller Unit</td></tr><tr><td>UART</td><td>Universal Asynchronous Receiver/Transmitter</td></tr><tr><td>CAN</td><td>Controller Area Network</td></tr><tr><td>PPS</td><td>Pulse Per Second</td></tr><tr><td>NMEA</td><td>National Marine Electronics Association</td></tr><tr><td>NTP</td><td>Network Time Protocol</td></tr><tr><td>NIC</td><td>Network Interface Card</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ptp-time-synchronization">PTP Time Synchronization<a href="#ptp-time-synchronization" class="hash-link" aria-label="Direct link to PTP Time Synchronization" title="Direct link to PTP Time Synchronization">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functionality">Functionality<a href="#functionality" class="hash-link" aria-label="Direct link to Functionality" title="Direct link to Functionality">​</a></h3>
<p>This software package includes two programs: <code>ptp4l</code> and <code>phc2sys</code>. When used together, they enable synchronization of the S100&#x27;s PHC time and Linux system time by obtaining time from a master clock.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-of-ptp4l">Usage of ptp4l<a href="#usage-of-ptp4l" class="hash-link" aria-label="Direct link to Usage of ptp4l" title="Direct link to Usage of ptp4l">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="command-line-arguments">Command-line Arguments<a href="#command-line-arguments" class="hash-link" aria-label="Direct link to Command-line Arguments" title="Direct link to Command-line Arguments">​</a></h4>
<p><code>ptp4l</code> supports gPTP functionality and can operate either as a master or a slave. When configured as a slave, it can acquire time from a master and synchronize both the S100&#x27;s PHC time and RTC time.</p>
<p>You can view help information by running <code>ptp4l -h</code>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  root@ubuntu:/userdata# ptp4l -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  usage: ptp4l [options]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Delay Mechanism</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -A Auto, starting with E2E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -E E2E, delay request-response (default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -P P2P, peer delay mechanism</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Network Transport</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -2 IEEE 802.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -4 UDP IPV4 (default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -6 UDP IPV6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Time Stamping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H HARDWARE (default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -S SOFTWARE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -L LEGACY HW</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Other Options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f [file] read configuration from &#x27;file&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -i [dev] interface device to use, for example &#x27;eth0&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (may be specified multiple times)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -p [dev] Clock device to use, default auto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (ignored for SOFTWARE/LEGACY HW time stamping)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -s slave only mode (overrides configuration file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -l [num] set the logging level to &#x27;num&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -m print messages to stdout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -q do not print messages to the syslog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v prints the software version and exits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h prints this message and exits</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-configuration-files">Using Configuration Files<a href="#using-configuration-files" class="hash-link" aria-label="Direct link to Using Configuration Files" title="Direct link to Using Configuration Files">​</a></h4>
<p><code>ptp4l</code> can use a configuration file specified via the <code>-f</code> parameter.</p>
<p>Configuration files are divided into sections. Blank lines and lines starting with <code>#</code> are ignored.</p>
<p>There are three types of sections:</p>
<ul>
<li>The <code>[global]</code> section configures program options, clock options, and default port options.</li>
<li>Port sections are named after the network interface they configure (e.g., <code>[eth0]</code>). Options in these sections override the default port settings in the <code>[global]</code> section. A port section may be empty—it simply designates the interface, eliminating the need to specify <code>-i</code> on the command line.</li>
<li>The <code>[unicast_master_table]</code> section configures the unicast master table.</li>
</ul>
<p>For detailed configuration file documentation, refer to: <a href="https://linuxptp.nwtime.org/documentation/ptp4l/" target="_blank" rel="noopener noreferrer">https://linuxptp.nwtime.org/documentation/ptp4l/</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="automotive-configuration-examples">Automotive Configuration Examples<a href="#automotive-configuration-examples" class="hash-link" aria-label="Direct link to Automotive Configuration Examples" title="Direct link to Automotive Configuration Examples">​</a></h4>
<p><strong>automotive-master.cfg</strong>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Automotive Profile example configuration for master containing those</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># attributes which differ from the defaults.  See the file, default.cfg, for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># the complete list of available options.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[global]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Options carried over from gPTP.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gmCapable       1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">priority1       248</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">priority2       248</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logSyncInterval     -3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">syncReceiptTimeout  3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">neighborPropDelayThresh 800</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">min_neighbor_prop_delay -20000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">assume_two_step     1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path_trace_enabled  1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">follow_up_info      1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transportSpecific   0x1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ptp_dst_mac     01:80:C2:00:00:0E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">network_transport   L2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delay_mechanism     P2P</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Automotive Profile specific options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BMCA            noop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">masterOnly      1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inhibit_announce    1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">asCapable               true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inhibit_delay_req       1</span><br></span></code></pre></div></div>
<p><strong>automotive-slave.cfg</strong>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Automotive Profile example configuration for slaves containing those</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># attributes which differ from the defaults.  See the file, default.cfg, for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># the complete list of available options.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[global]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Options carried over from gPTP.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gmCapable       1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">priority1       248</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">priority2       248</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logSyncInterval     -3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">syncReceiptTimeout  3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">neighborPropDelayThresh 800</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">min_neighbor_prop_delay -20000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">assume_two_step     1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path_trace_enabled  1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">follow_up_info      1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transportSpecific   0x1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ptp_dst_mac     01:80:C2:00:00:0E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">network_transport   L2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delay_mechanism     P2P</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Automotive Profile specific options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BMCA            noop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">slaveOnly       1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inhibit_announce    1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">asCapable               true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ignore_source_id    1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Required to quickly correct Time Jumps in master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">step_threshold          1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">operLogSyncInterval     0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">operLogPdelayReqInterval 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">msg_interval_request     1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">servo_offset_threshold   30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">servo_num_offset_values  10</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-of-phc2sys">Usage of phc2sys<a href="#usage-of-phc2sys" class="hash-link" aria-label="Direct link to Usage of phc2sys" title="Direct link to Usage of phc2sys">​</a></h3>
<p><code>phc2sys</code> is used to synchronize Linux system time with PHC time, or PHC time with Linux system time.</p>
<p>You can view usage instructions by running <code>phc2sys -h</code>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  root@ubuntu:/userdata# phc2sys -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  usage: phc2sys [options]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  automatic configuration:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -a turn on autoconfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -r synchronize system (realtime) clock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  repeat -r to consider it also as a time source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  manual configuration:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -c [dev|name] slave clock (CLOCK_REALTIME)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d [dev] master PPS device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -s [dev|name] master clock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -O [offset] slave-master time offset (0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -w wait for ptp4l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  common options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f [file] configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -E [pi|linreg] clock servo (pi)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -P [kp] proportional constant (0.7)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -I [ki] integration constant (0.3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -S [step] step threshold (disabled)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -F [step] step threshold only on start (0.00002)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -R [rate] slave clock update rate in HZ (1.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -N [num] number of master clock readings per update (5)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -L [limit] sanity frequency limit in ppb (200000000)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -M [num] NTP SHM segment number (0)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -u [num] number of clock updates in summary stats (0)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n [num] domain number (0)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -x apply leap seconds by servo instead of kernel  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -z [path] server address for UDS (/var/run/ptp4l)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -l [num] set the logging level to &#x27;num&#x27; (6)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -t [tag] add tag to log messages  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -m print messages to stdout  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -q do not print messages to the syslog  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v prints the software version and exits  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h prints this message and exits  </span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="comprehensive-example">Comprehensive Example<a href="#comprehensive-example" class="hash-link" aria-label="Direct link to Comprehensive Example" title="Direct link to Comprehensive Example">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="command-line-arguments-1">Command-line Arguments<a href="#command-line-arguments-1" class="hash-link" aria-label="Direct link to Command-line Arguments" title="Direct link to Command-line Arguments">​</a></h4>
<p>The following demonstrates how to use ptp4l and phc2sys to synchronize the master NIC&#x27;s time to both the slave NIC&#x27;s time and the system time. Users must ensure network connectivity between the master and slave devices.</p>
<p>Run the following command on the master:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l -i eth0 -f /usr/hobot/lib/pkgconfig/automotive-master.cfg -m -l 7</span><br></span></code></pre></div></div>
<p>Run the following commands on the slave:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l -i eth0 -f /usr/hobot/lib/pkgconfig/automotive-slave.cfg -m -l 7 &gt; ptp4l.log &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  phc2sys -s eth0 -c CLOCK_REALTIME --transportSpecific=1 -m --step_threshold=1000 -w &gt; phc2sys.log &amp;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="log-example">Log Example<a href="#log-example" class="hash-link" aria-label="Direct link to Log Example" title="Direct link to Log Example">​</a></h4>
<p>Slave-side log:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[8330.884]: PI servo: sync interval 1.000 kp 0.700 ki 0.300000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[8330.885]: master offset 21 s3 freq -391 path delay 690</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[8330.998]: port 1: delay timeout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[8330.999]: delay filtered 689 raw 687</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[8331.884]: master offset 35 s3 freq -371 path delay 689</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[8332.885]: master offset 47 s3 freq -349 path delay 689</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[8333.885]: master offset 50 s3 freq -332 path delay 689</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[8334.885]: master offset 22 s3 freq -345 path delay 689</span><br></span></code></pre></div></div>
<p>Master-side log:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[3469.136]: config item /var/run/ptp4l.inhibit_delay_req is 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[3469.136]: config item (null).uds_address is &#x27;/var/run/ptp4l&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[3469.136]: port 0: INITIALIZING to LISTENING on INIT_COMPLETE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[3469.136]: config item (null).slaveOnly is 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[3469.136]: port 1: received link status notification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[3469.136]: interface index 2 is up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[3469.261]: port 1: master sync timeout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[3469.386]: port 1: master sync timeout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[3469.511]: port 1: master sync timeout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[3469.636]: port 1: master sync timeout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[3469.761]: port 1: master sync timeout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ptp4l[3469.886]: port 1: master sync timeout</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="global-time-source-configuration">Global Time Source Configuration<a href="#global-time-source-configuration" class="hash-link" aria-label="Direct link to Global Time Source Configuration" title="Direct link to Global Time Source Configuration">​</a></h2>
<p>Since multiple timelines exist in the current system—such as systime, PHC, and RTC—and different modules may use different timelines for timestamping their logs, an <code>hb_systime</code> module has been introduced to unify the timeline selection across all system modules. The specific functionalities implemented by this module are as follows:</p>
<p>Parse the default timeline configuration from the device tree source (DTS), as shown below:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  globaltime: globaltime {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compatible = &quot;hobot,globaltime&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    globaltime = &lt;2&gt;; /* 0-systime, 1-phc, 2-rtc */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    phc-index = &lt;0&gt;; /* phc index */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status = &quot;okay&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  };</span><br></span></code></pre></div></div>
<p>In the DTS, the <code>globaltime</code> property specifies the system’s default global timeline. By default, the S100 uses RTC time. The mapping is as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  0: systime  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1: phc  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2: rtc</span><br></span></code></pre></div></div>
<p>If the PHC timeline of a NIC is selected, the <code>phc-index</code> property further specifies which NIC’s PHC time is used. The mapping is as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  0: phc0  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1: phc1</span><br></span></code></pre></div></div>
<p>A <code>/sys</code> interface is provided to user-space applications to get or set the current global timeline selection. Commands are as follows:</p>
<p>To view the current global timeline configuration:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  cat /sys/devices/platform/soc/soc:globaltime/globaltime</span><br></span></code></pre></div></div>
<p>To set the global timeline:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  echo 0 &gt;/sys/devices/platform/soc/soc:globaltime/globaltime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo 1 &gt;/sys/devices/platform/soc/soc:globaltime/globaltime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo 2 &gt;/sys/devices/platform/soc/soc:globaltime/globaltime</span><br></span></code></pre></div></div>
<p>A <code>/sys</code> interface is also provided to get or set the currently selected PHC index.</p>
<p>To view the current PHC index:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  cat /sys/devices/platform/soc/soc:globaltime/phcindex</span><br></span></code></pre></div></div>
<p>To set the PHC index:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  echo 0 &gt;/sys/devices/platform/soc/soc:globaltime/phcindex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo 1 &gt;/sys/devices/platform/soc/soc:globaltime/phcindex</span><br></span></code></pre></div></div>
<div style="border-left:4px solid orange;background:#fff7f0;padding:10px;border-radius:8px"><p>📍 <strong>Note:</strong> The <code>phcindex</code> setting must not exceed the actual number of NICs.</p></div>
<p>Interfaces are provided to other kernel modules to query the currently used timeline and PHC index, as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  int32_t hobot_get_global_time_type(uint32_t *global_time_type);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int32_t hobot_get_phc_index(uint32_t *phc_index);</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mcu-time-synchronization-description">MCU Time Synchronization Description<a href="#mcu-time-synchronization-description" class="hash-link" aria-label="Direct link to MCU Time Synchronization Description" title="Direct link to MCU Time Synchronization Description">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="time-types-supported-by-the-mcu">Time Types Supported by the MCU<a href="#time-types-supported-by-the-mcu" class="hash-link" aria-label="Direct link to Time Types Supported by the MCU" title="Direct link to Time Types Supported by the MCU">​</a></h3>
<ul>
<li><strong>PHC time</strong>: A timer internal to the NIC.</li>
<li><strong>RTC time</strong>: A real-time clock on the S100 MCU side, which does <strong>not</strong> support backup power via a coin-cell battery.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="time-synchronization-methods-supported-by-the-mcu">Time Synchronization Methods Supported by the MCU<a href="#time-synchronization-methods-supported-by-the-mcu" class="hash-link" aria-label="Direct link to Time Synchronization Methods Supported by the MCU" title="Direct link to Time Synchronization Methods Supported by the MCU">​</a></h3>
<p>The MCU supports the following time synchronization method:</p>
<ul>
<li><strong>PPS-based Timesync</strong>: Captures snapshots of two time sources at the rising edge of the PPS (pulse-per-second) signal, calculates the time offset from these snapshots, and performs time synchronization based on this offset.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pps-based-timesync">PPS-based Timesync<a href="#pps-based-timesync" class="hash-link" aria-label="Direct link to PPS-based Timesync" title="Direct link to PPS-based Timesync">​</a></h3>
<p>Code directory: <code>mcu/Service/TimeSync/src/</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="supported-time-sources">Supported Time Sources<a href="#supported-time-sources" class="hash-link" aria-label="Direct link to Supported Time Sources" title="Direct link to Supported Time Sources">​</a></h4>
<ul>
<li>RTC</li>
<li>PHC</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-method">Configuration Method<a href="#configuration-method" class="hash-link" aria-label="Direct link to Configuration Method" title="Direct link to Configuration Method">​</a></h4>
<p>The synchronization method is determined by modifying the configuration in the file <code>./Service/TimeSync/src/Hobot_TimeSync.c</code>. Currently, only the following synchronization mode is supported:</p>
<p><strong>PHC synchronizes RTC</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  /*TimeSync Config Begin*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint8 ConfigSource[] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE, //TimeKeeperRTC Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE, //TimeKeeperGPS Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE, //TimeKeeperStbmPhc Source //Not Used in S100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE, //TimeKeeperSpi Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE, //TimeKeeperIPC Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE, //TimeKeeperPHC Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE //TimeKeeperGpt Source //Not Used in S100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  _Bool EnableTimeKeeper[] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,//TimeKeeperRTC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,//TimeKeeperGPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,//TimeKeeperStbmPhc //Not Used in S100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,//TimeKeeperSpi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,//TimeKeeperIPC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,//TimeKeeperPHC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE//TimeKeeperGpt //Not Used in S100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  _Bool Enable_TimeSync_RTC_Once= FALSE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  _Bool Enable_HobotTimesync_Debug = FALSE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  _Bool EthTsync_Master_Use_Phc = TRUE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint8 TimeSync_PPS_Index = TIMESYNC_MCU_ETH0_PPS;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /*TimeSync Config End*/</span><br></span></code></pre></div></div>
<p><code>ConfigSource</code>: Configures the time source for each timekeeper. If a timekeeper does not need to synchronize with others, its source should be set to <code>TIMEKEEPER_NONE</code>.</p>
<p>Available time sources include:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  typedef enum TimeKeeperIndexEnum {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_RTC_INDEX,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_GPS_INDEX,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_STBMPHC_INDEX, //Not Used in S100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_SPI_INDEX,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_IPC_INDEX,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_PHC_INDEX,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_STBMGPT_INDEX, //Not Used in S100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NUM_MAX,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } TimeKeeperIndex;</span><br></span></code></pre></div></div>
<p>EnableTimeKeeper: Configure whether timekeeping is enabled;</p>
<p>Enable_HobotTimesync_Debug: Configure whether debug printing is enabled;</p>
<p>TimeSync_PPS_Index: Configure which PPS to use for time synchronization. The available PPS options are as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  #define TIMESYNC_AON_RTC_PPS 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #define TIMESYNC_PPS0 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #define TIMESYNC_PPS1 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #define TIMESYNC_PPS2 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #define TIMESYNC_PCIE0_PTM_PPS 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #define TIMESYNC_PCIE1_PTM_PPS 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #define TIMESYNC_ACORE_ETH0_PPS 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #define TIMESYNC_ACORE_ETH1_PPS 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #define TIMESYNC_MCU_ETH0_PPS 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #define TIMESYNC_PPS_DISABLE 11</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-example">Configuration Example<a href="#configuration-example" class="hash-link" aria-label="Direct link to Configuration Example" title="Direct link to Configuration Example">​</a></h4>
<p>If you want to configure RTC and GPS for time synchronization, the configuration is as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  /*TimeSync Config Begin*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint8 ConfigSource[] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_GPS_INDEX, //TimeKeeperRTC Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE, //TimeKeeperGPS Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE, //TimeKeeperStbmPhc Source //Not Used in S100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE, //TimeKeeperSpi Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE, //TimeKeeperIPC Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE, //TimeKeeperPHC Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE //TimeKeeperGpt Source //Not Used in S100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  _Bool EnableTimeKeeper[] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TRUE,//TimeKeeperRTC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TRUE,//TimeKeeperGPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,//TimeKeeperStbmPhc //Not Used in S100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,//TimeKeeperSpi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,//TimeKeeperIPC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,//TimeKeeperPHC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE//TimeKeeperGpt //Not Used in S100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  _Bool Enable_TimeSync_RTC_Once= FALSE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  _Bool Enable_HobotTimesync_Debug = FALSE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /*TimeSync Config End*/</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="PPS">PPS Description<a href="#PPS" class="hash-link" aria-label="Direct link to PPS Description" title="Direct link to PPS Description">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="s100-pps-introduction">S100 PPS Introduction<a href="#s100-pps-introduction" class="hash-link" aria-label="Direct link to S100 PPS Introduction" title="Direct link to S100 PPS Introduction">​</a></h3>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/image43.png" alt="" class="img_ev3q"></p>
<p>As shown in the figure above, PPS on the S100 can be divided into PPS Source and PPS Target. The PPS Source generates PPS signals, which are transmitted via the internal Trigger Bus to the PPS Target. The PPS Target uses the incoming PPS to generate snapshots or LPWM waveforms.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pps-target">PPS Target<a href="#pps-target" class="hash-link" aria-label="Direct link to PPS Target" title="Direct link to PPS Target">​</a></h3>
<p>PPS Target refers to the entity triggered by PPS, used to generate snapshots or LPWM waveforms. On the S100, the main PPS-triggered targets include:</p>
<p>PPS OUT: The PPS2 pin is multiplexed as PPS OUT by default in the current software version, meaning the internal PPS signal can be output externally through this pad.</p>
<p>GIC: In the current software version, interrupts from MCU RTC, PPS0, PPS1, PPS2, and MCU ETH PPS are routed to the GIC by default.</p>
<p>Acore ETH: Acore ETH can accept a PPS source and use it to timestamp its own hardware (generate a snapshot).</p>
<p>LPWM: LPWM can accept a PPS source input and generate corresponding LPWM waveforms based on the PPS.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pps-source">PPS Source<a href="#pps-source" class="hash-link" aria-label="Direct link to PPS Source" title="Direct link to PPS Source">​</a></h3>
<p>The S100 offers multiple PPS sources, among which the commonly used ones are listed below (others are reserved):</p>
<p>Index 0: MCU RTC PPS – PPS output from the MCU-side RTC. Enabled by default in the current software version, with a period of 1 pulse per second.</p>
<p>Index 2: PPS0 – a PPS pad that can be used to input external PPS signals (e.g., from GPS) into the chip.</p>
<p>Index 3: PPS1 – a PPS pad that can be used to input external PPS signals (e.g., from GPS) into the chip.</p>
<p>Index 4: PPS2 – a PPS pad that can either input external PPS signals (e.g., from GPS) or output internal PPS signals externally.</p>
<p>Index 8: Acore Eth0 PPS – PPS generated by Acore Eth0, supporting flexible periods (e.g., 1 pulse per second, 1 pulse every 400 ms, etc.).</p>
<p>Index 9: Acore Eth1 PPS – PPS generated by Acore Eth1, supporting flexible periods (e.g., 1 pulse per second, 1 pulse every 400 ms, etc.).</p>
<p>Index 10: MCU Eth PPS – PPS output from the MCU-side Ethernet. Enabled by default in the current software version, with a period of 1 pulse per second.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pps-pad-configuration">PPS PAD Configuration<a href="#pps-pad-configuration" class="hash-link" aria-label="Direct link to PPS PAD Configuration" title="Direct link to PPS PAD Configuration">​</a></h3>
<p>In the current software version, PPS0 and PPS1 are configured by default as PPS inputs (PPS IN) to receive external PPS signals (e.g., from GPS). PPS2 is configured by default as a PPS output (PPS OUT) to export the S100’s internal PPS signal externally. These configurations are handled by the Port module on the MCU side. To modify them, changes must be made within the Port module.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="Acore_Eth_PPS">Acore Eth PPS Introduction<a href="#Acore_Eth_PPS" class="hash-link" aria-label="Direct link to Acore Eth PPS Introduction" title="Direct link to Acore Eth PPS Introduction">​</a></h3>
<p>Acore Eth PPS supports two output modes: flex mode and fix mode. By default, the system boots into fix mode. You can switch to flex mode using the ethtool command described below. To revert to fix mode, restart the network interface or reboot the system.</p>
<p><strong>Flex mode</strong>: A flexible PPS mode where start/end time, period, and duty cycle can be freely configured. Its rising edge aligns with whole-second timestamps, and PPS output does not change with PHC time adjustments. In the current software version, the duty cycle is fixed at 1%, while the period can be flexibly configured (common values include 1s and 400ms).</p>
<p><strong>Fixed mode</strong>: A fixed PPS mode with a fixed period and a fixed duty cycle of 46.3129%. PPS output changes along with PHC time adjustments. In the current software version, it supports a 1-second period, with the whole-second timestamp aligned to the falling edge. After a 536.871ms low-level period, it outputs a 463.129ms high-level pulse.</p>
<p><strong>Configuration for whole-second PPS output</strong>:</p>
<ul>
<li>In <strong>flex mode</strong>, if you require PPS output precisely at whole-second timestamps, configure PPS output only after gPTP time synchronization is complete.</li>
<li>In <strong>fixed mode</strong>, note that the whole-second timestamp occurs at the falling edge of the ETH PPS signal, while LPWM is synchronized to the ETH PPS rising edge. Therefore, as illustrated in the figure below, you must adjust the LPWM offset accordingly. For example, if the camera runs at 30 FPS (frame interval ≈ 33.333ms), and the PPS rising edge occurs at 536.871ms while the falling edge aligns with the whole second (1s), then to output a frame exactly at the whole-second mark, the required offset is:<br>
<code>offset = 463.129 mod 33.333 ≈ 29.8ms</code>.</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/image44.png" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="acore-eth-pps-output-configuration-method">Acore Eth PPS Output Configuration Method<a href="#acore-eth-pps-output-configuration-method" class="hash-link" aria-label="Direct link to Acore Eth PPS Output Configuration Method" title="Direct link to Acore Eth PPS Output Configuration Method">​</a></h3>
<p>Acore Eth PPS output can be configured using the ethtool utility with the following command syntax:</p>
<p>Configure Eth0 PPS output with a 1-second period:<br>
<code>ethtool hobot_gmac --set-flex-pps eth0 index 0 fpps on interval 1000000000;</code></p>
<p>Configure Eth1 PPS output with a 1-second period:<br>
<code>ethtool hobot_gmac --set-flex-pps eth1 index 0 fpps on interval 1000000000;</code></p>
<p>To change the output period, modify the last parameter <code>&lt;1000000000&gt;</code>, which is in nanoseconds. For a 400ms period, change it to <code>&lt;400000000&gt;</code>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>When configuring ETH PPS output, note the following two points. The example below illustrates how to modify ETH PPS0 and configure the PPS_INOUT pin as a PPS_OUT function. Adjust configurations according to your specific requirements.</p><ol>
<li>Modify the default <code>pps_source</code> in the Port configuration:</li>
</ol><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Port_Lld_PpsConfigType PpsConfig </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">boolean</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">TRUE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain">    PPS_SOURCE_AON_RTC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token plain">    PPS_SOURCE_ETH0_PTP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div><ol start="2">
<li>Configure the pin function as PPS_OUT:</li>
</ol><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-    {(uint8)2, &quot;PPS_OUT&quot;, (boolean)TRUE, {(boolean)TRUE, (boolean)FALSE, (boolean)TRUE, (boolean)TRUE, (boolean)TRUE, GPIO, PORT_PIN_CONFIG_TYPE0, PORT_PULL_NONE, PORT_DRIVE_DEFAULT, PORT_PIN_DIR_OUT, PORT_PIN_LEVEL_HIGH}},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+    {(uint8)2, &quot;PPS_OUT&quot;, (boolean)TRUE, {(boolean)TRUE, (boolean)FALSE, (boolean)TRUE, (boolean)TRUE, (boolean)TRUE, PPS_OUT, PORT_PIN_CONFIG_TYPE0, PORT_PULL_NONE, PORT_DRIVE_DEFAULT, PORT_PIN_DIR_OUT, PORT_PIN_LEVEL_HIGH}},</span><br></span></code></pre></div></div><p>These changes are implemented by editing <code>McalCdd/gen_s100_sip_B/Port/src/Port_PBcfg.c</code>. After modification, update the MCU firmware.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mcu-eth-pps-configuration-method">MCU Eth PPS Configuration Method<a href="#mcu-eth-pps-configuration-method" class="hash-link" aria-label="Direct link to MCU Eth PPS Configuration Method" title="Direct link to MCU Eth PPS Configuration Method">​</a></h3>
<p>The signal period and pulse width of MCU Eth PPS are set by default in the configuration file <code>Config/McalCdd/gen_s100_sip_B_mcu1/Ethernet/src/Mac_Ip_PBcfg.c</code>, where <code>PpsInterval</code> defaults to 1000 ms and <code>PpsWidth</code> defaults to 10 ms.</p>
<p>Constraints:</p>
<ul>
<li>The configuration item <code>EthGlobalTimeSupport</code> must be enabled (enabled by default).</li>
<li>The value of <code>PpsWidth</code> must be less than <code>PpsInterval</code>.</li>
</ul>
<p>After enabling the configuration, verify whether the PPS settings take effect by monitoring changes in the sysfs <code>assert</code> node:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/class/pps/pps[4]/assert</span><br></span></code></pre></div></div>
<p>Multiple PPS devices appear under <code>/sys/class/pps/</code>. Use the <code>name</code> file to identify which PPS corresponds to the MCU PPS:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/class/pps/pps[*]/name</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overall-time-synchronization-solution">Overall Time Synchronization Solution<a href="#overall-time-synchronization-solution" class="hash-link" aria-label="Direct link to Overall Time Synchronization Solution" title="Direct link to Overall Time Synchronization Solution">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functional-overview">Functional Overview<a href="#functional-overview" class="hash-link" aria-label="Direct link to Functional Overview" title="Direct link to Functional Overview">​</a></h3>
<p>This document uses the S100 as an example to introduce the time synchronization solution. Currently, the MCU mainline supports a single time domain architecture where the time source is connected to the S100 Acore.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="software-architecture-description">Software Architecture Description<a href="#software-architecture-description" class="hash-link" aria-label="Direct link to Software Architecture Description" title="Direct link to Software Architecture Description">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="single-time-domain-architecture-with-time-source-connected-to-acore">Single Time Domain Architecture with Time Source Connected to Acore<a href="#single-time-domain-architecture-with-time-source-connected-to-acore" class="hash-link" aria-label="Direct link to Single Time Domain Architecture with Time Source Connected to Acore" title="Direct link to Single Time Domain Architecture with Time Source Connected to Acore">​</a></h5>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/driver_development_s100/image45.png" alt="" class="img_ev3q"></p>
<p>The time synchronization workflow illustrated above can be summarized as follows:</p>
<ul>
<li>An external gPTP master device serves as the time source for the entire S100 system.</li>
<li>First, the <code>ptp4l</code> software synchronizes the gPTP master’s time to the Acore-side network interface. Then, <code>phc2sys</code> continuously synchronizes the NIC time to the Linux system time.</li>
<li>Next, the Acore <code>timesync_sample</code> application synchronizes the NIC time to the MCU-side RTC.</li>
</ul>
<p>Feature Notes:</p>
<ul>
<li>The RTC supports hardware timestamping for CIM and CAN modules shown in the diagram.</li>
<li>The Acore NIC can generate PPS to trigger LPWM for exposure synchronization.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="code-location-and-directory-structure">Code Location and Directory Structure<a href="#code-location-and-directory-structure" class="hash-link" aria-label="Direct link to Code Location and Directory Structure" title="Direct link to Code Location and Directory Structure">​</a></h4>
<p>The Acore-side timesync sample code is located in the project directory:<br>
<code>{sdk_dir}/source/hobot-sp-samples/debian/app/timesync_demo</code></p>
<p>The MCU-side timesync sample code is located in the project directory:<br>
<code>{mcu_dir}/mcu/Service/TimeSync</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="acore-compilation">Acore Compilation<a href="#acore-compilation" class="hash-link" aria-label="Direct link to Acore Compilation" title="Direct link to Acore Compilation">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compilation-environment">Compilation Environment<a href="#compilation-environment" class="hash-link" aria-label="Direct link to Compilation Environment" title="Direct link to Compilation Environment">​</a></h4>
<p>After installing the <code>hobot-sp-samples_*.deb</code> package on the board, the codec_demo source code will be included.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compilation-instructions">Compilation Instructions<a href="#compilation-instructions" class="hash-link" aria-label="Direct link to Compilation Instructions" title="Direct link to Compilation Instructions">​</a></h4>
<p>This sample primarily depends on API header files provided by ipcfhal and timesync:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &quot;hb_ipcf_hal.h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &quot;hobot_clock_hal.h&quot;</span><br></span></code></pre></div></div>
<p>The libraries required for compilation are as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  LIBS := -lhbipcfhal -lhbtimesynchal -lpthread -lalog</span><br></span></code></pre></div></div>
<p>Compilation command:</p>
<p>On the board, navigate to the <code>/app/timesync_demo/sample_timesync</code> directory and execute:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  make</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mcu-compilation">MCU Compilation<a href="#mcu-compilation" class="hash-link" aria-label="Direct link to MCU Compilation" title="Direct link to MCU Compilation">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compilation-environment-1">Compilation Environment<a href="#compilation-environment-1" class="hash-link" aria-label="Direct link to Compilation Environment" title="Direct link to Compilation Environment">​</a></h4>
<p>The MCU-side sample uses the build tools from the MCU codebase. Please refer to: <a href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/basic_information">MCU编译</a>.</p>
<p>Build the FreeRTOS image version. Note:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Enter the Build/FreeRtos directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  python build_freertos.py s100_sip_B debug # Hardware board or project name</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="execution">Execution<a href="#execution" class="hash-link" aria-label="Direct link to Execution" title="Direct link to Execution">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="supported-platforms">Supported Platforms<a href="#supported-platforms" class="hash-link" aria-label="Direct link to Supported Platforms" title="Direct link to Supported Platforms">​</a></h5>
<p>S100</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="board-deployment-and-configuration">Board Deployment and Configuration<a href="#board-deployment-and-configuration" class="hash-link" aria-label="Direct link to Board Deployment and Configuration" title="Direct link to Board Deployment and Configuration">​</a></h5>
<p>The following preparations are required:</p>
<p>Flash an MCU firmware that supports the time synchronization service on the MCU side.</p>
<p>If running gPTP time synchronization, ensure network connectivity.</p>
<p>To prevent interference from the Linux OS&#x27;s built-in time synchronization service, disable it by executing the following command:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  systemctl stop systemd-timesyncd</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="running-guide">Running Guide<a href="#running-guide" class="hash-link" aria-label="Direct link to Running Guide" title="Direct link to Running Guide">​</a></h5>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="single-time-domain-solution-with-time-source-connected-to-acore">Single Time Domain Solution with Time Source Connected to Acore<a href="#single-time-domain-solution-with-time-source-connected-to-acore" class="hash-link" aria-label="Direct link to Single Time Domain Solution with Time Source Connected to Acore" title="Direct link to Single Time Domain Solution with Time Source Connected to Acore">​</a></h6>
<p>On the MCU side, modify the configuration in <code>./Service/TimeSync/src/Hobot_TimeSync.c</code> as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/* Timesync Config Begin */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uint8_t ConfigSource[] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_IPC_INDEX,   // TimeKeeperRTC Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE,        // TimeKeeperGPS Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_IPC_INDEX,   // TimeKeeperStbmPhc Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE,        // TimeKeeperSpi Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE,        // TimeKeeperIPC Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE,        // TimeKeeperPHC Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TIMEKEEPER_NONE         // TimeKeeperGpt Source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_Bool EnableTimeKeeper[] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TRUE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TRUE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FALSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_Bool Enable_TimeSync_RTC_Once = FALSE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_Bool Enable_HobotTimesync_Debug = TRUE;</span><br></span></code></pre></div></div>
<p>Note that modifications on the MCU side are affected by the <code>PRODUCT_IMAGE</code> macro. For details, please refer to the notes section above.</p>
<p>After flashing and booting, the MCU executes the following commands by default:<br>
<!-- -->The first command sets the PPS trigger source to MCU ETH;<br>
<!-- -->the second command starts the time synchronization service.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  TimeSyncCtrl 4 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TimeSyncCtrl 6</span><br></span></code></pre></div></div>
<p>To enable MCU-side log printing, use the following command:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TimeSyncCtrl 1</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>By default, the MCU does not start the time synchronization service automatically. To configure automatic startup, in addition to modifying the configuration described above, you must also add initialization code, as shown below:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TASK(OsTask_SysCore_Startup)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ......</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Timesync_Init();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ......</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div><p>After completing the above configuration, once the MCU1 firmware is loaded, the time synchronization service will start automatically, and there will be no need to manually execute the <code>TimeSyncCtrl</code> commands.</p></div></div>
<p>On the Acore side, execute the following commands:<br>
<!-- -->The first command sets the log level to allow output to the console;<br>
<!-- -->the second command starts PTP time synchronization, synchronizing the external PTP master time to the Acore NIC;<br>
<!-- -->the third command synchronizes the NIC time to the Linux system time;<br>
<!-- -->the fifth command starts the time synchronization program, synchronizing the Acore NIC time to the MCU-side RTC.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export LOGLEVEL=15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ptp4l -i eth0 -f /usr/hobot/lib/pkgconfig/automotive-slave.cfg -m -l 7 &gt; ptp4l.log &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">phc2sys -s eth0 -c CLOCK_REALTIME --transportSpecific=1 -m --step_threshold=1000 -w &gt; phc2sys.log &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd /app/timesync_demo/sample_timesync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./timesync_sample -p 0 -P 4 -r</span><br></span></code></pre></div></div>
<p>Key parameter descriptions:</p>
<p><code>-p 1</code>: Synchronize time of NIC 1; <code>-p 0</code>: Synchronize time of NIC 0 (default)</p>
<p><code>-r</code>: Synchronize Acore NIC time to MCU RTC time</p>
<p>Acore time synchronization log example:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][][/app/timesync_demo/sample_timesync/timesync_sample.c:510] ************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][][/app/timesync_demo/sample_timesync/timesync_sample.c:517] Monotonic_raw time: second = 222, nanosecond = 557846725</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][][/app/timesync_demo/sample_timesync/timesync_sample.c:520] PPS fetch infobuf time: second = 1745925136, nanosecond = 454616475</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][][/app/timesync_demo/sample_timesync/timesync_sample.c:531] rtc snapshot: sec = 1745925136, nsec = 455389596</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][][/app/timesync_demo/sample_timesync/timesync_sample.c:538] ptp0 snapshot: sec = 1745925136, nsec = 455462040</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][][/app/timesync_demo/sample_timesync/timesync_sample.c:582] Timesync Info: timesync ipc send data succeed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][][/app/timesync_demo/sample_timesync/timesync_sample.c:510] ************************************************</span><br></span></code></pre></div></div>
<p>Acore log explanation:</p>
<ul>
<li>The &quot;snapshot&quot; field shows the hardware timestamps of various clocks when the MCU NIC emits the PPS pulse.</li>
<li>The &quot;PPS fetch infobuf time&quot; field indicates the system time captured by the Acore PPS driver.</li>
<li>The message &quot;timesync ipc send data succeed&quot; confirms that the Acore NIC timestamp was successfully sent to the MCU for time synchronization. The synchronization quality can be checked on the MCU side.</li>
</ul>
<p>MCU time synchronization log example:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[0162.799758 0]*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0162.802970 0]RTC snapshot time:1745925071.455114934</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0163.000408 0]Timesync_RecvCallback.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0163.000661 0]Get Time From Acore success 1745925071 455188935</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0163.001958 0]TimeKeeperRTC and TimeKeeperIPC Offset : - 0s.74001ns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0163.789774 0]*</span><br></span></code></pre></div></div>
<p>MCU log explanation:</p>
<ul>
<li>&quot;Get Time From Acore success&quot; indicates that the MCU successfully retrieved time from Acore.</li>
<li>&quot;TimeKeeperRTC and TimeKeeperIPC Offset&quot; shows the offset applied when synchronizing RTC using IPC time during synchronization.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2026-02-10T07:46:30.000Z" itemprop="dateModified">Feb 10, 2026</time></b></span></div></div></footer></article><nav class="pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_audio"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Audio Debugging Guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rdk_doc/en/rdk_s/13_driver_pcie"><div class="pagination-nav__sublabel">Next </div><div class="pagination-nav__label">PCIe使用指南</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#abbreviations-and-explanations" class="table-of-contents__link toc-highlight">Abbreviations and Explanations</a></li><li><a href="#ptp-time-synchronization" class="table-of-contents__link toc-highlight">PTP Time Synchronization</a><ul><li><a href="#functionality" class="table-of-contents__link toc-highlight">Functionality</a></li><li><a href="#usage-of-ptp4l" class="table-of-contents__link toc-highlight">Usage of ptp4l</a><ul><li><a href="#command-line-arguments" class="table-of-contents__link toc-highlight">Command-line Arguments</a></li><li><a href="#using-configuration-files" class="table-of-contents__link toc-highlight">Using Configuration Files</a></li><li><a href="#automotive-configuration-examples" class="table-of-contents__link toc-highlight">Automotive Configuration Examples</a></li></ul></li><li><a href="#usage-of-phc2sys" class="table-of-contents__link toc-highlight">Usage of phc2sys</a></li><li><a href="#comprehensive-example" class="table-of-contents__link toc-highlight">Comprehensive Example</a><ul><li><a href="#command-line-arguments-1" class="table-of-contents__link toc-highlight">Command-line Arguments</a></li><li><a href="#log-example" class="table-of-contents__link toc-highlight">Log Example</a></li></ul></li></ul></li><li><a href="#global-time-source-configuration" class="table-of-contents__link toc-highlight">Global Time Source Configuration</a></li><li><a href="#mcu-time-synchronization-description" class="table-of-contents__link toc-highlight">MCU Time Synchronization Description</a><ul><li><a href="#time-types-supported-by-the-mcu" class="table-of-contents__link toc-highlight">Time Types Supported by the MCU</a></li><li><a href="#time-synchronization-methods-supported-by-the-mcu" class="table-of-contents__link toc-highlight">Time Synchronization Methods Supported by the MCU</a></li><li><a href="#pps-based-timesync" class="table-of-contents__link toc-highlight">PPS-based Timesync</a><ul><li><a href="#supported-time-sources" class="table-of-contents__link toc-highlight">Supported Time Sources</a></li><li><a href="#configuration-method" class="table-of-contents__link toc-highlight">Configuration Method</a></li><li><a href="#configuration-example" class="table-of-contents__link toc-highlight">Configuration Example</a></li></ul></li></ul></li><li><a href="#PPS" class="table-of-contents__link toc-highlight">PPS Description</a><ul><li><a href="#s100-pps-introduction" class="table-of-contents__link toc-highlight">S100 PPS Introduction</a></li><li><a href="#pps-target" class="table-of-contents__link toc-highlight">PPS Target</a></li><li><a href="#pps-source" class="table-of-contents__link toc-highlight">PPS Source</a></li><li><a href="#pps-pad-configuration" class="table-of-contents__link toc-highlight">PPS PAD Configuration</a></li><li><a href="#Acore_Eth_PPS" class="table-of-contents__link toc-highlight">Acore Eth PPS Introduction</a></li><li><a href="#acore-eth-pps-output-configuration-method" class="table-of-contents__link toc-highlight">Acore Eth PPS Output Configuration Method</a></li><li><a href="#mcu-eth-pps-configuration-method" class="table-of-contents__link toc-highlight">MCU Eth PPS Configuration Method</a></li></ul></li><li><a href="#overall-time-synchronization-solution" class="table-of-contents__link toc-highlight">Overall Time Synchronization Solution</a><ul><li><a href="#functional-overview" class="table-of-contents__link toc-highlight">Functional Overview</a><ul><li><a href="#software-architecture-description" class="table-of-contents__link toc-highlight">Software Architecture Description</a><ul><li><a href="#single-time-domain-architecture-with-time-source-connected-to-acore" class="table-of-contents__link toc-highlight">Single Time Domain Architecture with Time Source Connected to Acore</a></li></ul></li><li><a href="#code-location-and-directory-structure" class="table-of-contents__link toc-highlight">Code Location and Directory Structure</a></li></ul></li><li><a href="#acore-compilation" class="table-of-contents__link toc-highlight">Acore Compilation</a><ul><li><a href="#compilation-environment" class="table-of-contents__link toc-highlight">Compilation Environment</a></li><li><a href="#compilation-instructions" class="table-of-contents__link toc-highlight">Compilation Instructions</a></li></ul></li><li><a href="#mcu-compilation" class="table-of-contents__link toc-highlight">MCU Compilation</a><ul><li><a href="#compilation-environment-1" class="table-of-contents__link toc-highlight">Compilation Environment</a></li><li><a href="#execution" class="table-of-contents__link toc-highlight">Execution</a><ul><li><a href="#supported-platforms" class="table-of-contents__link toc-highlight">Supported Platforms</a></li><li><a href="#board-deployment-and-configuration" class="table-of-contents__link toc-highlight">Board Deployment and Configuration</a></li><li><a href="#running-guide" class="table-of-contents__link toc-highlight">Running Guide</a></li></ul></li></ul></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.guyuehome.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GuYueHome<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact US</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 D-Robotics.</div></div></div></footer></div>
</body>
</html>