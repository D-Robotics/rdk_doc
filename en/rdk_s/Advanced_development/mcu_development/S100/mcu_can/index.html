<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-docs_s docs-version-current docs-doc-page docs-doc-id-Advanced_development/mcu_development/S100/mcu_can" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">CAN Usage Guide | RDK DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_can"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-docs_s-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs_s-current"><meta data-rh="true" property="og:title" content="CAN Usage Guide | RDK DOC"><meta data-rh="true" name="description" content="Basic Overview"><meta data-rh="true" property="og:description" content="Basic Overview"><link data-rh="true" rel="icon" href="/rdk_doc/en/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_can"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_can" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_can" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_can" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"7. Advanced Development","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development"},{"@type":"ListItem","position":2,"name":"7.5 MCU Development Guide","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/05_MCU_development"},{"@type":"ListItem","position":3,"name":"7.5.1 S100 MCU Development Guide","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/01_S100"},{"@type":"ListItem","position":4,"name":"CAN Usage Guide","item":"https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_can"}]}</script><script src="https://hm.baidu.com/hm.js?24dd63cad43b63889ea6bede5fd1ab9e" async></script>
<script src="/rdk_doc/js/dify-config.js"></script>
<script src="https://rdk.d-robotics.cc/embed.min.js" id="MltLQTHPb5EeP7uz" defer="defer"></script><link rel="stylesheet" href="/rdk_doc/en/assets/css/styles.e31f7a90.css">
<script src="/rdk_doc/en/assets/js/runtime~main.7d38a9e5.js" defer="defer"></script>
<script src="/rdk_doc/en/assets/js/main.01c717bd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a class="navbar__item navbar__link" href="/rdk_doc/en/RDK">RDK X3 / X5</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rdk_doc/en/rdk_s/RDK">RDK S100</a><a href="https://developer.d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>EN</a><ul class="dropdown__menu"><li><a href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_can" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">CN</a></li><li><a href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_can" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">EN</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rdk_doc/en/rdk_s/RDK">D-Robotics RDK Kit</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Quick_start">1. Quick Start</a><button aria-label="Expand sidebar category &#x27;1. Quick Start&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/System_configuration">2. System Configuration</a><button aria-label="Expand sidebar category &#x27;2. System Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Basic_Application">3. Basic Application Development</a><button aria-label="Expand sidebar category &#x27;3. Basic Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Basic_Development">4. Algorithm Application Development</a><button aria-label="Expand sidebar category &#x27;4. Algorithm Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Robot_development">5. Robotics Application Development</a><button aria-label="Expand sidebar category &#x27;5. Robotics Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Application_case">6. Application Development Guide</a><button aria-label="Expand sidebar category &#x27;6. Application Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rdk_doc/en/rdk_s/Advanced_development">7. Advanced Development</a><button aria-label="Collapse sidebar category &#x27;7. Advanced Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/hardware_development">7.1 Hardware Development Guide</a><button aria-label="Expand sidebar category &#x27;7.1 Hardware Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/linux_development">7.2. Linux Development Guide</a><button aria-label="Expand sidebar category &#x27;7.2. Linux Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/03_multimedia_development">7.3 Multimedia Development Guide</a><button aria-label="Expand sidebar category &#x27;7.3 Multimedia Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/04_toolchain_development">7.4 Algorithm Toolchain Development Guide</a><button aria-label="Expand sidebar category &#x27;7.4 Algorithm Toolchain Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/en/rdk_s/05_MCU_development">7.5 MCU Development Guide</a><button aria-label="Collapse sidebar category &#x27;7.5 MCU Development Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/en/rdk_s/01_S100">7.5.1 S100 MCU Development Guide</a><button aria-label="Collapse sidebar category &#x27;7.5.1 S100 MCU Development Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/code_release">MCU Code Package Structure Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/basic_information">MCU Quick Start Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/MCU_build_system">MCU System Description</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/FreeRTOS_development">MCU1 Development Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_uart">UART Usage Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_pwm">PWM Usage Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_spi">SPI Usage Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_adc">ADC Usage Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_ipc">IPC Usage Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_can">CAN Usage Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_i2c">I2C Usage Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_eth">Eth Usage Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/rdk_s/07_Advanced_development/05_mcu_development/01_S100/12_mcu_port">PORT Module Guide</a><button aria-label="Expand sidebar category &#x27;PORT Module Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_ramdump">MCU Ramdump Feature</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/rdk_s/Advanced_development/rdk_gen">7.6 RDK S100 Build System Development Guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/FAQ">8. FAQ</a><button aria-label="Expand sidebar category &#x27;8. FAQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/rdk_s/Appendix">9. Appendix</a><button aria-label="Expand sidebar category &#x27;9. Appendix&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rdk_doc/en/rdk_s/Release_Note/roadmap">10. Version release</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rdk_doc/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/rdk_s/Advanced_development"><span>7. Advanced Development</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/rdk_s/05_MCU_development"><span>7.5 MCU Development Guide</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/rdk_s/01_S100"><span>7.5.1 S100 MCU Development Guide</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">CAN Usage Guide</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>CAN Usage Guide</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-overview">Basic Overview<a href="#basic-overview" class="hash-link" aria-label="Direct link to Basic Overview" title="Direct link to Basic Overview">​</a></h2>
<ul>
<li>Maximum number of usable CAN controllers: 10.</li>
<li>Maximum CAN transmission rate: 8 Mbps. (Limited by transceiver baud rate constraints; currently, the lab has only tested and verified up to 5 Mbps.)</li>
<li>Number of Blocks allocated in RAM per controller:<!-- -->
<ul>
<li>CAN0~CAN3: 4 Blocks (variable payload);</li>
<li>CAN4~CAN9: 4 Blocks (variable payload) + 4 Blocks (fixed payload).</li>
</ul>
</li>
<li>Maximum number of Mailboxes supported per controller: 128.</li>
<li>Each controller supports one RxFIFO with the following FIFO depth:<!-- -->
<ul>
<li>CAN0~CAN3: 8 × 64 bytes;</li>
<li>CAN4~CAN9: 32 × 64 bytes.</li>
</ul>
</li>
<li>TTController is not supported, i.e., TTCAN (a higher-layer protocol based on CAN bus) is unsupported.</li>
<li>CAN supports multi-core usage: different CAN controllers can be bound to different cores, but multiple cores cannot simultaneously access the same CAN controller.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="software-architecture">Software Architecture<a href="#software-architecture" class="hash-link" aria-label="Direct link to Software Architecture" title="Direct link to Software Architecture">​</a></h2>
<p>The CAN controllers of the S100 chip reside in the MCU domain and handle CAN data transmission and reception. Since perception-related applications run on the Acore, some CAN data must be forwarded to the Acore via an IPC (Inter-Processor Communication) mechanism. The architecture ensures transmission reliability, implementing mechanisms for data integrity verification, packet loss detection, and transmission timeout detection. Additionally, it addresses performance issues such as excessive CPU utilization on the MCU side caused by frequent forwarding of small data blocks, which could degrade MCU real-time performance.</p>
<p>The core workflow of the S100 CAN forwarding solution is as follows:</p>
<ul>
<li>First, the CAN2IPC module on the MCU side maps CAN channels to corresponding IPC channels. Then, the CANHAL module on the Acore side remaps these IPC channels to virtual CAN device channels. Finally, users retrieve data from the virtual CAN devices via APIs provided by CANHAL. Here, the CAN2IPC module is an MCU-side service, while the CANHAL module is a dynamic library provided to applications on the Acore side.</li>
<li>The CAN2IPC module periodically collects CAN data from the MCU side, packages it according to a specified transmission protocol, and forwards it to the Acore via IPC. By default, channels 0–7 of IPC instance 0 are allocated for CAN data forwarding.</li>
<li>The CANHAL module receives IPC data from the MCU side, parses it according to the specified transmission protocol, and enables application software to retrieve raw CAN frames via APIs.</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/mcu_can.png" alt="Architecture Diagram of CAN Data Transparent Transmission Between Acore and MCU" class="img_ev3q"></p>
<p>As shown in the diagram above:</p>
<ul>
<li>Peripheral data is received by the MCU-domain CAN driver through the CAN PHY and controller hardware. The CAN driver then reports and caches the data in the hobot CANIF module.</li>
<li>The CAN2IPC Service periodically fetches CAN frames from the CANIF module, packages them according to a reliable transmission protocol, and forwards them to the Acore via IPC.</li>
<li>The CANHAL module receives IPC data from the MCU side, parses it according to the specified transmission protocol, and allows Acore applications to retrieve CAN frames via APIs provided by the CANHAL library.</li>
</ul>
<p>Key features of this solution:</p>
<ul>
<li>Supports data integrity verification for transparent transmission.</li>
<li>Supports packet loss detection during transparent transmission.</li>
<li>Supports transmission timeout detection. When the MCU-side CAN2IPC forwards data, it timestamps each packet with the MCU’s local time. Upon receiving the data, the Acore-side CANHAL reads the Acore’s timestamp and triggers an alert if the transmission exceeds the timeout threshold. Note: MCU RTC time and Acore NIC phc0 time must be synchronized beforehand.</li>
<li>Supports parallel transmission across multiple CAN channels. Data from multiple CAN controllers on the MCU side can be simultaneously forwarded to the Acore, and Acore applications can read CAN data from different channel IDs via CANHAL.</li>
<li>Since CANHAL relies on IPC for inter-core communication, and IPC currently does not support multiple processes or threads reading from/writing to the same channel, CANHAL does not support this feature either.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hardware-connection-instructions">Hardware Connection Instructions<a href="#hardware-connection-instructions" class="hash-link" aria-label="Direct link to Hardware Connection Instructions" title="Direct link to Hardware Connection Instructions">​</a></h2>
<ul>
<li>
<p>CAN physical layer topologies are primarily divided into closed-loop (bus) and open-loop networks—closed-loop is suitable for high-speed communication, while open-loop is better for long-distance communication. <strong>By default, the S100 sample uses a closed-loop bus network architecture</strong>.</p>
</li>
<li>
<p>CAN bus pins are located on the S100 MCU expansion board, providing 5 CAN interfaces via green screw-type 3-pin connectors. Pin 1 (marked with a triangle) is GND, the middle pin is CAN_L, and the remaining pin is CAN_H.</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" src="http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/mcu_can_phy-en.jpg" alt="MCU CAN Physical Diagram" class="img_ev3q"></p>
<ul>
<li>The MCU daughterboard uses 2-pin jumpers to optionally connect a 120-ohm resistor between CAN_H and CAN_L. Inserting the jumper connects the resistor, providing the termination impedance required for closed-loop networks; removing the jumper disconnects the termination resistor, suitable for open-loop networks or repeater node scenarios.</li>
</ul>
<p><img decoding="async" loading="lazy" src="http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/mcu_can_sche-en.jpg" alt="MCU CAN Schematic Diagram" class="img_ev3q"></p>
<p>Using two 120-ohm resistors in a CAN closed-loop network is the standard CAN bus configuration. Below are examples using the S100 to illustrate correct resistor placement:</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>In general, open-loop network configurations do not require 120-ohm resistors, whereas closed-loop configurations require exactly <strong>two</strong> 120-ohm resistors in total.</p></div></div>
<ul>
<li>When using an open-loop network, ensure CAN_H and CAN_L lines are correctly connected, and <strong>do not</strong> install jumpers on the used CAN channels (i.e., do not connect 120-ohm resistors in the network).</li>
<li>If connecting S100’s CAN5 and CAN6 to form an internal two-node closed-loop network, ensure CAN_H and CAN_L are correctly wired, and install jumpers on the pins behind the CAN5 and CAN6 terminal blocks (i.e., insert two 120-ohm resistors into the network).</li>
<li>If connecting S100’s CAN5~CAN9 to form an internal multi-node closed-loop network, ensure proper CAN_H/CAN_L wiring and install jumpers on <strong>any two</strong> of the terminal blocks—<strong>never install more than two</strong>, as this may cause unpredictable issues.</li>
<li>If connecting any one of S100’s CAN5~CAN9 controllers to external CAN devices to form an external closed-loop network, ensure correct CAN_H/CAN_L wiring, install a jumper on the pins behind the RDK’s CAN controller terminal block, and connect one 120-ohm resistor at the other end of the external device in the network.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="can-filter-configuration">CAN Filter Configuration<a href="#can-filter-configuration" class="hash-link" aria-label="Direct link to CAN Filter Configuration" title="Direct link to CAN Filter Configuration">​</a></h2>
<p>Up to 128 filters can be configured for standard frames, and up to 64 for extended frames. Supported filter types include:</p>
<ul>
<li><strong>ONE_ID_FILTER</strong>: Specifies an ID and uses a MASK to ignore certain bits during filtering.</li>
<li><strong>RANGE_ID_FILTER</strong>: Filters based on an ID range.</li>
<li><strong>TWO_ID_FILTER</strong>: Specifies two IDs for filtering.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="filter-identification">Filter Identification<a href="#filter-identification" class="hash-link" aria-label="Direct link to Filter Identification" title="Direct link to Filter Identification">​</a></h3>
<p>The filter type is determined by the two most significant bits of <code>u32HwFilterCode</code>:</p>
<ul>
<li><code>0b00</code>: ONE_ID_FILTER</li>
<li><code>0b01</code>: RANGE_ID_FILTER</li>
<li><code>0b10</code>: TWO_ID_FILTER</li>
</ul>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @struct Can_HwFilterType</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @brief CAN Hardware Filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @NO{S01E03C01}</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">Can_HwFilterType</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uint32 u32HwFilterCode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">/**&lt; @brief Specifies (together with the filter mask) the identifiers range that passes the hardware filter. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uint32 u32HwFilterMask</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">/**&lt; @brief Describes a mask for hardware-based filtering of CAN identifiers. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> Can_HwFilterType</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<ul>
<li>Configuration example:<!-- -->
<ul>
<li>This is the filter configuration for CAN7, containing two filters.</li>
<li>The high 2 bits of the first element of Filter 0 are <code>01</code>, indicating range-based filtering.</li>
<li>Filtering for extended frames and standard frames is independent and does not interfere with each other.</li>
<li>All standard-frame filters (e.g., Filter 0 and Filter 1 in the example below) operate in an &quot;OR&quot; relationship: if at least one filter element matches, the CAN message is transferred to the enhanced RX FIFO memory.</li>
<li>Similarly, all extended-frame filters (e.g., Filter 2 and Filter 3 below) also use an &quot;OR&quot; relationship: if any filter element matches, the message is transferred to the enhanced RX FIFO.</li>
</ul>
</li>
</ul>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Config/McalCdd/gen_s100_sip_B_mcu1/Can/src/Can_PBcfg.c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Can_HwFilterType Can_aHwFilter_Object7</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4U</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Standard frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x400007ffU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Standard frame: accepts messages with ID 0x0 ~ 0x7ff</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000000U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Standard frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x400007ffU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Standard frame: accepts messages with ID 0x600 ~ 0x7ff</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000600U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Extended frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x5fffffffU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Extended frame: accepts messages with ID 0x0 ~ 0x1fffffff</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000000U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Extended frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x5fffffffU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Extended frame: accepts messages with ID 0x600 ~ 0x1fffffff</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000600U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="one_id_filter-single-id-filtering">ONE_ID_FILTER (Single-ID Filtering)<a href="#one_id_filter-single-id-filtering" class="hash-link" aria-label="Direct link to ONE_ID_FILTER (Single-ID Filtering)" title="Direct link to ONE_ID_FILTER (Single-ID Filtering)">​</a></h3>
<p>This is the most common filter type, using a filter code and mask. Pseudocode:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Received_ID </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> Filter_Mask</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Filter_Code </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> Filter_Mask</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Accept the message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Discard the message</span><br></span></code></pre></div></div>
<p>Example using Standard Frame Filter 0:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Config/McalCdd/gen_s100_sip_B_mcu1/Can/src/Can_PBcfg.c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Can_HwFilterType Can_aHwFilter_Object7</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4U</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Standard frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000400U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Accept only ID = 0x400 &amp; 0x7ff = 0x400</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x000007ffU</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* Standard frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x400007ffU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Range filtering mode (mixed usage supported)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000600U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Extended frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x5fffffffU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Extended frame: accepts ID 0x0 ~ 0x1fffffff</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000000U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Extended frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x5fffffffU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Extended frame: accepts ID 0x600 ~ 0x1fffffff</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000600U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="range_id_filter-range-based-filtering">RANGE_ID_FILTER (Range-Based Filtering)<a href="#range_id_filter-range-based-filtering" class="hash-link" aria-label="Direct link to RANGE_ID_FILTER (Range-Based Filtering)" title="Direct link to RANGE_ID_FILTER (Range-Based Filtering)">​</a></h3>
<p>In this mode, filtering uses range logic:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id1 </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> Received_ID </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> id2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Accept the message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Discard the message</span><br></span></code></pre></div></div>
<p>This is the default and most commonly used filtering method on the S100 MCU. Example code:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Config/McalCdd/gen_s100_sip_B_mcu1/Can/src/Can_PBcfg.c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Can_HwFilterType Can_aHwFilter_Object7</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4U</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Standard frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000400U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Accept only ID = 0x400 &amp; 0x7ff = 0x400</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x000007ffU</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* Standard frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x400007ffU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Range filtering mode (mixed usage supported)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000600U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Extended frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x5fffffffU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Extended frame: accepts ID 0x0 ~ 0x1fffffff</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000000U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Extended frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x5fffffffU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Extended frame: accepts ID 0x600 ~ 0x1fffffff</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000600U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="two_id_filter-dual-id-filtering">TWO_ID_FILTER (Dual-ID Filtering)<a href="#two_id_filter-dual-id-filtering" class="hash-link" aria-label="Direct link to TWO_ID_FILTER (Dual-ID Filtering)" title="Direct link to TWO_ID_FILTER (Dual-ID Filtering)">​</a></h3>
<p>This type allows matching against two independent IDs:</p>
<ul>
<li><code>id1</code>: First matching ID</li>
<li><code>id2</code>: Second matching ID</li>
</ul>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Received_ID </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> id1 </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> Received_ID </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> id2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Receive this message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Discard this message</span><br></span></code></pre></div></div>
<p>Taking Standard Frame Filter 0 configuration as an example, the code is as follows:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Config/McalCdd/gen_s100_sip_B_mcu1/Can/src/Can_PBcfg.c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Can_HwFilterType Can_aHwFilter_Object7</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4U</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Standard frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x80000404U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Only receive messages with ID 0x404</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000303U</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Only receive messages with ID 0x303</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Standard frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x400007ffU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Range-based filtering; mixed usage supported</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000600U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Extended frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x5fffffffU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Extended frame configuration: receive messages with ID from 0x0 to 0x1fffffff</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000000U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Extended frame configuration */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x5fffffffU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Extended frame configuration: receive messages with ID from 0x600 to 0x1fffffff</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0x00000600U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><ol>
<li>RDK S100 hardware and software support both extended and standard frames without requiring configuration changes.</li>
<li>RDK S100 hardware and software support independent filtering for extended and standard frames.</li>
<li>Pay attention to the ID length configuration. IDs exceeding the specified length will be truncated: extended frame IDs can be up to 29 bits (maximum value 0x1FFFFFFF), while standard frame IDs can be up to 11 bits (maximum value 0x7FF).</li>
</ol></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bit-rate-configuration">Bit Rate Configuration<a href="#bit-rate-configuration" class="hash-link" aria-label="Direct link to Bit Rate Configuration" title="Direct link to Bit Rate Configuration">​</a></h2>
<p>The nominal bit timing of CAN can be divided into four segments:</p>
<ol>
<li><strong>Synchronization Segment (sync_seg)</strong>: Used for clock synchronization among nodes. All nodes detect signal edges within this segment. Its length is fixed at 1 time quantum (TQ).</li>
<li><strong>Propagation Segment (prop_seg)</strong>: Compensates for signal propagation delay on the physical bus. Its length is adjustable to ensure proper signal transmission timing over the physical medium.</li>
<li><strong>Phase Buffer Segment 1 (phase_seg1)</strong>: Adjusts phase errors to ensure accurate sampling point placement and supports resynchronization extension.</li>
<li><strong>Phase Buffer Segment 2 (phase_seg2)</strong>: Also adjusts phase errors but can be shortened.</li>
</ol>
<p>The sum of these segments determines the total CAN bit time. Different bit rates can be configured by adjusting the lengths of these segments.</p>
<p>Additionally, several important concepts exist:</p>
<ol>
<li><strong>Synchronization Jump Width (SJW)</strong>: The maximum time amount allowed for adjusting phase buffer segments during CAN bus synchronization. It compensates for clock deviations among nodes during hard synchronization and resynchronization, ensuring aligned sampling points.</li>
<li><strong>Transceiver Delay Compensation Offset</strong>: Supported only in CAN FD, this fixed correction value compensates for transceiver loop delay and signal propagation time under high-speed data segment transmission in CAN FD mode.</li>
<li><strong>Sampling Point</strong>: The precise moment within a bit time when the CAN controller samples the bus voltage level to determine the bit’s logical value (dominant 0 or recessive 1).</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="value-ranges-and-formula-calculations">Value Ranges and Formula Calculations<a href="#value-ranges-and-formula-calculations" class="hash-link" aria-label="Direct link to Value Ranges and Formula Calculations" title="Direct link to Value Ranges and Formula Calculations">​</a></h3>
<ol>
<li>Sampling Point Calculation:<br>
<!-- -->(sync_seg + prop_seg + phase_seg1) / (sync_seg + prop_seg + phase_seg1 + phase_seg2) × 100%</li>
<li>The synchronization segment is fixed at 1 TQ.</li>
<li>prop_seg + phase_seg1 &gt; phase_seg2</li>
<li>SJW ≤ min(Phase_Seg1, Phase_Seg2)</li>
<li>When configuring bit rates of 5 Mbps or higher, delay compensation parameters must be set. The compensation offset is calculated as:<!-- -->
<ul>
<li>TDC offset = (PropSeg + Seg1 + 1) × Fd Prescaler</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-configuration-arbitration-segment-at-1-mbps-data-segment-at-5-mbps">Example Configuration: Arbitration Segment at 1 Mbps, Data Segment at 5 Mbps<a href="#example-configuration-arbitration-segment-at-1-mbps-data-segment-at-5-mbps" class="hash-link" aria-label="Direct link to Example Configuration: Arbitration Segment at 1 Mbps, Data Segment at 5 Mbps" title="Direct link to Example Configuration: Arbitration Segment at 1 Mbps, Data Segment at 5 Mbps">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-confirm-basic-parameters">1. Confirm Basic Parameters<a href="#1-confirm-basic-parameters" class="hash-link" aria-label="Direct link to 1. Confirm Basic Parameters" title="Direct link to 1. Confirm Basic Parameters">​</a></h4>
<ul>
<li>CAN Clock Frequency (CAN_CLK): 40 MHz</li>
<li>Target Bit Rate: 5 Mbps</li>
<li>Prescaler: 1 (no division)</li>
<li>Total TQ per Bit: TQ = CAN_CLK / (Bit Rate × Prescaler) = 40 MHz / (5 Mbps × 1) = 8 TQ</li>
<li>Time Quantum (Tq time): 1 / (40 MHz / prescaler) = 1/40 MHz = 25 ns</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-time-quantum-tq-allocation">2. Time Quantum (TQ) Allocation<a href="#2-time-quantum-tq-allocation" class="hash-link" aria-label="Direct link to 2. Time Quantum (TQ) Allocation" title="Direct link to 2. Time Quantum (TQ) Allocation">​</a></h4>
<p>Sync_Seg (fixed segment): 1 TQ (cannot be modified)</p>
<p>Remaining TQ allocation: Prop_Seg + Phase_Seg1 + Phase_Seg2 = 8 − 1 = 7 TQ</p>
<p>Here, we choose Prop_Seg = 1, Phase_Seg1 = 4, Phase_Seg2 = 2.<br>
<!-- -->Sampling Point = (Sync_Seg + Prop_Seg + Phase_Seg1) / Total TQ × 100% = (1 + 1 + 4) / 8 × 100% = 75%</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-transceiver-delay-compensation-offset">3. Transceiver Delay Compensation Offset<a href="#3-transceiver-delay-compensation-offset" class="hash-link" aria-label="Direct link to 3. Transceiver Delay Compensation Offset" title="Direct link to 3. Transceiver Delay Compensation Offset">​</a></h4>
<p>Offset = (Prop_Seg + Phase_Seg1 + 1) × Prescaler = (1 + 4 + 1) × 1 = 6 TQ</p>
<p><strong>Synchronization Jump Width (SJW) Setting</strong>:</p>
<p>SJW must satisfy: SJW ≤ min(Phase_Seg1, Phase_Seg2) = min(4, 2) = 2</p>
<p>Thus, configure SJW = 2 TQ.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-final-configuration-parameters">4. Final Configuration Parameters<a href="#4-final-configuration-parameters" class="hash-link" aria-label="Direct link to 4. Final Configuration Parameters" title="Direct link to 4. Final Configuration Parameters">​</a></h4>
<p>Using the same method, parameters for the 1 Mbps case can also be calculated. Note that some register values are automatically incremented by hardware, so the actual values written to registers must be decremented by 1. See the table below for details.</p>
<ul>
<li><strong>5 Mbps Data Segment Configuration (75% Sampling Point)</strong></li>
</ul>
<table><thead><tr><th>Parameter Name</th><th>Value (TQ or Time)</th><th>Value to Write to Register</th></tr></thead><tbody><tr><td>Sync_Seg</td><td>1 TQ</td><td>Not written (fixed at 1)</td></tr><tr><td>Prop_Seg</td><td>1 TQ</td><td>1</td></tr><tr><td>Phase_Seg1</td><td>4 TQ</td><td>3</td></tr><tr><td>Phase_Seg2</td><td>2 TQ</td><td>1</td></tr><tr><td>Prescaler</td><td>1</td><td>0</td></tr><tr><td>SJW</td><td>2 TQ</td><td>1</td></tr><tr><td>Transceiver Delay Compensation Offset</td><td>6 TQ</td><td>6</td></tr></tbody></table>
<ul>
<li><strong>1 Mbps Arbitration Segment Configuration (80% Sampling Point)</strong></li>
</ul>
<table><thead><tr><th>Parameter Name</th><th>Value (TQ or Time)</th><th>Value to Write to Register</th></tr></thead><tbody><tr><td>Sync_Seg</td><td>1 TQ</td><td>Not written (fixed at 1)</td></tr><tr><td>Prop_Seg</td><td>7 TQ</td><td>6</td></tr><tr><td>Phase_Seg1</td><td>8 TQ</td><td>7</td></tr><tr><td>Phase_Seg2</td><td>4 TQ</td><td>3</td></tr><tr><td>Prescaler</td><td>2</td><td>1</td></tr><tr><td>SJW</td><td>2 TQ</td><td>1</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-8-mbps-configuration-special-case-with-60-sampling-point">5. 8 Mbps Configuration (Special Case with 60% Sampling Point)<a href="#5-8-mbps-configuration-special-case-with-60-sampling-point" class="hash-link" aria-label="Direct link to 5. 8 Mbps Configuration (Special Case with 60% Sampling Point)" title="Direct link to 5. 8 Mbps Configuration (Special Case with 60% Sampling Point)">​</a></h4>
<table><thead><tr><th>Parameter Name</th><th>Value (TQ or Time)</th><th>Value to Write to Register</th></tr></thead><tbody><tr><td>Sync_Seg</td><td>1 TQ</td><td>Not written (fixed at 1)</td></tr><tr><td>Prop_Seg</td><td>1 TQ</td><td>1</td></tr><tr><td>Phase_Seg1</td><td>1 TQ</td><td>0</td></tr><tr><td>Phase_Seg2</td><td>2 TQ</td><td>1</td></tr><tr><td>Prescaler</td><td>1</td><td>0</td></tr><tr><td>SJW</td><td>1 TQ</td><td>0</td></tr><tr><td>Transceiver Delay Compensation Offset</td><td>3 TQ</td><td>3</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="6-update-results-to-configuration-file">6. Update Results to Configuration File<a href="#6-update-results-to-configuration-file" class="hash-link" aria-label="Direct link to 6. Update Results to Configuration File" title="Direct link to 6. Update Results to Configuration File">​</a></h4>
<p>Configuration file path:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">${mcu_sdk}/Config/McalCdd/gen_s100_sip_B_mcu1/Can/src/Can_PBcfg.c</span><br></span></code></pre></div></div>
<p>Two important baud-rate-related structures exist in the configuration file. Taking CAN5 as an example:</p>
<ul>
<li><strong>Can_aControllerConfig</strong>: Configures the CAN controller. Each controller has a corresponding configuration entry.</li>
</ul>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Can_ControllerConfigType Can_aControllerConfig</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CAN_CONTROLLER_CONFIG_COUNT</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Controller ID configured */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">5U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Hw controller Offset */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">5U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Base Address */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FLEXCAN_5_BASE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Activation or not */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">boolean</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">TRUE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Bus Off uses polling or not */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">boolean</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">TRUE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Global mask of Legacy FIFO (not used) */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0xFFFFFFFFU</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Acceptance Mode of Legacy FIFO (not used)*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CAN_LEGACY_FIFO_FORMAT_A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Legacy FIFO Warning Notification */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        NULL_PTR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Legacy FIFO Overflow Notification */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        NULL_PTR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Enhanced FIFO Overflow Notification */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        NULL_PTR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Error interrupt enable or not */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">boolean</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">TRUE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Can Error Notification */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Can_ErrorNotif</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* CanFd Error Notification */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CanFd_ErrorNotif</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Default Baudrate ID, 4--1M+5M 5--1M+8M */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">4U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">/* Baudrate config Count*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">6U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Pointer to baudrate config Structure */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Can_aBaudrateConfig_Ctrl5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Pointer to LLD structure to IP config */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">Flexcan_aCtrlConfigPB</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">5U</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* HwObject count */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">9U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Point to group of HwObject that referenced to the current Controller */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Can_apHwObject_Ctrl5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<ul>
<li><strong>Can_aBaudrateConfig_Ctrl5</strong>: Defines the baud rate configuration for a specific controller. This is a large array where all parameters calculated above are written.</li>
</ul>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Can_BaudrateConfigType Can_aBaudrateConfig_Ctrl5</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">6U</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/*Enhance CBT support */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">boolean</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">TRUE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Tx Bit Rate Switch or not */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">boolean</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">TRUE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* CanFd support */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">boolean</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">TRUE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Nominal bit rate */</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Arbitration segment configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">6U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Propagation Segment (prop_seg)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">7U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Phase Buffer Segment 1 (phase_seg1)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">3U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Phase Buffer Segment 2 (phase_seg2)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">3U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Prescaler</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">1U</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Synchronization Jump Width (SJW)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Data bit rate */</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Data segment configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">3U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">3U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">1U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">3U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">1U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Tx Arbitration Start delay */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">12U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Transceiver Delay Compensation Offset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Tranceiver Delay Disable */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">boolean</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">FALSE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre></div></div>
<p>The RDK S100 defaults to six sets of parameters. Users can select the baud rate by modifying the <code>u16DefaultBaudrateID</code> member value in <code>Can_aControllerConfig</code>. The table below shows the baud rate parameters corresponding to each index:</p>
<table><thead><tr><th>u16DefaultBaudrateID</th><th>Arbitration Segment Frequency</th><th>Data Segment Frequency</th></tr></thead><tbody><tr><td>0</td><td>500K</td><td>1M</td></tr><tr><td>1</td><td>500K</td><td>2M</td></tr><tr><td>2</td><td>1M</td><td>2M</td></tr><tr><td>3</td><td>1M</td><td>5M (Short distance: &lt;50m)</td></tr><tr><td>4</td><td>1M</td><td>5M (Long distance: &gt;50m)</td></tr><tr><td>5</td><td>1M</td><td>8M</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="application-sample">Application Sample<a href="#application-sample" class="hash-link" aria-label="Direct link to Application Sample" title="Direct link to Application Sample">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-guide">Usage Guide<a href="#usage-guide" class="hash-link" aria-label="Direct link to Usage Guide" title="Direct link to Usage Guide">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>NOTE</div><div class="admonitionContent_BuS1"><p>Before executing the sample, you need to first power on MCU1. For the procedure to power on MCU1, refer to <a href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/basic_information#mcu1-startupshutdown-process">Powering on MCU</a>.</p></div></div>
<p>For reference on using Acore CANHAL, consult the sample source code located at: <code>source/hobot-io-samples/debian/app/Can</code>. You can directly compile and use it on S100 under the <code>/app/Can</code> directory.</p>
<p>Taking multi-channel transparent transmission as an example, the directory structure is as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ tree /app/Can/can_multi_ch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Makefile // Main build script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── config  // Configuration file directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── channels.json // Channel mapping configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── ipcf_channel.json // IPCF channel mapping configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── nodes.json // CAN virtual device mapping configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── main.cpp // Main program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── readme.md // Documentation file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── can_multich_log.h // Logging header file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── run.sh // Execution script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>JSON configuration primarily involves three files: <code>nodes.json</code>, <code>ipcf_channel.json</code>, and <code>channels.json</code>. Currently, to support multi-process operation, each process searches for these three configuration files in the <code>config</code> subdirectory of its current working path.</p>
<p><code>nodes.json</code> is responsible for creating virtual CAN device nodes accessible by the CANHAL API. Key configuration options include:</p>
<ul>
<li>The <code>channel_id</code> field specifies which node in the IPC configuration file <code>ipcf_channel.json</code> provides data for this virtual CAN device.</li>
<li>The <code>target</code> field indicates the name of this virtual CAN device node, which the CANHAL API uses to access the specified node.</li>
<li>The <code>enable</code> field indicates whether this node is enabled.</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;nodes&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;enable&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;mode_comment&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value_table: R, W, RW&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;mode&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;RW&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;target&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;can6_ins0ch6&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;clk_source&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/dev/hrtc0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;io_channel&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;device_type_comment&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value_table: can, eth, ipcf, spi&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;device_type&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ipcf&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;channel_id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;raw_protocol&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;built_1.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;enable&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;mode_comment&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value_table: R, W, RW&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;mode&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;RW&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;target&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;can5_ins0ch4&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;clk_source&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/dev/hrtc0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;io_channel&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;device_type_comment&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value_table: can, eth, ipcf, spi&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;device_type&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ipcf&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;channel_id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;raw_protocol&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;built_1.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><code>ipcf_channel.json</code> maps the IPC nodes referenced in <code>nodes.json</code> to specific instances and channels.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;enable&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;libipcf_path&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/usr/hobot/lib/libhbipcfhal.so.1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;channels&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;channel&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;can6_ins0ch6&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;instance&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;channel&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;fifo_size&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">64000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;fifo_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;pkg_size_max&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4096</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;dev_path&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;/dev/ipcdrv&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;dev_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;ipcdrv&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;recv_timeout&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ......</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;channel&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;can5_ins0ch4&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;instance&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;channel&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;fifo_size&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">64000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;fifo_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;pkg_size_max&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4096</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;dev_path&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;/dev/ipcdrv&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;dev_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;ipcdrv&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;recv_timeout&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><code>channels.json</code> specifies the IPC configuration file; users typically do not need to modify it.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;io_channels&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token property" style="color:#36acaa">&quot;ipcf&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./config/ipcf_channel.json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Acore cannot directly operate CAN peripherals and must rely on the IPC module to relay data. For the mapping relationship between Acore and peripheral channels, please refer to the &quot;IPC Usage&quot; section in the <a href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_ipc">MCU IPC Usage Guide</a>.</p>
<p>The pseudocode below illustrates how an Acore application receives CAN frames from the MCU side via CANHAL:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_frame_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">arg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">canSendMsgFrame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">test_params</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">frame</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pack</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Send succeeded */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            send_count</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">PRINT_DEBUG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Send length %d\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">CAN_TRY_AGAIN </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Retry due to insufficient IPC or other resources */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   retry</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> MAX_RETRY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">usleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">continue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Send failed */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">PRINT_ERR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Send failed after retries, exiting...\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token function" style="color:#d73a49">recv_frame_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">arg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">exit_flag</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">canRecvMsgFrame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> frame</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pack</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// non blocking</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">CAN_TRY_AGAIN</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Retry due to insufficient IPC or other resources */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">PRINT_DEBUG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;canRecvMsgFrame try again\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">continue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">PRINT_ERR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;canRecvMsgFrame failed ret: %d\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">gettimeofday</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">current_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> elapsed </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token function" style="color:#d73a49">difftime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">current_time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tv_sec</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> last_recv_time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tv_sec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">elapsed </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> RECV_TIMEOUT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Exit on timeout */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">PRINT_INFO</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token string" style="color:#e3116c">&quot;No data received for %d seconds. Exiting thread.\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            RECV_TIMEOUT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">goto</span><span class="token plain"> can_recv_exit</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">continue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> argc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">canInit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">pthread_create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">send_thread</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> send_frame_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">tx_params</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">pthread_create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">rx_threads</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> recv_frame_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">rx_params</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">pthread_join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">send_thread</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">pthread_join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rx_threads</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">canDeInit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<ul>
<li>First, execute <code>canInit()</code> to complete initialization, then create separate sending and receiving threads.</li>
<li>The sending thread calls <code>canSendMsgFrame()</code> to send data packets, while the receiving thread calls <code>canRecvMsgFrame()</code> to receive data packets. The <code>target</code> parameter corresponds to the channel configured in the JSON file.</li>
<li>The <code>pack</code> information includes metadata about this data packet, such as the number of CAN frames, the MCU-side timestamp, and the ACORE-side monotonic timestamp.</li>
<li>CANHAL parses CAN frames from this IPC data packet, allowing users to read all CAN frames via the <code>frame</code> pointer.</li>
<li>Finally, execute <code>canDeInit()</code> to release resources.</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The CAN send/receive functions depend on IPC resources. When the transmission rate is too high, resource exhaustion may occur; in such cases, reduce the transmission rate and implement retransmission.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="acore-side-example-description">ACORE-Side Example Description<a href="#acore-side-example-description" class="hash-link" aria-label="Direct link to ACORE-Side Example Description" title="Direct link to ACORE-Side Example Description">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="simple-can-sendreceive-sample">Simple CAN Send/Receive Sample<a href="#simple-can-sendreceive-sample" class="hash-link" aria-label="Direct link to Simple CAN Send/Receive Sample" title="Direct link to Simple CAN Send/Receive Sample">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="directory-structure">Directory Structure<a href="#directory-structure" class="hash-link" aria-label="Direct link to Directory Structure" title="Direct link to Directory Structure">​</a></h5>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// /app/Can/can_send</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Makefile // Main build script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── canhal_send.c // Sends one standard CAN frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── config // Configuration directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── channels.json  // Channel mapping configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── ipcf_channel.json  // IPCF channel mapping configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── nodes.json // Node mapping configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// /app/Can/can_get</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Makefile // Main build script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── canhal_get.c // Continuously receives data in a while(1) loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── config // Configuration directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── channels.json   // Channel mapping configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── ipcf_channel.json  // IPCF channel mapping configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── nodes.json  // Node mapping configuration file</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h5>
<p>This is only a simple sample; actual applications require modifications based on specific requirements.</p>
<p>Prerequisites:</p>
<ul>
<li>MCU1 must be running normally.</li>
<li>Hardware connection: Use a CAN closed-loop bus network. Connect CAN5 to CAN6, and place a 120Ω resistor between CAN_H and CAN_L (short the two pins behind the CAN5 and CAN6 terminal blocks using jumper caps or Dupont wires).</li>
<li>Since both <code>can_send</code> and <code>can_get</code> use instance channel 4 (which by default maps data from CAN5), <strong>and since a single IPC channel can only be used by one thread</strong>, you must modify <code>ipcf_channel.json</code> in <code>can_send</code> to use instance channel 6 instead. The modification is as follows:</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;enable&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;libipcf_path&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/usr/hobot/lib/libhbipcfhal.so.1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;channels&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;channel&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bypass&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;instance&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;channel&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Changed from 4 to 6 here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;fifo_size&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">64000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;fifo_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;pkg_size_max&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4096</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;dev_path&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;/dev/ipcdrv&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;dev_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;ipcdrv&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;recv_timeout&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="usage-instructions">Usage Instructions<a href="#usage-instructions" class="hash-link" aria-label="Direct link to Usage Instructions" title="Direct link to Usage Instructions">​</a></h5>
<ol>
<li>Compile both <code>can_send</code> and <code>can_get</code> samples separately.</li>
<li>Navigate to the <code>can_get</code> directory and run:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./canhal_get bypass &amp;</span><br></span></code></pre></div></div>
<ol start="3">
<li>Navigate to the <code>can_send</code> directory and run:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@ubuntu:/app/Can/can_send# ./canhal_send bypass 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[CANHAL][INFO][ipcf_dev.cpp:32][2025-2-20 21:43:47.522]:the path of ipcf plugin is /usr/hobot/lib/libhbipcfhal.so.1.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">group name is bypass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[CANHAL][INFO][comps_mgr.cpp:158][2025-2-20 21:43:47.523]:channel constructor Register dev: ipcf success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[CANHAL][INFO][node.cpp:17][2025-2-20 21:43:47.523]:channel id is 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:282] [channel] bypass [ins] 0 [id] 6 init success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:333] [channel] bypass [ins] 0 [id] 6 config success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[CANHAL][INFO][node.cpp:39][2025-2-20 21:43:47.523]:io_channel init successful</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[CANHAL][INFO][node.cpp:44][2025-2-20 21:43:47.523]:protocol is built_1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Send end, send package total: 1 frame total: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[CANHAL][INFO][can_hal_impl.cpp:120][2025-2-20 21:43:47.524]:Deinit node: bypass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:553] [channel] bypass [ins] 0 [id] 6 deinit success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[CANHAL][INFO][can_hal_impl.cpp:128][2025-2-20 21:43:47.524]:Deinit node: bypass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[CANHAL][INFO][channel_ctor.cpp:47][2025-2-20 21:43:47.524]:Deinit device: ipcf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*********************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[bypass] [pack]length: 1 soc_ts: 1186831 mcu_ts: 1191955</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[canhal_get] [bypass] [canframe] canid is 0x00000131 timestamp is 0x123013 data is:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0x0  0xaa  0xaa  0xaa  0xaa  0xaa  0xaa  0xfc</span><br></span></code></pre></div></div>
<ol start="4">
<li>If the following output appears, the test succeeds:</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[canhal_get] [bypass] [canframe] canid is 0x00000131 timestamp is 0x10b221 data is:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 0x0  0xaa  0xaa  0xaa  0xaa  0xaa  0xaa  0xfc</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="multi-channel-transmission">Multi-Channel Transmission<a href="#multi-channel-transmission" class="hash-link" aria-label="Direct link to Multi-Channel Transmission" title="Direct link to Multi-Channel Transmission">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="directory-structure-1">Directory Structure<a href="#directory-structure-1" class="hash-link" aria-label="Direct link to Directory Structure" title="Direct link to Directory Structure">​</a></h5>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// /app/Can/can_multi_ch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Makefile // Main build script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── config  // Configuration directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── channels.json // Channel mapping configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── ipcf_channel.json // IPCF channel mapping configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── nodes.json // CAN virtual device mapping configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── main.cpp // Main program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── readme.md // Documentation file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── can_multich_log.h // Logging header file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── run.sh // Execution script</span><br></span></code></pre></div></div>
<p>This program implements multi-channel CAN bus data transmission and reception:</p>
<ul>
<li><strong>Hardware Connection</strong>: Use a CAN closed-loop bus network. Connect CAN6 to CAN7, and CAN8 to CAN9. Leave CAN5 unconnected as a standalone channel. Install a 120Ω resistor between CAN_H and CAN_L (short the two pins behind the terminal blocks of all used CAN buses using jumper caps or Dupont wires).</li>
<li><strong>Transmitting Threads</strong>: Create an independent thread for each channel to send data. When using CAN FD, the data includes a counter and timestamp; when using classical CAN, the data is filled with 0x55.</li>
<li><strong>Receiving Threads</strong>: Create an independent thread for each channel to receive data and verify its correctness.</li>
</ul>
<p>Transmission Strategy:</p>
<ul>
<li>Send data at fixed intervals via CAN. Adjust transmission frequency by modifying the delay. Excessively high frequencies may cause packet loss.</li>
<li>Target Channels: Broadcast data across CAN5–CAN9.</li>
</ul>
<p>Reception Strategy:</p>
<ul>
<li>Passively receive data, validate the counter in received data, and calculate transmission latency.</li>
<li>Exit the program if no data is received for over 100 seconds (timeout defined in code).</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="dependencies">Dependencies<a href="#dependencies" class="hash-link" aria-label="Direct link to Dependencies" title="Direct link to Dependencies">​</a></h5>
<ul>
<li><code>pthread</code>: Threading library</li>
<li><code>hobot_can_hal</code>: CAN interface library</li>
<li><code>hb_ipcf_hal</code>: IPCF interface library</li>
<li><code>alog</code>: Android logging library</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="channel-mapping">Channel Mapping<a href="#channel-mapping" class="hash-link" aria-label="Direct link to Channel Mapping" title="Direct link to Channel Mapping">​</a></h5>
<table><thead><tr><th>Channel</th><th>Corresponding Thread Name</th><th>Device Name</th></tr></thead><tbody><tr><td>CAN5</td><td>CAN5RX</td><td>&quot;can5_ins0ch4&quot;</td></tr><tr><td>CAN6</td><td>CAN6RX</td><td>&quot;can6_ins0ch6&quot;</td></tr><tr><td>CAN7</td><td>CAN7RX</td><td>&quot;can7_ins0ch7&quot;</td></tr><tr><td>CAN8</td><td>CAN8RX</td><td>&quot;can8_ins0ch2&quot;</td></tr><tr><td>CAN9</td><td>CAN9RX</td><td>&quot;can9_ins0ch3&quot;</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="debug-toggle">DEBUG Toggle<a href="#debug-toggle" class="hash-link" aria-label="Direct link to DEBUG Toggle" title="Direct link to DEBUG Toggle">​</a></h5>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// can_multich_log.h</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">VERBOSE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">0</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property comment" style="color:#999988;font-style:italic">// Set to 1 to enable debug logs</span><br></span></code></pre></div></div>
<p>You can also use <code>logcat</code> to view more detailed logs.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="transmitter">Transmitter<a href="#transmitter" class="hash-link" aria-label="Direct link to Transmitter" title="Direct link to Transmitter">​</a></h5>
<p>Transmission Strategy:</p>
<ul>
<li>Send data at fixed intervals via CAN. Adjust transmission frequency by modifying the delay. Excessively high frequencies may cause packet loss.</li>
<li>Data Content: Send extended CAN FD frames (64 bytes).</li>
<li>Target Channels: Send data on each of CAN5–CAN9.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="receiver">Receiver<a href="#receiver" class="hash-link" aria-label="Direct link to Receiver" title="Direct link to Receiver">​</a></h5>
<p>Reception Strategy:</p>
<ul>
<li>Passively receive data, validate the counter in received data, and calculate transmission latency.</li>
<li>Exit the program if no data is received for over 100 seconds (timeout defined in code).</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes<a href="#notes" class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes">​</a></h5>
<ul>
<li>CAN device resources are automatically released upon program exit.</li>
<li>Press Ctrl+C to interrupt program execution.</li>
<li>Command-line arguments support configuring the number of frames to send, CAN frame type, and data length.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="build-commands">Build Commands<a href="#build-commands" class="hash-link" aria-label="Direct link to Build Commands" title="Direct link to Build Commands">​</a></h5>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make # Compile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make clean # Clean compiled files</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="command-line-arguments">Command-Line Arguments<a href="#command-line-arguments" class="hash-link" aria-label="Direct link to Command-Line Arguments" title="Direct link to Command-Line Arguments">​</a></h5>
<p>The program supports the following command-line arguments to customize runtime parameters:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-n &lt;can_tran_num&gt;                 Specify the number of frames to send (default: 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-t &lt;can_type&gt;                     Specify CAN frame type (0: Standard, 1: Extended, 2: FD Standard, 3: FD Extended) (default: 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-l &lt;can_length&gt;                   Specify CAN frame length (8: 8 bytes, 64: 64 bytes) (default: 64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-h, --help                        Display help information</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="run-command">Run Command<a href="#run-command" class="hash-link" aria-label="Direct link to Run Command" title="Direct link to Run Command">​</a></h5>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export CAN_HAL_DEBUG_LEVEL=6 // Set CAN HAL debug level; setting to 6 disables all logs. Excessive logging may impact transmission frequency.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./can_multi_ch</span><br></span></code></pre></div></div>
<p>Or run with parameters:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./can_multi_ch -t 2 -l 64 -n 5</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="log-analysis">Log Analysis<a href="#log-analysis" class="hash-link" aria-label="Direct link to Log Analysis" title="Direct link to Log Analysis">  ​</a></h5>
<p>Taking the execution of <code>./can_multi_ch -t 2 -l 64 -n 5</code> as an example:</p>
<ul>
<li>
<p>Current default parameter configuration:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[param_config_display 389] [INFO]: Current parameter configuration:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[param_config_display 390] [INFO]:   CAN Transmit Number: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[param_config_display 391] [INFO]:   CAN Type: CAN_FD_STANDARD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[param_config_display 392] [INFO]:   CAN Length: 64</span><br></span></code></pre></div></div>
</li>
<li>
<p>Hardware configuration used: CAN controllers, IPC instances, and channels</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">group name is can6_ins0ch6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">group name is can7_ins0ch7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">group name is can8_ins0ch2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">group name is can9_ins0ch3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">group name is can5_ins0ch4</span><br></span></code></pre></div></div>
</li>
<li>
<p>Hardware configuration used: CAN controllers, IPC instances, and channels</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">group name is can6_ins0ch6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">group name is can7_ins0ch7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">group name is can8_ins0ch2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">group name is can9_ins0ch3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">group name is can5_ins0ch4</span><br></span></code></pre></div></div>
</li>
<li>
<p>Channel initialization information</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:282] [channel] can6_ins0ch6 [ins] 0 [id] 6 init success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:333] [channel] can6_ins0ch6 [ins] 0 [id] 6 config success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:282] [channel] can7_ins0ch7 [ins] 0 [id] 7 init success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:333] [channel] can7_ins0ch7 [ins] 0 [id] 7 config success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:282] [channel] can8_ins0ch2 [ins] 0 [id] 2 init success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:333] [channel] can8_ins0ch2 [ins] 0 [id] 2 config success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:282] [channel] can9_ins0ch3 [ins] 0 [id] 3 init success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:333] [channel] can9_ins0ch3 [ins] 0 [id] 3 config success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:282] [channel] can5_ins0ch4 [ins] 0 [id] 4 init success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:333] [channel] can5_ins0ch4 [ins] 0 [id] 4 config success.</span><br></span></code></pre></div></div>
</li>
<li>
<p>Data printed by the sending thread, showing how many frames were successfully forwarded to the MCU and the transmission rate</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[send_frame_data 266] [INFO]: Target can5_ins0ch4 Time: 0.005230s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[send_frame_data 268] [INFO]: Send success count: 5 Total:5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[send_frame_data 271] [INFO]: 61185.468750 byte/s -&gt; 59.751434kb/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[send_frame_data 274] [INFO]: Sending FPS: 956.02 frames/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[send_frame_data 276] [INFO]: Send end, send package total: 5 frame total: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[send_frame_data 278] [INFO]: Send thread exiting...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[send_frame_data 266] [INFO]: Target can6_ins0ch6 Time: 0.005074s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[send_frame_data 268] [INFO]: Send success count: 5 Total:5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[send_frame_data 271] [INFO]: 63066.613281 byte/s -&gt; 61.588490kb/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[send_frame_data 274] [INFO]: Sending FPS: 985.42 frames/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[send_frame_data 276] [INFO]: Send end, send package total: 5 frame total: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[send_frame_data 278] [INFO]: Send thread exiting...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[send_frame_data 266] [INFO]: Target can7_ins0ch7 Time: 0.004979s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.....</span><br></span></code></pre></div></div>
</li>
<li>
<p>Receive timeout: After the receive thread starts, it waits for incoming data. If no data is received for an extended period, error code -303 is reported. Depending on the actual situation, one can determine whether an anomaly exists. If no data is received for over 100 seconds, the thread exits.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[recv_frame_data 307] [ERR]: canRecvMsgFrame failed ret: -303</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[recv_frame_data 314] [INFO]: No data received for 100 seconds. Exiting thread.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
</li>
<li>
<p>After exiting with Ctrl+C, the number of packets received by each receive thread and the maximum transmission latency (supported only for CAN FD) can be observed. Since CAN5 is not connected to any device, the number of received packets is 0.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Target :can7_ins0ch7 recv frame num: 5 Total recv frame num: 5 Maximum transmission time:32209 us</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Target :can6_ins0ch6 recv frame num: 5 Total recv frame num: 5 Maximum transmission time:41182 us</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Target :can8_ins0ch2 recv frame num: 5 Total recv frame num: 5 Maximum transmission time:22676 us</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Target :can9_ins0ch3 recv frame num: 5 Total recv frame num: 5 Maximum transmission time:11395 us</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Target :can5_ins0ch4 recv frame num: 0 Total recv frame num: 5 Maximum transmission time:0 us</span><br></span></code></pre></div></div>
</li>
<li>
<p>Resource release</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:553] [channel] can5_ins0ch4 [ins] 0 [id] 4 deinit success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:553] [channel] can8_ins0ch2 [ins] 0 [id] 2 deinit success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:553] [channel] can9_ins0ch3 [ins] 0 [id] 3 deinit success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:553] [channel] can7_ins0ch7 [ins] 0 [id] 7 deinit success.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO][hb_ipcf_hal.cpp:553] [channel] can6_ins0ch6 [ins] 0 [id] 6 deinit success.</span><br></span></code></pre></div></div>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="multi-can-networking-transmission">Multi-CAN Networking Transmission<a href="#multi-can-networking-transmission" class="hash-link" aria-label="Direct link to Multi-CAN Networking Transmission" title="Direct link to Multi-CAN Networking Transmission">​</a></h4>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Continuously being updated</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="modifying-can-baud-rate-and-other-configurations-at-the-application-layer">Modifying CAN Baud Rate and Other Configurations at the Application Layer<a href="#modifying-can-baud-rate-and-other-configurations-at-the-application-layer" class="hash-link" aria-label="Direct link to Modifying CAN Baud Rate and Other Configurations at the Application Layer" title="Direct link to Modifying CAN Baud Rate and Other Configurations at the Application Layer">​</a></h4>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Continuously being updated</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="library-log-output-control">Library Log Output Control<a href="#library-log-output-control" class="hash-link" aria-label="Direct link to Library Log Output Control" title="Direct link to Library Log Output Control">​</a></h3>
<p>CAN_HAL_DEBUG_LEVEL is an environment variable used to control the log output level of the library file libhbcanhal.so. Its different values represent different log levels, which determine which log messages will be recorded.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0 (log_trace): Trace level.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 (log_debug): Debug level.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 (log_info): Info level.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 (log_warn): Warning level.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 (log_err): Error level.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5 (log_critical): Critical level.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6 (log_never): Do not print any logs.</span><br></span></code></pre></div></div>
<p>By setting the value of CAN_HAL_DEBUG_LEVEL, you can control the verbosity of log output. For example, if set to 2, only logs of level log_info, log_warn, log_err, and log_critical will be printed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mcu-side-debug-application-instructions">MCU-side DEBUG Application Instructions<a href="#mcu-side-debug-application-instructions" class="hash-link" aria-label="Direct link to MCU-side DEBUG Application Instructions" title="Direct link to MCU-side DEBUG Application Instructions">​</a></h3>
<ol>
<li>Enter the MCU1 console.</li>
<li>Input the command: can_tran_debug</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">can_tran_debug</span><br></span></code></pre></div></div>
<ol start="3">
<li>
<p>Check the results using <code>cat log</code> in the <code>/sys/class/remoteproc/remoteproc_mcu1</code> directory.</p>
<p><img decoding="async" loading="lazy" src="http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/s100_debug.jpg" alt="Debug log" class="img_ev3q"></p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="application-programming-interface-api">Application Programming Interface (API)<a href="#application-programming-interface-api" class="hash-link" aria-label="Direct link to Application Programming Interface (API)" title="Direct link to Application Programming Interface (API)">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="void-can_initconst-can_configtype-config">void Can_Init(const Can_ConfigType* Config)<a href="#void-can_initconst-can_configtype-config" class="hash-link" aria-label="Direct link to void Can_Init(const Can_ConfigType* Config)" title="Direct link to void Can_Init(const Can_ConfigType* Config)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: This function initializes the module.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Config: Pointer to driver configuration.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: None</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="void-can_getversioninfostd_versioninfotype-versioninfo">void Can_GetVersionInfo(Std_VersionInfoType* versioninfo)<a href="#void-can_getversioninfostd_versioninfotype-versioninfo" class="hash-link" aria-label="Direct link to void Can_GetVersionInfo(Std_VersionInfoType* versioninfo)" title="Direct link to void Can_GetVersionInfo(Std_VersionInfoType* versioninfo)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: Returns the version information of this module.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    versioninfo: Pointer to where to store the version information of this module.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: None</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="void-can_deinitvoid">void Can_DeInit(void)<a href="#void-can_deinitvoid" class="hash-link" aria-label="Direct link to void Can_DeInit(void)" title="Direct link to void Can_DeInit(void)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: This function de-initializes the module.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: None</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="std_returntype-can_setcontrollermodeuint8-controller-can_controllerstatetype-transition">Std_ReturnType Can_SetControllerMode(uint8 Controller, Can_ControllerStateType Transition)<a href="#std_returntype-can_setcontrollermodeuint8-controller-can_controllerstatetype-transition" class="hash-link" aria-label="Direct link to Std_ReturnType Can_SetControllerMode(uint8 Controller, Can_ControllerStateType Transition)" title="Direct link to Std_ReturnType Can_SetControllerMode(uint8 Controller, Can_ControllerStateType Transition)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: This function performs software triggered state transitions of the CAN controller State machine.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Controller: CAN controller for which the status shall be changed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Transition: Transition value to request new CAN controller state.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: Std_ReturnType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	E_OK: request accepted.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E_NOT_OK: request not accepted, a development error occurred.</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="void-can_disablecontrollerinterruptsuint8-controller">void Can_DisableControllerInterrupts(uint8 Controller)<a href="#void-can_disablecontrollerinterruptsuint8-controller" class="hash-link" aria-label="Direct link to void Can_DisableControllerInterrupts(uint8 Controller)" title="Direct link to void Can_DisableControllerInterrupts(uint8 Controller)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: This function disables all interrupts for this CAN controller.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Controller: CAN controller for which interrupts shall be disabled.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: None</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="void-can_enablecontrollerinterruptsuint8-controller">void Can_EnableControllerInterrupts(uint8 Controller)<a href="#void-can_enablecontrollerinterruptsuint8-controller" class="hash-link" aria-label="Direct link to void Can_EnableControllerInterrupts(uint8 Controller)" title="Direct link to void Can_EnableControllerInterrupts(uint8 Controller)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: This function enables all allowed interrupts.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Controller: CAN controller for which interrupts shall be re-enabled.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: None</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="std_returntype-can_getcontrollererrorstateuint8-controllerid-can_errorstatetype-errorstateptr">Std_ReturnType Can_GetControllerErrorState(uint8 ControllerId, Can_ErrorStateType* ErrorStatePtr)<a href="#std_returntype-can_getcontrollererrorstateuint8-controllerid-can_errorstatetype-errorstateptr" class="hash-link" aria-label="Direct link to Std_ReturnType Can_GetControllerErrorState(uint8 ControllerId, Can_ErrorStateType* ErrorStatePtr)" title="Direct link to Std_ReturnType Can_GetControllerErrorState(uint8 ControllerId, Can_ErrorStateType* ErrorStatePtr)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: This service obtains the error state of the CAN controller.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ControllerId: Abstracted CanIf ControllerId which is assigned to a CAN controller, which is requested for ErrorState.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ErrorStatePtr: Pointer to a memory location, where the error state of the CAN controller will be stored.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: Std_ReturnType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	E_OK: Error state request has been accepted.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E_NOT_OK: Error state request has not been accepted.</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="std_returntype-can_getcontrollermodeuint8-controller-can_controllerstatetype-controllermodeptr">Std_ReturnType Can_GetControllerMode(uint8 Controller, Can_ControllerStateType* ControllerModePtr)<a href="#std_returntype-can_getcontrollermodeuint8-controller-can_controllerstatetype-controllermodeptr" class="hash-link" aria-label="Direct link to Std_ReturnType Can_GetControllerMode(uint8 Controller, Can_ControllerStateType* ControllerModePtr)" title="Direct link to Std_ReturnType Can_GetControllerMode(uint8 Controller, Can_ControllerStateType* ControllerModePtr)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: This service reports about the current status of the requested CAN controller.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Controller: CAN controller for which the status shall be requested.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ControllerModePtr: Pointer to a memory location, where the current mode of the CAN controller will be stored.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: Std_ReturnType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E_OK: Controller mode request has been accepted.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E_NOT_OK: Controller mode request has not been accepted.</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="std_returntype-can_getcontrollerrxerrorcounteruint8-controllerid-uint8-rxerrorcounterptr">Std_ReturnType Can_GetControllerRxErrorCounter(uint8 ControllerId, uint8* RxErrorCounterPtr)<a href="#std_returntype-can_getcontrollerrxerrorcounteruint8-controllerid-uint8-rxerrorcounterptr" class="hash-link" aria-label="Direct link to Std_ReturnType Can_GetControllerRxErrorCounter(uint8 ControllerId, uint8* RxErrorCounterPtr)" title="Direct link to Std_ReturnType Can_GetControllerRxErrorCounter(uint8 ControllerId, uint8* RxErrorCounterPtr)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: Returns the Rx error counter for a CAN controller.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             This value might not be available for all CAN controllers, in which case E_NOT_OK would be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             returned. Please note that the value of the counter might not be correct at the moment the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             API returns it, because the Rx counter is handled asynchronously in hardware. Applications</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             should not trust this value for any assumption about the current bus state.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ControllerId: CAN controller, whose current Rx error counter shall be acquired.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RxErrorCounterPtr: Pointer to a memory location, where the current Rx error counter of the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       CAN controller will be stored.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: Std_ReturnType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E_OK: Rx error counter available.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E_NOT_OK: Wrong ControllerId, or Rx error counter not available.</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="std_returntype-can_getcontrollertxerrorcounteruint8-controllerid-uint8-txerrorcounterptr">Std_ReturnType Can_GetControllerTxErrorCounter(uint8 ControllerId, uint8* TxErrorCounterPtr)<a href="#std_returntype-can_getcontrollertxerrorcounteruint8-controllerid-uint8-txerrorcounterptr" class="hash-link" aria-label="Direct link to Std_ReturnType Can_GetControllerTxErrorCounter(uint8 ControllerId, uint8* TxErrorCounterPtr)" title="Direct link to Std_ReturnType Can_GetControllerTxErrorCounter(uint8 ControllerId, uint8* TxErrorCounterPtr)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: Returns the Tx error counter for a CAN controller. This value might not be available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             for all CAN controllers, in which case E_NOT_OK would be returned. Please note that the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             value of the counter might not be correct at the moment the API returns it, because the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             Tx counter is handled asynchronously in hardware. Applications should not trust this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             value for any assumption about the current bus state.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ControllerId: CAN controller, whose current Tx error counter shall be acquired.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TxErrorCounterPtr: Pointer to a memory location, where the current Tx error counter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      of the CAN controller will be stored.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: Std_ReturnType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E_OK: Tx error counter available.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E_NOT_OK: Wrong ControllerId, or Tx error counter not available.</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="std_returntype-can_writecan_hwhandletype-hth-const-can_pdutype-pduinfo">Std_ReturnType Can_Write(Can_HwHandleType Hth, const Can_PduType* PduInfo)<a href="#std_returntype-can_writecan_hwhandletype-hth-const-can_pdutype-pduinfo" class="hash-link" aria-label="Direct link to Std_ReturnType Can_Write(Can_HwHandleType Hth, const Can_PduType* PduInfo)" title="Direct link to Std_ReturnType Can_Write(Can_HwHandleType Hth, const Can_PduType* PduInfo)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: This function is called by CanIf to pass a CAN message to CanDrv for transmission.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Hth: information which HW-transmit handle shall be used for transmit. Implicitly this is</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        also the information about the controller to use because the Hth numbers are unique</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        inside one hardware unit.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: Std_ReturnType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E_OK: Write command has been accepted.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E_NOT_OK: development error occurred.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CAN_BUSY: No TX hardware buffer available or pre-emptive call of Can_Write that can’t be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              implemented re-entrant (see Can_ReturnType).</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="void-can_mainfunction_writevoid">void Can_MainFunction_Write(void)<a href="#void-can_mainfunction_writevoid" class="hash-link" aria-label="Direct link to void Can_MainFunction_Write(void)" title="Direct link to void Can_MainFunction_Write(void)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: This function performs the polling of TX confirmation when CAN_TX_PROCESSING</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             is set to POLLING.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: None</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="void-can_mainfunction_readvoid">void Can_MainFunction_Read(void)<a href="#void-can_mainfunction_readvoid" class="hash-link" aria-label="Direct link to void Can_MainFunction_Read(void)" title="Direct link to void Can_MainFunction_Read(void)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: Returns the value of the specified CAN channel. This function performs the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             polling of RX indications when CAN_RX_PROCESSING is set to POLLING.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: None</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="void-can_mainfunction_busoffvoid">void Can_MainFunction_BusOff(void)<a href="#void-can_mainfunction_busoffvoid" class="hash-link" aria-label="Direct link to void Can_MainFunction_BusOff(void)" title="Direct link to void Can_MainFunction_BusOff(void)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: This function performs the polling of bus-off events that are configured statically</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             as ‘to be polled’.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```Sync/Async: Synchronous  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: None  </span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="void-can_mainfunction_modevoid">void Can_MainFunction_Mode(Void)<a href="#void-can_mainfunction_modevoid" class="hash-link" aria-label="Direct link to void Can_MainFunction_Mode(Void)" title="Direct link to void Can_MainFunction_Mode(Void)">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description: This function performs the polling of CAN controller mode transitions.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync/Async: Synchronous  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(in)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(inout)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters(out)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value: None  </span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2026-02-11T05:13:22.000Z" itemprop="dateModified">Feb 11, 2026</time></b></span></div></div></footer></article><nav class="pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_ipc"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">IPC Usage Guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_i2c"><div class="pagination-nav__sublabel">Next </div><div class="pagination-nav__label">I2C Usage Guide</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#basic-overview" class="table-of-contents__link toc-highlight">Basic Overview</a></li><li><a href="#software-architecture" class="table-of-contents__link toc-highlight">Software Architecture</a></li><li><a href="#hardware-connection-instructions" class="table-of-contents__link toc-highlight">Hardware Connection Instructions</a></li><li><a href="#can-filter-configuration" class="table-of-contents__link toc-highlight">CAN Filter Configuration</a><ul><li><a href="#filter-identification" class="table-of-contents__link toc-highlight">Filter Identification</a></li><li><a href="#one_id_filter-single-id-filtering" class="table-of-contents__link toc-highlight">ONE_ID_FILTER (Single-ID Filtering)</a></li><li><a href="#range_id_filter-range-based-filtering" class="table-of-contents__link toc-highlight">RANGE_ID_FILTER (Range-Based Filtering)</a></li><li><a href="#two_id_filter-dual-id-filtering" class="table-of-contents__link toc-highlight">TWO_ID_FILTER (Dual-ID Filtering)</a></li></ul></li><li><a href="#bit-rate-configuration" class="table-of-contents__link toc-highlight">Bit Rate Configuration</a><ul><li><a href="#value-ranges-and-formula-calculations" class="table-of-contents__link toc-highlight">Value Ranges and Formula Calculations</a></li><li><a href="#example-configuration-arbitration-segment-at-1-mbps-data-segment-at-5-mbps" class="table-of-contents__link toc-highlight">Example Configuration: Arbitration Segment at 1 Mbps, Data Segment at 5 Mbps</a><ul><li><a href="#1-confirm-basic-parameters" class="table-of-contents__link toc-highlight">1. Confirm Basic Parameters</a></li><li><a href="#2-time-quantum-tq-allocation" class="table-of-contents__link toc-highlight">2. Time Quantum (TQ) Allocation</a></li><li><a href="#3-transceiver-delay-compensation-offset" class="table-of-contents__link toc-highlight">3. Transceiver Delay Compensation Offset</a></li><li><a href="#4-final-configuration-parameters" class="table-of-contents__link toc-highlight">4. Final Configuration Parameters</a></li><li><a href="#5-8-mbps-configuration-special-case-with-60-sampling-point" class="table-of-contents__link toc-highlight">5. 8 Mbps Configuration (Special Case with 60% Sampling Point)</a></li><li><a href="#6-update-results-to-configuration-file" class="table-of-contents__link toc-highlight">6. Update Results to Configuration File</a></li></ul></li></ul></li><li><a href="#application-sample" class="table-of-contents__link toc-highlight">Application Sample</a><ul><li><a href="#usage-guide" class="table-of-contents__link toc-highlight">Usage Guide</a></li><li><a href="#acore-side-example-description" class="table-of-contents__link toc-highlight">ACORE-Side Example Description</a><ul><li><a href="#simple-can-sendreceive-sample" class="table-of-contents__link toc-highlight">Simple CAN Send/Receive Sample</a><ul><li><a href="#directory-structure" class="table-of-contents__link toc-highlight">Directory Structure</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#usage-instructions" class="table-of-contents__link toc-highlight">Usage Instructions</a></li></ul></li><li><a href="#multi-channel-transmission" class="table-of-contents__link toc-highlight">Multi-Channel Transmission</a><ul><li><a href="#directory-structure-1" class="table-of-contents__link toc-highlight">Directory Structure</a></li><li><a href="#dependencies" class="table-of-contents__link toc-highlight">Dependencies</a></li><li><a href="#channel-mapping" class="table-of-contents__link toc-highlight">Channel Mapping</a></li><li><a href="#debug-toggle" class="table-of-contents__link toc-highlight">DEBUG Toggle</a></li><li><a href="#transmitter" class="table-of-contents__link toc-highlight">Transmitter</a></li><li><a href="#receiver" class="table-of-contents__link toc-highlight">Receiver</a></li><li><a href="#notes" class="table-of-contents__link toc-highlight">Notes</a></li><li><a href="#build-commands" class="table-of-contents__link toc-highlight">Build Commands</a></li><li><a href="#command-line-arguments" class="table-of-contents__link toc-highlight">Command-Line Arguments</a></li><li><a href="#run-command" class="table-of-contents__link toc-highlight">Run Command</a></li><li><a href="#log-analysis" class="table-of-contents__link toc-highlight">Log Analysis</a></li></ul></li><li><a href="#multi-can-networking-transmission" class="table-of-contents__link toc-highlight">Multi-CAN Networking Transmission</a></li><li><a href="#modifying-can-baud-rate-and-other-configurations-at-the-application-layer" class="table-of-contents__link toc-highlight">Modifying CAN Baud Rate and Other Configurations at the Application Layer</a></li></ul></li><li><a href="#library-log-output-control" class="table-of-contents__link toc-highlight">Library Log Output Control</a></li><li><a href="#mcu-side-debug-application-instructions" class="table-of-contents__link toc-highlight">MCU-side DEBUG Application Instructions</a></li><li><a href="#application-programming-interface-api" class="table-of-contents__link toc-highlight">Application Programming Interface (API)</a><ul><li><a href="#void-can_initconst-can_configtype-config" class="table-of-contents__link toc-highlight">void Can_Init(const Can_ConfigType* Config)</a></li><li><a href="#void-can_getversioninfostd_versioninfotype-versioninfo" class="table-of-contents__link toc-highlight">void Can_GetVersionInfo(Std_VersionInfoType* versioninfo)</a></li><li><a href="#void-can_deinitvoid" class="table-of-contents__link toc-highlight">void Can_DeInit(void)</a></li><li><a href="#std_returntype-can_setcontrollermodeuint8-controller-can_controllerstatetype-transition" class="table-of-contents__link toc-highlight">Std_ReturnType Can_SetControllerMode(uint8 Controller, Can_ControllerStateType Transition)</a></li><li><a href="#void-can_disablecontrollerinterruptsuint8-controller" class="table-of-contents__link toc-highlight">void Can_DisableControllerInterrupts(uint8 Controller)</a></li><li><a href="#void-can_enablecontrollerinterruptsuint8-controller" class="table-of-contents__link toc-highlight">void Can_EnableControllerInterrupts(uint8 Controller)</a></li><li><a href="#std_returntype-can_getcontrollererrorstateuint8-controllerid-can_errorstatetype-errorstateptr" class="table-of-contents__link toc-highlight">Std_ReturnType Can_GetControllerErrorState(uint8 ControllerId, Can_ErrorStateType* ErrorStatePtr)</a></li><li><a href="#std_returntype-can_getcontrollermodeuint8-controller-can_controllerstatetype-controllermodeptr" class="table-of-contents__link toc-highlight">Std_ReturnType Can_GetControllerMode(uint8 Controller, Can_ControllerStateType* ControllerModePtr)</a></li><li><a href="#std_returntype-can_getcontrollerrxerrorcounteruint8-controllerid-uint8-rxerrorcounterptr" class="table-of-contents__link toc-highlight">Std_ReturnType Can_GetControllerRxErrorCounter(uint8 ControllerId, uint8* RxErrorCounterPtr)</a></li><li><a href="#std_returntype-can_getcontrollertxerrorcounteruint8-controllerid-uint8-txerrorcounterptr" class="table-of-contents__link toc-highlight">Std_ReturnType Can_GetControllerTxErrorCounter(uint8 ControllerId, uint8* TxErrorCounterPtr)</a></li><li><a href="#std_returntype-can_writecan_hwhandletype-hth-const-can_pdutype-pduinfo" class="table-of-contents__link toc-highlight">Std_ReturnType Can_Write(Can_HwHandleType Hth, const Can_PduType* PduInfo)</a></li><li><a href="#void-can_mainfunction_writevoid" class="table-of-contents__link toc-highlight">void Can_MainFunction_Write(void)</a></li><li><a href="#void-can_mainfunction_readvoid" class="table-of-contents__link toc-highlight">void Can_MainFunction_Read(void)</a></li><li><a href="#void-can_mainfunction_busoffvoid" class="table-of-contents__link toc-highlight">void Can_MainFunction_BusOff(void)</a></li><li><a href="#void-can_mainfunction_modevoid" class="table-of-contents__link toc-highlight">void Can_MainFunction_Mode(Void)</a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.guyuehome.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GuYueHome<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact US</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 D-Robotics.</div></div></div></footer></div>
</body>
</html>