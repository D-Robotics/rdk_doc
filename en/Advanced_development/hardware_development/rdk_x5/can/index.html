<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Advanced_development/hardware_development/rdk_x5/can" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">CAN Usage | RDK DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/can"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="CAN Usage | RDK DOC"><meta data-rh="true" name="description" content="Protocol Overview"><meta data-rh="true" property="og:description" content="Protocol Overview"><link data-rh="true" rel="icon" href="/rdk_doc/en/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/can"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/hardware_development/rdk_x5/can" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/can" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/hardware_development/rdk_x5/can" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"7. Advanced Development","item":"https://developer.d-robotics.cc/rdk_doc/en/Advanced_development"},{"@type":"ListItem","position":2,"name":"7.1 Hardware Development Guide","item":"https://developer.d-robotics.cc/rdk_doc/en/hardware_development"},{"@type":"ListItem","position":3,"name":"CAN Usage","item":"https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/can"}]}</script><script src="https://hm.baidu.com/hm.js?24dd63cad43b63889ea6bede5fd1ab9e" async></script><link rel="stylesheet" href="/rdk_doc/en/assets/css/styles.a6d92e8e.css">
<script src="/rdk_doc/en/assets/js/runtime~main.a9451eaf.js" defer="defer"></script>
<script src="/rdk_doc/en/assets/js/main.488013b8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rdk_doc/en/RDK">RDK X3 / X5</a><a class="navbar__item navbar__link" href="/rdk_doc/en/rdk_s/RDK">RDK S100</a><a href="https://developer.d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>EN</a><ul class="dropdown__menu"><li><a href="/rdk_doc/Advanced_development/hardware_development/rdk_x5/can" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">CN</a></li><li><a href="/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/can" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">EN</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rdk_doc/en/RDK">D-Robotics RDK Suite</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Quick_start">1. Quick Start</a><button aria-label="Expand sidebar category &#x27;1. Quick Start&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/System_configuration">2. System Configuration</a><button aria-label="Expand sidebar category &#x27;2. System Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Basic_Application">3. Basic Application Development</a><button aria-label="Expand sidebar category &#x27;3. Basic Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Basic_Development">4. Algorithm Application Development</a><button aria-label="Expand sidebar category &#x27;4. Algorithm Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Robot_development">5. Robotics Application Development</a><button aria-label="Expand sidebar category &#x27;5. Robotics Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Application_case">6. Application Development Guide</a><button aria-label="Expand sidebar category &#x27;6. Application Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rdk_doc/en/Advanced_development">7. Advanced Development</a><button aria-label="Collapse sidebar category &#x27;7. Advanced Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/en/hardware_development">7.1 Hardware Development Guide</a><button aria-label="Collapse sidebar category &#x27;7.1 Hardware Development Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/rdk_doc/en/Advanced_development/hardware_development/rdk_x3/hardware">7.1.1 RDK X3 Hardware Description</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/rdk_doc/en/Advanced_development/hardware_development/rdk_x3_module/hardware">7.1.2 RDK X3 Module Hardware Description</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/rdk_doc/en/Advanced_development/hardware_development/rdk_ultra/hardware">7.1.3 RDK Ultra Hardware Description</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/hardware">7.1.4 RDK X5 Hardware Description</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/hardware">Hardware Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/accessory">Accessories List</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/can">CAN Usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/display">Display Usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/POE">PoE Power Supply Usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/V4l2">V4L2 Usage</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/linux_development">7.2. Linux Development Guide</a><button aria-label="Expand sidebar category &#x27;7.2. Linux Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/03_multimedia_development">7.3 Multimedia Development Guide</a><button aria-label="Expand sidebar category &#x27;7.3 Multimedia Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/04_toolchain_development">7.4 Algorithm Toolchain Development Guide</a><button aria-label="Expand sidebar category &#x27;7.4 Algorithm Toolchain Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/FAQ">8. FAQs</a><button aria-label="Expand sidebar category &#x27;8. FAQs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Appendix">9. Appendix</a><button aria-label="Expand sidebar category &#x27;9. Appendix&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rdk_doc/en/Release_Note/release_note">10. Version release</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rdk_doc/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/Advanced_development"><span>7. Advanced Development</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/hardware_development"><span>7.1 Hardware Development Guide</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">7.1.4 RDK X5 Hardware Description</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">CAN Usage</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>CAN Usage</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="protocol-overview">Protocol Overview<a href="#protocol-overview" class="hash-link" aria-label="Direct link to Protocol Overview" title="Direct link to Protocol Overview">​</a></h2>
<p><strong>CAN</strong>
CAN stands for Controller Area Network, which is a serial communication protocol standardized by ISO. It is widely used in real-time applications, utilizing twisted pair cables for signal transmission. It is one of the most widely used fieldbus technologies worldwide.</p>
<p>Advantages of CAN bus:</p>
<ul>
<li>
<p><strong>High reliability and strong anti-interference capabilities</strong><br>
<!-- -->The physical layer chip uses differential signals and twisted pair wiring for transmission, effectively mitigating electromagnetic interference. The hardware-based data link layer automatically resolves synchronization issues between multiple nodes.</p>
</li>
<li>
<p><strong>Strong error detection capabilities</strong><br>
<!-- -->The hardware-based data link layer includes features like CRC and bit detection, ensuring near 100% detection of communication anomalies.</p>
</li>
<li>
<p><strong>Comprehensive error management</strong><br>
<!-- -->If a message arbitration fails or is corrupted during transmission, it will be automatically retransmitted. Nodes with severe errors will automatically disconnect from the bus, without affecting normal operation of the network.</p>
</li>
<li>
<p><strong>Real-time performance</strong><br>
<!-- -->CAN bus supports high data transmission speeds and can handle large amounts of data in real time, meeting the needs of automotive electronic control systems.</p>
</li>
<li>
<p><strong>Low cost</strong><br>
<!-- -->The hardware cost for CAN bus systems is relatively low, reducing the overall cost of automotive electronic control systems.</p>
</li>
<li>
<p><strong>Long communication distance and high message transmission speed</strong><br>
<!-- -->Direct communication can cover up to 10 km (at rates below 4 kbps); the transmission speed can reach up to 1 Mbps, with a maximum distance of 40 meters at this speed.</p>
</li>
<li>
<p><strong>Multi-master communication support, lossless arbitration</strong><br>
<!-- -->In the event that two nodes send messages simultaneously, the higher priority message will be transmitted without interference.</p>
</li>
<li>
<p><strong>Eliminates the concept of &quot;address&quot;</strong><br>
<!-- -->A key feature of CAN is the elimination of traditional address encoding, replaced by message-based communication.</p>
</li>
<li>
<p><strong>High flexibility and ease of network expansion</strong><br>
<!-- -->The number of nodes on a CAN network is not limited. Adding new nodes does not affect the existing hardware and software of the network.</p>
</li>
</ul>
<p><strong>CAN FD</strong>
The need for higher performance in CAN networks led to the development of CAN FD (Flexible Data-rate). CAN FD maintains the advantages of standard CAN but addresses its shortcomings with the following features:</p>
<ul>
<li>
<p><strong>Extended data field</strong><br>
<!-- -->CAN FD supports a data field of up to 64 bytes per frame, compared to the 8 bytes in standard CAN. This greatly increases data transfer capacity.</p>
</li>
<li>
<p><strong>Dual bit-rate mode</strong><br>
<!-- -->CAN FD supports dual bit-rate operation, using a nominal bit-rate (up to 1 Mbps) for the arbitration phase and a higher bit-rate (up to 5 Mbps) for the data phase, enhancing data transmission speed while maintaining compatibility.</p>
</li>
<li>
<p><strong>Improved CRC and padding bit counter</strong><br>
<!-- -->CAN FD introduces improvements in CRC and padding bit counters to enhance error detection and data integrity.</p>
</li>
<li>
<p><strong>Remote frame support removed</strong><br>
<!-- -->CAN FD simplifies the frame structure by removing support for remote frames, making communication fully data-frame based.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="interface-description">Interface Description<a href="#interface-description" class="hash-link" aria-label="Direct link to Interface Description" title="Direct link to Interface Description">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/01_hardware_development/rdk_x5/img-20241009-1.png" alt="img-20241009-1" class="img_ev3q"></p>
<ul>
<li>The RDK X5 provides a CAN communication interface, equipped with a 120-ohm terminal resistor switch. To enable the terminal resistor, simply close the switch.</li>
<li>The terminal interface is of type SH1.0 1X3P.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="module-overview">Module Overview<a href="#module-overview" class="hash-link" aria-label="Direct link to Module Overview" title="Direct link to Module Overview">​</a></h2>
<p>The RDK X5 integrates the <strong>TCAN4550</strong> chip.<br>
<!-- -->The <strong>TCAN4550</strong> is a CAN FD controller with an integrated transceiver supporting data rates of up to 8 Mbps. It complies with the ISO11898-1:2015 high-speed CAN data link layer specification and the ISO11898–2:2016 high-speed CAN physical layer requirements. The TCAN4550 interfaces between the CAN bus and the system processor via the Serial Peripheral Interface (SPI), supporting both classic CAN and CAN FD, and provides port expansion or CAN support for processors that do not support CAN FD. The TCAN4550 features differential transmission and reception capabilities for CAN FD transceivers.</p>
<ul>
<li>Supports CAN at 1 Mbps and CAN FD at 2 Mbps.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="driver-guide">Driver Guide<a href="#driver-guide" class="hash-link" aria-label="Direct link to Driver Guide" title="Direct link to Driver Guide">​</a></h2>
<p><strong>dts</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&amp;spi5 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  status = &quot;okay&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pinctrl-names = &quot;default&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pinctrl-0 = &lt;&amp;pinctrl_spi5 &amp;lsio_gpio0_7 &amp;lsio_gpio0_12&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tcan4x5x: tcan4x5x@0 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compatible = &quot;ti,tcan4x5x&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reg = &lt;0&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #address-cells = &lt;1&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #size-cells = &lt;1&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spi-max-frequency = &lt;10000000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bosch,mram-cfg = &lt;0x0 0 0 16 0 0 1 1&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    interrupt-parent = &lt;&amp;ls_gpio0_porta&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    interrupts = &lt;12 IRQ_TYPE_EDGE_FALLING&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reset-gpios = &lt;&amp;ls_gpio0_porta 7 GPIO_ACTIVE_HIGH&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="driver-code">Driver Code<a href="#driver-code" class="hash-link" aria-label="Direct link to Driver Code" title="Direct link to Driver Code">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kernel\drivers\net\can\m_can\tcan4x5x-core.c</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="can-utils-introduction">can-utils Introduction<a href="#can-utils-introduction" class="hash-link" aria-label="Direct link to can-utils Introduction" title="Direct link to can-utils Introduction">​</a></h2>
<p>can-utils is an open-source toolset for the Linux operating system, specifically designed for tasks related to the CAN (Controller Area Network) bus. CAN bus is widely used in automotive and industrial automation for communication between devices.</p>
<p>This toolset provides various command-line utilities for sending, receiving, and processing data on the CAN network. Some common tools include:</p>
<ul>
<li><strong>cansend</strong>: Sends a single CAN frame.</li>
<li><strong>candump</strong>: Captures and displays data passing through the CAN interface.</li>
<li><strong>canplayer</strong>: Replays data recorded by <code>candump</code>.</li>
<li><strong>cansniffer</strong>: Displays changes in CAN data.</li>
</ul>
<p>can-utils also includes advanced tools for tasks like configuring CAN hardware filters or debugging CAN devices and networks. These tools are accessible via the command line and can be easily integrated into scripts and automation systems.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-usage">Basic Usage<a href="#basic-usage" class="hash-link" aria-label="Direct link to Basic Usage" title="Direct link to Basic Usage">​</a></h3>
<p><strong>1. candump</strong>
Displays, filters, and records CAN data</p>
<p>Basic usage:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">candump can0</span><br></span></code></pre></div></div>
<ul>
<li>Display all CAN data through the can0 interface.</li>
</ul>
<p>Filter by specific ID:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">candump can0,123:7FF</span><br></span></code></pre></div></div>
<ul>
<li>Display CAN frames with ID 123.</li>
</ul>
<p>Record data to a file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">candump -l can0</span><br></span></code></pre></div></div>
<ul>
<li>This will record data passing through can0 to a file, with the default filename format as <code>candump-YYYY-MM-DD.log</code>.</li>
</ul>
<p><strong>2. canplayer</strong>
<strong>canplayer</strong> is used to replay CAN data logs recorded by <code>candump</code>.</p>
<p>Basic usage:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">canplayer -I candump.log</span><br></span></code></pre></div></div>
<ul>
<li>Replay CAN data from the file <code>candump.log</code>.</li>
</ul>
<p><strong>3. cansend</strong>
used to send a specified CAN frame.</p>
<p>Basic usage:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cansend can0 123#1122334455667788</span><br></span></code></pre></div></div>
<ul>
<li>Send a CAN frame with ID 123 and data <code>1122334455667788</code> to the can0 interface.</li>
</ul>
<p><strong>4. cangen</strong>
Generate random or specific-patterned CAN traffic for testing or simulation purposes.</p>
<p>Basic usage:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cangen can0 -I 1A -L 8 -D i -g 10 -n 100</span><br></span></code></pre></div></div>
<ul>
<li>Generate 100 CAN frames with ID 1A, 8-byte length, and incrementing payloads on <code>can0</code>, with a 10ms interval between each frame.</li>
</ul>
<p><strong>5. cansequence</strong><br>
<!-- -->Send a sequence of CAN frames with incrementing payloads and check for any frame loss.</p>
<p>Basic usage:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cansequence can0</span><br></span></code></pre></div></div>
<ul>
<li>Send and monitor a sequence of CAN frames with incrementing payloads on <code>can0</code>.</li>
</ul>
<p><strong>6. cansniffer</strong><br>
<!-- -->Used to display changes in CAN data, which is very useful for debugging and understanding the data flow.</p>
<p>Basic usage:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cansniffer can0</span><br></span></code></pre></div></div>
<ul>
<li>Monitor and display any changes in CAN data on the <code>can0</code> interface.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-guide">Test Guide<a href="#test-guide" class="hash-link" aria-label="Direct link to Test Guide" title="Direct link to Test Guide">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="loopback-test">Loopback Test<a href="#loopback-test" class="hash-link" aria-label="Direct link to Loopback Test" title="Direct link to Loopback Test">​</a></h3>
<p>Configure the CAN bus bitrate and enable loopback mode.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ip link set down can0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link set can0 type can bitrate 125000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link set can0 type can loopback on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link set up can0</span><br></span></code></pre></div></div>
<p>View CAN0 Configuration Information</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ip -details link show can0</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/01_hardware_development/rdk_x5/img-20241009-2.png" alt="img-20241009-2" class="img_ev3q"></p>
<p>To check the configuration details of the <code>can0</code> interface, you can use the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">candump can0 -L &amp;</span><br></span></code></pre></div></div>
<p>To send a test message and verify that data is immediately received, use the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cansend can0 123#1122334455667788</span><br></span></code></pre></div></div>
<p>Test Results
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/01_hardware_development/rdk_x5/img-20241009-3.png" alt="img-20241009-3" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="canfd-loopback-test">CANFD Loopback Test<a href="#canfd-loopback-test" class="hash-link" aria-label="Direct link to CANFD Loopback Test" title="Direct link to CANFD Loopback Test">​</a></h3>
<p>The arbitration segment bitrate is set to 500K, and the data segment bitrate is set to 2M.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ip link set can0 down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link set can0 type can bitrate 500000 dbitrate 2000000  fd on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link set can0 type can loopback on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link set can0 up</span><br></span></code></pre></div></div>
<p>Sending and Receiving CAN FD Data</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">candump can0 -L &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cansend can0 123##300112233445566778899aabbccddeeff</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dual-device-communication-test">Dual Device Communication Test<a href="#dual-device-communication-test" class="hash-link" aria-label="Direct link to Dual Device Communication Test" title="Direct link to Dual Device Communication Test">​</a></h3>
<p><strong>Hardware Connection</strong><br>
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/01_hardware_development/rdk_x5/img-20241009-4.png" alt="img-20241009-4" class="img_ev3q"></p>
<ul>
<li>GND to GND, L to L, H to H.</li>
</ul>
<p><strong>Test Instructions</strong><br>
<!-- -->Configure both devices with the same CAN bus bit rate.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ip link set down can0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link set can0 type can bitrate 125000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link set up can0</span><br></span></code></pre></div></div>
<p>One device should be configured to <strong>receive</strong>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">candump can0 -L</span><br></span></code></pre></div></div>
<p>One device should be configured to <strong>send</strong>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cansend can0 123#1122334455667788</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="application-guide">Application Guide<a href="#application-guide" class="hash-link" aria-label="Direct link to Application Guide" title="Direct link to Application Guide">​</a></h2>
<p>Linux provides a SocketCAN interface, which makes CAN bus communication similar to Ethernet communication. The application programming interface is more universal and flexible. Using SocketCAN is like using TCP/IP.</p>
<p>Here is a simple example of sending and receiving CAN data:</p>
<p>Configure CAN Bus Bitrate and Loopback Mode</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ip link set down can0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link set can0 type can bitrate 125000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link set can0 type can loopback on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link set up can0</span><br></span></code></pre></div></div>
<p>write code</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdio.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;stdlib.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;string.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;unistd.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;linux/can.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;linux/can/raw.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;sys/socket.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;net/if.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;sys/ioctl.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;fcntl.h&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int sock;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  struct sockaddr_can addr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  struct can_frame frame;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // 创建 Socket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sock = socket(PF_CAN, SOCK_RAW, CAN_RAW);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if (sock &lt; 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      perror(&quot;Socket&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // 获取 can0 接口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  struct ifreq ifr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  strcpy(ifr.ifr_name, &quot;can0&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ioctl(sock, SIOCGIFINDEX, &amp;ifr);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // 绑定 Socket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  addr.can_family = PF_CAN;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  addr.can_ifindex = ifr.ifr_ifindex;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bind(sock, (struct sockaddr *)&amp;addr, sizeof(addr));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // 发送消息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frame.can_id = 0x123;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frame.can_dlc = 4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  memcpy(frame.data, &quot;\xde\xad\xbe\xef&quot;, 4);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  write(sock, &amp;frame, sizeof(struct can_frame));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // 接收消息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  while (1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      int nbytes = read(sock, &amp;frame, sizeof(struct can_frame));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (nbytes &gt; 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          printf(&quot;Received: ID: 0x%X Data: &quot;, frame.can_id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          for (int i = 0; i &lt; frame.can_dlc; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              printf(&quot;%02X &quot;, frame.data[i]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          printf(&quot;\n&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  close(sock);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Compile and Run</p>
<p>Save the code to a file named <code>can_loopback.c</code>.</p>
<p>compile the program:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc -o can_loopback can_loopback.c</span><br></span></code></pre></div></div>
<p>Run the Program</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ./can_loopback</span><br></span></code></pre></div></div>
<p>The code will send a CAN message and continuously receive and print the messages it receives.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-07-24T01:29:53.000Z" itemprop="dateModified">Jul 24, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/accessory"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Accessories List</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rdk_doc/en/Advanced_development/hardware_development/rdk_x5/display"><div class="pagination-nav__sublabel">Next </div><div class="pagination-nav__label">Display Usage</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#protocol-overview" class="table-of-contents__link toc-highlight">Protocol Overview</a></li><li><a href="#interface-description" class="table-of-contents__link toc-highlight">Interface Description</a></li><li><a href="#module-overview" class="table-of-contents__link toc-highlight">Module Overview</a></li><li><a href="#driver-guide" class="table-of-contents__link toc-highlight">Driver Guide</a></li><li><a href="#driver-code" class="table-of-contents__link toc-highlight">Driver Code</a></li><li><a href="#can-utils-introduction" class="table-of-contents__link toc-highlight">can-utils Introduction</a><ul><li><a href="#basic-usage" class="table-of-contents__link toc-highlight">Basic Usage</a></li></ul></li><li><a href="#test-guide" class="table-of-contents__link toc-highlight">Test Guide</a><ul><li><a href="#loopback-test" class="table-of-contents__link toc-highlight">Loopback Test</a></li><li><a href="#canfd-loopback-test" class="table-of-contents__link toc-highlight">CANFD Loopback Test</a></li><li><a href="#dual-device-communication-test" class="table-of-contents__link toc-highlight">Dual Device Communication Test</a></li></ul></li><li><a href="#application-guide" class="table-of-contents__link toc-highlight">Application Guide</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.guyuehome.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GuYueHome<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact US</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 D-Robotics.</div></div></div></footer></div>
</body>
</html>