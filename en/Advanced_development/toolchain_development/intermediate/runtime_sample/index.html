<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Advanced_development/toolchain_development/intermediate/runtime_sample" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">On-board Model Application Development Guide | RDK DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/toolchain_development/intermediate/runtime_sample"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="On-board Model Application Development Guide | RDK DOC"><meta data-rh="true" name="description" content="Model Inference DNN API Usage Example"><meta data-rh="true" property="og:description" content="Model Inference DNN API Usage Example"><link data-rh="true" rel="icon" href="/rdk_doc/en/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/toolchain_development/intermediate/runtime_sample"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/toolchain_development/intermediate/runtime_sample" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/toolchain_development/intermediate/runtime_sample" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/toolchain_development/intermediate/runtime_sample" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"7. Advanced Development","item":"https://developer.d-robotics.cc/rdk_doc/en/Advanced_development"},{"@type":"ListItem","position":2,"name":"7.4 Algorithm Toolchain Development Guide","item":"https://developer.d-robotics.cc/rdk_doc/en/04_toolchain_development"},{"@type":"ListItem","position":3,"name":"7.4.2 Advanced Guide","item":"https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/toolchain_development/intermediate/"},{"@type":"ListItem","position":4,"name":"On-board Model Application Development Guide","item":"https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/toolchain_development/intermediate/runtime_sample"}]}</script><script src="https://hm.baidu.com/hm.js?24dd63cad43b63889ea6bede5fd1ab9e" async></script><link rel="stylesheet" href="/rdk_doc/en/assets/css/styles.0fbd7d27.css">
<script src="/rdk_doc/en/assets/js/runtime~main.79063cda.js" defer="defer"></script>
<script src="/rdk_doc/en/assets/js/main.e5918ab9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rdk_doc/en/RDK">RDK X3 / X5</a><a class="navbar__item navbar__link" href="/rdk_doc/en/rdk_s/RDK">RDK S100</a><a href="https://developer.d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>EN</a><ul class="dropdown__menu"><li><a href="/rdk_doc/Advanced_development/toolchain_development/intermediate/runtime_sample" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">CN</a></li><li><a href="/rdk_doc/en/Advanced_development/toolchain_development/intermediate/runtime_sample" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">EN</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rdk_doc/en/RDK">D-Robotics RDK Suite</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Quick_start">1. Quick Start</a><button aria-label="Expand sidebar category &#x27;1. Quick Start&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/System_configuration">2. System Configuration</a><button aria-label="Expand sidebar category &#x27;2. System Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Basic_Application">3. Basic Application Development</a><button aria-label="Expand sidebar category &#x27;3. Basic Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Basic_Development">4. Algorithm Application Development</a><button aria-label="Expand sidebar category &#x27;4. Algorithm Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Robot_development">5. Robotics Application Development</a><button aria-label="Expand sidebar category &#x27;5. Robotics Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Application_case">6. Application Development Guide</a><button aria-label="Expand sidebar category &#x27;6. Application Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rdk_doc/en/Advanced_development">7. Advanced Development</a><button aria-label="Collapse sidebar category &#x27;7. Advanced Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/hardware_development">7.1 Hardware Development Guide</a><button aria-label="Expand sidebar category &#x27;7.1 Hardware Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/linux_development">7.2. Linux Development Guide</a><button aria-label="Expand sidebar category &#x27;7.2. Linux Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/03_multimedia_development">7.3 RDK X3 Multimedia Development Guide</a><button aria-label="Expand sidebar category &#x27;7.3 RDK X3 Multimedia Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/en/04_toolchain_development">7.4 Algorithm Toolchain Development Guide</a><button aria-label="Collapse sidebar category &#x27;7.4 Algorithm Toolchain Development Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/toolchain_development/overview">7.4.1 Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/en/Advanced_development/toolchain_development/intermediate/">7.4.2 Advanced Guide</a><button aria-label="Collapse sidebar category &#x27;7.4.2 Advanced Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/toolchain_development/intermediate/environment_config">Environment Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/toolchain_development/intermediate/ptq_process">Principles and Steps of PTQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/toolchain_development/intermediate/supported_op_list">supported_op_list</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rdk_doc/en/Advanced_development/toolchain_development/intermediate/runtime_sample">On-board Model Application Development Guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/Advanced_development/toolchain_development/expert/">7.4.3 Expert Guide</a><button aria-label="Expand sidebar category &#x27;7.4.3 Expert Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/FAQ">8. FAQs</a><button aria-label="Expand sidebar category &#x27;8. FAQs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Appendix">9. Appendix</a><button aria-label="Expand sidebar category &#x27;9. Appendix&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rdk_doc/en/Release_Note/release_note">10. Version release</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rdk_doc/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/Advanced_development"><span>7. Advanced Development</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/04_toolchain_development"><span>7.4 Algorithm Toolchain Development Guide</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/Advanced_development/toolchain_development/intermediate/"><span>7.4.2 Advanced Guide</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">On-board Model Application Development Guide</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>On-board Model Application Development Guide</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="model-inference-dnn-api-usage-example">Model Inference DNN API Usage Example<a href="#model-inference-dnn-api-usage-example" class="hash-link" aria-label="Direct link to Model Inference DNN API Usage Example" title="Direct link to Model Inference DNN API Usage Example">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h3>
<p>This section introduces the specific usage of the horizon_runtime_sample package for on-board model application development. Developers can experience and develop applications based on these examples to lower the development threshold.</p>
<p>The sample package provides three types of examples:</p>
<ul>
<li>Model inference DNN API usage examples</li>
<li>Special features examples such as custom operators (custom OP)</li>
<li>Miscellaneous examples for non-NV12 input models</li>
</ul>
<p>Please read on for more details.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tip</div><div class="admonitionContent_BuS1"><p>To obtain the horizon_runtime_sample package, please refer to the <a href="/rdk_doc/en/Advanced_development/toolchain_development/intermediate/environment_config">Deliverables Instructions</a>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-code-package-structure-introduction">Sample Code Package Structure Introduction<a href="#sample-code-package-structure-introduction" class="hash-link" aria-label="Direct link to Sample Code Package Structure Introduction" title="Direct link to Sample Code Package Structure Introduction">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  +---horizon_runtime_sample</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── code                                      # Sample source code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── 00_quick_start                        # Quick start example: Using mobilenetv1 for single image inference and result parsing with the DNN API.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── CMakeLists.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── CMakeLists_x86.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   └── src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── 01_api_tutorial                       # DNN SDK API usage tutorial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── CMakeLists.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── mem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├ ── model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── resize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── roi_infer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   └── tensor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── 02_advanced_samples                   # Special feature examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── CMakeLists.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── custom_identity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── multi_input</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── multi_model_batch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   └── nv12_batch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── 03_misc                               # Miscellaneous examples for non-NV12 input models.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── CMakeLists.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── lenet_gray</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   └── resnet_feature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── CMakeLists.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── build_ultra.sh                        # Script for aarch64 compilation on RDK Ultra</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── build_xj3.sh                          # Script for aarch64 compilation on RDK X3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   └── deps_gcc9.3                           # Third-party dependencies required for the sample code. Users should replace or trim as needed for their own projects.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── ultra</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── data                                  # Preloaded data files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── cls_images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── custom_identity_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── det_images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   └── misc_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   └── runtime -&gt; ../../../model_zoo/runtime/horizon_runtime_sample   # Soft link pointing to the model in the OE package. Board-side runtime environment requires users to specify the model path manually.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── script                                # aarch64 sample execution scripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── 00_quick_start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── 01_api_tutorial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── 02_advanced_samples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── 03_misc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   └── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   └── script_x86                            # x86 sample execution scripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │       ├── 00_quick_start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │       └── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── xj3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── data                                  # Preloaded data files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── cls_images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── custom_identity_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── det_images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   └── misc_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   └── runtime -&gt; ../../../model_zoo/runtime/horizon_runtime_sample   # Soft link pointing to the model in the OE package. Board-side runtime environment requires users to specify the model path manually.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── script                                # aarch64 sample execution scripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── 00_quick_start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── 01_api_tutorial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── 02_advanced_samples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── 03_misc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   └── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   └── script_x86                            # x86 sample execution scripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │       ├── 00_quick_start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │       └── README.md</span><br></span></code></pre></div></div>
<ul>
<li><strong>00_quick_start</strong>: Quick start using the <code>dnn</code> API, demonstrating single-image inference with MobileNetV1 and result parsing.</li>
<li><strong>01_api_tutorial</strong>: DNN SDK API usage tutorial, including <strong>mem</strong>, <strong>model</strong>, <strong>resize</strong>, <strong>roi_infer</strong>, and <strong>tensor</strong> components.</li>
<li><strong>02_advanced_samples</strong>: Special feature examples, such as <strong>custom_identity</strong>, <strong>multi_input</strong>, <strong>multi_model_batch</strong>, and <strong>nv12_batch</strong> functionality.</li>
<li><strong>03_misc</strong>: Miscellaneous examples for non-NV12 input models.</li>
<li><strong>xj3</strong>: RDK X3 development board sample execution scripts, preloaded with data and related models.</li>
<li><strong>ultra</strong>: RDK Ultra development board sample execution scripts, preloaded with data and related models.</li>
<li><strong>build_xj3.sh</strong>: One-click compilation script for RDK X3.</li>
<li><strong>build_ultra.sh</strong>: One-click compilation script for RDK Ultra.</li>
<li><strong>deps/deps_gcc9.3</strong>: Third-party dependencies required for the sample code. Users should replace or trim as needed for their own projects.</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>For running on a private model, please refer to the sample code flow of <code>00_quick_start/src/run_mobileNetV1_224x224.cc</code> for code rewriting. After successful compilation, you can test and verify on the development board!</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="environment-building">Environment Building<a href="#environment-building" class="hash-link" aria-label="Direct link to Environment Building" title="Direct link to Environment Building">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="development-board-preparation">Development Board Preparation<a href="#development-board-preparation" class="hash-link" aria-label="Direct link to Development Board Preparation" title="Direct link to Development Board Preparation">​</a></h4>
<ol>
<li>
<p>After receiving the development board, please update the development board image to the latest version. For the upgrade method, please refer to the <a href="/rdk_doc/en/01_Quick_start/install_os.md#flash_system"><strong>System Update</strong></a> chapter.</p>
</li>
<li>
<p>Ensure that the local development machine and the development board can be connected remotely.</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compilation">Compilation<a href="#compilation" class="hash-link" aria-label="Direct link to Compilation" title="Direct link to Compilation">​</a></h4>
<p>Compilation requires the installation of cross-compilation tools: <code>aarch64-linux-gnu-g++</code>, <code>aarch64-linux-gnu-gcc</code>. Please use the D-Robotics provided development machine Docker image for compilation directly. Please read the <a href="/rdk_doc/en/Advanced_development/toolchain_development/intermediate/environment_config"><strong>Environment Installation</strong></a> chapter for obtaining and using the development machine Docker environment;
According to the situation of the development board used, please use the <code>build_xj3.sh</code> or <code>build_ultra.sh</code> script under the horizon_runtime_sample/code directory to compile the executable program in the development board environment with one click. The executable program and corresponding dependencies will be automatically copied to the <code>xj3/script</code> directory under the <code>aarch64</code> directory or the <code>ultra/script</code> directory under the <code>aarch64</code> directory.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>The project specifies the path of the cross-compilation tool by obtaining the environment variable <code>LINARO_GCC_ROOT</code>, users can check whether the local environment variable is the target cross-compilation tool before use.
If you need to specify the path of the cross-compilation tool, you can set the environment variable <code>LINARO_GCC_ROOT</code>, or directly modify the script <code>build_xj3.sh</code> or <code>build_ultra.sh</code>, specify the variables <code>CC</code> and <code>CXX</code>.</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  export CC=${GCC_ROOT}/bin/aarch64-linux-gnu-gcc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export CXX=${GCC_ROOT}/bin/aarch64-linux-gnu-g++</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-usage">Example Usage<a href="#example-usage" class="hash-link" aria-label="Direct link to Example Usage" title="Direct link to Example Usage">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="basic_samples-example">basic_samples Example<a href="#basic_samples-example" class="hash-link" aria-label="Direct link to basic_samples Example" title="Direct link to basic_samples Example">​</a></h4>
<p>The model inference​ example script is mainly in the xj3/script and xj3/script_x86 directories. After compiling the program, the directory structure is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # RDK X3 usage script information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├─script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── 00_quick_start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── run_mobilenetV1.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── 01_api_tutorial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── model.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── resize_bgr.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── resize_y.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── roi_infer.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── sys_mem.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── tensor.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── 02_advanced_samples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── custom_arm_op_custom_identity.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── run_multi_model_batch.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── 03_misc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── run_lenet.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── run_resnet50_feature.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── aarch64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── model_example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── resize_bgr_example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── resize_y_example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── roi_infer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── run_custom_op</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── run_lenet_gray</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── run_mobileNetV1_224x224</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── run_multi_model_batch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── run_resnet_feature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── sys_mem_example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   └── tensor_example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │       ├── libdnn.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │       ├── libhbrt_bernoulli_aarch64.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │       └── libopencv_world.so.3.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # RDK Ultra Script Information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├─script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── 00_quick_start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── run_mobilenetV1.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── 01_api_tutorial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── model.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── roi_infer.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── sys_mem.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── tensor.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── 02_advanced_samples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   └── custom_arm_op_custom_identity.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── run_multi_input.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── run_multi_model_batch.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── run_nv12_batch.sh├── 03_misc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── run_lenet.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── run_resnet50_feature.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── aarch64                        # Compilation generates executable programs and dependency libraries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── model_example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── roi_infer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── run_custom_op</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── run_lenet_gray</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── run_mobileNetV1_224x224</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── run_multi_input</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── run_multi_model_batch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── run_nv12_batch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── run_resnet_feature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── sys_mem_example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   └── tensor_example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │       ├── libdnn.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │       ├── libhbrt_bayes_aarch64.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │       └── libopencv_world.so.3.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><ul>
<li>The <code>model</code> folder contains the path to the model, where the <code>runtime</code> folder is a symbolic link, and the link path is <code>../../../model_zoo/runtime/horizon_runtime_sample</code>, which can directly find the model path in the delivery package.</li>
<li>The board-side running environment needs to place the model in the <code>model</code> folder.</li>
</ul></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="quick_start">quick_start<a href="#quick_start" class="hash-link" aria-label="Direct link to quick_start" title="Direct link to quick_start">​</a></h4>
<p>The quick_start directory under 00_quick_start is an example of quick starting the model inference:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  00_quick_start/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └── run_mobilenetV1.sh</span><br></span></code></pre></div></div>
<ul>
<li><code>run_mobilenetV1.sh</code>: This script implements the example function of reading a single image using the MobilenetV1 model for inference.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="api_tutorial">api_tutorial<a href="#api_tutorial" class="hash-link" aria-label="Direct link to api_tutorial" title="Direct link to api_tutorial">​</a></h4>
<p>The <code>api_tutorial</code> directory contains examples demonstrating how to use embedded APIs. Its subscripts are as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">|-- model.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- resize_bgr.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- resize_y.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- roi_infer.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- sys_mem.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- tensor.sh</span><br></span></code></pre></div></div>
<ul>
<li><code>model.sh</code>: This script primarily handles reading model information. To use it, navigate to the <code>01_api_tutorial</code> directory and execute <code>sh model.sh</code>, like this:</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Caution</div><div class="admonitionContent_BuS1"><p>The following example logs are based on actual testing on the <strong>RDK X3</strong> development board. Results may differ when using the <strong>RDK Ultra</strong> board; please refer to your specific test results.</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/local/ruxin.song/xj3/script/01_api_tutorial# sh model.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">../aarch64/bin/model_example --model_file_list=../../model/runtime/mobilenetv1/mobilenetv1_nv12_hybrid_horizonrt.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0000 00:00:00.000000 24638 vlog_is_on.cc:197] RAW: Set VLOG level for &quot;*&quot; to 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[HBRT] set log level as 0. version = 3.12.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BPU_PLAT]BPU Platform Version(1.2.2)!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[HorizonRT] The model builder version = 1.3.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0108 04:19:27.245879 24638 model_example.cc:104] model count:1, model[0]: mobilenetv1_nv12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0108 04:19:27.246064 24638 model_example.cc:112] hbDNNGetModelHandle [mobilenetv1_nv12] success!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0108 04:19:27.246139 24638 model_example.cc:189] [mobilenetv1_nv12] Model Info:  input num: 1, input[0] validShape: ( 1, 3, 224, 224 ), alignedShape: ( 1, 4, 224, 224 ), tensorLayout: 2, tensorType: 1, output num: 1, output[0] validShape: ( 1, 1000, 1, 1 ), alignedShape: ( 1, 1000, 1, 1 ), tensorLayout: 2, tensorType: 13</span><br></span></code></pre></div></div>
<ul>
<li><code>resize_bgr.sh</code>: This script demonstrates how to use the <code>hbDNNResize</code> API. The example code in the script resizes a 1352x900 image, crops a portion with coordinates [5, 19, 340, 343], and saves the resized image (402x416) as <code>resize_bgr.jpg</code>. Run it by executing <code>sh resize_bgr.sh</code>:</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Caution</div><div class="admonitionContent_BuS1"><p>The following example logs are based on the <strong>RDK X3</strong> development board. Results may vary for the <strong>RDK Ultra</strong> board; please refer to your actual test results.</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/local/ruxin.song/xj3/script/01_api_tutorial# sh resize_bgr.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">../aarch64/bin/resize_bgr_example --image_file=../../data/det_images/kite.jpg --resize_height=416 --resize_width=402 --resized_image=./resize_bgr.jpg --crop_x1=5 --crop_x2=340 --crop_y1=19 --crop_y2=343</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0000 00:00:00.000000 24975 vlog_is_on.cc:197] RAW: Set VLOG level for &quot;*&quot; to 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0108 06:58:03.327212 24975 resize_bgr_example.cc:116] Original shape: 1352x900 ,dest shape:402x416 ,aligned shape:402x416</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[HBRT] set log level as 0. version = 3.12.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BPU_PLAT]BPU Platform Version(1.2.2)!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0108 06:58:03.328739 24975 resize_bgr_example.cc:139] resize success!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0108 06:58:03.335835 24975 resize_bgr_example.cc:143] wait task done finished!</span><br></span></code></pre></div></div>
<p>After execution, the <code>resize_bgr.jpg</code> image will be successfully saved in the current directory.</p>
<ul>
<li><code>resize_y.sh</code>: This script guides the usage of the <code>hbDNNResize</code> API. It resizes an image to a size of 416x402. Run it by executing <code>sh resize_y.sh</code>:</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Caution</div><div class="admonitionContent_BuS1"><p>Logs are from the <strong>RDK X3</strong> development board. Results may vary for the <strong>RDK Ultra</strong> board; please refer to your actual test results.</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/local/ruxin.song/xj3/script/01_api_tutorial# sh resize_y.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">../aarch64/bin/resize_y_example --image_file=../../data/det_images/kite.jpg --resize_height=416 --resize_width=402 --resized_image=./resize_y.jpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0000 00:00:00.000000 24992 vlog_is_on.cc:197] RAW: Set VLOG level for &quot;*&quot; to 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0108 06:59:36.887241 24992 resize_y_example.cc:101] Original shape: 1352x900 ,dest shape:402x416 ,aligned shape:402x416</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[HBRT] set log level as 0. version = 3.12.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BPU_PLAT]BPU Platform Version(1.2.2)!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0108 06:59:36.888770 24992 resize_y_example.cc:119] resize success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0108 06:59:36.891711 24992 resize_y_example.cc:123] wait resize success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0108 06:59:36.891798 24992 resize_y_example.cc:129] spent time: 0.003463</span><br></span></code></pre></div></div>
<p>After execution, the <code>resize_y.jpg</code> image will be successfully saved in the current directory.</p>
<ul>
<li>
<p><code>roi_infer.sh</code>: This script demonstrates how to use the <code>hbDNNRoiInfer</code> API. It resizes an image to the model input size, converts it to NV12 format, and performs inference (inferencing) with a given ROI (Region of Interest).</p>
</li>
<li>
<p><code>sys_mem.sh</code>: This script guides the usage of the <code>hbSysAllocMem</code>, <code>hbSysFlushMem</code>, and <code>hbSysFreeMem</code> APIs. Execute it directly within the <code>01_api_tutorial</code> directory by running <code>sh sys_mem.sh</code>.</p>
</li>
<li>
<p><code>tensor.sh</code>: This script demonstrates how to prepare model inputs and outputs. Execute it in the <code>01_api_tutorial</code> directory by running <code>sh tensor.sh</code>, as shown below:</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Caution</div><div class="admonitionContent_BuS1"><p>Logs are from the <strong>RDK X3</strong> development board. Results may vary for the <strong>RDK Ultra</strong> board; please refer to your actual test results.</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/local/ruxin.song/xj3/script/01_api_tutorial# sh tensor.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tensor data type:0, Tensor layout: 2, shape:1x1x721x1836, aligned shape:1x1x721x1840</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tensor data type:1, Tensor layout: 2, shape:1x3x773x329, aligned shape:1x3x773x336</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tensor data type:2, Tensor layout: 2, shape:1x3x108x1297, aligned shape:1x3x108x1312</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tensor data type:5, Tensor layout: 2, shape:1x3x858x477, aligned shape:1x3x858x477</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tensor data type:5, Tensor layout: 0, shape:1x920x102x3, aligned shape:1x920x102x3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tensor</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="advanced_samples">advanced_samples<a href="#advanced_samples" class="hash-link" aria-label="Direct link to advanced_samples" title="Direct link to advanced_samples">​</a></h4>
<p>The examples under the 02_advanced_samples directory are used to demonstrate the use of special features in custom operators. The directory includes the following scripts:</p>
<div class="language-shelll codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shelll codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ├── custom_arm_op_custom_identity.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └── run_multi_model_batch.sh</span><br></span></code></pre></div></div>
<ul>
<li><code>custom_arm_op_custom_identity.sh</code>: This script is mainly used for custom operator model inference. To use it, enter the <code>02_advanced_samples</code> directory and execute <code>sh custom_arm_op_custom_identity.sh</code> directly as shown below:</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>The following example logs are the results of actual tests using <strong>RDK X3</strong> development board. The log information may vary if using the <strong>RDK Ultra</strong> development board. Please refer to specific tests for accuracy!</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/userdata/ruxin.song/xj3/script/02_advanced_samples# sh custom_arm_op_custom_identity.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">../aarch64/bin/run_custom_op --model_file=../../model/runtime/custom_op/custom_op_featuremap.bin --input_file=../../data/custom_identity_data/input0.bin,../../data/custom_identity_data/input1.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0000 00:00:00.000000 30421 vlog_is_on.cc:197] RAW: Set VLOG level for &quot;*&quot; to 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0723 15:06:12.172068 30421 main.cpp:212] hbDNNRegisterLayerCreator success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0723 15:06:12.172335 30421 main.cpp:217] hbDNNRegisterLayerCreator success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BPU_PLAT]BPU Platform Version(1.3.1)!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[HBRT] set log level as 0. version = 3.15.3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[DNN] Runtime version = 1.15.2_(3.15.3 HBRT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[A][DNN][packed_model.cpp:217](1563865572232) [HorizonRT] The model builder version = 1.13.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0723 15:06:12.240696 30421 main.cpp:232] hbDNNGetModelNameList success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0723 15:06:12.240784 30421 main.cpp:239] hbDNNGetModelHandle success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0723 15:06:12.240819 30421 main.cpp:245] hbDNNGetInputCount success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file length: 602112</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file length: 602112</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0723 15:06:12.243616 30421 main.cpp:268] hbDNNGetOutputCount success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0723 15:06:12.244102 30421 main.cpp:297] hbDNNInfer success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0723 15:06:12.257903 30421 main.cpp:302] task done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0723 15:06:14.277941 30421 main.cpp:306] write output tensor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The output data of the first model is saved in the `output0.txt` file.</span><br></span></code></pre></div></div>
<ul>
<li><code>run_multi_model_batch.sh</code>: This script is mainly used for batch inference of multiple small models. To use it, enter the <code>02_advanced_samples</code> directory and execute <code>sh run_multi_model_batch.sh</code> directly as shown below:</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>The following example logs are the results of actual tests using <strong>RDK X3</strong> development board. The log information may vary if using the <strong>RDK Ultra</strong> development board. Please refer to specific tests for accuracy!</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@x3sdbx3-hynix2G-3200:/userdata/chaoliang/xj3/script/02_advanced_samples# sh run_multi_model_batch.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">../aarch64/bin/run_multi_model_batch --model_file=../../model/runtime/googlenet/googlenet_224x224_nv12.bin,../../model/runtime/mobilenetv2/mobilenetv2_224x224_nv12.bin --input_file=../../data/cls_images/zebra_cls.jpg,../../data/cls_images/zebra_cls.jpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I0000 00:00:00.000000 17060 vlog_is_on.cc:197] RAW: Set VLOG level for &quot;*&quot; to 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[HBRT] set log level as 0. version = 3.13.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```[BPU_PLAT]BPU Platform Version(1.1.1)!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [HorizonRT] The model builder version = 1.3.18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [HorizonRT] The model builder version = 1.3.18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0317 12:37:18.249785 17060 main.cpp:119] hbDNNInitializeFromFiles success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0317 12:37:18.250029 17060 main.cpp:127] hbDNNGetModelNameList success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0317 12:37:18.250071 17060 main.cpp:141] hbDNNGetModelHandle success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0317 12:37:18.283633 17060 main.cpp:155] read image to nv12 success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0317 12:37:18.284270 17060 main.cpp:172] prepare input tensor success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0317 12:37:18.284456 17060 main.cpp:184] prepare output tensor success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0317 12:37:18.285344 17060 main.cpp:218] infer success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0317 12:37:18.296559 17060 main.cpp:223] task done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0317 12:37:18.296701 17060 main.cpp:228] googlenet class result id: 340</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0317 12:37:18.296805 17060 main.cpp:232] mobilenetv2 class result id: 340</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0317 12:37:18.296887 17060 main.cpp:236] release task successI0108 07:23:35.510927 25139 run_lenet_gray.cc:217] TOP 4 result id: 2</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="misc">misc<a href="#misc" class="hash-link" aria-label="Direct link to misc" title="Direct link to misc">​</a></h4>
<p>The <code>03_misc</code> directory contains examples for using models with non-nv12 inputs. It consists of the following scripts:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ├── run_lenet.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └── run_resnet50_feature.sh</span><br></span></code></pre></div></div>
<ul>
<li><code>run_lenet.sh</code>: This script primarily implements the inference functionality of a LeNet model with Y data input. To use it, navigate to the <code>03_misc</code> directory and execute <code>sh run_lenet.sh</code>, as shown below:</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>The following example logs are from actual tests on an <strong>RDK X3</strong> development board. Logs may differ for an <strong>RDK Ultra</strong> board; refer to your specific test results!</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    /userdata/ruxin.song/xj3/script/03_misc# sh run_lenet.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ../aarch64/bin/run_lenet_gray --model_file=../../model/runtime/lenet_gray/lenet_gray_hybrid_horizonrt.bin --data_file=../../data/misc_data/7.bin --image_height=28 --image_width=28 --top_k=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0000 00:00:00.000000 25139 vlog_is_on.cc:197] RAW: Set VLOG level for &quot;*&quot; to 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [HBRT] set log level as 0. version = 3.12.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [BPU_PLAT]BPU Platform Version(1.2.2)!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [HorizonRT] The model builder version = 1.3.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:23:35.507514 25139 run_lenet_gray.cc:145] hbDNNInitializeFromFiles success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:23:35.507737 25139 run_lenet_gray.cc:153] hbDNNGetModelNameList success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:23:35.507771 25139 run_lenet_gray.cc:160] hbDNNGetModelHandle success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:23:35.508070 25139 run_lenet_gray.cc:176] prepare y tensor success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:23:35.508178 25139 run_lenet_gray.cc:189] prepare tensor success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:23:35.509909 25139 run_lenet_gray.cc:200] infer success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:23:35.510721 25139 run_lenet_gray.cc:205] task done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:23:35.510790 25139 run_lenet_gray.cc:210] task post process finished</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:23:35.510832 25139 run_lenet_gray.cc:217] TOP 0 result id: 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:23:35.510857 25139 run_lenet_gray.cc:217] TOP 1 result id: 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:23:35.510879 25139 run_lenet_gray.cc:217] TOP 2 result id: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:23:35.510903 25139 run_lenet_gray.cc:217] TOP 3 result id: 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:23:35.510927 25139 run_lenet_gray.cc:217] TOP 4 result id: 2</span><br></span></code></pre></div></div>
<ul>
<li><code>run_resnet50_feature.sh</code>: This script mainly demonstrates the inference functionality of a ResNet50 model with feature data input. The example code preprocesses the feature data by quantizing and padding it to meet the model&#x27;s requirements before feeding it into the model. To use it, navigate to the <code>03_misc</code> directory and run <code>sh run_resnet50_feature.sh</code>, as follows:</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>See above note for logs.</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    /userdata/ruxin.song/xj3/script/03_misc# sh run_resnet50_feature.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ../aarch64/bin/run_resnet_feature --model_file=../../model/runtime/resnet50_feature/resnet50_feature_hybrid_horizonrt.bin --data_file=../../data/misc_data/np_0 --top_k=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0000 00:00:00.000000 25155 vlog_is_on.cc:197] RAW: Set VLOG level for &quot;*&quot; to 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [HBRT] set log level as 0. version = 3.12.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [BPU_PLAT]BPU Platform Version(1.2.2)!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [HorizonRT] The model builder version = 1.3.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:25:41.300466 25155 run_resnet_feature.cc:136] hbDNNInitializeFromFiles success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:25:41.300708 25155 run_resnet_feature.cc:144] hbDNNGetModelNameList success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:25:41.300741 25155 run_resnet_feature.cc:151] hbDNNGetModelHandle success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:25:41.302760 25155 run_resnet_feature.cc:166] prepare feature tensor success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:25:41.302919 25155 run_resnet_feature.cc:176] prepare tensor success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:25:41.304678 25155 run_resnet_feature.cc:187] infer success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:25:41.373052 25155 run_resnet_feature.cc:192] task done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:25:41.373328 25155 run_resnet_feature.cc:197] task post process finished</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:25:41.373374 25155 run_resnet_feature.cc:204] TOP 0 result id: 74</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:25:41.373399 25155 run_resnet_feature.cc:204] TOP 1 result id: 815</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:25:41.373422 25155 run_resnet_feature.cc:204] TOP 2 result id: 73</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:25:41.373445 25155 run_resnet_feature.cc:204] TOP 3 result id: 78</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    I0108 07:25:41.373468 25155 run_resnet_feature.cc:204] TOP 4 result id: 72</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="auxiliary-tools-and-common-operations">Auxiliary tools and common operations<a href="#auxiliary-tools-and-common-operations" class="hash-link" aria-label="Direct link to Auxiliary tools and common operations" title="Direct link to Auxiliary tools and common operations">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="logs">Logs<a href="#logs" class="hash-link" aria-label="Direct link to Logs" title="Direct link to Logs">​</a></h4>
<p>This section mainly includes &quot;Example Logs&quot; and &quot;Model Inference DNN API Logs&quot;.
The example logs refer to the application logs in the delivery package example code, and all log content will be output.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-logs">Example Logs<a href="#example-logs" class="hash-link" aria-label="Direct link to Example Logs" title="Direct link to Example Logs">​</a></h4>
<p>The example logs mainly use vlog in glog. In the basic_samples of the example code, all log content will be output.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="model-inference-dnn-api-logs">Model Inference DNN API Logs<a href="#model-inference-dnn-api-logs" class="hash-link" aria-label="Direct link to Model Inference DNN API Logs" title="Direct link to Model Inference DNN API Logs">​</a></h4>
<p>For the configuration of model inference DNN API logs, please refer to the &quot;Configuration Information&quot; section in the &quot;Model Inference DNN API Usage Instructions&quot; document.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="public-model-performance-accuracy-evaluation-instructions">Public model performance accuracy evaluation instructions<a href="#public-model-performance-accuracy-evaluation-instructions" class="hash-link" aria-label="Direct link to Public model performance accuracy evaluation instructions" title="Direct link to Public model performance accuracy evaluation instructions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="public-model-performance-accuracy-indicatorsthe-table-below-provides-performance-and-accuracy-indicators-of-typical-deep-neural-network-models-on-the-x3-processor">Public model performance accuracy indicatorsThe table below provides performance and accuracy indicators of typical deep neural network models on the X3 processor.<a href="#public-model-performance-accuracy-indicatorsthe-table-below-provides-performance-and-accuracy-indicators-of-typical-deep-neural-network-models-on-the-x3-processor" class="hash-link" aria-label="Direct link to Public model performance accuracy indicatorsThe table below provides performance and accuracy indicators of typical deep neural network models on the X3 processor." title="Direct link to Public model performance accuracy indicatorsThe table below provides performance and accuracy indicators of typical deep neural network models on the X3 processor.">​</a></h3>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/04_toolchain_development/intermediate/model_accuracy.png" alt="model_accuracy" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note:</div><div class="admonitionContent_BuS1"><ol>
<li>
<p>The data in the table are measured results on the D-Robotics RDK X3 development board, and the test models are from the horizon_model_convert_sample model example package.</p>
</li>
<li>
<p>For the BPU/CPU hybrid heterogeneous models in the model example package, the frame consumption time is mainly composed of the input quantization CPU node, model BPU operators, model CPU operators, output dequantization CPU node, CPU post-processing, etc. The specific explanation is as follows:</p>
<p>a. Input quantization CPU node: completes the float32 to int8 input quantization operation, which is only included in models that use featuremap input. The quantization time is proportional to the input shape size.</p>
<p>b. Model CPU operators:</p>
<p>i. Any CPU operators not included in the detection model.</p>
<p>ii. The Softmax and Reshape at the tail of the classification model are CPU operators.</p>
<p>iii. The Argmax at the tail of the segmentation model DeepLabV3+ is a CPU operator.</p>
<p>c. Output dequantization CPU node: completes the int8 to float32 output dequantization operation. The quantization time is proportional to the output shape size.</p>
<p>d. D-Robotics currently supports manually removing the quantization/dequantization nodes of a model and integrating them into pre- and post-processing code by users to reduce the overhead of duplicate data traversal. Taking the EfficientDet model as an example, after removing the dequantization node and incorporating it into the post-processing, the inference performance is improved from 66 FPS to 100 FPS.</p>
<p>e. Currently, the post-processing of the D-Robotics sample models has not been specifically optimized for performance. You can use optimization methods such as approximate and efficient implementation according to your actual needs to accelerate the code at the code level.</p>
</li>
<li>
<p>In practical applications, the BPU and CPU can run concurrently to improve the overall inference speed.</p>
</li>
<li>
<p>If the measured performance is inconsistent with the test results in the table above, several factors may cause this situation:</p>
<p>a. The impact of DDR bandwidth, the development board can only run the ai_benchmark program.</p>
<p>b. The algorithm toolchain version does not exactly match the system image version. The ideal scenario is to use the algorithm toolchain and system image released together.</p>
<p>c. The impact of CPU frequency reduction, currently the development board enables automatic frequency reduction by default after reboot. To achieve the best performance, you need to execute the command to disable frequency reduction on the development board: <code>echo performance &gt; /sys/devices/system/cpu/cpufreq/policy0/scaling_governor</code>.</p>
</li>
</ol></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="evaluation-method-description">Evaluation Method Description<a href="#evaluation-method-description" class="hash-link" aria-label="Direct link to Evaluation Method Description" title="Direct link to Evaluation Method Description">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h4>
<p>This section describes the specific usage of the ai_benchmark example package for public model accuracy and performance evaluation. The example package provides source code, executable programs, and evaluation scripts. Developers can directly experience and develop embedded applications based on these examples on the D-Robotics development board, reducing the development threshold.</p>
<p>The example package provides performance and accuracy evaluation examples for common classification, detection, and segmentation models. Please refer to the following content for details.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tip</div><div class="admonitionContent_BuS1"><p>To obtain the ai_benchmark example package for public model accuracy and performance evaluation, please refer to the <a href="/rdk_doc/en/Advanced_development/toolchain_development/intermediate/environment_config">Deliverables Instructions</a>.
:::#### Example Code Package Structure</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ai_benchmark/code                     # Example source code folder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── build_ptq_xj3.sh                  # for RDK X3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── build_ptq_ultra.sh                # for RDK Ultra</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── CMakeLists.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── deps/deps_gcc9.3                  # Third-party dependency library, gcc9.3 is deps_gcc9.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── aarch64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   └── vdsp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── include                           # Source header files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── base</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── input</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   └── utils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └── src                               # Example source code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── input</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── simple_example.cc             # Example main program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── utils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ai_benchmark/xj3                      # Example package runtime environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └── ptq                               # PTQ solution model example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── data                          # Model accuracy evaluation dataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── mini_data                     # Model performance evaluation dataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── cifar10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── cityscapes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── coco</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── culane</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── flyingchairs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── imagenet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── kitti3d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── mot17</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── nuscenes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── nuscenes_lidar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── voc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── model                         # PTQ solution nv12 model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── runtime -&gt; ../../../../model_zoo/runtime/ai_benchmark/ptq   # Symbolic link to the model in the OE package, the board-side runtime environment needs to specify the model path on its own</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── script                        # Execution script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── aarch64                   # Compile executable files and dependent libraries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── classification            # Classification model example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── efficientnet_lite0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── efficientnet_lite1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── efficientnet_lite2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── efficientnet_lite3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── efficientnet_lite4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── googlenet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── mobilenetv1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── mobilenetv2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   └── resnet18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── config                    # Model inference configuration files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   └── data_name_list  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── detection                 # Detection model examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── centernet_resnet50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── efficientdetd0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── fcos_efficientnetb0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── preq_qat_fcos_efficientnetb0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── preq_qat_fcos_efficientnetb1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── preq_qat_fcos_efficientnetb2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── ssd_mobilenetv1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── yolov2_darknet19</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── yolov3_darknet53</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   └── yolov5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── segmentation              # Segmentation model examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── deeplabv3plus_efficientnetb0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── fastscnn_efficientnetb0   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   └── unet_mobilenet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── base_config.sh            # Base configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── tools                         # Accuracy evaluation tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ├── python_tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          └── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ai_benchmark/ultra                       # Example package runtime environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └── ptq                               # PTQ solution model examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── data                          # Model accuracy evaluation datasets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── mini_data                     # Model performance evaluation datasets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── cifar10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── cityscapes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── coco</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── culane</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── flyingchairs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── imagenet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── kitti3d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── mot17</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── nuscenes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── nuscenes_lidar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── voc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── model                         # PTQ solution nv12 model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   └── runtime -&gt; ../../../../model_zoo/runtime/ai_benchmark/ptq   # Symbolic link to the model in the OE package, the model path needs to be specified separately in the board-side runtime environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── script                        # Execution scripts│   ├── aarch64                   # Compiled executable files and dependency libraries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── classification            # Classification model examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── efficientnasnet_m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── efficientnasnet_s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── efficientnet_lite0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── efficientnet_lite1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── efficientnet_lite2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── efficientnet_lite3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── efficientnet_lite4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── googlenet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── mobilenetv1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── mobilenetv2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── resnet18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   └── vargconvnet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── config                    # Model inference configuration files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   └── model  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── detection                 # Detection model examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── centernet_resnet101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── preq_qat_fcos_efficientnetb0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── preq_qat_fcos_efficientnetb2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── preq_qat_fcos_efficientnetb3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── ssd_mobilenetv1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── yolov2_darknet19</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── yolov3_darknet53</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── yolov3_vargdarknet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   └── yolov5x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── segmentation              # Segmentation model examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── deeplabv3plus_efficientnetb0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── deeplabv3plus_efficientnetm1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   ├── deeplabv3plus_efficientnetm2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   │   └── fastscnn_efficientnetb0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── env.sh                    # Environment script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── tools                         # Accuracy assessment tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ├── python_tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            └── README.md</span><br></span></code></pre></div></div><ul>
<li><strong>code</strong>: This directory contains the source code for the model evaluation program, used to assess model performance and accuracy.</li>
<li><strong>xj3</strong>: Provides pre-compiled applications and various benchmark scripts to test the performance and accuracy of multiple models on the D-Robotics BPU, specifically for <strong>RDK X3</strong>.</li>
<li><strong>ultra</strong>: Offers pre-compiled applications and benchmark scripts to evaluate the performance and accuracy of various models on the D-Robotics BPU, designed for <strong>RDK Ultra</strong>.</li>
<li><strong>build_ptq_xj3.sh</strong>: One-click build script for the development board program (for <strong>RDK X3</strong>).</li>
<li><strong>build_ptq_ultra.sh</strong>: One-click build script for the development board program (for <strong>RDK Ultra</strong>).</li>
<li><strong>deps/deps_gcc9.3</strong>: Dependencies required for the example code, primarily including:</li>
</ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  gflags  glog  hobotlog nlohmann opencv  rapidjson</span><br></span></code></pre></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-models">Sample Models<a href="#sample-models" class="hash-link" aria-label="Direct link to Sample Models" title="Direct link to Sample Models">​</a></h4><p>We provide an open-source model library containing commonly used classification, detection, and segmentation models. The naming convention for these models is: <code>{model_name}_{backbone}_{input_size}_{input_type}</code>, which developers can directly utilize.</p><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tip</div><div class="admonitionContent_BuS1"><p>The bin models in the table below are all compiled and converted using the horizon_model_convert_sample model conversion example package. Please refer to the <a href="/rdk_doc/en/Advanced_development/toolchain_development/beginner.md#env_install">horizon_model_convert_sample</a> chapter for instructions on how to obtain them.</p></div></div></div></div>
<table><thead><tr><th>MODEL</th><th>MODEL NAME</th></tr></thead><tbody><tr><td>centernet_resnet101</td><td>centernet_resnet101_512x512_nv12.bin</td></tr><tr><td>deeplabv3plus_efficientnetb0</td><td>deeplabv3plus_efficientnetb0_1024x2048_nv12.bin</td></tr><tr><td>deeplabv3plus_efficientnetm1</td><td>deeplabv3plus_efficientnetm1_1024x2048_nv12.bin</td></tr><tr><td>efficientnasnet_m</td><td>efficientnasnet_m_300x300_nv12.bin</td></tr><tr><td>efficientnet_lite4</td><td>efficientnet_lite4_300x300_nv12.bin</td></tr><tr><td>fastscnn_efficientnetb0</td><td>fastscnn_efficientnetb0_1024x2048_nv12.bin</td></tr><tr><td>googlenet</td><td>googlenet_224x224_nv12.bin</td></tr><tr><td>mobilenetv1</td><td>mobilenetv1_224x224_nv12.bin</td></tr><tr><td>mobilenetv2</td><td>mobilenetv2_224x224_nv12.bin</td></tr><tr><td>preq_qat_fcos_efficientnetb0</td><td>fcos_efficientnetb0_512x512_nv12.bin</td></tr><tr><td>preq_qat_fcos_efficientnetb2</td><td>fcos_efficientnetb2_768x768_nv12.bin</td></tr><tr><td>resnet18</td><td>resnet18_224x224_nv12.bin</td></tr><tr><td>ssd_mobilenetv1</td><td>ssd_mobilenetv1_300x300_nv12.bin</td></tr><tr><td>vargconvnet</td><td>vargconvnet_224x224_nv12.bin</td></tr><tr><td>yolov3_darknet53</td><td>yolov3_darknet53_416x416_nv12.bin</td></tr><tr><td>yolov5s</td><td>yolov5s_672x672_nv12.bin</td></tr><tr><td>yolov5x</td><td>yolov5x_672x672_nv12.bin</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="public-datasets">Public Datasets<a href="#public-datasets" class="hash-link" aria-label="Direct link to Public Datasets" title="Direct link to Public Datasets">​</a></h4>
<p>The evaluation examples mainly use datasets such as VOC, COCO, ImageNet, Cityscapes, FlyingChairs, KITTI, Culane, Nuscenes, and Mot17.</p>
<p>Please download them in a Linux environment using the following links:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  VOC: http://host.robots.ox.ac.uk/pascal/VOC/ (using the VOC2012 version)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  COCO: https://cocodataset.org/#download</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ImageNet: https://www.image-net.org/download.php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Cityscapes: https://github.com/mcordts/cityscapesScripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FlyingChairs: https://lmb.informatik.uni-freiburg.de/resources/datasets/FlyingChairs.en.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  KITTI3D: https://www.cvlibs.net/datasets/kitti/eval_object.php?obj_benchmark=3d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CULane: https://xingangpan.github.io/projects/CULane.htmlnuScenes: https://www.nuscenes.org/nuscenes#download</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mot17: https://opendatalab.com/MOT17</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="environment-setup">Environment Setup<a href="#environment-setup" class="hash-link" aria-label="Direct link to Environment Setup" title="Direct link to Environment Setup">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="development-board-preparation-1">Development Board Preparation<a href="#development-board-preparation-1" class="hash-link" aria-label="Direct link to Development Board Preparation" title="Direct link to Development Board Preparation">​</a></h4>
<ol>
<li>
<p>After receiving the development board, please update the board image to the latest version. Refer to the chapter <a href="/rdk_doc/en/Advanced_development/01_Quick_start/install_os.md#flash_system"><strong>Installation</strong></a> for the upgrade method.</p>
</li>
<li>
<p>Make sure that the local development machine and the development board can be connected remotely.</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compiler-environment-preparation">Compiler Environment Preparation<a href="#compiler-environment-preparation" class="hash-link" aria-label="Direct link to Compiler Environment Preparation" title="Direct link to Compiler Environment Preparation">​</a></h4>
<p>The compilation requires the installation of the cross-compilation tool <code>gcc-ubuntu-9.3.0-2020.03-x86_64-aarch64-linux-gnu</code> in the current environment. Please use the Docker image provided by D-Robotics for development machine, and directly compile and use it. Read the chapter <a href="/rdk_doc/en/Advanced_development/toolchain_development/intermediate/environment_config"><strong>Environment Installation</strong></a> for obtaining and using the development machine Docker environment;
Please use the script <code>build_ptq_xj3.sh</code> or <code>build_ptq_ultra.sh</code> under the code directory to compile the executable program in the development board environment. The executable program and its corresponding dependencies will be automatically copied to the directory <code>xj3/ptq/script</code> under the <code>aarch64</code> directory or the directory <code>ultra/ptq/script</code> under the <code>aarch64</code> directory.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>Please note that the position of the cross-compilation toolchain specified in the script <code>build_ptq_xj3.sh</code> and <code>build_ptq_ultra.sh</code> is in the directory <code>/opt</code>. If the user installs it in another location, the script can be manually modified.</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  export CC=/opt/gcc-ubuntu-9.3.0-2020.03-x86_64-aarch64-linux-gnu/bin/aarch64-linux-gnu-gcc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export CXX=/opt/gcc-ubuntu-9.3.0-2020.03-x86_64-aarch64-linux-gnu/bin/aarch64-linux-gnu-g++</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="evaluation-example-usage-instructions">Evaluation Example Usage Instructions<a href="#evaluation-example-usage-instructions" class="hash-link" aria-label="Direct link to Evaluation Example Usage Instructions" title="Direct link to Evaluation Example Usage Instructions">​</a></h4>
<p>The evaluation example scripts are mainly located in the <code>script</code> and <code>tools</code> directories. The <code>script</code> directory contains evaluation scripts that run on the development board, including common classification, detection, and segmentation models. Each model has three scripts, which represent:</p>
<ul>
<li>fps.sh: Uses multi-threading scheduling to calculate frames per second (FPS). Users can freely set the number of threads according to their requirements.</li>
<li>latency.sh: Calculates the latency of a single frame (one thread, one frame).</li>
<li>accuracy.sh: Used for accuracy evaluation.</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>The following examples are based on the testing results of the <strong>RDK X3</strong> development board. If using the <strong>RDK Ultra</strong> development board, there may be differences in information. Please refer to the specific testing results.</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  script:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├  ── aarch64             # Compiled executable files and dependent libraries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   └── lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── base_config.sh      # Basic configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── config              # image_name configuration files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── data_name_list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   ├── coco_detlist.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   |   ├── imagenet.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   |   └── voc_detlist.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── classification      # Classification model evaluation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── efficientnet_lite0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── accuracy.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── fps.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── latency.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── workflow_accuracy.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── workflow_fps.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   └── workflow_latency.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── mobilenetv1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── .....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   └── resnet18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── detection           # Detection model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   ├── centernet_resnet50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── accuracy.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── fps.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── latency.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── workflow_accuracy.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   ├── workflow_fps.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   │   └── workflow_latency.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── yolov2_darknet19</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── yolov3_darknet53</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   ├── ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   └── efficientdetd0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └── segmentation       # Segmentation model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── deeplabv3plus_efficientnetb0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── accuracy.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── fps.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── latency.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── workflow_accuracy.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   ├── workflow_fps.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │   └── workflow_latency.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── fastscnn_efficientnetb0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── unet_mobilenet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>The scripts required for accuracy evaluation are in the tools directory. It mainly includes the accuracy calculation scripts under <code>python_tools</code>.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  tools:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  python_tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── accuracy_tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── cityscapes_metric.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── cls_eval.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── coco_metric.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── coco_det_eval.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── config.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── parsing_eval.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── voc_det_eval.py### voc_metric.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Caution</div><div class="admonitionContent_BuS1"><p>Before evaluation, execute the following commands to copy the <code>ptq</code> directory to the development board, and then copy the <code>model_zoo/runtime</code> to the <code>ptq/model</code> directory.</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Caution</div><div class="admonitionContent_BuS1"><p>The following examples are the test results using the <strong>RDK X3</strong> development board. If the <strong>RDK Ultra</strong> development board is used, the information may vary. Please refer to the specific test results!</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  scp -r ai_toolchain_package/Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X/ai_benchmark/xj3/ptq root@192.168.1.10:/userdata/ptq/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scp -r model_zoo/runtime root@192.168.1.10:/userdata/ptq/model/</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="performance-evaluation">Performance Evaluation<a href="#performance-evaluation" class="hash-link" aria-label="Direct link to Performance Evaluation" title="Direct link to Performance Evaluation">​</a></h4>
<p>Performance evaluation includes latency and fps.</p>
<ul>
<li>Usage of the evaluation script</li>
</ul>
<p>Enter the directory of the model to be evaluated and execute <code>sh latency.sh</code> to test the latency of a single frame. As shown in the following figure:</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Caution</div><div class="admonitionContent_BuS1"><p>The following examples are the test results using the <strong>RDK X3</strong> development board. If the <strong>RDK Ultra</strong> development board is used, the information may vary. Please refer to the specific test results!</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  I0419 02:35:07.041095 39124 output_plugin.cc:80]  Infer latency:  [avg:  13.124ms,  max:  13.946ms,  min:  13.048ms], Post process latency: [avg:  3.584ms,  max:  3.650ms,  min:  3.498ms].</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><ul>
<li><code>infer</code> represents the inference time of the model.</li>
<li><code>Post process</code> represents the post-processing time.</li>
</ul></div></div>
<p>Enter the directory of the model to be evaluated and execute <code>sh fps.sh</code> to test the frame rate. As shown in the following figure:</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Caution</div><div class="admonitionContent_BuS1"><p>The following examples are the test results using the <strong>RDK X3</strong> development board. If the <strong>RDK Ultra</strong> development board is used, the information may vary. Please refer to the specific test results!</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  I0419 02:35:00.044417 39094 output_plugin.cc:109]  Throughput: 176.39fps      # Model frame rate</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Remarks</div><div class="admonitionContent_BuS1"><p>This function uses multi-threading and concurrency to achieve optimal performance on BPU. Due to the nature of multi-threading and data sampling, the frame rate value may be lower during the startup phase, and will gradually increase and stabilize over time. The fluctuation range of frame rate is controlled within 0.5%.</p></div></div>
<ul>
<li>Command line arguments</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>The following example is based on the test results using <strong>RDK X3</strong> development board. If using <strong>RDK Ultra</strong> development board, the information may vary. Please refer to specific test results for accuracy.</p></div></div>
<p>Content of <code>fps.sh</code> script:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  #!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source ../../base_config.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export SHOW_FPS_LOG=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export STAT_CYCLE=10                             # Set environment variable, FPS statistics cycle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ${app} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --config_file=workflow_fps.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --log_level=1</span><br></span></code></pre></div></div>
<p>Content of <code>latency.sh</code> script:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  #!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source ../../base_config.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export SHOW_LATENCY_LOG=1                            # Set environment variable, print LATENCY level log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export STAT_CYCLE=5                                  # Set environment variable, LATENCY statistics cycle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ${app} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --config_file=workflow_latency.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --log_level=1</span><br></span></code></pre></div></div>
<ul>
<li>Configuration file explanation</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Remarks</div><div class="admonitionContent_BuS1"><p>Note: When the max_cache parameter is in effect, the images will be preprocessed and read into memory. To ensure the stable operation of your program, please do not set a value that is too large. We recommend setting the value to no more than 30.
:::Taking the fcos_efficientnetb0 model as an example, the contents of the workflow_fps.json configuration file are as follows:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;input_config&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;input_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;image&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                                    # Input data format</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> supports image or bin file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;height&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">512</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                                            # Input data height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;width&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">512</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                                             # Input data width</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;data_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                                           # Input data type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> HB_DNN_IMG_TYPE_NV12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;image_list_file&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;../../../mini_data/coco/coco.lst&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    # Path to the preprocessed dataset lst file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;need_pre_load&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                                    # Whether to use preloading to read the dataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;limit&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;need_loop&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                                        # Whether to read the data for evaluation in a loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;max_cache&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;output_config&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;output_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;image&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                                   # Visualized output data type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;image_list_enable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;in_order&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain">                                         # Whether to output in order</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;workflow&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;method_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;InferMethod&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                           # Infer inference mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;unique_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;InferMethod&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;method_config&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;core&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                                            # Inference core id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;model_file&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;../../../model/runtime/fcos_efficientnetb0/fcos_efficientnetb0_512x512_nv12.bin&quot;</span><span class="token plain"> # Model file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;thread_count&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                                      # Post-processing thread count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;method_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;PTQFcosPostProcessMethod&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">              # Post-processing method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;unique_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;PTQFcosPostProcessMethod&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;method_config&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">                                      # Post-processing parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;strides&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">128</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;class_num&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;score_threshold&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;topk&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;det_name_list&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;../../config/data_name_list/coco_detlist.list&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div><p>workflow_latency.json as follows:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token property" style="color:#36acaa">&quot;input_config&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;input_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;image&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;height&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">512</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;width&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">512</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;data_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;image_list_file&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;../../../mini_data/coco/coco.lst&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;need_pre_load&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;limit&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;need_loop&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;max_cache&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token property" style="color:#36acaa">&quot;output_config&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;output_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;image&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;image_list_enable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token property" style="color:#36acaa">&quot;workflow&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token property" style="color:#36acaa">&quot;method_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;InferMethod&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token property" style="color:#36acaa">&quot;unique_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;InferMethod&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token property" style="color:#36acaa">&quot;method_config&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;core&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;model_file&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;../../../model/runtime/fcos_efficientnetb0/fcos_efficientnetb0_512x512_nv12.bin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token property" style="color:#36acaa">&quot;thread_count&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token property" style="color:#36acaa">&quot;method_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;PTQFcosPostProcessMethod&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token property" style="color:#36acaa">&quot;unique_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;PTQFcosPostProcessMethod&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token property" style="color:#36acaa">&quot;method_config&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;strides&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token number" style="color:#36acaa">128</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;class_num&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;score_threshold&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;topk&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;det_name_list&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;../../config/data_name_list/coco_detlist.list&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="accuracy-evaluation">Accuracy Evaluation<a href="#accuracy-evaluation" class="hash-link" aria-label="Direct link to Accuracy Evaluation" title="Direct link to Accuracy Evaluation">​</a></h4><p>The accuracy evaluation of the model consists of four steps:</p><ol>
<li>Data preprocessing.</li>
<li>Data loading.</li>
<li>Model inference.</li>
<li>Accuracy calculation.</li>
</ol><ul>
<li>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="data_preprocess">Data Preprocessing<a href="#data_preprocess" class="hash-link" aria-label="Direct link to Data Preprocessing" title="Direct link to Data Preprocessing">​</a></h4>
</li>
</ul><p>For PTQ models: Data preprocessing needs to be performed on an x86 development machine using the &quot;hb_eval_preprocess&quot; tool to preprocess the dataset.
Data preprocessing refers to specific operations performed on image data before feeding it into the model, such as image resizing, cropping, and padding.
This tool is integrated into the environment of the model conversion and compilation on the development machine. After the original dataset is preprocessed using this tool, it will generate a corresponding preprocessing binary file (.bin file) for the model.
Running &quot;hb_eval_preprocess --help&quot; directly will display the usage rules of this tool.</p><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><ol>
<li>To learn about the command-line parameters of the &quot;hb_eval_preprocess&quot; tool, you can enter &quot;hb_eval_preprocess -h&quot; or refer to the section <a href="/rdk_doc/en/Advanced_development/toolchain_development/intermediate/ptq_process"><strong>hb_eval_preprocess Tool</strong></a> for an explanation of PTQ quantization principles and steps.</li>
</ol></div></div></div></div>
<p>Next, we will provide a detailed introduction to the dataset corresponding to each model in the example package and the preprocessing operations for the corresponding dataset:</p>
<ul>
<li>&quot;VOC dataset&quot;: This dataset is mainly used for evaluating the ssd_mobilenetv1 model.
Its directory structure is as follows, and the example mainly uses the val.txt file under &quot;Main&quot;, source images under &quot;JPEGImages&quot;, and annotation data under &quot;Annotations&quot;:</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └── VOCdevkit                  # Root directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── VOC2012                # Datasets of different years, only 2012 is downloaded here, there are other years like 2007 as well</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ├── Annotations        # Stores XML files, each corresponding to a image in JPEGImages, explains the content of the image, etc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ├── ImageSets          # This directory stores text files, and each line in the text file contains the name of an image, followed by ±1 indicating positive or negative samples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          │   ├── Action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          │   ├── Layout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          │   ├── Main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          │   └── Segmentation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ├── JPEGImages         # Stores source images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ├── SegmentationClass  # Stores images related to semantic segmentation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          └── SegmentationObject # Stores images related to instance segmentation</span><br></span></code></pre></div></div>
<p>Perform data preprocessing on the dataset:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  hb_eval_preprocess -m ssd_mobilenetv1 -i VOCdevkit/VOC2012/JPEGImages -v VOCdevkit/VOC2012/ImageSets/Main/val.txt -o ./pre_ssd_mobilenetv1</span><br></span></code></pre></div></div>
<ul>
<li>&quot;COCO dataset&quot;: This dataset is mainly used for evaluating detection models such as yolov2_darknet19, yolov3_darknet53, yolov5s, efficientdetd0, fcos_efficientnetb0, and centernet_resnet50, etc.The directory structure is as follows, and the example mainly uses the &quot;instances_val2017.json&quot; annotation file in the &quot;annotations&quot; folder and the images in the &quot;images&quot; folder:</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── annotations    # stores annotation data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └── images         # stores source images</span><br></span></code></pre></div></div>
<p>Preprocess the dataset:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  hb_eval_preprocess -m model_name -i coco/coco_val2017/images -o ./pre_model_name</span><br></span></code></pre></div></div>
<ul>
<li>&quot;ImageNet dataset&quot;: This dataset is mainly used for the evaluation of classification models such as EfficientNet_lite0, EfficientNet_Lite1, EfficientNet_Lite2, EfficientNet_Lite3, EfficientNet_Lite4, MobileNet, GoogleNet, ResNet, etc. In the example, the &quot;val.txt&quot; annotation file and the source images in the &quot;val&quot; directory are mainly used.</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── val.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └── val</span><br></span></code></pre></div></div>
<p>Preprocess the dataset:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  hb_eval_preprocess -m model_name -i imagenet/val -o ./pre_model_name</span><br></span></code></pre></div></div>
<ul>
<li>&quot;Cityscapes dataset&quot;: This dataset is used for the evaluation of segmentation models such as deeplabv3plus_efficientnetb0, deeplabv3plus_efficientnetm1, deeplabv3plus_efficientnetm2, fastscnn_efficientnetb0, etc. In the example, the annotation files in &quot;./gtFine/val&quot; and the source images in &quot;./leftImg8bit/val&quot; are mainly used.</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ├── gtFine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   └── val</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │       ├── frankfurt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │       ├── lindau</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │       └── munster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └── leftImg8bit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── val</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ├── frankfurt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ├── lindau</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          └── munster</span><br></span></code></pre></div></div>
<p>Preprocess the dataset:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  hb_eval_preprocess -m unet_mobilenet -i cityscapes/leftImg8bit/val -o ./pre_unet_mobilenet</span><br></span></code></pre></div></div>
<p>The workflow for running the accuracy calculation script in the example is:1. According to the value of the &quot;image_list_file&quot; parameter in &quot;workflow_accurary.json&quot;, search for the corresponding &quot;lst&quot; file of the dataset.</p>
<ol start="2">
<li>Load each pre-processing file according to the preprocessing file path information stored in the &quot;lst&quot; file, and then perform inference.</li>
</ol>
<p>Therefore, after generating the pre-processing file, it is necessary to generate the corresponding lst file and write the path of each pre-processing file into the lst file, which is related to the storage location of the dataset on the development board.
Here we recommend placing it in the same directory as the &quot;script&quot; folder, as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # For RDK X3, use the following format:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |-- ptq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |-- data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |-- cityscapes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   -- xxxx.bin             # Pre-processed binary file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   -- ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   -- cityscapes.lst       # lst file: record the path of each pre-processing file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |-- coco</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   -- xxxx.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   -- ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   -- coco.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |-- imagenet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   -- xxxx.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   -- ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   -- imagenet.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   `-- voc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   -- xxxx.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   -- ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |       `-- voc.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |-- model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |-- ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |-- script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |-- ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # For RDK Ultra, use the following format:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |-- ptq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |-- data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |-- cityscapes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_deeplabv3plus_efficientnetb0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |   |-- xxxx.bin                            # Pre-processed binary file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |   |-- ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_deeplabv3plus_efficientnetb0.lst    # lst file: record the path of each pre-processing file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_deeplabv3plus_efficientnetm1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_deeplabv3plus_efficientnetm1.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_deeplabv3plus_efficientnetm2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_deeplabv3plus_efficientnetm2.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_fastscnn_efficientnetb0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_fastscnn_efficientnetb0.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |-- coco</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_centernet_resnet101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |   |-- xxxx.bin|   |   |   |   |-- ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_centernet_resnet101.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_yolov3_darknet53</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_yolov3_darknet53.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_yolov3_vargdarknet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_yolov3_vargdarknet.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_yolov5x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_yolov5x.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_preq_qat_fcos_efficientnetb0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_preq_qat_fcos_efficientnetb0.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_preq_qat_fcos_efficientnetb2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_preq_qat_fcos_efficientnetb2.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_preq_qat_fcos_efficientnetb3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_preq_qat_fcos_efficientnetb3.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |-- imagenet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_efficientnasnet_m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |   |-- xxxx.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |   |-- ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_efficientnasnet_m.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_efficientnasnet_s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_efficientnasnet_s.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_efficientnet_lite4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_efficientnet_lite4.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_googlenet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_googlenet.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_mobilenetv1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_mobilenetv1.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_mobilenetv2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_mobilenetv2.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_resnet18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_resnet18.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_vargconvnet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_vargconvnet.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |-- voc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_ssd_mobilenetv1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |   |-- xxxx.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |   |-- ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |   |   |-- pre_ssd_mobilenetv1.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |-- model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |-- ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |-- script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |   |-- ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>To generate the corresponding lst files, refer to the following method:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # For RDK X3, please use the following command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  find ../../../data/coco/fcos -name &quot;*bin*&quot; &gt; ../../../data/coco/coco.lst# RDK Ultra Please use the following command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  find ../../../data/coco/pre_centernet_resnet101 -name &quot;*bin*&quot; &gt; ../../../data/coco/pre_centernet_resnet101.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>The generated <code>lst</code> file stores a relative path: <code>../../../data/</code> or <code>../../../data/coco/pre_centernet_resnet101/</code>, which can match the default configuration path of <code>workflow_accuracy.json</code>.
If you need to change the storage location of the pre-processing dataset, make sure that the corresponding <code>lst</code> file can be read by <code>workflow_accuracy.json</code>. Secondly, ensure that the program can read the corresponding pre-processing file based on the path information in <code>lst</code>.</p>
<ul>
<li>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="data-mounting">Data Mounting<a href="#data-mounting" class="hash-link" aria-label="Direct link to Data Mounting" title="Direct link to Data Mounting">​</a></h4>
</li>
</ul>
<p>Since the dataset is relatively large and not suitable to be placed directly on the development board, it can be mounted via nfs for the board to read.</p>
<p>Host PC (requires root permission):</p>
<ol>
<li>Edit /etc/exports and add a line:
<code>/nfs *(insecure,rw,sync,all_squash,anonuid=1000,anongid=1000,no_subtree_check)</code>.
<code>/nfs</code> represents the mount path on the local machine, which can be replaced with a user-specified directory.</li>
<li>Execute the command <code>exportfs -a -r</code> to make /etc/exports take effect.</li>
</ol>
<p>Board Side:</p>
<ol>
<li>Create the directory to be mounted: <code>mkdir -p /mnt</code>.</li>
<li><code>mount -t nfs {PC IP}:/nfs /mnt -o nolock</code>.</li>
</ol>
<p>The /nfs folder on the PC side is mounted to the /mnt folder on the board side. In this way, mount the folder containing the pre-processing data to the board side, and create a soft link from the /data directory to the /ptq directory on the board side, which is at the same level as the /script directory.</p>
<ul>
<li>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="model-inference">Model Inference<a href="#model-inference" class="hash-link" aria-label="Direct link to Model Inference" title="Direct link to Model Inference">​</a></h4>
</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>The following example is the actual test result using <strong>RDK X3</strong> development board. If using <strong>RDK Ultra</strong> development board, there may be differences in the information. Please refer to the specific test for accuracy!</p></div></div>
<p>After mounting the data, please log in to the development board. For the login method, please read the <a href="/rdk_doc/en/Quick_start/remote_login"><strong>development board login</strong></a> section. After successful login, execute the <code>accuracy.sh</code> script in the <code>fcos_efficientnetb0/</code> directory as shown below:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  /userdata/ptq/script/detection/fcos# sh accuracy.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ../../aarch64/bin/example --config_file=workflow_accuracy.json --log_level=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  I0419 03:14:51.158655 39555 infer_method.cc:107] Predict DoProcess finished.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  I0419 03:14:51.187361 39556 ptq_fcos_post_process_method.cc:123] PTQFcosPostProcessMethod DoProcess finished, predict result: [{&quot;bbox&quot;:[-1.518860,71.691170,574.934631,638.294922],&quot;prob&quot;:0.750647,&quot;label&quot;:21,&quot;class_name&quot;:&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  I0118 14:02:43.636204 24782 ptq_fcos_post_process_method.cc:123] PTQFcosPostProcessMethod DoProcess finished, predict result: [{&quot;bbox&quot;:[3.432283,164.936249,157.480042,264.276825],&quot;prob&quot;:0.544454,&quot;label&quot;:62,&quot;class_name&quot;:&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span></code></pre></div></div>
<p>The program on the board side will generate an <code>eval.log</code> file in the current directory, which is the result file of the prediction.</p>
<ul>
<li>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="accuracy-calculation">Accuracy Calculation<a href="#accuracy-calculation" class="hash-link" aria-label="Direct link to Accuracy Calculation" title="Direct link to Accuracy Calculation">​</a></h4>
</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Caution</div><div class="admonitionContent_BuS1"><p>Please perform the accuracy calculation in the environment of the &quot;development machine&quot; model conversion.</p></div></div>
<p>The script for accuracy calculation is located in the &quot;python_tools&quot; directory. Among them, in &quot;accuracy_tools&quot;:
cls_eval.py is used to calculate the accuracy of classification models;
coco_det_eval.py is used to calculate the accuracy of detection models evaluated using the COCO dataset;
parsing_eval.py is used to calculate the accuracy of segmentation models evaluated using the Cityscapes dataset;
voc_det_eval.py is used to calculate the accuracy of detection models evaluated using the VOC dataset.</p>
<ul>
<li>Classification Model</li>
</ul>
<p>The calculation method for classification models using the CIFAR-10 dataset and the ImageNet dataset is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  #!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  python3 cls_eval.py --log_file=eval.log --gt_file=val.txt</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><ul>
<li>&quot;log_file&quot;: The prediction result file of the classification model.</li>
<li>&quot;gt_file&quot;: The annotation file of the CIFAR-10 and ImageNet datasets.</li>
</ul></div></div>
<ul>
<li>Detection Model</li>
</ul>
<p>The calculation method for detection models using the COCO dataset is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  #!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  python3 coco_det_eval.py --eval_result_path=eval.log --annotation_path=instances_val2017.json</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><ul>
<li>&quot;eval_result_path&quot;: The prediction result file of the detection model.</li>
<li>&quot;annotation_path&quot;: The annotation file of the COCO dataset.</li>
</ul></div></div>
<p>The calculation method for detection models using the VOC dataset is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  #!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  python3 voc_det_eval.py --eval_result_path=eval.log --annotation_path=../Annotations --val_txt_path=../val.txt</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><ul>
<li>&quot;eval_result_path&quot;: The prediction result file of the detection model.- <code>annotation_path</code>: The annotation file of the VOC dataset.</li>
<li><code>val_txt_path</code>: The val.txt file in the ImageSets/Main folder of the VOC dataset.</li>
</ul></div></div>
<ul>
<li>Segmentation Model</li>
</ul>
<p>The accuracy calculation method for the segmentation model using the Cityscapes dataset is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  #!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  python3 parsing_eval.py --width=output_width --height=output_height --log_file=eval.log --gt_path=cityscapes/gtFine/val</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Remark</div><div class="admonitionContent_BuS1"><ul>
<li><code>width</code>: The output width of the segmentation model.</li>
<li><code>height</code>: The output height of the segmentation model.</li>
<li><code>log_file</code>: The prediction result file of the segmentation model.</li>
<li><code>gt_path</code>: The annotation file of the Cityscapes dataset.</li>
</ul></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="model-integration">Model Integration<a href="#model-integration" class="hash-link" aria-label="Direct link to Model Integration" title="Direct link to Model Integration">​</a></h4>
<p>Model post-processing integration mainly consists of 2 steps, taking centernet_resnet50 model integration as an example:</p>
<ol>
<li>Add the post-processing file <code>ptq_centernet_post_process_method.cc</code> and the header file <code>ptq_centernet_post_process_method.h</code>.</li>
<li>Add the model execution script and configuration file.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="adding-post-processing-files">Adding Post-processing Files<a href="#adding-post-processing-files" class="hash-link" aria-label="Direct link to Adding Post-processing Files" title="Direct link to Adding Post-processing Files">​</a></h4>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>The following example is based on the RDK X3 development board. If you are using the RDK Ultra development board, the information may vary. Please refer to the specific instructions.</p></div></div>
<p>The post-processing code file can be directly reused from any post-processing file in the src/method directory. The main modifications are the <code>InitFromJsonString</code> function and the <code>PostProcess</code> function.</p>
<p>The <code>InitFromJsonString</code> function is mainly used to read the post-processing related parameter configurations from the workflow.json file. Users can customize the input parameters accordingly.
The <code>PostProcess</code> function completes the logic of post-processing.</p>
<p>The .cc file should be placed in the <code>ai_benchmark/code/src/method/</code> path,
The .h header file should be placed in the <code>ai_benchmark/code/include/method/</code> path:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  |--ai_benchmark</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |--code                                                 # Example source code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |--include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |  |--method                                         # Add header files in this folder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |  |  |--ptq_centernet_post_process_method.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |  |  |--......</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|--ptq_yolo5_post_process_method.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |--src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |--method                                         # Add post-processing .cc files in this folder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |--ptq_centernet_post_process_method.cc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |  |--......</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |  |--ptq_yolo5_post_process_method.cc</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-model-running-scripts-and-configuration-files">Add model running scripts and configuration files<a href="#add-model-running-scripts-and-configuration-files" class="hash-link" aria-label="Direct link to Add model running scripts and configuration files" title="Direct link to Add model running scripts and configuration files">​</a></h4>
<p>The directory structure of the scripts is as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">|--ai_benchmark</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |--xj3/ptq/script                                      # Example script folder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |--detection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |--centernet_resnet50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |  |--accuracy.sh                                # Accuracy testing script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |  |--fps.sh                                     # Performance testing script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |  |--latency.sh                                 # Single frame latency example script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |  |--workflow_accuracy.json                     # Accuracy configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |  |--workflow_fps.json                          # Performance configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |  |  |  |--workflow_latency.json                      # Single frame latency configuration file</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="auxiliary-tools-and-common-operations-1">Auxiliary tools and common operations<a href="#auxiliary-tools-and-common-operations-1" class="hash-link" aria-label="Direct link to Auxiliary tools and common operations" title="Direct link to Auxiliary tools and common operations">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="instructions-for-using-the-logging-system">Instructions for using the logging system<a href="#instructions-for-using-the-logging-system" class="hash-link" aria-label="Direct link to Instructions for using the logging system" title="Direct link to Instructions for using the logging system">​</a></h4>
<p>The logging system mainly includes &quot;sample logs&quot; and &quot;model inference API DNN logs&quot;.
The sample logs refer to the application logs in the delivery package.
Users can obtain different logs based on their needs.</p>
<ul>
<li>Sample logs</li>
</ul>
<ol>
<li>Log levels. Sample logs mainly use vlog from glog, and there are four custom levels:</li>
</ol>
<ul>
<li>&quot;0&quot; (SYSTEM), which is mainly used to output error messages;</li>
<li>&quot;1&quot; (REPORT), which is mainly used in the sample code to output performance data;</li>
<li>&quot;2&quot; (DETAIL), which is mainly used in the sample code to output system status information;</li>
<li>&quot;3&quot; (DEBUG), which is mainly used in the sample code to output debug information.
Logging level setting rules: Suppose the level is set to &quot;P&quot;, if there is a level &quot;Q&quot; lower than &quot;P&quot;,
it can be enabled, or else it will be suppressed; DEBUG&gt;DETAIL&gt;REPORT&gt;SYSTEM by default.</li>
</ul>
<ol start="2">
<li>Log level setting. Set the log level through the &quot;log_level&quot; parameter. When running the sample, specify the &quot;log_level&quot; parameter to set the level.
For example, specifying &quot;log_level=0&quot; outputs SYSTEM logs; if specifying &quot;log_level=3&quot;,
it outputs DEBUG, DETAIL, REPORT, and SYSTEM logs.</li>
</ol>
<ul>
<li>Model inference API DNN logs</li>
</ul>
<p>For the configuration of model inference DNN API logs, please refer to the &quot;Configuration Information&quot; section in the <a href="/rdk_doc/en/04_Algorithm_Application/02_cdev_dnn_api/cdev_dnn_api.md">Model Inference DNN API Usage Guide</a>.#### Operator Time Explanation</p>
<p>The statistics on the performance of the model operators (OP) are achieved by setting the environment variable <code>HB_DNN_PROFILER_LOG_PATH</code>. This section introduces the performance analysis of the model&#x27;s inference, which helps developers to understand the real inference performance of the model.
The type and value of this variable are described as follows:</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p><code>export HB_DNN_PROFILER_LOG_PATH=${path}</code>: represents the output path where the dumped OP nodes are located. After the program runs normally and exits, a profiler.log file will be generated.</p></div></div>
<ul>
<li>Example Explanation</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>The following example uses <strong>RDK X3</strong> development board as an example. If using <strong>RDK Ultra</strong> development board, there may be differences in the information. Please refer to the specific board used!</p></div></div>
<p>The following code block takes the mobilenetv1 model as an example, starts running the model with a single thread, and sets <code>export HB_DNN_PROFILER_LOG_PATH=./</code>. The statistical output information is as follows:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;perf_result&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;FPS&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">677.6192525182025</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;average_latency&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11.506142616271973</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;running_condition&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;core_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;frame_count&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;model_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mobilenetv1_224x224_nv12&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;run_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">295.151</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;thread_num&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;chip_latency&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;BPU_inference_time_cost&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;avg_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11.09122</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;max_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11.54</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;min_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3.439</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;CPU_inference_time_cost&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;avg_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.18836999999999998</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;max_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.4630000000000001</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;min_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.127</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;model_latency&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;BPU_MOBILENET_subgraph_0&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;avg_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11.09122</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11.54</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;min_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3.439</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;Dequantize_fc7_1_HzDequantize&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;avg_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.07884999999999999</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.158</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;min_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.068</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;MOBILENET_subgraph_0_output_layout_convert&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;avg_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.018765</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.08</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;min_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.01</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;Preprocess&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;avg_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0065</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.058</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;min_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.003</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;Softmax_prob&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;avg_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.084255</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.167</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;min_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.046</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;task_latency&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;TaskPendingTime&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;avg_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.029375</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.059</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;min_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.009</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;TaskRunningTime&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;avg_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11.40324</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11.801</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;min_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4.008</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>The above output shows the &quot;model_latency&quot; and &quot;task_latency&quot;. The &quot;model_latency&quot; outputs the time consumption for each OP in the model, while the &quot;task_latency&quot; outputs the time consumption for each task module in the model.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><ul>
<li>The profiler.log file will only be generated if the program exits normally.</li>
</ul></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dump-tool">Dump Tool<a href="#dump-tool" class="hash-link" aria-label="Direct link to Dump Tool" title="Direct link to Dump Tool">​</a></h4>
<p>This section mainly introduces the method of enabling the dump tool. Generally, it is not necessary to pay attention to it. The dump tool is only used when the model accuracy is abnormal.
By setting the environment variable <code>export HB_DNN_DUMP_PATH=${path}</code>, the input and output of each node in the model inference process can be dumped. Based on the dumped output, it is possible to check whether there are consistency issues between the model inference on the development machine simulator and the development board: that is, whether the outputs of the same model and the same input on the development machine simulator and the development board are exactly the same.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="instructions-for-model-on-board-analysis-tool">Instructions for Model-on-Board Analysis Tool<a href="#instructions-for-model-on-board-analysis-tool" class="hash-link" aria-label="Direct link to Instructions for Model-on-Board Analysis Tool" title="Direct link to Instructions for Model-on-Board Analysis Tool">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview-1">Overview<a href="#overview-1" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h3>
<p>This section introduces a fast verification tool for model inference on D-Robotics Algorithm Toolchain. This tool allows developers to quickly obtain information about the &quot;xxx.bin&quot; model, model inference performance, and model debugging.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="instructions-for-hrt_model_exec-tool">Instructions for hrt_model_exec Tool<a href="#instructions-for-hrt_model_exec-tool" class="hash-link" aria-label="Direct link to Instructions for hrt_model_exec Tool" title="Direct link to Instructions for hrt_model_exec Tool">​</a></h3>
<p>The &quot;hrt_model_exec&quot; tool allows for quickly evaluating model inference performance and obtaining model information on the development board.</p>
<p>Currently, the tool provides three types of functions, as shown in the table below:</p>
<table><thead><tr><th><strong>Number</strong></th><th><strong>Subcommand</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>1</td><td>&quot;model_info&quot;</td><td>Get model information, such as input-output information of the model.</td></tr><tr><td>2</td><td>&quot;infer&quot;</td><td>Perform model inference and obtain the inference results.</td></tr><tr><td>3</td><td>&quot;perf&quot;</td><td>Perform model performance analysis and obtain the performance analysis results.</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p>The tool can also check the version of the &quot;dnn&quot; prediction library using the &quot;-v&quot; or &quot;--version&quot; command.</p><p>For example: hrt_model_exec -v or hrt_model_exec --version</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="input-parameter-description">Input Parameter Description<a href="#input-parameter-description" class="hash-link" aria-label="Direct link to Input Parameter Description" title="Direct link to Input Parameter Description">​</a></h4>
<p>Run &quot;hrt_model_exec&quot; , &quot;hrt_model_exec -h&quot; or &quot;hrt_model_exec --help&quot; on the development board to get the tool&#x27;s usage parameter details.
As shown in the figure below:</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/04_toolchain_development/intermediate/hrt_model_exec_help.png" alt="hrt_model_exec_help" class="img_ev3q"></p>
<table><thead><tr><th><strong>Number</strong></th><th><strong>Parameter</strong></th><th><strong>Type</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>1</td><td>&quot;model_file&quot;</td><td>string</td><td>Model file path, multiple paths can be separated by commas.</td></tr><tr><td>2</td><td>&quot;model_name&quot;</td><td>string</td><td>Specify the name of a model in the model.</td></tr><tr><td>3</td><td>&quot;core_id&quot;</td><td>int</td><td>Specify the running core.</td></tr><tr><td>4</td><td>&quot;input_file&quot;</td><td>string</td><td>Model input information, multiple can be separated by commas.</td></tr><tr><td>5</td><td>&quot;roi_infer&quot;</td><td>bool</td><td>Enable resizer model inference.</td></tr><tr><td>6</td><td>&quot;roi&quot;</td><td>string</td><td>Specify the ROI area required for inference of the resizer model.</td></tr><tr><td>7</td><td>&quot;frame_count&quot;</td><td>int</td><td>Execute the number of frames for the model run.</td></tr><tr><td>8</td><td>&quot;dump_intermediate&quot;</td><td>string</td><td>Dump the inputs and outputs of each layer of the model.</td></tr><tr><td>9</td><td>&quot;enable_dump&quot;</td><td>bool</td><td>Enable dumping of model inputs and outputs.</td></tr><tr><td>10</td><td>&quot;dump_precision&quot;</td><td>int</td><td>Control the number of decimal places for outputting float data in txt format.</td></tr><tr><td>11</td><td>&quot;hybrid_dequantize_process&quot;</td><td>bool</td><td>Control the output of float data in txt format.</td></tr><tr><td>12</td><td>&quot;dump_format&quot;</td><td>string</td><td>Format for dumping model inputs and outputs.</td></tr><tr><td>13</td><td>&quot;dump_txt_axis&quot;</td><td>int</td><td>Control the line break rules for input and output in txt format.</td></tr><tr><td>14</td><td>&quot;enable_cls_post_process&quot;</td><td>bool</td><td>Enable classification post-processing.</td></tr><tr><td>16</td><td><code>thread_num</code></td><td>int</td><td>Specify the number of threads to run the program.</td></tr><tr><td>17</td><td><code>profile_path</code></td><td>string</td><td>Save path for model performance/scheduling performance statistics.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="instructions">Instructions<a href="#instructions" class="hash-link" aria-label="Direct link to Instructions" title="Direct link to Instructions">​</a></h4>
<p>This section describes the specific usage of the three subfunctions of the <code>hrt_model_exec</code> tool.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="model_info"><code>model_info</code><a href="#model_info" class="hash-link" aria-label="Direct link to model_info" title="Direct link to model_info">​</a></h4>
<ul>
<li>Overview</li>
</ul>
<p>This parameter is used to obtain model information. The supported models are QAT models and PTQ models.
This parameter is used together with <code>model_file</code> to obtain detailed information about the model;
The model information includes the model&#x27;s input and output information <code>hbDNNTensorProperties</code> and the model&#x27;s segment information <code>stage</code>; The model&#x27;s segment information is: a picture can be inferred in multiple stages. The stage information is [x1, y1, x2, y2], which are the coordinates of the top left and bottom right corners of the picture inference. Currently, D-Robotics RDK Ultra&#x27;s Bayes architecture supports inference of such segmented models, and the models on RDK X3 are all 1-stage models.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p>If <code>model_name</code> is not specified, all model information in the model will be output. If <code>model_name</code> is specified, only the information of the corresponding model will be output.</p></div></div>
<ul>
<li>Example</li>
</ul>
<ol>
<li>Single model</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  hrt_model_exec model_info --model_file=xxx.bin</span><br></span></code></pre></div></div>
<ol start="2">
<li>Multiple models (output all model information)</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  hrt_model_exec model_info --model_file=xxx.bin,xxx.bin  </span><br></span></code></pre></div></div>
<ol start="3">
<li>Multiple models - pack model (output specific model information)</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  hrt_model_exec model_info --model_file=xxx.bin --model_name=xx</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/04_toolchain_development/intermediate/model_info.png" alt="model_info" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="supplementary-explanation-of-input-parameters">Supplementary Explanation of Input Parameters<a href="#supplementary-explanation-of-input-parameters" class="hash-link" aria-label="Direct link to Supplementary Explanation of Input Parameters" title="Direct link to Supplementary Explanation of Input Parameters">​</a></h4>
<ul>
<li>Repeat Input</li>
</ul>
<p>If the same parameter input is specified repeatedly, the parameters will be overwritten. For example, when obtaining model information, if two model files are specified repeatedly, the later parameter input <code>yyy.bin</code> will be used:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  hrt_model_exec model_info --model_file=xxx.bin --model_file=yyy.bin</span><br></span></code></pre></div></div>
<p>If input is repeated without adding the command line parameter <code>--model_file</code>, the value after the command line parameter will be used, and parameters without arguments will not be recognized. For example, in the following example, <code>yyy.bin</code> will be ignored and the parameter value will be <code>xxx.bin</code>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  hrt_model_exec model_info --model_file=xxx.bin yyy.bin</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="infer"><code>infer</code><a href="#infer" class="hash-link" aria-label="Direct link to infer" title="Direct link to infer">​</a></h4>
<ul>
<li>Overview</li>
</ul>
<p>This parameter is used to input a custom image, and the model infers one frame and provides the inference result.
This parameter needs to be used together with <code>input_file</code> to specify the input image path. The tool resizes the image and organizes the model input information based on the model information.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tip</div><div class="admonitionContent_BuS1"><p>The program runs single-threaded to process one frame of data and outputs the time it takes for the model to run.</p></div></div>
<ul>
<li>Example Explanation</li>
</ul>
<ol>
<li>Single Model</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  hrt_model_exec infer --model_file=xxx.bin --input_file=xxx.jpg</span><br></span></code></pre></div></div>
<ol start="2">
<li>Multi Model</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  hrt_model_exec infer --model_file=xxx.bin,xxx.bin --model_name=xx --input_file=xxx.jpg</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/04_toolchain_development/intermediate/infer.png" alt="infer" class="img_ev3q"></p>
<ul>
<li>
<p>Optional Parameters</p>
<table><thead><tr><th>Parameters</th><th>Description</th></tr></thead><tbody><tr><td><code>core_id</code></td><td>Specify the core id for model inference, 0: all cores, 1: core 0, 2: core 1; default is <code>0</code>.</td></tr><tr><td><code>roi_infer</code></td><td>Enable resizer model inference; if the model input contains a resizer source, set to <code>true</code>, default is <code>false</code>.</td></tr><tr><td><code>roi</code></td><td>Effective when <code>roi_infer</code> is <code>true</code>, set the <code>roi</code> area required for inference of the resizer model, separated by semicolons.</td></tr><tr><td><code>frame_count</code></td><td>Set the number of frames the <code>infer</code> runs, repeat the inference for one frame, can be used with <code>enable_dump</code> to check the consistency of the output, default is <code>1</code>.</td></tr><tr><td><code>dump_intermediate</code></td><td>Dump input and output data for each layer of the model, default value is <code>0</code>, do not dump data. <code>1</code>: output file type is <code>bin</code>; <code>2</code>: output type is <code>bin</code> and <code>txt</code>, with BPU node output as aligned data; <code>3</code>: output type is <code>bin</code> and <code>txt</code>, with BPU node output as valid data.</td></tr><tr><td><code>enable_dump</code></td><td>Dump model output data, default is <code>false</code>.</td></tr><tr><td><code>dump_precision</code></td><td>Control the decimal places for outputting float type data in txt format, default is <code>9</code>.</td></tr><tr><td><code>hybrid_dequantize_process</code></td><td>Control the float type data in txt format, if the output is fixed point data, perform reverse quantization processing, currently only supports four-dimensional models.</td></tr><tr><td><code>dump_format</code></td><td>Type of output file for dumping the model, optional parameters are <code>bin</code> or <code>txt</code>, default is <code>bin</code>.</td></tr><tr><td><code>dump_txt_axis</code></td><td>Line break rules for dumping model txt format output; if the output dimension is n, the parameter range is [0, n], default is <code>4</code>.</td></tr><tr><td><code>enable_cls_post_process</code></td><td>Enable classification post-processing, currently only supports ptq classification models, default is <code>false</code>.</td></tr></tbody></table>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="multi-input-model-explanation"><code>Multi-input Model Explanation</code><a href="#multi-input-model-explanation" class="hash-link" aria-label="Direct link to multi-input-model-explanation" title="Direct link to multi-input-model-explanation">​</a></h4>
<p>The <code>infer</code> function of the tool supports the inference of multi-input models, supports image input, binary file input, and text file input, and the input data is separated by commas.
The input information of the model can be viewed through <code>model_info</code>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hrt_model_exec infer --model_file=xxx.bin --input_file=xxx.jpg,input.txt</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="supplementary-explanation-of-input-parameters-1"><code>Supplementary Explanation of Input Parameters</code><a href="#supplementary-explanation-of-input-parameters-1" class="hash-link" aria-label="Direct link to supplementary-explanation-of-input-parameters-1" title="Direct link to supplementary-explanation-of-input-parameters-1">​</a></h4>
<ul>
<li><code>input_file</code></li>
</ul>
<p>For image type input, the file name extension must be one of the following: <code>bin</code> / <code>JPG</code> / <code>JPEG</code> / <code>jpg</code> / <code>jpeg</code>. For feature input, the file name extension must be one of the following: <code>bin</code> / <code>txt</code>. Each input file needs to be separated by a comma. For example: <code>xxx.jpg,input.txt</code>.</p>
<ul>
<li><code>enable_cls_post_process</code></li>
</ul>
<p>Enable classification post-processing. It is only supported in PTQ classification models. When the sub-command is <code>infer</code>, the variable should be set to <code>true</code> to print the classification results. Refer to the following figure:</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/04_toolchain_development/intermediate/enable_cls_post_process.png" alt="enable_cls_post_process" class="img_ev3q"></p>
<ul>
<li><code>roi_infer</code></li>
</ul>
<p>If the model contains a resizer input source, both <code>infer</code> and <code>perf</code> functions need to set <code>roi_infer</code> to true, and configure the <code>input_file</code> and <code>roi</code> parameters corresponding to the input source. For example, if the model has three inputs with the input source order of [<code>ddr</code>, <code>resizer</code>, <code>resizer</code>], the command line for inferring two sets of input data is as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  // infer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hrt_model_exec infer --model_file=xxx.bin --input_file=&quot;xx0.bin,xx1.jpg,xx2.jpg,xx3.bin,xx4.jpg,xx5.jpg&quot;  --roi=&quot;2,4,123,125;6,8,111,113;27,46,143,195;16,28,131,183&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // perf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hrt_model_exec perf --model_file=xxx.bin --input_file=&quot;xx0.bin,xx1.jpg,xx2.jpg,xx3.bin,xx4.jpg,xx5.jpg&quot;   --roi=&quot;2,4,123,125;6,8,111,113;27,46,143,195;16,28,131,183&quot;</span><br></span></code></pre></div></div>
<p>Each <code>roi</code> input needs to be separated by a semicolon.</p>
<ul>
<li><code>dump_intermediate</code></li>
</ul>
<p>Dump the input data and output data of each layer node in the model. When <code>dump_intermediate=0</code>, the default dump function is turned off. When <code>dump_intermediate=1</code>, the input data and output data of each layer node in the model are saved in <code>bin</code> format, and the output of <code>BPU</code> node is saved as <code>aligned</code> data. When <code>dump_intermediate=2</code>, the input data and output data of each layer node in the model are saved in both <code>bin</code> and <code>txt</code> formats, and the output of <code>BPU</code> node is saved as <code>aligned</code> data. When <code>dump_intermediate=3</code>, the input data and output data of each layer node in the model are saved in both <code>bin</code> and <code>txt</code> formats, and the output of <code>BPU</code> node is saved as <code>valid</code> data. For example, if the model has two inputs with the input source order of [<code>pyramid</code>, <code>ddr</code>], and the input and output of each layer node in the model are saved as <code>bin</code> files, and the output of <code>BPU</code> node is saved as <code>aligned</code> type, the inference command line is as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  hrt_model_exec infer --model_file=xxx.bin --input_file=&quot;xx0.jpg,xx1.bin&quot;  --dump_intermediate=1</span><br></span></code></pre></div></div>
<p>The <code>dump_intermediate</code> parameter supports both <code>infer</code> and <code>perf</code> modes.</p>
<ul>
<li><code>hybrid_dequantize_process</code></li>
</ul>
<p>Control the float type output data in txt format. The <code>hybrid_dequantize_process</code> parameter is effective when <code>enable_dump=true</code>. When <code>enable_dump=true</code>, if <code>hybrid_dequantize_process=true</code> is set, the integer output data is dequantized, and all outputs are saved as <code>txt</code> files in float format. The output of the model is <code>valid</code> data, and it supports configuring <code>dump_txt_axis</code> and <code>dump_precision</code>. If <code>hybrid_dequantize_process=false</code> is set, the <code>aligned</code> data of the model output is directly saved without any processing. For example, if the model has three outputs with the order of tensor data types as [<code>float</code>, <code>int32</code>, <code>int16</code>], and the <code>valid</code> data of float type in txt format is output, the inference command line is as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   hrt_model_exec infer --model_file=xxx.bin --input_file=&quot;xx0.jpg,xx1.bin&quot;  --dump_intermediate=1</span><br></span></code></pre></div></div>
<p>The <code>dump_intermediate</code> parameter supports both <code>infer</code> and <code>perf</code> modes.// Output float type data
hrt_model_exec infer --model_file=xxx.bin --input_file=&quot;xx.bin&quot; --enable_dump=true --hybrid_dequantize_process=true</p>
<p><code>hybrid_dequantize_process</code> parameter currently only supports four-dimensional models.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="perf"><code>perf</code><a href="#perf" class="hash-link" aria-label="Direct link to perf" title="Direct link to perf">​</a></h4>
<ul>
<li>Overview</li>
</ul>
<p>This parameter is used to test the inference performance of the model.
With this command tool, users do not need to input data. The program will automatically construct the input tensor of the model based on the model information, and the tensor data will be random.
The program runs with a default single thread and 200 frames of data. When the perf_time parameter is specified, the frame_count parameter is invalid, and the program will exit after executing for the specified time.
After the program completes, it will output the number of program threads, frame count, total model inference time, average model inference latency, frame rate information, etc.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p>The program prints performance information every 200 frames: maximum, minimum, and average values of latency. When the number of frames is less than 200, the program prints once after the program finishes running.</p></div></div>
<ul>
<li>Example</li>
</ul>
<ol>
<li>Single model</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hrt_model_exec perf --model_file=xxx.bin</span><br></span></code></pre></div></div>
<ol start="2">
<li>Multiple models</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hrt_model_exec perf --model_file=xxx.bin,xxx.bin --model_name=xx</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/04_toolchain_development/intermediate/perf.png" alt="perf" class="img_ev3q"></p>
<ul>
<li>
<p>Optional parameters</p>
<table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>core_id</code></td><td>Specify the core id for model inference. 0: any core, 1: core0, 2: core1; default is <code>0</code>.</td></tr><tr><td><code>input_file</code></td><td>Model input information, multiple inputs can be separated by commas.</td></tr><tr><td><code>roi_infer</code></td><td>Enable resizer model inference; if the model input contains a resizer source, set to <code>true</code>, default is <code>false</code>.</td></tr><tr><td><code>roi</code></td><td>Effect when <code>roi_infer</code> is set to <code>true</code>, set the required <code>roi</code> area for inference of resizer model, separated by semicolons.</td></tr><tr><td><code>frame_count</code></td><td>Set the number of frames for <code>perf</code> to run, effective when perf_time is 0, default is <code>200</code>.</td></tr><tr><td><code>dump_intermediate</code></td><td>Dump the input and output data of each layer of the model, default is <code>0</code>, no dumping. <code>1</code>: output file type is <code>bin</code>;</td></tr><tr><td></td><td><code>2</code>: output type is <code>bin</code> and <code>txt</code>, with BPU node output being aligned data; <code>3</code>: output type is <code>bin</code> and <code>txt</code>, with BPU node output being valid data.</td></tr><tr><td><code>perf_time</code></td><td>Set the running time of <code>perf</code>, unit: minutes, default is <code>0</code>.</td></tr><tr><td><code>thread_num</code></td><td>Set the number of threads for program execution, range: [1, 8], default is <code>1</code>, set to 8 or greater to process with 8 threads.</td></tr><tr><td><code>profile_path</code></td><td>Profiling tool log generation path, running generates profiler.log and profiler.csv, analyzing op time and scheduling time.</td></tr></tbody></table>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="multi-thread-latency-data-explanation"><code>Multi-thread Latency Data Explanation</code><a href="#multi-thread-latency-data-explanation" class="hash-link" aria-label="Direct link to multi-thread-latency-data-explanation" title="Direct link to multi-thread-latency-data-explanation">​</a></h4>
<p>The purpose of multiple threads is to fully utilize BPU resources. Multiple threads process <code>frame_count</code> frames or execute for perf_time until data processing is completed/execution time ends and the program terminates.
In the multi-thread <code>perf</code> process, you can execute the following command to obtain the real-time occupancy of BPU resources.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hrut_somstatus -n 10000 -d 1</span><br></span></code></pre></div></div>
<p>Output:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">=====================1=====================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temperature--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CPU      : 37.5 (C)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cpu frequency--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              min       cur     max</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cpu0: 240000    1200000 1200000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cpu1: 240000    1200000 1200000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cpu2: 240000    1200000 1200000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cpu3: 240000    1200000 1200000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bpu status information----&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          min        cur             max             ratio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bpu0: 400000000 1000000000      1000000000      0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bpu1: 400000000 1000000000      1000000000      0</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Remarks</div><div class="admonitionContent_BuS1"><p>The above example shows the output log of the <strong>RDK X3</strong> development board. If using the <strong>RDK Ultra</strong> development board, simply use the above command to obtain the output.
In &quot;perf&quot; mode, the latency measurement of a single thread represents the actual on-board performance of the model, while the latency data of multiple threads represents the processing time of each thread per frame, which is longer than that of a single thread. However, the overall processing time of multiple threads is reduced, and the frame rate is improved.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="supplementary-explanation-of-input-parameters-2">Supplementary explanation of input parameters<a href="#supplementary-explanation-of-input-parameters-2" class="hash-link" aria-label="Direct link to Supplementary explanation of input parameters" title="Direct link to Supplementary explanation of input parameters">​</a></h4>
<ul>
<li><code>profile_path</code></li>
</ul>
<p>Directory where the profile log file is generated.
This parameter can be set by setting the environment variable <code>export HB_DNN_PROFILER_LOG_PATH=${path}</code> to view the OP and task scheduling time during model execution.
Generally, setting &quot;--profile_path=&#x27;.&#x27;&quot; is sufficient, which means that the log file is generated in the current directory and the log file is named profiler.log.</p>
<ul>
<li><code>thread_num</code></li>
</ul>
<p>Number of threads (parallelism), indicating the maximum number of tasks processed in parallel.
When testing latency, the value needs to be set to 1, so that there is no resource contention and the latency test is more accurate.
When testing throughput, it is recommended to set it to a value greater than 2 (number of BPU cores), adjust the number of threads to maximize BPU utilization, and make the throughput test more accurate.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  // Dual-core FPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hrt_model_exec perf --model_file xxx.bin --thread_num 8 --core_id 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Latency</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hrt_model_exec perf --model_file xxx.bin --thread_num 1 --core_id 1</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="instructions-for-using-the-hrt_bin_dump-toolhrt_bin_dump-is-a-layer-dump-tool-for-the-ptq-debug-model-and-the-output-file-of-the-tool-is-a-binary-file">Instructions for using the hrt_bin_dump tool&quot;hrt_bin_dump&quot; is a layer dump tool for the PTQ debug model, and the output file of the tool is a binary file.<a href="#instructions-for-using-the-hrt_bin_dump-toolhrt_bin_dump-is-a-layer-dump-tool-for-the-ptq-debug-model-and-the-output-file-of-the-tool-is-a-binary-file" class="hash-link" aria-label="Direct link to Instructions for using the hrt_bin_dump tool&quot;hrt_bin_dump&quot; is a layer dump tool for the PTQ debug model, and the output file of the tool is a binary file." title="Direct link to Instructions for using the hrt_bin_dump tool&quot;hrt_bin_dump&quot; is a layer dump tool for the PTQ debug model, and the output file of the tool is a binary file.">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="description-of-input-parameters">Description of Input Parameters<a href="#description-of-input-parameters" class="hash-link" aria-label="Direct link to Description of Input Parameters" title="Direct link to Description of Input Parameters">​</a></h4>
<table><thead><tr><th>No.</th><th>Parameter</th><th>Type</th><th>Description</th><th>Explanation</th></tr></thead><tbody><tr><td>1</td><td><code>model_file</code></td><td>string</td><td>Model file path.</td><td>It must be a debug model. The compilation parameter <code>layer_out_dump</code> of the model needs to be set to <code>True</code>, which specifies that the intermediate results of each layer should be output during the model conversion process.</td></tr><tr><td>2</td><td><code>input_file</code></td><td>string</td><td>Input file path.</td><td>The input file of the model supports all types of input of &quot;hbDNNDataType&quot;; The IMG type file must be a binary file (with a suffix of .bin), and the size of the binary file should match the input information of the model. For example, the size of the YUV444 file is :math:<code>height * width * 3</code>; The TENSOR type file must be a binary file or a text file (with a suffix of .bin/.txt), The size of the binary file should match the input information of the model, and the number of data read from the text file must be greater than or equal to the number of input data required by the model. The excess data will be discarded; Each input is separated by a comma. For example, if the model has two inputs, it should be: <code>--input_file=kite.bin,input.txt</code>.</td></tr><tr><td>3</td><td><code>conv_mapping_file</code></td><td>string</td><td>Model convolution layer configuration file.</td><td>The model layer configuration file specifies the information of each layer in the model and is generated during the model compilation process. The file name is generally: <code>model_name_quantized_model_conv_output_map.json</code>.</td></tr><tr><td>4</td><td><code>conv_dump_path</code></td><td>string</td><td>Tool output path.</td><td>The output path of the tool, which should be a valid path.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="instructions-1">Instructions<a href="#instructions-1" class="hash-link" aria-label="Direct link to Instructions" title="Direct link to Instructions">​</a></h4>
<p>The tool provides the function of dumping the output of convolutional layers, and the output file is a binary file.
Run <code>hrt_bin_dump</code> directly to get the details of tool usage.
See the figure below:</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/04_toolchain_development/intermediate/hrt_bin_dump_help.png" alt="hrt_bin_dump_help" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p>The tool can also view the version number of the &quot;dnn&quot; prediction library of the tool using the <code>-v</code> or <code>--version</code> command.</p><p>For example: hrt_bin_dump -v or hrt_bin_dump --version</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4>
<p>Taking the debug model of MobileNetV1 as an example, create the &quot;outputs&quot; folder and run the following command:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ./hrt_bin_dump --model_file=./mobilenetv1_hybrid_horizonrt.bin --conv_mapping_file=./mobilenetv1_quantized_model_conv_output_map.json --conv_dump_path=./outputs --input_file=./zebra_cls.bin</span><br></span></code></pre></div></div>
<p>The run log is as follows:</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/04_toolchain_development/intermediate/run_log.png" alt="run_log" class="img_ev3q"></p>
<p>The output can be viewed in the &quot;outputs/&quot; folder as shown below:</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/04_toolchain_development/intermediate/output.png" alt="output" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-08-14T10:39:43.000Z" itemprop="dateModified">Aug 14, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rdk_doc/en/Advanced_development/toolchain_development/intermediate/supported_op_list"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">supported_op_list</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rdk_doc/en/Advanced_development/toolchain_development/expert/"><div class="pagination-nav__sublabel">Next </div><div class="pagination-nav__label">7.4.3.4 Advanced Guide</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#model-inference-dnn-api-usage-example" class="table-of-contents__link toc-highlight">Model Inference DNN API Usage Example</a><ul><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#sample-code-package-structure-introduction" class="table-of-contents__link toc-highlight">Sample Code Package Structure Introduction</a></li><li><a href="#environment-building" class="table-of-contents__link toc-highlight">Environment Building</a><ul><li><a href="#development-board-preparation" class="table-of-contents__link toc-highlight">Development Board Preparation</a></li><li><a href="#compilation" class="table-of-contents__link toc-highlight">Compilation</a></li></ul></li><li><a href="#example-usage" class="table-of-contents__link toc-highlight">Example Usage</a><ul><li><a href="#basic_samples-example" class="table-of-contents__link toc-highlight">basic_samples Example</a></li><li><a href="#quick_start" class="table-of-contents__link toc-highlight">quick_start</a></li><li><a href="#api_tutorial" class="table-of-contents__link toc-highlight">api_tutorial</a></li><li><a href="#advanced_samples" class="table-of-contents__link toc-highlight">advanced_samples</a></li><li><a href="#misc" class="table-of-contents__link toc-highlight">misc</a></li></ul></li><li><a href="#auxiliary-tools-and-common-operations" class="table-of-contents__link toc-highlight">Auxiliary tools and common operations</a><ul><li><a href="#logs" class="table-of-contents__link toc-highlight">Logs</a></li><li><a href="#example-logs" class="table-of-contents__link toc-highlight">Example Logs</a></li><li><a href="#model-inference-dnn-api-logs" class="table-of-contents__link toc-highlight">Model Inference DNN API Logs</a></li></ul></li></ul></li><li><a href="#public-model-performance-accuracy-evaluation-instructions" class="table-of-contents__link toc-highlight">Public model performance accuracy evaluation instructions</a><ul><li><a href="#public-model-performance-accuracy-indicatorsthe-table-below-provides-performance-and-accuracy-indicators-of-typical-deep-neural-network-models-on-the-x3-processor" class="table-of-contents__link toc-highlight">Public model performance accuracy indicatorsThe table below provides performance and accuracy indicators of typical deep neural network models on the X3 processor.</a></li><li><a href="#evaluation-method-description" class="table-of-contents__link toc-highlight">Evaluation Method Description</a><ul><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#sample-models" class="table-of-contents__link toc-highlight">Sample Models</a></li><li><a href="#public-datasets" class="table-of-contents__link toc-highlight">Public Datasets</a></li><li><a href="#environment-setup" class="table-of-contents__link toc-highlight">Environment Setup</a></li><li><a href="#development-board-preparation-1" class="table-of-contents__link toc-highlight">Development Board Preparation</a></li><li><a href="#compiler-environment-preparation" class="table-of-contents__link toc-highlight">Compiler Environment Preparation</a></li><li><a href="#evaluation-example-usage-instructions" class="table-of-contents__link toc-highlight">Evaluation Example Usage Instructions</a></li><li><a href="#performance-evaluation" class="table-of-contents__link toc-highlight">Performance Evaluation</a></li><li><a href="#accuracy-evaluation" class="table-of-contents__link toc-highlight">Accuracy Evaluation</a></li><li><a href="#data_preprocess" class="table-of-contents__link toc-highlight">Data Preprocessing</a></li><li><a href="#data-mounting" class="table-of-contents__link toc-highlight">Data Mounting</a></li><li><a href="#model-inference" class="table-of-contents__link toc-highlight">Model Inference</a></li><li><a href="#accuracy-calculation" class="table-of-contents__link toc-highlight">Accuracy Calculation</a></li><li><a href="#model-integration" class="table-of-contents__link toc-highlight">Model Integration</a></li><li><a href="#adding-post-processing-files" class="table-of-contents__link toc-highlight">Adding Post-processing Files</a></li><li><a href="#add-model-running-scripts-and-configuration-files" class="table-of-contents__link toc-highlight">Add model running scripts and configuration files</a></li><li><a href="#auxiliary-tools-and-common-operations-1" class="table-of-contents__link toc-highlight">Auxiliary tools and common operations</a></li><li><a href="#instructions-for-using-the-logging-system" class="table-of-contents__link toc-highlight">Instructions for using the logging system</a></li><li><a href="#dump-tool" class="table-of-contents__link toc-highlight">Dump Tool</a></li></ul></li></ul></li><li><a href="#instructions-for-model-on-board-analysis-tool" class="table-of-contents__link toc-highlight">Instructions for Model-on-Board Analysis Tool</a><ul><li><a href="#overview-1" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#instructions-for-hrt_model_exec-tool" class="table-of-contents__link toc-highlight">Instructions for hrt_model_exec Tool</a><ul><li><a href="#input-parameter-description" class="table-of-contents__link toc-highlight">Input Parameter Description</a></li><li><a href="#instructions" class="table-of-contents__link toc-highlight">Instructions</a></li><li><a href="#model_info" class="table-of-contents__link toc-highlight"><code>model_info</code></a></li><li><a href="#supplementary-explanation-of-input-parameters" class="table-of-contents__link toc-highlight">Supplementary Explanation of Input Parameters</a></li><li><a href="#infer" class="table-of-contents__link toc-highlight"><code>infer</code></a></li><li><a href="#multi-input-model-explanation" class="table-of-contents__link toc-highlight"><code>Multi-input Model Explanation</code></a></li><li><a href="#supplementary-explanation-of-input-parameters-1" class="table-of-contents__link toc-highlight"><code>Supplementary Explanation of Input Parameters</code></a></li><li><a href="#perf" class="table-of-contents__link toc-highlight"><code>perf</code></a></li><li><a href="#multi-thread-latency-data-explanation" class="table-of-contents__link toc-highlight"><code>Multi-thread Latency Data Explanation</code></a></li><li><a href="#supplementary-explanation-of-input-parameters-2" class="table-of-contents__link toc-highlight">Supplementary explanation of input parameters</a></li></ul></li><li><a href="#instructions-for-using-the-hrt_bin_dump-toolhrt_bin_dump-is-a-layer-dump-tool-for-the-ptq-debug-model-and-the-output-file-of-the-tool-is-a-binary-file" class="table-of-contents__link toc-highlight">Instructions for using the hrt_bin_dump tool&quot;hrt_bin_dump&quot; is a layer dump tool for the PTQ debug model, and the output file of the tool is a binary file.</a><ul><li><a href="#description-of-input-parameters" class="table-of-contents__link toc-highlight">Description of Input Parameters</a></li><li><a href="#instructions-1" class="table-of-contents__link toc-highlight">Instructions</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.guyuehome.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GuYueHome<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact US</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 D-Robotics.</div></div></div></footer></div>
</body>
</html>