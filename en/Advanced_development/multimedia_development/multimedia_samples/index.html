<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Advanced_development/multimedia_development/multimedia_samples" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">7.3.2 Sample Program | RDK DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/multimedia_development/multimedia_samples"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="7.3.2 Sample Program | RDK DOC"><meta data-rh="true" name="description" content="This chapter briefly describes the D-Robotics multimedia application examples. The source code involved can be obtained by running sudo apt install hobot-multimedia-samples and installed under the directory /app/multimedia_samples."><meta data-rh="true" property="og:description" content="This chapter briefly describes the D-Robotics multimedia application examples. The source code involved can be obtained by running sudo apt install hobot-multimedia-samples and installed under the directory /app/multimedia_samples."><link data-rh="true" rel="icon" href="/rdk_doc/en/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/multimedia_development/multimedia_samples"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/multimedia_samples" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/multimedia_development/multimedia_samples" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/multimedia_samples" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"7. Advanced Development","item":"https://developer.d-robotics.cc/rdk_doc/en/Advanced_development"},{"@type":"ListItem","position":2,"name":"7.3 RDK X3 多媒体开发指南","item":"https://developer.d-robotics.cc/rdk_doc/en/03_multimedia_development"},{"@type":"ListItem","position":3,"name":"7.3.2 Sample Program","item":"https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/multimedia_development/multimedia_samples"}]}</script><script src="https://hm.baidu.com/hm.js?24dd63cad43b63889ea6bede5fd1ab9e" async></script><link rel="stylesheet" href="/rdk_doc/en/assets/css/styles.0fbd7d27.css">
<script src="/rdk_doc/en/assets/js/runtime~main.b1704a17.js" defer="defer"></script>
<script src="/rdk_doc/en/assets/js/main.bd381480.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rdk_doc/en/RDK">RDK X3 / X5</a><a class="navbar__item navbar__link" href="/rdk_doc/en/rdk_s/RDK">RDK S100</a><a href="https://developer.d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>EN</a><ul class="dropdown__menu"><li><a href="/rdk_doc/Advanced_development/multimedia_development/multimedia_samples" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">CN</a></li><li><a href="/rdk_doc/en/Advanced_development/multimedia_development/multimedia_samples" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">EN</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rdk_doc/en/RDK">D-Robotics RDK Suite</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Quick_start">1. Quick Start</a><button aria-label="Expand sidebar category &#x27;1. Quick Start&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/System_configuration">2. System Configuration</a><button aria-label="Expand sidebar category &#x27;2. System Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Basic_Application">3. Basic Application Development</a><button aria-label="Expand sidebar category &#x27;3. Basic Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Basic_Development">4. Algorithm Application Development</a><button aria-label="Expand sidebar category &#x27;4. Algorithm Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Robot_development">5. Robotics Application Development</a><button aria-label="Expand sidebar category &#x27;5. Robotics Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Application_case">6. Application Development Guide</a><button aria-label="Expand sidebar category &#x27;6. Application Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rdk_doc/en/Advanced_development">7. Advanced Development</a><button aria-label="Collapse sidebar category &#x27;7. Advanced Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/hardware_development">7.1 Hardware Development Guide</a><button aria-label="Expand sidebar category &#x27;7.1 Hardware Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/linux_development">7.2. Linux Development Guide</a><button aria-label="Expand sidebar category &#x27;7.2. Linux Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/en/03_multimedia_development">7.3 RDK X3 多媒体开发指南</a><button aria-label="Collapse sidebar category &#x27;7.3 RDK X3 多媒体开发指南&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/overview">7.3.1 System Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/multimedia_samples">7.3.2 Sample Program</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/system_control">7.3.3 System Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/video_input">7.3.4 Video Input</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/isp_system">7.3.5 ISP Image System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/video_processing">7.3.6 Video Processing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/region_processing">7.3.7 Region Processing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/video_output">7.3.8 Video Output</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/video_encode">7.3.9 Video Encoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/video_decode">7.3.10 Video Decoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/debug_info">7.3.11 Query Multimedia Module Debug Information</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug">7.3.12 Multimedia Performance Debugging</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/en/04_toolchain_development">7.4 Algorithm Toolchain Development Guide</a><button aria-label="Expand sidebar category &#x27;7.4 Algorithm Toolchain Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/FAQ">8. FAQs</a><button aria-label="Expand sidebar category &#x27;8. FAQs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Appendix">9. Appendix</a><button aria-label="Expand sidebar category &#x27;9. Appendix&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rdk_doc/en/Release_Note/release_note">10. Version release</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rdk_doc/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/Advanced_development"><span>7. Advanced Development</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/03_multimedia_development"><span>7.3 RDK X3 多媒体开发指南</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">7.3.2 Sample Program</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>7.3.2 Sample Program</h1></header>
<p>This chapter briefly describes the D-Robotics multimedia application examples. The source code involved can be obtained by running <code>sudo apt install hobot-multimedia-samples</code> and installed under the directory <code>/app/multimedia_samples</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="get_sif_data">Instructions for using get_sif_data<a href="#get_sif_data" class="hash-link" aria-label="Direct link to Instructions for using get_sif_data" title="Direct link to Instructions for using get_sif_data">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-function">Program Function<a href="#program-function" class="hash-link" aria-label="Direct link to Program Function" title="Direct link to Program Function">​</a></h3>
<p>The following diagram shows the video data path diagram of X3M, for explanations of the professional terms, please refer to <a href="/rdk_doc/en/Advanced_development/multimedia_development/overview#terminology">Overview of Multimedia Development - Terminology</a>.</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/image-20220517184132422.png" alt="image-20220517184132422" class="img_ev3q"></p>
<p><code>get_sif_data</code> completes the initialization of the <code>sensor</code>, <code>MIPI CSI</code>, and <code>SIF</code> modules, and implements the function of acquiring video frame data from the <code>SIF</code> module, supporting obtaining images in both <code>Raw</code> and <code>YUV</code> formats from the <code>SIF</code> module.</p>
<p><code>get_sif_data</code> can effectively assist users in debugging the lighting of the <code>sensor</code> and <code>X3M</code>. After establishing the data path from <code>sensor</code> to <code>SIF</code>, other module functions can be debugged.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-development">Program Development<a href="#program-development" class="hash-link" aria-label="Direct link to Program Development" title="Direct link to Program Development">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="source-code-structure">Source Code Structure<a href="#source-code-structure" class="hash-link" aria-label="Direct link to Source Code Structure" title="Direct link to Source Code Structure">​</a></h4>
<p>The source code is located at <code>/app/multimedia_samples/get_sif_data</code></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── main.c                       # Main program, loads the sensor list and controls the commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Makefile			 # Makefile for compilation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── module.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── module.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Readme.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sensor_handle.c              # Sensor initialization, interface for acquiring images from SIF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sensor_handle.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sensors			 # Sensor parameter configuration, add a new file to this directory for each new sensor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── sensor_f37.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── sensor_imx415.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── sensors.lds</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compilation">Compilation<a href="#compilation" class="hash-link" aria-label="Direct link to Compilation" title="Direct link to Compilation">​</a></h4>
<p>The current code is compiled using a Makefile.</p>
<p>Enter the source code directory and execute the following command to compile and generate the <code>get_sif_data</code> program:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cd sample/get_sif_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make clean # Clean the source code to maintain a clean code environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">··· ··· # log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_sif_data  main.c  main.o  Makefile  module.c  module.h  module.o  Readme.md  sensor_handle.c  sensor_handle.h  sensor_handle.o  sensors  sensors.lds</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-new-sensor">Adding a new sensor<a href="#adding-a-new-sensor" class="hash-link" aria-label="Direct link to Adding a new sensor" title="Direct link to Adding a new sensor">​</a></h4>
<p>If there is a new sensor that needs to be debugged, please refer to the source code files in the &quot;sensors&quot; directory and add a new sensor configuration accordingly.</p>
<p>Using F37 as an example to illustrate the key code:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Adding sensor, mipi, sif dev, isp parameter configurations</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * There are detailed comments in the code about the parameters in each struct</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * The isp parameters do not need to be concerned in this program</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">set_sensor_param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;set_sensor_param\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Define sensor&#x27;s initialization attribute information */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        snsinfo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SENSOR_1LANE_F37_30FPS_10BIT_LINEAR_INFO</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Define mipi&#x27;s initialization attribute information */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mipi_attr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> MIPI_1LANE_SENSOR_F37_30FPS_10BIT_LINEAR_ATTR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Define dev&#x27;s initialization attribute information */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        devinfo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DEV_ATTR_F37_LINEAR_BASE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Define pipe&#x27;s attribute information */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pipeinfo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PIPE_ATTR_F37_LINEAR_BASE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sensor_sif_dev_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * The main program calls this function during the sensor module traversal to register the sensor name and sensor parameter configuration interface.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sensor_probe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Find an empty position in sensor_lists */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ARRAY_SIZE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sensor_lists</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">strlen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sensor_lists</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sensor_tag</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ARRAY_SIZE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sensor_lists</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;sensor lists is full\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">strncpy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sensor_lists</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sensor_tag</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SENSOR_TAG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">strlen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SENSOR_TAG</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">strlen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SENSOR_TAG</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sensor_lists</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">func </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> set_sensor_param</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* Register sensor&#x27;s module entry, which the main program will use when traversing the sensor */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">SENSOR_MODULE_INSTALL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sensor_probe</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-usage">Function Usage<a href="#function-usage" class="hash-link" aria-label="Direct link to Function Usage" title="Direct link to Function Usage">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hardware-connection">Hardware Connection<a href="#hardware-connection" class="hash-link" aria-label="Direct link to Hardware Connection" title="Direct link to Hardware Connection">​</a></h4>
<p>The RDK X3 development board connects to the <code>Sensor</code> module through the <code>mipi host</code> interface. Ensure that you correctly connect the <code>Sensor</code> module according to the model being debugged.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="program-deployment">Program Deployment<a href="#program-deployment" class="hash-link" aria-label="Direct link to Program Deployment" title="Direct link to Program Deployment">​</a></h4>
<p>After following the compilation process above to generate <code>get_sif_data</code>, execute the program and, based on the prompt, select the category of the sensor currently connected to the development board. For instance, if a <code>F37 sensor</code> is connected, choose option 1.</p>
<p>Upon successful initialization, the program automatically captures and saves the first frame image (<code>pipe0_plane0_1920x1080_frame_001.raw</code>) in the directory where the program runs (you can view this by executing <code>ls -l pipe0_plane0_1920x1080_frame_*</code> after exiting the program) and prints out available user commands. The execution process looks like:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x get_sif_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./get_sif_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">D-Robotics Sensor Test Tools V1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">********************** Sensor Lists *************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        0 -- IMX415</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        1 -- F37</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*************************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Please select :1 # Select the sensor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... ... # A series of initialization logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">normal pipe_id (0)type(9)frame_id(1)buf_index(0)w x h(1920x1080) data_type 9 img_format 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stride_size(2400) w x h1920 x 1080  size 2592000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pipe(0)dump normal raw frame id(1),plane(1)size(2592000) # Captures the first frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">filedump(pipe0_plane0_1920x1080_frame_001.raw, size(2592000) is successed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time cost 85 ms </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dumpToFile raw cost time 85 ms********************** Command Lists *************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  q     -- quit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  g     -- get one frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  l     -- get a set frames</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  h     -- print help message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Command: </span><br></span></code></pre></div></div>
<p><strong>Command Explanations:</strong></p>
<ul>
<li><strong>g:</strong> Acquires a single frame of the image; supports multiple consecutive acquisitions by inputting several <code>g</code>s, e.g., <code>gggg</code>.</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Command: g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">normal pipe_id (0)type(9)frame_id(4078)buf_index(5)w x h(1920x1080) data_type 9 img_format 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stride_size(2400) w x h1920 x 1080  size 2592000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pipe(0)dump normal raw frame id(4078),plane(1)size(2592000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">filedump(pipe0_plane0_1920x1080_frame_4078.raw, size(2592000) is successed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time cost 67 ms </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dumpToFile raw cost time 67 ms</span><br></span></code></pre></div></div>
<ul>
<li><strong>l:</strong> Continuously acquires 12 frames, equivalent to entering 12 <code>g</code>s.</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Command: l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">normal pipe_id (0)type(9)frame_id(4588)buf_index(3)w x h(1920x1080) data_type 9 img_format 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stride_size(2400) w x h1920 x 1080  size 2592000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pipe(0)dump normal raw frame id(4588),plane(1)size(2592000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">filedump(pipe0_plane0_1920x1080_frame_4588.raw, size(2592000) is successed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time cost 56 ms </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... ... # Continuous output for acquiring frame data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dumpToFile raw cost time 56 msnormal pipe_id (0)type(9)frame_id(4609)buf_index(7)w x h(1920x1080) data_type 9 img_format 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stride_size(2400) w x h1920 x 1080  size 2592000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pipe(0)dump normal raw frame id(4609),plane(1)size(2592000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">filedump(pipe0_plane0_1920x1080_frame_4609.raw, size(2592000) is successed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time cost 57 ms </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dumpToFile raw cost time 57 ms</span><br></span></code></pre></div></div>
<ul>
<li><strong>q:</strong> Exits the program</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Command: Command: q</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">quit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.825912] [S0][V1]sif_video_streamoff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.826439] SIF close node 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.853045] [S0][V0]sif_video_streamoff SIF last process stream off </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.853922] [S0][V0]sif_video_streamoff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.855476] hobot_dmcfreq_target: dmcfreq-&gt;rate:2666000000, target_rate:2666000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.856460] buf:performance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.856460] , powersave_rate:2666000000, dmcfreq-&gt;pre_state:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.857610] [S0][V0]x3_sif_close SIF last process close </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.858301] SIF close node 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.858807] [isp_drv]: camera_sys_stream_off: camera_sys_stream_off success line 1549 dev_name port_0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.860006] [isp_drv:cam]: camera_fop_release: line 115 port 0 user_num 0  camera_cdev-&gt;start_num 0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.861229] vps mipi_host1: sensor1_mclk set(1) 0 as 24000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.861980] vps mipi_host1: sensor1_mclk set(0) 0 as 24000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.862741] vps mipi_host0: sensor0_mclk set(2) 0 as 24000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.863491] vps mipi_host0: sensor0_mclk set(1) 0 as 24000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.864241] vps mipi_host0: sensor0_mclk set(0) 0 as 24000000</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-results-explanation">Running Results Explanation<a href="#running-results-explanation" class="hash-link" aria-label="Direct link to Running Results Explanation" title="Direct link to Running Results Explanation">​</a></h4>
<p>After running the program, it will acquire images named similarly to <code>pipe0_plane0_1920x1080_frame_4609.raw</code> or <code>pipe0_1920x1080_frame_1024.yuv</code>. To view these images, use the <a href="http://archive.d-robotics.cc/downloads/hobotplayer/hobotplayerv.2.07.1.rar" target="_blank" rel="noopener noreferrer">hobotplayer</a> tool with the following configuration settings:</p>
<ul>
<li><strong>Viewing RAW Images:</strong></li>
</ul>
<p>Configure options as shown in the figure below, focusing on <code>pic_type</code>, <code>raw_type</code>, <code>pix_length</code>, <code>width</code>, and <code>height</code>. For F37, configure as (PIC_RAW, MIPI_RAW, RAW_BIT_10, 1920, 1080), and for IMX415, configure as (PIC_RAW, MIPI_RAW, RAW_BIT_12, 3840, 2160).</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/image-20220517211101610.png" alt="../../../../../../static/img/07_Advanced_development/03_multimedia_development/multimedia_samples/image-20220517211101610.png" class="img_ev3q"></p>
<ul>
<li><strong>Viewing YUV Images:</strong></li>
</ul>
<p>Configure options as per the steps shown, paying attention to <code>pic_type</code>, <code>yuv_type</code>, <code>width</code>, and <code>height</code>. For F37, configure as (PIC_YUV, YUV_NV12, 1920, 1080), and for IMX415, configure as (YUV_NV12, 3840, 2160).</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/image-20220517212105959.png" alt="image-20220517212105959" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="get_isp_data">get_isp_data Usage Guide<a href="#get_isp_data" class="hash-link" aria-label="Direct link to get_isp_data Usage Guide" title="Direct link to get_isp_data Usage Guide">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functionality">Functionality<a href="#functionality" class="hash-link" aria-label="Direct link to Functionality" title="Direct link to Functionality">​</a></h3>
<p>The following diagram illustrates the video data path for the X3M, with technical terms explained in the <a href="/rdk_doc/en/Advanced_development/multimedia_development/overview#terminology">Multimedia Development Overview - Terminology</a>.</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/image-20220517184132422.png" alt="image-20220517184132422" class="img_ev3q"></p>
<p>The <code>get_isp_data</code> function initializes the <code>sensor</code>, <code>MIPI CSI</code>, <code>SIF</code>, and <code>ISP</code> modules, enabling the retrieval of video frame data from the <code>ISP</code> module. It supports obtaining images in YUV format from the ISP.</p>
<p><code>get_isp_data</code> effectively aids users in debugging sensor and X3M ISP performance. After establishing a data flow from <code>sensor -&gt; SIF -&gt; ISP</code>, it facilitates the testing of other module functionalities.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="programming">Programming<a href="#programming" class="hash-link" aria-label="Direct link to Programming" title="Direct link to Programming">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="source-code-structure-1">Source Code Structure<a href="#source-code-structure-1" class="hash-link" aria-label="Direct link to Source Code Structure" title="Direct link to Source Code Structure">​</a></h4>
<p>The source code is located at <code>/app/multimedia_samples/get_isp_data</code>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── main.c                       # Main program, loads sensor list and provides command control</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Makefile			 # Build configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── module.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── module.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Readme.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sensor_handle.c              # Interface for sensor initialization and image retrieval from ISP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sensor_handle.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sensors			 # Sensor configuration, add new files for each new sensor in this directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── sensor_f37.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── sensor_imx415.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── sensors.lds</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compilation-1">Compilation<a href="#compilation-1" class="hash-link" aria-label="Direct link to Compilation" title="Direct link to Compilation">​</a></h4>
<p>The current code uses a Makefile for configuration. To compile and generate the <code>get_isp_data</code> program, navigate to the source code directory and execute:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cd /app/multimedia_samples/get_sif_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make clean # Clear the source code for a clean development environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... ... # Compilation output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_isp_data  main.c  main.o  Makefile  module.c  module.h  module.o  Readme.md  sensor_handle.c  sensor_handle.h  sensor_handle.o  sensors  sensors.lds</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-new-sensor-1">Adding a new sensor<a href="#adding-a-new-sensor-1" class="hash-link" aria-label="Direct link to Adding a new sensor" title="Direct link to Adding a new sensor">​</a></h4>
<p>If there is a new sensor that needs to be debugged, please refer to the source code files in the &quot;sensors&quot; directory and add a new sensor configuration accordingly.</p>
<p>Take F37 as an example to explain the key code:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/* </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Add sensor, mipi, sif dev, and isp parameter configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * The structure parameters have detailed comments in the code</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">set_sensor_param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;set_sensor_param\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Define sensor initialization attributes */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        snsinfo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SENSOR_1LANE_F37_30FPS_10BIT_LINEAR_INFO</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Define mipi initialization parameters */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mipi_attr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> MIPI_1LANE_SENSOR_F37_30FPS_10BIT_LINEAR_ATTR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Define dev initialization attributes */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        devinfo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DEV_ATTR_F37_LINEAR_BASE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Define pipe attributes */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pipeinfo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PIPE_ATTR_F37_LINEAR_BASE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    	</span><span class="token comment" style="color:#999988;font-style:italic">/* Define dis attributes */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    	disinfo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIS_ATTR_F37_BASE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    	</span><span class="token comment" style="color:#999988;font-style:italic">/* Define ldc attributes */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    	ldcinfo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> LDC_ATTR_F37_BASE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sensor_sif_dev_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><span class="token comment" style="color:#999988;font-style:italic">/* </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This function is called by the main program to register the sensor name and sensor parameter configuration interface when traversing the sensor module.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sensor_probe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* Find an empty position in sensor_lists */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ARRAY_SIZE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sensor_lists</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">strlen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sensor_lists</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sensor_tag</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ARRAY_SIZE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sensor_lists</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;sensor lists is full\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">strncpy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sensor_lists</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sensor_tag</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SENSOR_TAG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">strlen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SENSOR_TAG</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">strlen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SENSOR_TAG</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sensor_lists</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">func </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> set_sensor_param</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* Register the entry point of the sensor module, which will be used by the main program when traversing the sensor */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">SENSOR_MODULE_INSTALL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sensor_probe</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-usage-1">Function Usage<a href="#function-usage-1" class="hash-link" aria-label="Direct link to Function Usage" title="Direct link to Function Usage">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hardware-connection-1">Hardware Connection<a href="#hardware-connection-1" class="hash-link" aria-label="Direct link to Hardware Connection" title="Direct link to Hardware Connection">​</a></h4>
<p>The RDK X3 development board is connected to the Sensor module through the <code>mipi host</code> interface. Please connect it correctly according to the current sensor module model being debugged.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="program-deployment-1">Program Deployment<a href="#program-deployment-1" class="hash-link" aria-label="Direct link to Program Deployment" title="Direct link to Program Deployment">​</a></h4>
<p>After generating <code>get_isp_data</code> according to the above compilation process, execute the program and select the current sensor category that is connected to the development board correctly according to the prompt. For example, if the currently connected sensor is the <code>F37 sensor</code>, select 1.</p>
<p>If the initialization is successful, the first frame image (<code>pipe0_1920x1080_frame_001.yuv</code>) will be automatically saved in the directory where the program runs (you can check it by executing <code>ls -l pipe0_1920x1080_frame_*</code> after exiting the program), and the commands that the user can use will be printed. The running process is as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x get_isp_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./get_isp_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">D-Robotics Sensor Test Tools V1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">********************** Sensor Lists *************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        0 -- IMX415</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        1 -- F37</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*************************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Please select: 1 # Select sensor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... ... # A long string of initialization logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">normal pipe_id (0)type(11)frame_id(1)buf_index(0)w x h(1920x1080) data_type 11 img_format 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stride_size(2400) w x h1920 x 1080 size 2073600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pipe(0)dump normal yuv frame id(1),plane(1)size(2073600) # Get the first frame image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">filedump(pipe0_1920x1080_frame_001.yuv, size(2073600) is successed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time cost 63 ms </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dumpToFile yuv cost time 63 ms********************** Command Lists *************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  q     -- quit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  g     -- get one frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  l     -- get a set frames</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  h     -- print help message</span><br></span></code></pre></div></div>
<p>Command:</p>
<p><strong>Command explanation:</strong></p>
<ul>
<li>g: Get one frame image, supports inputting multiple &#x27;g&#x27; to continuously get images, for example, input &#x27;gggg&#x27;</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Command: g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">normal pipe_id (0)type(11)frame_id(4078)buf_index(5)w x h(1920x1080) data_type 11 img_format 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stride_size(2400) w x h1920 x 1080 size 2073600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pipe(0)dump normal yuv frame id(4078),plane(1)size(2073600)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">filedump(pipe0_1920x1080_frame_4078.yuv, size(2073600) is successed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time cost 63 ms </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dumpToFile yuv cost time 63 ms</span><br></span></code></pre></div></div>
<ul>
<li>l: Get 12 frames continuously, equivalent to inputting 12 &#x27;g&#x27;</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Command: l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">normal pipe_id (0)type(11)frame_id(4588)buf_index(3)w x h(1920x1080) data_type 11 img_format 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stride_size(2400) w x h1920 x 1080 size 2073600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pipe(0)dump normal yuv frame id(4588),plane(1)size(2073600)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">filedump(pipe0_1920x1080_frame_4588.yuv, size(2073600) is successed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time cost 56 ms </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... ... # Continuously printing frame data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dumpToFile yuv cost time 56 msnormal pipe_id (0)type(11)frame_id(4609)buf_index(7)w x h(1920x1080) data_type 11 img_format 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stride_size(2400) w x h1920 x 1080 size 2073600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pipe(0)dump normal yuv frame id(4609),plane(1)size(2073600)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">filedump(pipe0_1920x1080_frame_4609.yuv, size(2073600) is successed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time cost 57 ms </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dumpToFile yuv cost time 57 ms</span><br></span></code></pre></div></div>
<ul>
<li>q: Quit the program</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Command: Command: q</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">quit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.825912] [S0][V1]sif_video_streamoff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.826439] SIF close node 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.853045] [S0][V0]sif_video_streamoff SIF last process stream off </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.853922] [S0][V0]sif_video_streamoff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.855476] hobot_dmcfreq_target: dmcfreq-&gt;rate:2666000000, target_rate:2666000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.856460] buf:performance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.856460] , powersave_rate:2666000000, dmcfreq-&gt;pre_state:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.857610] [S0][V0]x3_sif_close SIF last process close </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.858301] SIF close node 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.858807] [isp_drv]: camera_sys_stream_off: camera_sys_stream_off success line 1549 dev_name port_0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.860006] [isp_drv:cam]: camera_fop_release: line 115 port 0 user_num 0  camera_cdev-&gt;start_num 0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.861229] vps mipi_host1: sensor1_mclk set(1) 0 as 24000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.861980] vps mipi_host1: sensor1_mclk set(0) 0 as 24000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.862741] vps mipi_host0: sensor0_mclk set(2) 0 as 24000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.863491] vps mipi_host0: sensor0_mclk set(1) 0 as 24000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  256.864241] vps mipi_host0: sensor0_mclk set(0) 0 as 24000000</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="explanation-of-running-effect">Explanation of Running Effect<a href="#explanation-of-running-effect" class="hash-link" aria-label="Direct link to Explanation of Running Effect" title="Direct link to Explanation of Running Effect">​</a></h4>
<p>After running the program, you will obtain a <code>yuv</code> image named <code>pipe0_1920x1080_frame_4609.yuv</code>.</p>
<p>Please use the <a href="http://archive.d-robotics.cc/downloads/hobotplayer/hobotplayerv.2.07.1.rar" target="_blank" rel="noopener noreferrer">hobotplayer</a> tool to view the image. The configuration of the image is as follows:</p>
<ul>
<li>View the YUV image</li>
</ul>
<p>Configure the options as shown below, paying attention to the configuration of <code>pic_type</code>, <code>yuv_type</code>, <code>width</code>, and <code>height</code> in the <code>file config</code>. F37 configuration is (PIC_YUV, YUV_NV12, 1920, 1080), IMX415 configuration is (YUV_NV12, 3840, 2160).</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/image-20220517212105959.png" alt="image-20220517212105959" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample_isp-user-manual">Sample_isp User Manual<a href="#sample_isp-user-manual" class="hash-link" aria-label="Direct link to Sample_isp User Manual" title="Direct link to Sample_isp User Manual">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-function-1">Program Function<a href="#program-function-1" class="hash-link" aria-label="Direct link to Program Function" title="Direct link to Program Function">​</a></h3>
<p>The <code>sample_isp</code> program initializes the <code>isp</code> image interface. Its main function is to dynamically set/get parameters for each <code>isp</code> image and return the test result.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-development-1">Program Development<a href="#program-development-1" class="hash-link" aria-label="Direct link to Program Development" title="Direct link to Program Development">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="source-code-structure-2">Source Code Structure<a href="#source-code-structure-2" class="hash-link" aria-label="Direct link to Source Code Structure" title="Direct link to Source Code Structure">​</a></h4>
<p>The source code is located at <code>/app/multimedia_samples/sample_isp</code>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── main.c			# Main program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Makefile			# Compilation makefile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── Readme.md			# Program instructions</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compilation-2">Compilation<a href="#compilation-2" class="hash-link" aria-label="Direct link to Compilation" title="Direct link to Compilation">​</a></h4>
<p>The current code is compiled through a Makefile.</p>
<p>Enter the source code directory and execute the following command to compile and generate <code>sample_isp</code>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cd /app/multimedia_samples/sample_isp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make clean # Clean the source code to maintain a clean code environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... ... # A lot of compilation prints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main.c  main.o  Makefile  sample_isp</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-usage-2">Function Usage<a href="#function-usage-2" class="hash-link" aria-label="Direct link to Function Usage" title="Direct link to Function Usage">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="program-deployment-2">Program Deployment<a href="#program-deployment-2" class="hash-link" aria-label="Direct link to Program Deployment" title="Direct link to Program Deployment">​</a></h4>
<p>After generating <code>sample_isp</code> according to the above compile process, run the program.</p>
<p>Note that the sensor program needs to be running before running this program. The sensor program can be run directly using <code>Sunrise_camera</code>. The process of running <code>sample_isp</code> is as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x sample_isp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ./sample_isp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">============================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APP: ./sample_isp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a: AE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b: AF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c: AWB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">d: BL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e: DEMOSAIC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f: SHARPEN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">g: GAMMA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">h: IRIDIX</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">i: CNR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">j: SINTER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k: TEMPER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">l: SCENE_MODES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">m: FIRMWARE STATE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">n: MODULE CONTROL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">o: REGISTER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p: LIBREG_AE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q: LIBREG_AWB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```r: LIBREG_AF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s: METERING AE(read only)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">t: METERING AWB(read only)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">u: METERING AF(read only)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v: METERING AE_5BIN(read only)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">w: METERING_DATA_TIME(read only)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x: SWITCH SCENE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A: CSC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">B: MESH SHADING</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C: MESH SHADING LUT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">D: RADIAL SHADING</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">E: RADIAL SHADING LUT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">F: IRIDIX STRENGTH LEVEL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">G: IDX_IRQ_SYNC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">H: IDX_AWB_ZONE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I: IDX_AF_ZONE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">L: IDX_AF_KERNEL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">M: IDX_AEROI_INFO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">N: IDX_LUMA_INFO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">O: IDX_AEPARAM_INFO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">J: IDX_AE5BIN_ZONE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K: IDX_AE_ZONE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P: IDX_AE_EX</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">y: Help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Q: Exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">============================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ISP_TEST&gt;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="command-explanation">Command Explanation:<a href="#command-explanation" class="hash-link" aria-label="Direct link to Command Explanation:" title="Direct link to Command Explanation:">​</a></h4>
<ul>
<li>
<p>a: Get/Set AE properties</p>
</li>
<li>
<p>b: Not supported in the example</p>
</li>
<li>
<p>c: Get/Set AWB properties</p>
</li>
<li>
<p>d: Get/Set BlackLevel properties</p>
</li>
<li>
<p>e: Get/Set Demosaic properties</p>
</li>
<li>
<p>f: Get/Set SHARPEN properties</p>
</li>
<li>
<p>g: Get/Set GAMMA properties</p>
</li>
<li>
<p>h: Get/Set IRIDIX properties</p>
</li>
<li>
<p>i: Get/Set CNR properties</p>
</li>
<li>
<p>j: Get/Set SINTER properties- k: Get/Set TEMPER attribute</p>
</li>
<li>
<p>l: Get/Set SCENE_MODES attribute</p>
</li>
<li>
<p>m: Get/Set FWSTATE attribute</p>
</li>
<li>
<p>n: Get/Set ModuleControl attribute</p>
</li>
<li>
<p>o: Get/Set Register register</p>
</li>
<li>
<p>p: Register AE callback interface</p>
</li>
<li>
<p>q: Register AWB callback interface</p>
</li>
<li>
<p>r: Register AF callback interface</p>
</li>
<li>
<p>s: Get AE statistics information</p>
</li>
<li>
<p>t: Get AWB statistics information</p>
</li>
<li>
<p>u: Get AF statistics information</p>
</li>
<li>
<p>v: Get AE_5BIN statistics information</p>
</li>
<li>
<p>w: Get the latest statistics information (by default, the code gets AWB, can be changed to AE or AF statistics information by passing parameters)</p>
</li>
<li>
<p>x: Switch ISP effect library (the so library needs to be in the same directory as the isp_test file)</p>
</li>
<li>
<p>A: Get/Set CSC attribute</p>
</li>
<li>
<p>B: Get/Set MESH_SHADING attribute</p>
</li>
<li>
<p>C: Get/Set MESH SHADING LUT attribute</p>
</li>
<li>
<p>D: Get/Set RADIAL SHADING attribute</p>
</li>
<li>
<p>E: Get/Set RADIAL SHADING LUT attribute</p>
</li>
<li>
<p>F: Get/Set IRIDIX STRENGTH LEVEL attribute</p>
</li>
<li>
<p>G: Get frame synchronization start/end time</p>
</li>
<li>
<p>H: Set AWB_ZONE attribute</p>
</li>
<li>
<p>I: Set AF_ZONE attribute</p>
</li>
<li>
<p>L: Get/Set AF_KERNEL_INFO attribute</p>
</li>
<li>
<p>M: Get/Set AEROI information- N: Get LUMA information</p>
</li>
<li>
<p>O: Get/set AEParam information</p>
</li>
<li>
<p>J: Set AE5BIN_ZONE attribute</p>
</li>
<li>
<p>K: Set AEZONE attribute</p>
</li>
<li>
<p>P: Get/set additional AE properties</p>
</li>
<li>
<p>y: Help information</p>
</li>
<li>
<p>Q: Exit program</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample_vps">sample_vps Instructions<a href="#sample_vps" class="hash-link" aria-label="Direct link to sample_vps Instructions" title="Direct link to sample_vps Instructions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-functionality">Program Functionality<a href="#program-functionality" class="hash-link" aria-label="Direct link to Program Functionality" title="Direct link to Program Functionality">​</a></h3>
<p>The <code>sample_vps</code> program uses multiple channels of a <code>vps grp</code> to perform operations such as cropping, rotation, scaling, etc. on YUV images, demonstrating the basic usage of <code>vps</code>. For more advanced image processing using <code>vps</code>, please refer to the <a href="/rdk_doc/en/Advanced_development/multimedia_development/video_processing">Video Processing</a> chapter.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-development-2">Program Development<a href="#program-development-2" class="hash-link" aria-label="Direct link to Program Development" title="Direct link to Program Development">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="source-code-structure-3">Source Code Structure<a href="#source-code-structure-3" class="hash-link" aria-label="Direct link to Source Code Structure" title="Direct link to Source Code Structure">​</a></h4>
<p>The source code is located at: <code>/app/multimedia_samples/sample_vps</code></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- 19201080.yuv      # Source file in NV12 format for playback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- main.c            # Main program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`-- Makefile          # Compilation makefile</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compilation-3">Compilation<a href="#compilation-3" class="hash-link" aria-label="Direct link to Compilation" title="Direct link to Compilation">​</a></h4>
<p>The current code is compiled using a Makefile.</p>
<p>To compile and generate the <code>sample_vps</code>, enter the source code directory and execute the following commands:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cd /app/multimedia_samples/sample_vps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make clean # Clean the source code to maintain a clean code environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... ... # A long printout of the compilation process</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">19201080.yuv  main.c  main.o  Makefile  sample_vps</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functionality-usage-program-deployment">Functionality Usage#### Program Deployment<a href="#functionality-usage-program-deployment" class="hash-link" aria-label="Direct link to Functionality Usage#### Program Deployment" title="Direct link to Functionality Usage#### Program Deployment">​</a></h3>
<p>Generate <code>sample_vps</code> according to the above compilation process, and make sure that <code>19201080.yuv</code> exists in the current directory. Then execute the program <code>./sample_vps</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="description-of-running-effects">Description of Running Effects<a href="#description-of-running-effects" class="hash-link" aria-label="Direct link to Description of Running Effects" title="Direct link to Description of Running Effects">​</a></h4>
<p>The <code>YUV</code> image is processed using <code>vps</code> for cropping, rotation, scaling, and other functions, and the corresponding processed <code>YUV</code> images are saved.</p>
<ul>
<li><code>grp_0_chn_1_out_1280_720.yuv</code> is the original image cropped to a resolution of <code>1280x720</code>;</li>
<li><code>grp_0_chn_2_out_1088_1920.yuv</code> is the image rotated 90 degrees from the original image;</li>
<li><code>grp_0_chn_3_out_960_540.yuv</code> is the original image resized to a resolution of <code>960x540</code>;</li>
<li><code>grp_0_chn_5_out_2880_1620.yuv</code> is the original image enlarged to a resolution of <code>2880x1620</code>;</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample_vps_zoom">sample_vps_zoom Instructions<a href="#sample_vps_zoom" class="hash-link" aria-label="Direct link to sample_vps_zoom Instructions" title="Direct link to sample_vps_zoom Instructions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-function-2">Program Function<a href="#program-function-2" class="hash-link" aria-label="Direct link to Program Function" title="Direct link to Program Function">​</a></h3>
<p>The <code>sample_vps_zoom</code> program uses the <code>ipu</code> and <code>pym</code> hardware modules of <code>vps</code> to zoom in on multiple areas of the <code>YUV</code> image, encode the processed <code>YUV</code> image into an <code>H264</code> video stream, and preview it directly using tools such as <code>MPC-BE</code>. It is similar to the <code>zoom</code> function in an electronic gimbal. The entire program&#x27;s <code>Pipeline</code> is shown in the following figure:</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/vps_zoom_pipeline.png" alt="Pipeline" class="img_ev3q"></p>
<p>As shown in the <code>Pipeline</code>, the program reads the <code>YUV</code> image through <code>vps0</code>, binds <code>vps0 chn1</code> and <code>vps1</code>, processes it through <code>crop</code> and enlargement using <code>ipu</code> and <code>pym</code>, and sends the data to <code>venc chn1</code> for <code>H264</code> encoding to achieve the <code>zoom</code> effect. At the same time, <code>vps0 chn2</code> is bound to <code>venc chn0</code> for <code>H264</code> encoding, and <code>vps0 chn3</code> is bound to <code>venc chn2</code> for <code>H264</code> encoding.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-development-3">Program Development<a href="#program-development-3" class="hash-link" aria-label="Direct link to Program Development" title="Direct link to Program Development">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="source-code-structure-4">Source Code Structure<a href="#source-code-structure-4" class="hash-link" aria-label="Direct link to Source Code Structure" title="Direct link to Source Code Structure">​</a></h4>
<p>The source code is located at: <code>/app/multimedia_samples/sample_vps_zoom</code></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- 19201080.yuv      # The NV12 format file used for feedback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- main.c            # Main program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`-- Makefile          # Compilation Makefile</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compilation-4">Compilation<a href="#compilation-4" class="hash-link" aria-label="Direct link to Compilation" title="Direct link to Compilation">​</a></h4>
<p>The current code is compiled and built through a Makefile configuration.</p>
<p>Go to the source code directory and execute the following command to compile and generate the <code>sample_vps_zoom</code> program:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cd /app/multimedia_samples/sample_vps_zoom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make clean # Clean the source code to keep a clean code environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... ... # A long segment of compilation printing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">19201080.yuv  main.c  main.o  Makefile  sample_vps_zoom</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-usage-program-deployment">Function Usage#### Program Deployment<a href="#function-usage-program-deployment" class="hash-link" aria-label="Direct link to Function Usage#### Program Deployment" title="Direct link to Function Usage#### Program Deployment">​</a></h3>
<p>Generate <code>sample_vps_zoom</code> according to the above compilation process, making sure that the <code>19201080.yuv</code> file exists in the current directory.</p>
<p>Execute the program <code>./sample_vps_zoom</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-effects-description">Running Effects Description<a href="#running-effects-description" class="hash-link" aria-label="Direct link to Running Effects Description" title="Direct link to Running Effects Description">​</a></h4>
<p>The <code>YUV</code> image is encoded into a smooth zoom <code>H264</code> stream by using the backfill method and the <code>ipu</code>, <code>pym</code>, <code>venc</code> modules. The effect is shown below.</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/vps_1_chn_5_venc_0.h264_20230523_143448.gif" alt="vps_1_chn_5_venc_0.h264_20230523_143448" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample_osd">sample_osd Instructions<a href="#sample_osd" class="hash-link" aria-label="Direct link to sample_osd Instructions" title="Direct link to sample_osd Instructions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-function-3">Program Function<a href="#program-function-3" class="hash-link" aria-label="Direct link to Program Function" title="Direct link to Program Function">​</a></h3>
<p>The <code>sample_osd</code> program is used to overlay timestamps and Chinese text <code>osd</code> on the <code>YUV</code> data output from the <code>vps</code> channel. For more advanced <code>osd</code> image processing, please refer to the <a href="/rdk_doc/en/Advanced_development/multimedia_development/region_processing">Region Processing</a> section.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-development-4">Program Development<a href="#program-development-4" class="hash-link" aria-label="Direct link to Program Development" title="Direct link to Program Development">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="source-code-structure-5">Source Code Structure<a href="#source-code-structure-5" class="hash-link" aria-label="Direct link to Source Code Structure" title="Direct link to Source Code Structure">​</a></h4>
<p>The source code is located at: <code>/app/multimedia_samples/sample_osd</code></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- 1280720.yuv       # Backfill using NV12 format file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- main.c            # Main program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- Makefile          # Compilation makefile</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compilation-5">Compilation<a href="#compilation-5" class="hash-link" aria-label="Direct link to Compilation" title="Direct link to Compilation">​</a></h4>
<p>The current code is compiled through a Makefile file configuration.</p>
<p>Enter the source code directory and execute the following command to compile and generate the <code>sample_osd</code> program.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cd sample/sample_osd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make clean # Clean the source code to maintain a clean code environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... ... # A long compilation log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1280720.yuv  main.c  main.o  Makefile  sample_osd</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-usage-3">Function Usage<a href="#function-usage-3" class="hash-link" aria-label="Direct link to Function Usage" title="Direct link to Function Usage">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="program-deploymentafter-generating-sample_osd-according-to-the-above-compilation-process-make-sure-that-1280720yuv-exists-in-the-current-directory-and-then-execute-sample_osd">Program DeploymentAfter generating <code>sample_osd</code> according to the above compilation process, make sure that <code>1280720.yuv</code> exists in the current directory, and then execute <code>sample_osd</code>.<a href="#program-deploymentafter-generating-sample_osd-according-to-the-above-compilation-process-make-sure-that-1280720yuv-exists-in-the-current-directory-and-then-execute-sample_osd" class="hash-link" aria-label="Direct link to program-deploymentafter-generating-sample_osd-according-to-the-above-compilation-process-make-sure-that-1280720yuv-exists-in-the-current-directory-and-then-execute-sample_osd" title="Direct link to program-deploymentafter-generating-sample_osd-according-to-the-above-compilation-process-make-sure-that-1280720yuv-exists-in-the-current-directory-and-then-execute-sample_osd">​</a></h4>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-effect-description">Running Effect Description<a href="#running-effect-description" class="hash-link" aria-label="Direct link to Running Effect Description" title="Direct link to Running Effect Description">​</a></h3>
<p>The <code>YUV</code> image output by the <code>vps</code> channel after overlaying <code>osd</code> is shown in the following figure:</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/image-20220517151700.png" alt="Osd" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample_video_codec">Usage of sample video codec<a href="#sample_video_codec" class="hash-link" aria-label="Direct link to Usage of sample video codec" title="Direct link to Usage of sample video codec">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-functions">Program Functions<a href="#program-functions" class="hash-link" aria-label="Direct link to Program Functions" title="Direct link to Program Functions">​</a></h3>
<ul>
<li>
<p><code>sample_vdec_basic</code> implements the basic decoding function, reads local <code>H264</code>/<code>H265</code>/<code>MJPEG</code> files, decodes and saves the <code>NV12</code> result.</p>
</li>
<li>
<p><code>sample_venc_basic</code> implements the basic encoding function, reads <code>NV12</code> images, encodes them into <code>H264</code> (or <code>H265</code> or <code>MJPEG</code>), and saves them as local files.</p>
</li>
<li>
<p><code>sample_vdec_two_channel</code> is targeted at scenes that require decoding multiple channels at the same time. It adds a decoding channel on the basis of <code>sample_vdec_basic</code> to achieve dual-channel decoding. It reads local <code>H264</code>/<code>H265</code>/<code>MJPEG</code> files and decodes them concurrently, saving them as <code>NV12</code> files separately.</p>
</li>
<li>
<p><code>sample_venc_two_channel</code> is targeted at scenes that require encoding multiple channels at the same time. It adds an encoding channel on the basis of <code>sample_venc_basic</code> to achieve dual-channel encoding. It reads local <code>NV12</code> files and encodes them concurrently, saving them as <code>H264</code> (or <code>H265</code> or <code>MJPEG</code>).</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-development-5">Program Development<a href="#program-development-5" class="hash-link" aria-label="Direct link to Program Development" title="Direct link to Program Development">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="source-code-structure-6">Source Code Structure<a href="#source-code-structure-6" class="hash-link" aria-label="Direct link to Source Code Structure" title="Direct link to Source Code Structure">​</a></h4>
<p>The source code is located at: <code>/app/multimedia_samples/sample_video_codec</code></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── example_vdec_basic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── example_vdec_two_channel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── example_venc_basic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── example_venc_two_channel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Makefile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sample_vdec_basic.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sample_vdec_two_channel.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sample_venc_basic.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── sample_venc_two_channel.c</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compilation-6">Compilation<a href="#compilation-6" class="hash-link" aria-label="Direct link to Compilation" title="Direct link to Compilation">​</a></h4>
<p>The current code is configured to compile through a Makefile.</p>
<p>Enter the source code directory and execute the following command to compile and generate <code>sample_venc_basic</code>, <code>sample_vdec_basic</code>, <code>sample_vdec_two_channel</code>, and <code>sample_venc_two_channel</code> programs.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cd /app/multimedia_samples/sample_video_codec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make clean # Clean the source code to maintain a clean code environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make... ... # A long compilation printout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example_vdec_basic        example_venc_basic        Makefile   sample_vdec_basic    sample_vdec_two_channel    sample_venc_basic    sample_venc_two_channel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example_vdec_two_channel  example_venc_two_channel  README.md  sample_vdec_basic.c  sample_vdec_two_channel.c  sample_venc_basic.c  sample_venc_two_channel.c</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-deployment-3">Program Deployment<a href="#program-deployment-3" class="hash-link" aria-label="Direct link to Program Deployment" title="Direct link to Program Deployment">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample_vdec_basic">sample_vdec_basic<a href="#sample_vdec_basic" class="hash-link" aria-label="Direct link to sample_vdec_basic" title="Direct link to sample_vdec_basic">​</a></h4>
<p>After generating the <code>sample_vdec_basic</code> program using the compilation process described above,</p>
<p>execute <code>./sample_vdec_basic -w width -h height -t ecode_type -f file</code></p>
<p>where width represents the number of pixels in the image&#x27;s width,</p>
<p>height represents the pixel format in the image&#x27;s height,</p>
<p>encode_type can be h264\h265\mjpeg,</p>
<p>and file is the name of the file to be decoded.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample_venc_basic">sample_venc_basic<a href="#sample_venc_basic" class="hash-link" aria-label="Direct link to sample_venc_basic" title="Direct link to sample_venc_basic">​</a></h4>
<p>After generating the <code>sample_venc_basic</code> program using the compilation process described above,</p>
<p>execute <code>./sample_venc_basic -w width -h height -t ecode_type -f file0 -g file1</code></p>
<p>where width represents the number of pixels in the image&#x27;s width,</p>
<p>height represents the pixel format in the image&#x27;s height,</p>
<p>ecode_type can be h264\h265\mjpeg,</p>
<p>file0 is the name of the file to be encoded and it needs to be in NV12 format,</p>
<p>file1 is the name of the file to be encoded and it needs to be in NV12 format. Its width and height should be the same as file0.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample_vdec_two_channel">sample_vdec_two_channel<a href="#sample_vdec_two_channel" class="hash-link" aria-label="Direct link to sample_vdec_two_channel" title="Direct link to sample_vdec_two_channel">​</a></h4>
<p>After generating the <code>sample_vdec_two_channel</code> program using the compilation process described above,</p>
<p>execute <code>./sample_vdec_two_channel -w width -h height -t ecode_type -f file</code></p>
<p>where width represents the number of pixels in the image&#x27;s width,</p>
<p>height represents the pixel format in the image&#x27;s height,</p>
<p>ecode_type can be h264\h265\mjpeg.#### sample_venc_two_channel</p>
<p>After generating the <code>sample_venc_two_channel</code> program according to the compilation process above,</p>
<p>Execute <code>./sample_venc_two_channel -w width -h height -t ecode_type -f file0 -g file1</code></p>
<p>Where <code>width</code> is the number of pixels in the image width,</p>
<p><code>height</code> is the pixel format contained in the image height,</p>
<p><code>ecode_type</code> can be h264\h265\mjpeg,</p>
<p><code>file0</code> is the file name to be encoded and needs to be in NV12 format,</p>
<p><code>file1</code> is the file name to be encoded and needs to be in NV12 format, and its <code>width</code> and <code>height</code> need to be the same as <code>file0</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-effect-description-1">Running Effect Description<a href="#running-effect-description-1" class="hash-link" aria-label="Direct link to Running Effect Description" title="Direct link to Running Effect Description">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample_vdec_basic-1">sample_vdec_basic<a href="#sample_vdec_basic-1" class="hash-link" aria-label="Direct link to sample_vdec_basic" title="Direct link to sample_vdec_basic">​</a></h4>
<p>Generates <code>decode.nv12</code> in the current running directory, the content of this file is updated with the decoding content.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample_venc_basic-1">sample_venc_basic<a href="#sample_venc_basic-1" class="hash-link" aria-label="Direct link to sample_venc_basic" title="Direct link to sample_venc_basic">​</a></h4>
<p>Generates <code>sample_venc.h264/sample_venc.h265/sample_venc.jpg</code> in the current running directory. The H264/H265 files show alternative display of <code>file1</code> and <code>file2</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample_vdec_two_channel-1">sample_vdec_two_channel<a href="#sample_vdec_two_channel-1" class="hash-link" aria-label="Direct link to sample_vdec_two_channel" title="Direct link to sample_vdec_two_channel">​</a></h4>
<p>Generates <code>sample_decode_ch0.nv12</code> and <code>sample_decode_ch1.nv12</code> in the current running directory, the content of these files is updated with the decoding content.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample_venc_two_channel">sample_venc_two_channel<a href="#sample_venc_two_channel" class="hash-link" aria-label="Direct link to sample_venc_two_channel" title="Direct link to sample_venc_two_channel">​</a></h4>
<p>Generates <code>sample_venc_ch0.h264(sample_venc_ch0.h265/sample_venc_ch0.jpg)</code> and <code>sample_venc_ch1.h264(sample_venc_ch1.h265/sample_venc_ch1.jpg)</code> in the current running directory. The H264/H265 files show alternative display of <code>file1</code> and <code>file2</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample_vot">sample_vot Usage Instructions<a href="#sample_vot" class="hash-link" aria-label="Direct link to sample_vot Usage Instructions" title="Direct link to sample_vot Usage Instructions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-function-4">Program Function<a href="#program-function-4" class="hash-link" aria-label="Direct link to Program Function" title="Direct link to Program Function">​</a></h3>
<p>The <code>sample_vot program</code> initializes the <code>VOT</code> module and implements the function of reading an nv12 image data frame from the current directory and sending it to the <code>VOT</code> bt1120 output display.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-development-6">Program Development<a href="#program-development-6" class="hash-link" aria-label="Direct link to Program Development" title="Direct link to Program Development">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="source-code-structure-7">Source Code Structure<a href="#source-code-structure-7" class="hash-link" aria-label="Direct link to Source Code Structure" title="Direct link to Source Code Structure">​</a></h4>
<p>The source code is located in:<code>/app/multimedia_samples/sample_vot</code></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── 1280_720yuv8.yuv                      # Playback using 720P NV12 format file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── 1920_1080yuv8.yuv                     # Playback using 1080P NV12 format file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Makefile                               # Compile makefile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Readme.md                              # Program instructions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── vot.c                                  # Main program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compilation-7">Compilation<a href="#compilation-7" class="hash-link" aria-label="Direct link to Compilation" title="Direct link to Compilation">​</a></h3>
<p>The current code is compiled through a Makefile.</p>
<p>Enter the source code directory and execute the following command to compile and generate <code>sample_vot</code>.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /app/multimedia_samples/sample_vot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make clean # Clean the source code to maintain a clean code environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... ... # A large block of compilation prints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1280_720yuv8.yuv  1920_1080yuv8.yuv  Makefile  Readme.md  sample_vot  vot.c  vot.o</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-usage-4">Function Usage<a href="#function-usage-4" class="hash-link" aria-label="Direct link to Function Usage" title="Direct link to Function Usage">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="program-deployment-4">Program Deployment<a href="#program-deployment-4" class="hash-link" aria-label="Direct link to Program Deployment" title="Direct link to Program Deployment">​</a></h4>
<p>Compile the code according to the above compilation process to generate <code>sample_vot</code></p>
<p>Execute the program <code>./sample_vot 1080P30</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x sample_vot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@x3sdbx3-samsung2G-3200:/userdata# ./sample_vot 1080P60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[   26.051955] channel id is 0, enable is 0, reg value is 0x4ef00f.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[   26.052744] channel id is 1, enable is 0, reg value is 0x4ef00f.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[   26.053520] channel id is 2, enable is 0, reg value is 0x4ef00f.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[   26.054339] channel id is 3, enable is 0, reg value is 0x4ef00f.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stLayer width:1920[   26.055263] channel id is 0, enable is 1, reg value is 0x14ef00f.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stLayer height:1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">libiar: hb_disp_set_timing done!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stChnAttr priority :2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stChnAttr src width :1920</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stChnAttr src height :1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stChnAttr s32X :0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stChnAttr s32Y :0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stChnAttr u32DstWidth :1920</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stChnAttr u32DstHeight :1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[   26.056165] iar_output_stream.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stCrop width :1920</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stCrop height :1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[   26.059304] channel id is 0, enable is 1, reg value is 0x14ef00f.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">framesize:3110400</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(Note: If using X3 SDB board, the supported parameters are only 1080P60/1080P30. If using the sil902x&#x27;s bt1120 to hdmi chip, the parameters can be as follows:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	1080P60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	1080P59.94</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	1080P50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	1080P30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	1080P29.97</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	1080P25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	1080I60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	1080I59.94</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	1080I50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	720P60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	720P59.94</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	720P50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	720P29.97)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-effect-description-2">Running Effect Description<a href="#running-effect-description-2" class="hash-link" aria-label="Direct link to Running Effect Description" title="Direct link to Running Effect Description">​</a></h4>
<p>The program reads the <code>1920_1080yuv8.yuv</code> file into memory and sends the data to the <code>bt1120</code> interface of the <code>VOT</code> module through the interface, and then outputs the <code>hdmi</code> effect to the display device through the <code>hdmi</code> conversion chip as shown in the following figure.</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/20220520-163716.jpg" alt="" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample_lcd">sample_lcd Usage Instructions<a href="#sample_lcd" class="hash-link" aria-label="Direct link to sample_lcd Usage Instructions" title="Direct link to sample_lcd Usage Instructions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-function-5">Program Function<a href="#program-function-5" class="hash-link" aria-label="Direct link to Program Function" title="Direct link to Program Function">​</a></h3>
<p>The <code>sample_lcd program</code> initializes the <code>VOT</code> module and reads one frame of NV12 picture data from the current directory and sends it to <code>VOT</code>&#x27;s <code>midi-dsi</code> output to display on the lcd screen.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-development-7">Program Development<a href="#program-development-7" class="hash-link" aria-label="Direct link to Program Development" title="Direct link to Program Development">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="source-code-structure-8">Source Code Structure<a href="#source-code-structure-8" class="hash-link" aria-label="Direct link to Source Code Structure" title="Direct link to Source Code Structure">​</a></h4>
<p>The source code is located at: <code>/app/multimedia_samples/sample_lcd</code></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── 720x1280.yuv	# NV12 format file for playback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Makefile		# Compilation makefile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Readme.md		# Program instructions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── vot.c			# Main program</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compilationthe-current-code-is-compiled-and-configured-through-a-makefile-file">CompilationThe current code is compiled and configured through a Makefile file.<a href="#compilationthe-current-code-is-compiled-and-configured-through-a-makefile-file" class="hash-link" aria-label="Direct link to CompilationThe current code is compiled and configured through a Makefile file." title="Direct link to CompilationThe current code is compiled and configured through a Makefile file.">​</a></h4>
<p>Go to the source code directory and execute the following commands to compile and generate the <code>sample_lcd</code> program:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cd /app/multimedia_samples/sample_lcd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make clean # Clean the source code to maintain a clean code environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... ... # A long compilation output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">720x1280.yuv  vot.c  vot.o  Makefile  sample_lcd</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-usage-5">Function Usage<a href="#function-usage-5" class="hash-link" aria-label="Direct link to Function Usage" title="Direct link to Function Usage">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="program-deployment-5">Program Deployment<a href="#program-deployment-5" class="hash-link" aria-label="Direct link to Program Deployment" title="Direct link to Program Deployment">​</a></h4>
<p>Follow the above compilation process to generate the <code>sample_lcd</code> program and ensure that the <code>720x1280.yuv</code> file exists in the current directory.</p>
<p>Run the program <code>./sample_lcd</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x sample_lcd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ./sample_lcd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@x3sdbx3-samsung2G-3200:/userdata# ./sample_lcd </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">libiar: hb_disp_set_timing done!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VOT_SetChnAttr 0: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VOT_EnableChn: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VOT_EnableChn: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">framesize:1382400</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-effect-explanation">Running Effect Explanation<a href="#running-effect-explanation" class="hash-link" aria-label="Direct link to Running Effect Explanation" title="Direct link to Running Effect Explanation">​</a></h4>
<p>The program reads the <code>720x1280.yuv</code> file into memory and sends the data to the <code>VOT</code> module&#x27;s <code>midi-dsi</code> interface through an interface, and then displays it on the <code>lcd</code> screen device as shown in the following image.</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/20220520-161120.jpg" alt="" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample_usb_cam_4k60">Usage Instructions for <code>sample_usb_cam_4k60</code><a href="#sample_usb_cam_4k60" class="hash-link" aria-label="Direct link to sample_usb_cam_4k60" title="Direct link to sample_usb_cam_4k60">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-function-6">Program Function<a href="#program-function-6" class="hash-link" aria-label="Direct link to Program Function" title="Direct link to Program Function">​</a></h3>
<p>The <code>sample_usb_cam_4k60</code> program initializes the <code>sensor</code>, <code>MIPI CSI</code>, <code>SIF</code>, <code>ISP</code>, <code>VENC</code>, and <code>USB</code> modules, achieves real-time data acquisition from the sensor, and encodes the output through the encoder. It transfers the video to the PC for preview through the USB module.</p>
<p>The software architecture diagram is as follows:</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/4k_60_usb_pipeline.png" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-usage-6">Function Usage<a href="#function-usage-6" class="hash-link" aria-label="Direct link to Function Usage" title="Direct link to Function Usage">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="program-deploymentcopy-the-directory-samplesample_usb_cam_4k60out-to-the-userdata-directory-on-the-board-using-tools-like-winscp-then-enter-the-userdataout-directory-on-the-board-and-execute-the-sh-run_usb_cam_imx415sh-script-to-run-the-program-the-execution-result-is-as-follows">Program DeploymentCopy the directory <code>sample/sample_usb_cam_4k60/out</code> to the <code>/userdata</code> directory on the board using tools like WinSCP. Then, enter the <code>/userdata/out</code> directory on the board and execute the <code>sh run_usb_cam_imx415.sh</code> script to run the program. The execution result is as follows:<a href="#program-deploymentcopy-the-directory-samplesample_usb_cam_4k60out-to-the-userdata-directory-on-the-board-using-tools-like-winscp-then-enter-the-userdataout-directory-on-the-board-and-execute-the-sh-run_usb_cam_imx415sh-script-to-run-the-program-the-execution-result-is-as-follows" class="hash-link" aria-label="Direct link to program-deploymentcopy-the-directory-samplesample_usb_cam_4k60out-to-the-userdata-directory-on-the-board-using-tools-like-winscp-then-enter-the-userdataout-directory-on-the-board-and-execute-the-sh-run_usb_cam_imx415sh-script-to-run-the-program-the-execution-result-is-as-follows" title="Direct link to program-deploymentcopy-the-directory-samplesample_usb_cam_4k60out-to-the-userdata-directory-on-the-board-using-tools-like-winscp-then-enter-the-userdataout-directory-on-the-board-and-execute-the-sh-run_usb_cam_imx415sh-script-to-run-the-program-the-execution-result-is-as-follows">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@x3sdbx3-samsung2G-3200:/userdata/out# cd /userdata/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@x3sdbx3-samsung2G-3200:/userdata/out# sh run_usb_cam_imx415.sh </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">run_usb_cam_imx415.sh: line 17: can&#x27;t create /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/all: Permission denied</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">run_usb_cam_imx415.sh: line 18: can&#x27;t create /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/all: Permission denied</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; g1 is exist. delete it!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Detecting platform:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> board : Hobot XJ3 SOC SDB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> udc   : b2000000.dwc3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stopping the USB gadget</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usb-gadget is not running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Detecting platform:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> board : Hobot XJ3 SOC SDB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> udc   : b2000000.dwc3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">show user config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USB_VID: 0x1d6b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USB_PID: 0x0102</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SERIAL: 0x6856e824</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MANUF: hobot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PRODUCT: xj3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USE_UVC: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USE_HID: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USE_UAC1: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USE_UAC2: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USE_ADB: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USE_MSD: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USE_ACM: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USE_RNDIS: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USE_ECM: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Creating the USB gadget</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Loading composite module</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Creating gadget directory g_comp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">init configfs...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Setting Vendor and Product ID&#x27;s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">single function gadget</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Setting English strings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Creating Config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Init functions...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">funciton_init, but do nothing, please init on demand</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bind functions...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bind functions according to .usb-config file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bind uvc...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Creating UVC gadget functionality : uvc.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```sh: 0: unknown operand</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pre run userspace daemons(eg. adb)...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">waiting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Binding USB Device Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Run some userspace daemons(eg. usb_camera)...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usb-gadget start succeed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Open config file ./config/vin_vps_config_usb_cam.json success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Open config file1 ./config/vin_vps_config_usb_cam.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Can not find key: tailWeight</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Can not find key: manualTimeCount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Can not find key: autoTimeCount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Can not find key: manualAeM1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">imx415_init_3840x2160_60_fps_linear_setting OK!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hb_vps_init grp_attr.maxW = 3840, grp_attr.maxH = 2160</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chn_attr.width = 3840,chn_attr.height = 2160</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set ipu chn Attr ok: GrpId = 0, chn_id = 2, chn_attr.enMirror = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start grp ok: grp_id = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us0 factor:0 x:0 y:0 w:968 h:544</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us1 factor:0 x:0 y:0 w:968 h:544</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us2 factor:0 x:0 y:0 w:968 h:544</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us3 factor:0 x:0 y:0 w:968 h:544</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us4 factor:0 x:0 y:0 w:968 h:544</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us5 factor:0 x:0 y:0 w:968 h:544</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us0 factor:0 x:0 y:0 w:968 h:544</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us1 factor:0 x:0 y:0 w:968 h:544</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us2 factor:0 x:0 y:0 w:968 h:544</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us3 factor:0 x:0 y:0 w:968 h:544</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us4 factor:0 x:0 y:0 w:968 h:544</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us5 factor:0 x:0 y:0 w:968 h:544</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us0 factor:0 x:0 y:0 w:648 h:364</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us1 factor:0 x:0 y:0 w:648 h:364</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us2 factor:0 x:0 y:0 w:648 h:364</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us3 factor:0 x:0 y:0 w:648 h:364</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us4 factor:0 x:0 y:0 w:648 h:364</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vps1 us5 factor:0 x:0 y:0 w:648 h:364</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">try to construct empty ring queue##function uvc_gadget_init in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udc_find_video_device g_webcam</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function name not matched. g_comp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:g_webcam</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udc_find_video_device g_comp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using uvc device: /dev/video8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">###uvc_gadget_init###</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using uvc device: /dev/video8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">width: 1280height: 720</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">format: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">io_method: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bulk_mode: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nbufs: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mult: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">burst: 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">speed: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mult_alts: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">h264_quirk: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maxpkt_quirk: 3072</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uvc device is dwc3-gadget on bus gadget</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uvc open succeeded, file descriptor = 22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uvc_size=4, maxpkt_size=3072</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">##function uvc_gadget_init succeed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">##function uvc_gadget_start in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">##function uvc_gadget_start succeed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">##function uvc_loop in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dev-&gt;mask (0x0), entity_id(1), setup_ops((nil)), app doesn&#x27;t care</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 01 req 86 cs 04)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">send real error code last prepared(06)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 00 req 81 cs 02)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dev-&gt;mask (0x0), entity_id(1), setup_ops((nil)), app doesn&#x27;t care</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 01 req 86 cs 09)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">send real error code last prepared(06)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 00 req 81 cs 02)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dev-&gt;mask (0x0), entity_id(1), setup_ops((nil)), app doesn&#x27;t care</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 01 req 86 cs 0b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">send real error code last prepared(06)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 00 req 81 cs 02)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dev-&gt;mask (0x0), entity_id(1), setup_ops((nil)), app doesn&#x27;t care</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 01 req 86 cs 0f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">send real error code last prepared(06)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 00 req 81 cs 02)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dev-&gt;mask (0x0), entity_id(2), setup_ops((nil)), app doesn&#x27;t care</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 02 req 86 cs 02)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">send real error code last prepared(06)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 00 req 81 cs 02)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dev-&gt;mask (0x0), entity_id(2), setup_ops((nil)), app doesn&#x27;t care</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 02 req 86 cs 03)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">send real error code last prepared(06)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 00 req 81 cs 02)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dev-&gt;mask (0x0), entity_id(2), setup_ops((nil)), app doesn&#x27;t care</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 02 req 86 cs 06)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">send real error code last prepared(06)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 00 req 81 cs 02)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dev-&gt;mask (0x0), entity_id(2), setup_ops((nil)), app doesn&#x27;t care</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 02 req 86 cs 07)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">send real error code last prepared(06)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control request (entity_id 00 req 81 cs 02)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p><strong>Performance Explanation</strong></p>
<p>By using Potplayer, select UVC Camera, set the resolution to H264 3840x2160P 60, and once the device is opened, you can play the UVC video stream. The output from the x3 side appears as shown below:</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/20220523-173933.png" alt="" class="img_ev3q"></p>
<p>A screenshot of the running Potplayer is as follows:</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/20220527131109.png" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="program-development-8">Program Development<a href="#program-development-8" class="hash-link" aria-label="Direct link to Program Development" title="Direct link to Program Development">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="module-division">Module Division<a href="#module-division" class="hash-link" aria-label="Direct link to Module Division" title="Direct link to Module Division">​</a></h4>
<table><thead><tr><th><strong>Module</strong></th><th><strong>Directory</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>Header Files</td><td>inc</td><td>Sensor header files, JSON header files, public utility interface header files, VIO common dependency headers</td></tr><tr><td>VIO Source Code</td><td>src</td><td>Sensor source code files, JSON configuration parsing source files, public utility interface source files, system VIO common interface source files</td></tr><tr><td>Main Program</td><td>sample_usb_cam.cpp</td><td>Entry point for the main function</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="top-level-source-code-structure">Top-level Source Code Structure<a href="#top-level-source-code-structure" class="hash-link" aria-label="Direct link to Top-level Source Code Structure" title="Direct link to Top-level Source Code Structure">​</a></h5>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Makefile							# CMakeLists file for the main program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── vin_vps_config_usb_cam.json			# IMX415 sensor configuration file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── inc								</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── camera									# Sensor dependency header files, modify this file for new sensors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── json									# JSON library header files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── utils									# Public header files for build dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── vio										# X3M VIO dependency header files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── jsoncpp									# Dependent JSON library</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── libguvc.so									# 4k60 USB cam dependent library</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── libimx415.so								# 4k60 sensor driver library</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── README.md									# Program documentation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── run_usb_cam_imx415.sh						# Script to run the program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── sample_usb_cam.cpp							# Main program code				</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── camera									# Sensor driver configuration code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── utils									# Public source code for build dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── vio										# X3M VIO dependency source files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── usb-gadget.sh								# Script to load the 4k60 USB cam driver</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="header-file-structure">Header File Structure<a href="#header-file-structure" class="hash-link" aria-label="Direct link to Header File Structure" title="Direct link to Header File Structure">​</a></h5>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── camera.h						# Sensor dependency header file, update for new sensors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── json								# Open-source JSON library header files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── allocator.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── assertions.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── autolink.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── config.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── features.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── forwards.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── json.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── reader.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── value.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── version.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── writer.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── utils		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── utils.h							# Ringbuffer definition and public interface for dumping images and videos to files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── yuv2yuv.h						# Standard interface for YUV format conversion using neon acceleration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── vio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── vio_cfg.h						# JSON configuration parsing header file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── vio_cfg_type.h					# JSON configuration attribute value header file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── vio_log.h						# Logging control header file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── vio_sys.h						# VP initialization, deinitialization, system VIO module binding interfaces header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── vio_venc.h						# X3 System Encoding module initialization, deinitialization, start-stop, data input/output processing interfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── vio_video.h						# Video format enumeration and other common interfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── vio_vin.h						# VIN structure definition, initialization, deinitialization, start-stop, data processing interfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── vio_vps.h						# VPS initialization, deinitialization, start-stop, data processing interfaces</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="source-code-structure-9">Source Code Structure<a href="#source-code-structure-9" class="hash-link" aria-label="Direct link to Source Code Structure" title="Direct link to Source Code Structure">​</a></h5>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── camera				# Sensor dependency source code files, add corresponding sensor source code files for new sensors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── camera_base.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── camera_imx415.cpp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── utils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── utils.cpp		# Public source code file for dumping images and videos to files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── yuv2yuv.c		# Standard source code file for YUV format conversion using neon acceleration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── vio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── vio_cfg.cpp		# JSON configuration parsing source code file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── vio_sys.cpp		# VP initialization, deinitialization, system VIO module binding interfaces source code file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── vio_venc.cpp	# X3 System Encoding module initialization, deinitialization, start-stop, data input/output processing interfaces source code file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── vio_video.cpp	# Video format enumeration and other common interfaces source code file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── vio_vin.cpp		# VIN initialization, deinitialization, start-stop, data processing interfaces source code file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── vio_vps.cpp		# VPS initialization, deinitialization, start-stop, data processing interfaces source code file</span><br></span></code></pre></div></div>
<p>The flowchart of the program startup process is as follows:</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/4k60usbcam.drawio.png" alt="" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compilation-8">Compilation<a href="#compilation-8" class="hash-link" aria-label="Direct link to Compilation" title="Direct link to Compilation">​</a></h4>
<p>The current code is compiled through a Makefile.</p>
<p>The multimedia header files and library files that the code depends on are located respectively in the appsdk directory and the root directory of the system/rootfs_yocto/root. When compiling, make sure that these two dependency directories exist.</p>
<p>After installing the cross-compilation toolchain, execute the make command to compile and generate the sample_usb_cam program.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd sample/sample_usb_cam_4k60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make clean # Clean the source code to keep a clean code environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... ... # A lot of compilation prints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Makefile  sample_usb_cam  inc  README.md  vin_vps_config_usb_cam.json  libguvc.so  libimx415.so  sample_usb_cam.cpp  sample_usb_cam.d  src  lib  run_usb_cam_imx415.sh  sample_usb_cam.obj </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usb-gadget.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make install # Install the generated product to the out directory</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-new-sensor-2">Adding a new sensor<a href="#adding-a-new-sensor-2" class="hash-link" aria-label="Direct link to Adding a new sensor" title="Direct link to Adding a new sensor">​</a></h4>
<p>If there is a new sensor that needs debugging, refer to the source code files under the src/camera directory. Add a new sensor configuration accordingly.</p>
<p>Taking the camera_imx415.cpp file for IMX415 as an example, the key code needs to add new sensor structure variables: MIPI_SENSOR_INFO_S, MIPI_ATTR_S, VIN_DEV_ATTR_S, VIN_PIPE_ATTR_S, VIN_DIS_ATTR_S, VIN_LDC_ATTR_S.</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/20220525-112411.jpg" alt="" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/20220525-112559.png" alt="" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/20220525-112809.png" alt="" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/20220525-112844.png" alt="" class="img_ev3q"></p>
<p>At the same time, in inc/camera/camera.h, extern the newly added sensor variables, as shown in the example of IMX415:</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/multimedia_samples/20220525-113456.png" alt="" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-08-08T13:48:14.000Z" itemprop="dateModified">Aug 8, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rdk_doc/en/Advanced_development/multimedia_development/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">7.3.1 System Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rdk_doc/en/Advanced_development/multimedia_development/system_control"><div class="pagination-nav__sublabel">Next </div><div class="pagination-nav__label">7.3.3 System Control</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#get_sif_data" class="table-of-contents__link toc-highlight">Instructions for using get_sif_data</a><ul><li><a href="#program-function" class="table-of-contents__link toc-highlight">Program Function</a></li><li><a href="#program-development" class="table-of-contents__link toc-highlight">Program Development</a><ul><li><a href="#source-code-structure" class="table-of-contents__link toc-highlight">Source Code Structure</a></li><li><a href="#compilation" class="table-of-contents__link toc-highlight">Compilation</a></li><li><a href="#adding-a-new-sensor" class="table-of-contents__link toc-highlight">Adding a new sensor</a></li></ul></li><li><a href="#function-usage" class="table-of-contents__link toc-highlight">Function Usage</a><ul><li><a href="#hardware-connection" class="table-of-contents__link toc-highlight">Hardware Connection</a></li><li><a href="#program-deployment" class="table-of-contents__link toc-highlight">Program Deployment</a></li><li><a href="#running-results-explanation" class="table-of-contents__link toc-highlight">Running Results Explanation</a></li></ul></li></ul></li><li><a href="#get_isp_data" class="table-of-contents__link toc-highlight">get_isp_data Usage Guide</a><ul><li><a href="#functionality" class="table-of-contents__link toc-highlight">Functionality</a></li><li><a href="#programming" class="table-of-contents__link toc-highlight">Programming</a><ul><li><a href="#source-code-structure-1" class="table-of-contents__link toc-highlight">Source Code Structure</a></li><li><a href="#compilation-1" class="table-of-contents__link toc-highlight">Compilation</a></li><li><a href="#adding-a-new-sensor-1" class="table-of-contents__link toc-highlight">Adding a new sensor</a></li></ul></li><li><a href="#function-usage-1" class="table-of-contents__link toc-highlight">Function Usage</a><ul><li><a href="#hardware-connection-1" class="table-of-contents__link toc-highlight">Hardware Connection</a></li><li><a href="#program-deployment-1" class="table-of-contents__link toc-highlight">Program Deployment</a></li><li><a href="#explanation-of-running-effect" class="table-of-contents__link toc-highlight">Explanation of Running Effect</a></li></ul></li></ul></li><li><a href="#sample_isp-user-manual" class="table-of-contents__link toc-highlight">Sample_isp User Manual</a><ul><li><a href="#program-function-1" class="table-of-contents__link toc-highlight">Program Function</a></li><li><a href="#program-development-1" class="table-of-contents__link toc-highlight">Program Development</a><ul><li><a href="#source-code-structure-2" class="table-of-contents__link toc-highlight">Source Code Structure</a></li><li><a href="#compilation-2" class="table-of-contents__link toc-highlight">Compilation</a></li></ul></li><li><a href="#function-usage-2" class="table-of-contents__link toc-highlight">Function Usage</a><ul><li><a href="#program-deployment-2" class="table-of-contents__link toc-highlight">Program Deployment</a></li><li><a href="#command-explanation" class="table-of-contents__link toc-highlight">Command Explanation:</a></li></ul></li></ul></li><li><a href="#sample_vps" class="table-of-contents__link toc-highlight">sample_vps Instructions</a><ul><li><a href="#program-functionality" class="table-of-contents__link toc-highlight">Program Functionality</a></li><li><a href="#program-development-2" class="table-of-contents__link toc-highlight">Program Development</a><ul><li><a href="#source-code-structure-3" class="table-of-contents__link toc-highlight">Source Code Structure</a></li><li><a href="#compilation-3" class="table-of-contents__link toc-highlight">Compilation</a></li></ul></li><li><a href="#functionality-usage-program-deployment" class="table-of-contents__link toc-highlight">Functionality Usage#### Program Deployment</a><ul><li><a href="#description-of-running-effects" class="table-of-contents__link toc-highlight">Description of Running Effects</a></li></ul></li></ul></li><li><a href="#sample_vps_zoom" class="table-of-contents__link toc-highlight">sample_vps_zoom Instructions</a><ul><li><a href="#program-function-2" class="table-of-contents__link toc-highlight">Program Function</a></li><li><a href="#program-development-3" class="table-of-contents__link toc-highlight">Program Development</a><ul><li><a href="#source-code-structure-4" class="table-of-contents__link toc-highlight">Source Code Structure</a></li><li><a href="#compilation-4" class="table-of-contents__link toc-highlight">Compilation</a></li></ul></li><li><a href="#function-usage-program-deployment" class="table-of-contents__link toc-highlight">Function Usage#### Program Deployment</a><ul><li><a href="#running-effects-description" class="table-of-contents__link toc-highlight">Running Effects Description</a></li></ul></li></ul></li><li><a href="#sample_osd" class="table-of-contents__link toc-highlight">sample_osd Instructions</a><ul><li><a href="#program-function-3" class="table-of-contents__link toc-highlight">Program Function</a></li><li><a href="#program-development-4" class="table-of-contents__link toc-highlight">Program Development</a><ul><li><a href="#source-code-structure-5" class="table-of-contents__link toc-highlight">Source Code Structure</a></li><li><a href="#compilation-5" class="table-of-contents__link toc-highlight">Compilation</a></li></ul></li><li><a href="#function-usage-3" class="table-of-contents__link toc-highlight">Function Usage</a><ul><li><a href="#program-deploymentafter-generating-sample_osd-according-to-the-above-compilation-process-make-sure-that-1280720yuv-exists-in-the-current-directory-and-then-execute-sample_osd" class="table-of-contents__link toc-highlight">Program DeploymentAfter generating <code>sample_osd</code> according to the above compilation process, make sure that <code>1280720.yuv</code> exists in the current directory, and then execute <code>sample_osd</code>.</a></li></ul></li><li><a href="#running-effect-description" class="table-of-contents__link toc-highlight">Running Effect Description</a></li></ul></li><li><a href="#sample_video_codec" class="table-of-contents__link toc-highlight">Usage of sample video codec</a><ul><li><a href="#program-functions" class="table-of-contents__link toc-highlight">Program Functions</a></li><li><a href="#program-development-5" class="table-of-contents__link toc-highlight">Program Development</a><ul><li><a href="#source-code-structure-6" class="table-of-contents__link toc-highlight">Source Code Structure</a></li><li><a href="#compilation-6" class="table-of-contents__link toc-highlight">Compilation</a></li></ul></li><li><a href="#program-deployment-3" class="table-of-contents__link toc-highlight">Program Deployment</a><ul><li><a href="#sample_vdec_basic" class="table-of-contents__link toc-highlight">sample_vdec_basic</a></li><li><a href="#sample_venc_basic" class="table-of-contents__link toc-highlight">sample_venc_basic</a></li><li><a href="#sample_vdec_two_channel" class="table-of-contents__link toc-highlight">sample_vdec_two_channel</a></li></ul></li><li><a href="#running-effect-description-1" class="table-of-contents__link toc-highlight">Running Effect Description</a><ul><li><a href="#sample_vdec_basic-1" class="table-of-contents__link toc-highlight">sample_vdec_basic</a></li><li><a href="#sample_venc_basic-1" class="table-of-contents__link toc-highlight">sample_venc_basic</a></li><li><a href="#sample_vdec_two_channel-1" class="table-of-contents__link toc-highlight">sample_vdec_two_channel</a></li><li><a href="#sample_venc_two_channel" class="table-of-contents__link toc-highlight">sample_venc_two_channel</a></li></ul></li></ul></li><li><a href="#sample_vot" class="table-of-contents__link toc-highlight">sample_vot Usage Instructions</a><ul><li><a href="#program-function-4" class="table-of-contents__link toc-highlight">Program Function</a></li><li><a href="#program-development-6" class="table-of-contents__link toc-highlight">Program Development</a><ul><li><a href="#source-code-structure-7" class="table-of-contents__link toc-highlight">Source Code Structure</a></li></ul></li><li><a href="#compilation-7" class="table-of-contents__link toc-highlight">Compilation</a></li><li><a href="#function-usage-4" class="table-of-contents__link toc-highlight">Function Usage</a><ul><li><a href="#program-deployment-4" class="table-of-contents__link toc-highlight">Program Deployment</a></li><li><a href="#running-effect-description-2" class="table-of-contents__link toc-highlight">Running Effect Description</a></li></ul></li></ul></li><li><a href="#sample_lcd" class="table-of-contents__link toc-highlight">sample_lcd Usage Instructions</a><ul><li><a href="#program-function-5" class="table-of-contents__link toc-highlight">Program Function</a></li><li><a href="#program-development-7" class="table-of-contents__link toc-highlight">Program Development</a><ul><li><a href="#source-code-structure-8" class="table-of-contents__link toc-highlight">Source Code Structure</a></li><li><a href="#compilationthe-current-code-is-compiled-and-configured-through-a-makefile-file" class="table-of-contents__link toc-highlight">CompilationThe current code is compiled and configured through a Makefile file.</a></li></ul></li><li><a href="#function-usage-5" class="table-of-contents__link toc-highlight">Function Usage</a><ul><li><a href="#program-deployment-5" class="table-of-contents__link toc-highlight">Program Deployment</a></li><li><a href="#running-effect-explanation" class="table-of-contents__link toc-highlight">Running Effect Explanation</a></li></ul></li></ul></li><li><a href="#sample_usb_cam_4k60" class="table-of-contents__link toc-highlight">Usage Instructions for <code>sample_usb_cam_4k60</code></a><ul><li><a href="#program-function-6" class="table-of-contents__link toc-highlight">Program Function</a></li><li><a href="#function-usage-6" class="table-of-contents__link toc-highlight">Function Usage</a><ul><li><a href="#program-deploymentcopy-the-directory-samplesample_usb_cam_4k60out-to-the-userdata-directory-on-the-board-using-tools-like-winscp-then-enter-the-userdataout-directory-on-the-board-and-execute-the-sh-run_usb_cam_imx415sh-script-to-run-the-program-the-execution-result-is-as-follows" class="table-of-contents__link toc-highlight">Program DeploymentCopy the directory <code>sample/sample_usb_cam_4k60/out</code> to the <code>/userdata</code> directory on the board using tools like WinSCP. Then, enter the <code>/userdata/out</code> directory on the board and execute the <code>sh run_usb_cam_imx415.sh</code> script to run the program. The execution result is as follows:</a></li></ul></li><li><a href="#program-development-8" class="table-of-contents__link toc-highlight">Program Development</a><ul><li><a href="#module-division" class="table-of-contents__link toc-highlight">Module Division</a><ul><li><a href="#top-level-source-code-structure" class="table-of-contents__link toc-highlight">Top-level Source Code Structure</a></li><li><a href="#header-file-structure" class="table-of-contents__link toc-highlight">Header File Structure</a></li><li><a href="#source-code-structure-9" class="table-of-contents__link toc-highlight">Source Code Structure</a></li></ul></li><li><a href="#compilation-8" class="table-of-contents__link toc-highlight">Compilation</a></li><li><a href="#adding-a-new-sensor-2" class="table-of-contents__link toc-highlight">Adding a new sensor</a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.guyuehome.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GuYueHome<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact US</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 D-Robotics.</div></div></div></footer></div>
</body>
</html>