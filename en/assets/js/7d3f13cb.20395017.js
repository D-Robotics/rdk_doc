"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[9054],{28453:(e,n,d)=>{d.d(n,{R:()=>r,x:()=>o});var c=d(96540);const i={},t=c.createContext(i);function r(e){const n=c.useContext(t);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),c.createElement(t.Provider,{value:n},e.children)}},45037:(e,n,d)=>{d.r(n),d.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>l});const c=JSON.parse('{"id":"Basic_Application/multi_media/multi_media_api/pydev/object_decoder","title":"Decoder Object","description":"The Decoder object implements video data decoding functionality and includes several methods such as decode, setimg, getimg, and close. Detailed descriptions are provided below:","source":"@site/i18n/en/docusaurus-plugin-content-docs-docs_s/current/03_Basic_Application/04_multi_media/multi_media_api/pydev/object_decoder.md","sourceDirName":"03_Basic_Application/04_multi_media/multi_media_api/pydev","slug":"/Basic_Application/multi_media/multi_media_api/pydev/object_decoder","permalink":"/rdk_doc/en/rdk_s/Basic_Application/multi_media/multi_media_api/pydev/object_decoder","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1768581666000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Encoder Object","permalink":"/rdk_doc/en/rdk_s/Basic_Application/multi_media/multi_media_api/pydev/object_encoder"},"next":{"title":"Display Object","permalink":"/rdk_doc/en/rdk_s/Basic_Application/multi_media/multi_media_api/pydev/object_display"}}');var i=d(74848),t=d(28453);const r={sidebar_position:3},o="Decoder Object",s={},l=[{value:"decode",id:"decode",level:2},{value:"get_img",id:"get_img",level:2},{value:"set_img",id:"set_img",level:2},{value:"close",id:"close",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"decoder-object",children:"Decoder Object"})}),"\n",(0,i.jsxs)(n.p,{children:["The Decoder object implements video data decoding functionality and includes several methods such as ",(0,i.jsx)(n.code,{children:"decode"}),", ",(0,i.jsx)(n.code,{children:"set_img"}),", ",(0,i.jsx)(n.code,{children:"get_img"}),", and ",(0,i.jsx)(n.code,{children:"close"}),". Detailed descriptions are provided below:"]}),"\n",(0,i.jsx)(n.h2,{id:"decode",children:"decode"}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Function Description\u3011"}),"\n",(0,i.jsx)(n.p,{children:"Enables the decode module and decodes the video file."}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Function Declaration\u3011"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"Decoder.decode(file, video_chn, decode_type, width, height)\n"})}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Parameter Description\u3011"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter Name"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Value Range"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"file"}),(0,i.jsx)(n.td,{children:"Filename of the file to be decoded"}),(0,i.jsx)(n.td,{children:"None"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"video_chn"}),(0,i.jsx)(n.td,{children:"Specifies the channel number of the video decoder"}),(0,i.jsx)(n.td,{children:"Range: 0\u201331"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"decode_type"}),(0,i.jsx)(n.td,{children:"Video decoding type"}),(0,i.jsxs)(n.td,{children:["Range: 1\u20133, corresponding to ",(0,i.jsx)(n.code,{children:"H264"}),", ",(0,i.jsx)(n.code,{children:"H265"}),", and ",(0,i.jsx)(n.code,{children:"MJPEG"})," respectively"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"width"}),(0,i.jsx)(n.td,{children:"Width of the input image to the decoding module"}),(0,i.jsx)(n.td,{children:"Up to 4096"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"height"}),(0,i.jsx)(n.td,{children:"Height of the input image to the decoding module"}),(0,i.jsx)(n.td,{children:"Up to 4096"})]})]})]}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Usage\u3011"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'#create decode object\ndecode = libsrcampy.Decoder()\n\n#enable decode channel 0, resolution: 1080p, format: H264\nret = dec.decode("encode.h264", 0, 1, 1920, 1080)\n'})}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Return Value\u3011"}),"\n",(0,i.jsxs)(n.p,{children:["Returns a ",(0,i.jsx)(n.code,{children:"list"})," containing two elements:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Return Value"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"list[0]"}),(0,i.jsx)(n.td,{children:"0: Decoding succeeded; -1: Decoding failed"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"list[1]"}),(0,i.jsx)(n.td,{children:"Number of frames in the input bitstream file (valid only when decoding succeeds)"})]})]})]}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Notes\u3011"}),"\n",(0,i.jsx)(n.p,{children:"None"}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Reference Code\u3011"}),"\n",(0,i.jsx)(n.p,{children:"None"}),"\n",(0,i.jsx)(n.h2,{id:"get_img",children:"get_img"}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Function Description\u3011"}),"\n",(0,i.jsx)(n.p,{children:"Retrieves the output result from the decoding module."}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Function Declaration\u3011"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"Decoder.get_img()\n"})}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Parameter Description\u3011"}),"\n",(0,i.jsx)(n.p,{children:"None"}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Usage\u3011"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'ret = dec.decode("encode.h264", 0, 1, 1920, 1080)\nprint ("Decoder return:%d frame count: %d" %(ret[0], ret[1]))\n\nimg = dec.get_img()\n'})}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Return Value\u3011"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Return Value"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"-1"}),(0,i.jsx)(n.td,{children:"Decoded data"})]})})]}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Notes\u3011"}),"\n",(0,i.jsxs)(n.p,{children:["This interface must be used after calling ",(0,i.jsx)(n.code,{children:"Decoder.decode()"})," to create a decoding channel."]}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Reference Code\u3011"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import sys, os, time\n\nimport numpy as np\nimport cv2\nfrom hobot_vio import libsrcampy\n\ndef test_decode():\n    #create decode object\n    dec = libsrcampy.Decoder()\n\n    #enable decode function\n    #decode input: encode.h264, resolution: 1080p, format: h264\n    ret = dec.decode("encode.h264", 0, 1, 1920, 1080)\n    print ("Decoder return:%d frame count: %d" %(ret[0], ret[1]))\n    \n    #get decoder output\n    img = dec.get_img()\n    if img is not None:\n        #save file\n        fo = open("output.img", "wb")\n        fo.write(img)\n        fo.close()\n        print("decode save img file success")\n    else:\n        print("decode save img file failed")\n\n    dec.close()\n    print("test_decode done!!!")\n\ntest_decode()\n'})}),"\n",(0,i.jsx)(n.h2,{id:"set_img",children:"set_img"}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Function Description\u3011"}),"\n",(0,i.jsx)(n.p,{children:"Feeds a single encoded frame into the decoding module for decoding."}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Function Declaration\u3011"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"Decoder.set_img(img, chn, eos)\n"})}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Parameter Description\u3011"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter Name"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Value Range"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"img"}),(0,i.jsx)(n.td,{children:"Single-frame data to be decoded"}),(0,i.jsx)(n.td,{children:"None"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"chn"}),(0,i.jsx)(n.td,{children:"Decoder channel number"}),(0,i.jsx)(n.td,{children:"Range: 0\u201331"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"eos"}),(0,i.jsx)(n.td,{children:"Indicates whether decoding data has ended"}),(0,i.jsx)(n.td,{children:"0: Not ended; 1: Ended"})]})]})]}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Usage\u3011"}),"\n",(0,i.jsx)(n.p,{children:"None"}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Return Value\u3011"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Return Value"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"0"}),(0,i.jsx)(n.td,{children:"Success"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"-1"}),(0,i.jsx)(n.td,{children:"Failure"})]})]})]}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Notes\u3011"}),"\n",(0,i.jsxs)(n.p,{children:["This interface must be used after calling ",(0,i.jsx)(n.code,{children:"Decoder.decode()"})," to create a decoding channel, and when creating the decoding channel, the ",(0,i.jsx)(n.code,{children:"file"})," parameter must be left empty."]}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Reference Code\u3011"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import sys, os, time\n\nimport numpy as np\nimport cv2\nfrom hobot_vio import libsrcampy\n\ndef test_cam_bind_encode_decode_bind_display():\n    #camera start\n    cam = libsrcampy.Camera()\n    # If you know the pipe_id and video_index, you can specify the first two arguments.\n    # ret = cam.open_cam(0, 1, 30, [1920, 1280], [1080, 720])\n\n    # If you do not know the pipe_id and video_index, you can use the following\n    # code to detect them, and it will default to using the first detected camera.\n    ret = cam.open_cam(0, -1, 30, [1920, 1280], [1080, 720])\n    print("Camera open_cam return:%d" % ret)\n\n    #enable encoder\n    enc = libsrcampy.Encoder()\n    ret = enc.encode(0, 1, 1920, 1080)\n    print("Encoder encode return:%d" % ret)\n\n    #enable decoder\n    dec = libsrcampy.Decoder()\n    ret = dec.decode("", 0, 1, 1920, 1080)\n    print ("Decoder return:%d frame count: %d" %(ret[0], ret[1]))\n\n    ret = libsrcampy.bind(cam, enc)\n    print("libsrcampy bind return:%d" % ret)\n\n    a = 0\n    while a < 100:\n        #get encode image from encoder\n        img = enc.get_img()\n        if img is not None:\n            #send encode image to decoder\n```dec.set_img(img)\n            print("encode get image success count: %d" % a)\n        else:\n            print("encode get image failed count: %d" % a)\n        a = a + 1\n\n    ret = libsrcampy.unbind(cam, enc)\n    dec.close()\n    enc.close()\n    cam.close_cam()\n    print("test_cam_bind_encode_decode_bind_display done!!!")\n\ntest_cam_bind_encode_decode_bind_display()\n'})}),"\n",(0,i.jsx)(n.h2,{id:"close",children:"close"}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Function Description\u3011"}),"\n",(0,i.jsx)(n.p,{children:"Close the decoder module."}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Function Declaration\u3011"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"Decoder.close()\n"})}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Parameters\u3011"}),"\n",(0,i.jsx)(n.p,{children:"None"}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Usage\u3011"}),"\n",(0,i.jsx)(n.p,{children:"None"}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Return Value\u3011"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Return Value"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"0"}),(0,i.jsx)(n.td,{children:"Success"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"-1"}),(0,i.jsx)(n.td,{children:"Failure"})]})]})]}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Notes\u3011"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"close"})," interface must be called upon program exit to release resources."]}),"\n",(0,i.jsx)("font",{color:"Blue",children:"\u3010Example Code\u3011"}),"\n",(0,i.jsx)(n.p,{children:"None"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);