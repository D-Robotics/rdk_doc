"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[84390],{28453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>r});var t=i(96540);const o={},a=t.createContext(o);function c(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),t.createElement(a.Provider,{value:n},e.children)}},30131:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>l,frontMatter:()=>c,metadata:()=>t,toc:()=>s});const t=JSON.parse('{"id":"Basic_Application/cdev_demo_sample/vio2encoder","title":"3.2.6 vio2encoder Sample Introduction","description":"Sample Overview","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/03_Basic_Application/02_cdev_demo_sample/vio2encoder.md","sourceDirName":"03_Basic_Application/02_cdev_demo_sample","slug":"/Basic_Application/cdev_demo_sample/vio2encoder","permalink":"/rdk_doc/en/Basic_Application/cdev_demo_sample/vio2encoder","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1766140001000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"3.2.5 vio2display Example Introduction","permalink":"/rdk_doc/en/Basic_Application/cdev_demo_sample/vio2display"},"next":{"title":"3.3.1 Basic Image Classification Example Introduction","permalink":"/rdk_doc/en/Basic_Application/pydev_demo_sample/basic_sample"}}');var o=i(74848),a=i(28453);const c={sidebar_position:6},r="3.2.6 vio2encoder Sample Introduction",d={},s=[{value:"Sample Overview",id:"sample-overview",level:2},{value:"Effect Demonstration",id:"effect-demonstration",level:2},{value:"Hardware Preparation",id:"hardware-preparation",level:2},{value:"Hardware Connection",id:"hardware-connection",level:3},{value:"Quick Start",id:"quick-start",level:2},{value:"Code and Board Location",id:"code-and-board-location",level:3},{value:"Compilation and Execution",id:"compilation-and-execution",level:3},{value:"Execution Result",id:"execution-result",level:3},{value:"Detailed Introduction",id:"detailed-introduction",level:2},{value:"Sample Program Parameter Options Description",id:"sample-program-parameter-options-description",level:3},{value:"Software Architecture Description",id:"software-architecture-description",level:3},{value:"API Flow Description",id:"api-flow-description",level:3}];function p(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"326-vio2encoder-sample-introduction",children:"3.2.6 vio2encoder Sample Introduction"})}),"\n",(0,o.jsx)(n.h2,{id:"sample-overview",children:"Sample Overview"}),"\n",(0,o.jsxs)(n.p,{children:["vio2encoder is a ",(0,o.jsx)(n.strong,{children:"C language interface"})," development code sample located in the /app/cdev_demo directory, demonstrating how to open the camera using C language and encode the data collected by the camera. By referring to this sample, users can understand and develop related applications."]}),"\n",(0,o.jsx)(n.h2,{id:"effect-demonstration",children:"Effect Demonstration"}),"\n",(0,o.jsxs)(n.p,{children:["vio2encoder is a sample that generates video streams. For example, after executing ",(0,o.jsx)(n.code,{children:"./vio2encoder -w 1920 -h 1080 --iwidth 1920 --iheight 1080 -o stream.h264"}),", a stream.h264 file will be generated in the current directory."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"root@ubuntu:/app/cdev_demo/vio2encoder# tree\n.\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 stream.h264\n\u251c\u2500\u2500 vio2encoder\n\u251c\u2500\u2500 vio2encoder.c\n\u2514\u2500\u2500 vio2encoder.o\n\n"})}),"\n",(0,o.jsx)(n.h2,{id:"hardware-preparation",children:"Hardware Preparation"}),"\n",(0,o.jsx)(n.h3,{id:"hardware-connection",children:"Hardware Connection"}),"\n",(0,o.jsx)(n.p,{children:"This sample requires a camera, here using the standard IMX219 for connection."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/02_cdev_demo_sample/image/vio2capture_hardware_connect.png",alt:"connect-img"})}),"\n",(0,o.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,o.jsx)(n.h3,{id:"code-and-board-location",children:"Code and Board Location"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"root@ubuntu:/app/cdev_demo/vio2encoder# tree\n.\n\u251c\u2500\u2500 Makefile\n\u2514\u2500\u2500 vio2encoder.c\n"})}),"\n",(0,o.jsx)(n.h3,{id:"compilation-and-execution",children:"Compilation and Execution"}),"\n",(0,o.jsx)(n.p,{children:"We can directly use make in this directory to compile the vio2encoder executable file."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"root@ubuntu:/app/cdev_demo/vio2encoder# tree\n.\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 vio2encoder\n\u251c\u2500\u2500 vio2encoder.c\n\u2514\u2500\u2500 vio2encoder.o\n"})}),"\n",(0,o.jsx)(n.h3,{id:"execution-result",children:"Execution Result"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"root@ubuntu:/app/cdev_demo/vio2encoder# ./vio2encoder -w 1920 -h 1080 --iwidth 1920 --iheight 1080 -o stream.h264\n2000/01/01 13:07:01.434 !INFO [OpenCamera][0450]hbn module\nset camera fps: -1,width: 1920,height: 1080\nCamera 0:\n        mipi_host: 0\nCamera 1:\n        mipi_host: 2\nCamera 2:\n        mipi_host: 0\nCamera 3:\n        mipi_host: 0\nmipi mclk is not configed.\nSearching camera sensor on device: /proc/device-tree/soc/cam/vcon@0 i2c bus: 6 mipi rx phy: 0\nWARN: Sensor Name: sc1330t, Expected Chip ID: 0xCA18, Actual Chip ID Read: 0x00\nWARN: Sensor Name: irs2875-tof, Expected Chip ID: 0x2875, Actual Chip ID Read: 0x00\nWARN: Sensor Name: sc230ai-10fps, Expected Chip ID: 0xCB34, Actual Chip ID Read: 0x00\nWARN: Sensor Name: sc230ai-30fps, Expected Chip ID: 0xCB34, Actual Chip ID Read: 0x00\nWARN: Sensor Name: sc132gs-1280p, Expected Chip ID: 0x132, Actual Chip ID Read: 0x00\nWARN: Sensor Name: sc035hgs, Expected Chip ID: 0x5A, Actual Chip ID Read: 0x00\nWARN: Sensor Name: ov5640, Expected Chip ID: 0x5640, Actual Chip ID Read: 0x00\nWARN: Sensor Name: f37, Expected Chip ID: 0xF37, Actual Chip ID Read: 0x00\nWARN: Sensor Name: imx415-30fps-2lane, Expected Chip ID: 0x03, Actual Chip ID Read: 0x00\nWARN: Sensor Name: imx415-30fps-4lane, Expected Chip ID: 0x03, Actual Chip ID Read: 0x00\nWARN: Sensor Name: sc202cs-1600x1200, Expected Chip ID: 0xEB52, Actual Chip ID Read: 0x00\nWARN: Sensor Name: irs2381c-tof, Expected Chip ID: 0x2381, Actual Chip ID Read: 0x00\n[0] INFO: Found sensor name:imx219-1920x1080-30fps on mipi rx csi 0, i2c addr 0x10, config_file:linear_1920x1080_raw10_30fps_2lane.c\nWARN: Sensor Name: ov5647-640x480-60fps, Expected Chip ID: 0x5647, Actual Chip ID Read: 0x00\nWARN: Sensor Name: ov5647-1280x960-30fps, Expected Chip ID: 0x5647, Actual Chip ID Read: 0x00\nWARN: Sensor Name: ov5647-1920x1080-30fps, Expected Chip ID: 0x5647, Actual Chip ID Read: 0x00\nWARN: Sensor Name: ov5647-2592x1944-15fps, Expected Chip ID: 0x5647, Actual Chip ID Read: 0x00\nWARN: Sensor Name: imx477-1280x960-120fps, Expected Chip ID: 0x477, Actual Chip ID Read: 0x00\nWARN: Sensor Name: imx477-1920x1080-50fps, Expected Chip ID: 0x477, Actual Chip ID Read: 0x00\nWARN: Sensor Name: imx477-2016x1520-40fps, Expected Chip ID: 0x477, Actual Chip ID Read: 0x00\nWARN: Sensor Name: imx477-4000x3000-10fps, Expected Chip ID: 0x477, Actual Chip ID Read: 0x00\nWARN: Sensor Name: sc035hgs-vc0, Expected Chip ID: 0x35, Actual Chip ID Read: 0x00\nWARN: Sensor Name: sc035hgs-vc1, Expected Chip ID: 0x35, Actual Chip ID Read: 0x00\nWARN: Sensor Name: sc231ai-30fps, Expected Chip ID: 0xCB6A, Actual Chip ID Read: 0x00\nWARN: Sensor Name: imx586-30fps-4lane, Expected Chip ID: 0x586, Actual Chip ID Read: 0x00\nWARN: Sensor Name: os08c10-30fps-2lane, Expected Chip ID: 0x53, Actual Chip ID Read: 0x00\n2000/01/01 13:07:01.564 !INFO [CamInitParam][0326]Setting VSE channel-0: input_width:1920, input_height:1080, dst_w:1920, dst_h:1080\n2000/01/01 13:07:01.565 !INFO [CamInitParam][0326]Setting VSE channel-1: input_width:1920, input_height:1080, dst_w:1920, dst_h:1080\n2000/01/01 13:07:01.565 !INFO [vp_vin_init][0055]csi0 ignore mclk ex attr, because mclk is not configed at device tree.\n================= VP Modules Status ====================\n======================== VFLOW =========================\n(active)[S0] vin0_C0*(dma)-m2m-isp0_C0-m2m-vse0_C0\n========================= SIF ==========================\n------------------- flow0 info -------------------\nrx_index:0\nvc_index:0\nipi_channels:1\nwidth:1920\nheight:1080\nformat:0x2b\nonline_isp:1\nddr_en:0\nbufnum:0\nemb_en:0\nembeded_dependence:0\nembeded_width:0\nembeded_height:0\nsize_err_cnt:1\n========================= ISP ==========================\n------------------- flow0 info -------------------\ninput_mode:2\nsched_mode:0\ntile_mode:0\naf_mode:0\nsensor_mode:0\ninput_width:1920\ninput_height:1080\ninput_format:1\ninput_bit_width:10\ninput_crop_x:0\ninput_crop_y:0\ninput_crop_w:1920\ninput_crop_h:1080\nddr_en:1\noutput_format:2\noutput_bit_width:8\n========================= VSE ==========================\n------------------- flow0 info -------------------\ninput_fps:0/0\ninput_width:1920\ninput_height:1080\ninput_format:2\ninput_bitwidth:8\ndns0 channel: roi [0][0][1920][1080], target [1920][1080], fps [0/0]\ndns1 channel: roi [0][0][1920][1080], target [1920][1080], fps [0/0]\n========================= VENC =========================\n========================= VDEC =========================\n========================= JENC =========================\n======================= Buffer =========================\n----------------------------------------------\nflowid module cid chn FREE  REQ  PRO  COM USED\n----------------------------------------------\n0      vin0   0   0     16    0    0    0    0\n0      vin0   0   8      0    1    2    0    0\n\n0      isp0   0   0     16    0    0    0    0\n0      isp0   0   8      0    3    0    0    0\n\n0      vse0   0   0     16    0    0    0    0\n0      vse0   0   8      0    3    0    0    0\n0      vse0   0   9      0    3    0    0    0\n\n----------------------------------------------\nflowid module cid chn FREE  REQ  PRO  COM USED\n----------------------------------------------\n0      vin0   0   0     16    0    0    0    0\n0      vin0   0   8      0    1    2    0    0\n\n0      isp0   0   0     16    0    0    0    0\n0      isp0   0   8      0    3    0    0    0\n\n0      vse0   0   0     16    0    0    0    0\n0      vse0   0   8      0    3    0    0    0\n0      vse0   0   9      0    3    0    0    0\n\n========================= END ===========================\nsp_open_camera success!\n2000/01/01 13:07:02.278 !INFO [OpenEncode][0072]pipe:0 type:0 1920x1080 bit_rate:8000 begin init\n\n2000/01/01 13:07:02.278 !INFO [vp_encode_config_param][0418]codec type is h264: frame size:3110912  frame rate: 30\nsp_start_encode success!\n2000/01/01 13:07:02.315 !INFO [BindTo][0088]BindTo_CHN:-1\n\n2000/01/01 13:07:02.315 !INFO [BindTo][0093]m_prev_module_chn:0\n\nsp_module_bind(vio -> encoder) success!\n\n"})}),"\n",(0,o.jsx)(n.h2,{id:"detailed-introduction",children:"Detailed Introduction"}),"\n",(0,o.jsx)(n.h3,{id:"sample-program-parameter-options-description",children:"Sample Program Parameter Options Description"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"root@ubuntu:/app/cdev_demo/vio2encoder# ./vio2encoder \nUsage: vio2encoder [OPTION...]\nvio2encode sample -- An example of using the camera to record and encode\n\n  -h, --oheight=height       height of output video\n      --iheight=height       sensor output height\n      --iwidth=width         sensor output width\n  -o, --output=path          output file path\n  -w, --owidth=width         width of output video\n  -?, --help                 Give this help list\n      --usage                Give a short usage message\n\nMandatory or optional arguments to long options are also mandatory or optional\nfor any corresponding short options.\nroot@ubuntu:/app/cdev_demo/vio2encoder# \n"})}),"\n",(0,o.jsxs)(n.p,{children:["-w: Encoded video width",(0,o.jsx)(n.br,{}),"\n","-h: Encoded video height",(0,o.jsx)(n.br,{}),"\n","--iwidth: Sensor output width",(0,o.jsx)(n.br,{}),"\n","--iheight: Sensor output height",(0,o.jsx)(n.br,{}),"\n","-o: Encoding output path"]}),"\n",(0,o.jsx)(n.h3,{id:"software-architecture-description",children:"Software Architecture Description"}),"\n",(0,o.jsx)(n.p,{children:"This sample encodes the data collected by the camera into H264 streams, so it requires resources such as the camera and encoder. When both the camera and encoder are initialized normally, it starts continuously collecting camera data and saving it to the stream."}),"\n",(0,o.jsx)("center",{children:(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/02_cdev_demo_sample/image/cdev_vio2encoder_software_arch.png",alt:"software_arch"})})}),"\n",(0,o.jsx)(n.h3,{id:"api-flow-description",children:"API Flow Description"}),"\n",(0,o.jsx)("center",{children:(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/02_cdev_demo_sample/image/cdev_vio2encoder_api_flow.png",alt:"software_arch"})})})]})}function l(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}}}]);