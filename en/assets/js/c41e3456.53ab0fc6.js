"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[18852,71469],{11470:(e,t,n)=>{n.d(t,{A:()=>N});var o=n(96540),r=n(34164),i=n(23104),s=n(56347),a=n(205),l=n(57485),c=n(31682),d=n(70679);function p(e){return o.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function u(e){const{values:t,children:n}=e;return(0,o.useMemo)(()=>{const e=t??function(e){return p(e).map(({props:{value:e,label:t,attributes:n,default:o}})=>({value:e,label:t,attributes:n,default:o}))}(n);return function(e){const t=(0,c.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,n])}function h({value:e,tabValues:t}){return t.some(t=>t.value===e)}function b({queryString:e=!1,groupId:t}){const n=(0,s.W6)(),r=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,l.aZ)(r),(0,o.useCallback)(e=>{if(!r)return;const t=new URLSearchParams(n.location.search);t.set(r,e),n.replace({...n.location,search:t.toString()})},[r,n])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,i=u(e),[s,l]=(0,o.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=t.find(e=>e.default)??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:i})),[c,p]=b({queryString:n,groupId:r}),[m,f]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,r]=(0,d.Dv)(t);return[n,(0,o.useCallback)(e=>{t&&r.set(e)},[t,r])]}({groupId:r}),_=(()=>{const e=c??m;return h({value:e,tabValues:i})?e:null})();(0,a.A)(()=>{_&&l(_)},[_]);return{selectedValue:s,selectValue:(0,o.useCallback)(e=>{if(!h({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),p(e),f(e)},[p,f,i]),tabValues:i}}var f=n(92303);const _={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=n(74848);function x({className:e,block:t,selectedValue:n,selectValue:o,tabValues:s}){const a=[],{blockElementScrollPositionUntilNextRender:l}=(0,i.a_)(),c=e=>{const t=e.currentTarget,r=a.indexOf(t),i=s[r].value;i!==n&&(l(t),o(i))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=a.indexOf(e.currentTarget)+1;t=a[n]??a[0];break}case"ArrowLeft":{const n=a.indexOf(e.currentTarget)-1;t=a[n]??a[a.length-1];break}}t?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},e),children:s.map(({value:e,label:t,attributes:o})=>(0,g.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{a.push(e)},onKeyDown:d,onClick:c,...o,className:(0,r.A)("tabs__item",_.tabItem,o?.className,{"tabs__item--active":n===e}),children:t??e},e))})}function v({lazy:e,children:t,selectedValue:n}){const i=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=i.find(e=>e.props.value===n);return e?(0,o.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:i.map((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==n}))})}function j(e){const t=m(e);return(0,g.jsxs)("div",{className:(0,r.A)("tabs-container",_.tabList),children:[(0,g.jsx)(x,{...t,...e}),(0,g.jsx)(v,{...t,...e})]})}function N(e){const t=(0,f.A)();return(0,g.jsx)(j,{...e,children:p(e.children)},String(t))}},19365:(e,t,n)=>{n.d(t,{A:()=>s});n(96540);var o=n(34164);const r={tabItem:"tabItem_Ymn6"};var i=n(74848);function s({children:e,hidden:t,className:n}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,o.A)(r.tabItem,n),hidden:t,children:e})}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>a});var o=n(96540);const r={},i=o.createContext(r);function s(e){const t=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(i.Provider,{value:t},e.children)}},69315:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>p});const o=JSON.parse('{"id":"Robot_development/boxs/driver/hobot_centerpoint","title":"LiDAR Object Detection Algorithm","description":"Function Introduction","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/05_Robot_development/03_boxs/driver/hobot_centerpoint.md","sourceDirName":"05_Robot_development/03_boxs/driver","slug":"/Robot_development/boxs/driver/hobot_centerpoint","permalink":"/rdk_doc/en/Robot_development/boxs/driver/hobot_centerpoint","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1771043926000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Road Structuring","permalink":"/rdk_doc/en/Robot_development/boxs/driver/parking_perception"},"next":{"title":"BEV Perception Algorithm","permalink":"/rdk_doc/en/Robot_development/boxs/driver/hobot_bev"}}');var r=n(74848),i=n(28453),s=n(11470),a=n(19365);const l={sidebar_position:2},c="LiDAR Object Detection Algorithm",d={},p=[{value:"Function Introduction",id:"function-introduction",level:2},{value:"Supported Platforms",id:"supported-platforms",level:2},{value:"Preparation",id:"preparation",level:2},{value:"RDK Platform",id:"rdk-platform",level:3},{value:"Usage Guide",id:"usage-guide",level:2},{value:"RDK Platform",id:"rdk-platform-1",level:3},{value:"Local Point Cloud File Playback",id:"local-point-cloud-file-playback",level:3},{value:"Result Analysis",id:"result-analysis",level:2}];function u(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"lidar-object-detection-algorithm",children:"LiDAR Object Detection Algorithm"})}),"\n","\n",(0,r.jsx)(t.h2,{id:"function-introduction",children:"Function Introduction"}),"\n",(0,r.jsxs)(t.p,{children:["The LiDAR object detection algorithm is a ",(0,r.jsx)(t.code,{children:"CenterPoint"})," algorithm model trained on the ",(0,r.jsx)(t.a,{href:"https://www.nuscenes.org/nuscenes",children:"nuscenes"})," dataset using ",(0,r.jsx)(t.a,{href:"https://developer.d-robotics.cc/api/v1/fileData/horizon_j5_open_explorer_cn_doc/hat/source/examples/centerpoint.html",children:"OpenExplorer"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"The algorithm takes 32-channel LiDAR point cloud data as input and outputs information including 3D detection bounding boxes, confidence scores and categories of targets. It supports six target detection categories: car, truck, bus, barrier, motorcycle and pedestrian."}),"\n",(0,r.jsx)(t.p,{children:"This example uses local LiDAR point cloud files as input, leverages the BPU for algorithm inference, and publishes rendered image messages containing point cloud data, target detection bounding boxes and orientations. The algorithm results are rendered and displayed in a browser on the PC side."}),"\n",(0,r.jsxs)(t.p,{children:["Code Repository: (",(0,r.jsx)(t.a,{href:"https://github.com/D-Robotics/hobot_centerpoint",children:"https://github.com/D-Robotics/hobot_centerpoint"}),")"]}),"\n",(0,r.jsx)(t.h2,{id:"supported-platforms",children:"Supported Platforms"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Platform"}),(0,r.jsx)(t.th,{children:"Running Method"}),(0,r.jsx)(t.th,{children:"Example Function"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"RDK Ultra"}),(0,r.jsx)(t.td,{children:"Ubuntu 20.04 (Foxy)"}),(0,r.jsx)(t.td,{children:"Local playback, with inference rendering results displayed via web"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"RDK S100, RDK S100P"}),(0,r.jsx)(t.td,{children:"Ubuntu 22.04 (Humble)"}),(0,r.jsx)(t.td,{children:"Local playback, with inference rendering results displayed via web"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"preparation",children:"Preparation"}),"\n",(0,r.jsx)(t.h3,{id:"rdk-platform",children:"RDK Platform"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"The RDK has been flashed with the Ubuntu 20.04/Ubuntu 22.04 system image."}),"\n",(0,r.jsx)(t.li,{children:"TogetheROS.Bot has been successfully installed on the RDK."}),"\n",(0,r.jsx)(t.li,{children:"Ensure the PC can access the RDK via the network."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"usage-guide",children:"Usage Guide"}),"\n",(0,r.jsx)(t.h3,{id:"rdk-platform-1",children:"RDK Platform"}),"\n",(0,r.jsx)(t.h3,{id:"local-point-cloud-file-playback",children:"Local Point Cloud File Playback"}),"\n",(0,r.jsx)(t.p,{children:"The LiDAR object detection algorithm example uses LiDAR point cloud file playback for inference, then publishes image messages with rendered algorithm results via the websocket package, enabling the display of published images and corresponding algorithm results in a browser on the PC side."}),"\n",(0,r.jsx)(t.p,{children:"Prepare LiDAR point cloud files:"}),"\n",(0,r.jsxs)(s.A,{groupId:"tros-distro",children:[(0,r.jsx)(a.A,{value:"foxy",label:"Foxy",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"# Download playback point cloud files on the board\nwget http://archive.d-robotics.cc/TogetheROS/data/hobot_centerpoint_data.tar.gz\n\n# Decompress the file\nmkdir config\ntar -zxvf hobot_centerpoint_data.tar.gz -C config\n# Decompressed data is in the config/hobot_centerpoint_data directory\n"})})}),(0,r.jsx)(a.A,{value:"humble",label:"Humble",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"# Download playback point cloud files on the board\ncd ~\nwget http://archive.d-robotics.cc/TogetheROS/data/hobot_centerpoint_data.tar.gz\n\n# Decompress the file\nmkdir -p ~/centerpoint_data\ntar -zxvf ~/hobot_centerpoint_data.tar.gz -C ~/centerpoint_data\n"})})})]}),"\n",(0,r.jsx)(t.p,{children:"Launch the algorithm example:"}),"\n",(0,r.jsxs)(s.A,{groupId:"tros-distro",children:[(0,r.jsx)(a.A,{value:"foxy",label:"Foxy",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"# Configure the tros.b environment\nsource /opt/tros/setup.bash\n\n# Launch the websocket service\nros2 launch websocket websocket_service.launch.py\n\n# Launch the launch file\nros2 launch hobot_centerpoint hobot_centerpoint_websocket.launch.py lidar_pre_path:=config/hobot_centerpoint_data\n"})})}),(0,r.jsx)(a.A,{value:"humble",label:"Humble",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"# Configure the tros.b Humble environment\nsource /opt/tros/humble/setup.bash\n\nif [ -L qat ]; then rm qat; fi\nln -s `ros2 pkg prefix hobot_centerpoint`/lib/hobot_centerpoint/qat/ qat\nln -s ~/centerpoint_data centerpoint_data\n\n# Launch the launch file\nros2 launch hobot_centerpoint hobot_centerpoint.launch.py\n"})})})]}),"\n",(0,r.jsx)(t.h2,{id:"result-analysis",children:"Result Analysis"}),"\n",(0,r.jsx)(t.p,{children:"After launching the algorithm example, the following information is output in the running terminal:"}),"\n",(0,r.jsxs)(s.A,{groupId:"tros-distro",children:[(0,r.jsx)(a.A,{value:"foxy",label:"Foxy",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-text",children:"[INFO] [launch]: Default logging verbosity is set to INFO\n[INFO] [hobot_centerpoint-1]: process started with pid [22470]\n[INFO] [websocket-2]: process started with pid [22472]\n[hobot_centerpoint-1] [WARN] [0948485758.916907430] [centerpoint_node]:\n[hobot_centerpoint-1]  preprocess_config: config/centerpoint_preprocess_5dim.json\n[hobot_centerpoint-1]  model_file: config/model/model.hbm\n[hobot_centerpoint-1]  lidar_list_file: ./config/nuscenes_lidar_val.lst\n[hobot_centerpoint-1]  is_show: 1\n[hobot_centerpoint-1]  is_loop: 1\n[hobot_centerpoint-1]  pub_topic_name: /hobot_centerpoint\n[hobot_centerpoint-1]  lidar_pre_path: ./config/hobot_centerpoint_data\n[hobot_centerpoint-1] [BPU_PLAT]BPU Platform Version(1.3.3)!\n[hobot_centerpoint-1] [HBRT] set log level as 0. version = 3.14.25.0\n[hobot_centerpoint-1] [DNN] Runtime version = 1.12.3_(3.14.25 HBRT)\n[hobot_centerpoint-1] [WARN] [0948485759.205674972] [dnn]: Run default SetOutputParser.\n[hobot_centerpoint-1] [WARN] [0948485759.205820889] [dnn]: Set output parser with default dnn node parser, you will get all output tensors and should parse output_tensors in PostProcess.\n[hobot_centerpoint-1] [WARN] [0948485759.208895472] [hobot_centerpoint]: A total of 81 files were fetched!\n[hobot_centerpoint-1] [WARN] [0948485759.400904472] [CenterPoint_Node]: input fps: -1.00, out fps: -1.00, infer time ms: 61, post process time ms: 57\n[hobot_centerpoint-1] [WARN] [0948485759.839328014] [CenterPoint_Node]: input fps: -1.00, out fps: -1.00, infer time ms: 27, post process time ms: 53\n[hobot_centerpoint-1] [WARN] [0948485760.281992264] [CenterPoint_Node]: input fps: -1.00, out fps: -1.00, infer time ms: 28, post process time ms: 53\n[hobot_centerpoint-1] [WARN] [0948485760.731948223] [CenterPoint_Node]: input fps: 2.93, out fps: 3.01, infer time ms: 27, post process time ms: 56\n[hobot_centerpoint-1] [WARN] [0948485761.155906223] [CenterPoint_Node]: input fps: 2.93, out fps: 3.01, infer time ms: 28, post process time ms: 56\n[hobot_centerpoint-1] [WARN] [0948485761.572980640] [CenterPoint_Node]: input fps: 2.93, out fps: 3.01, infer time ms: 27, post process time ms: 53\n[hobot_centerpoint-1] [WARN] [0948485761.983718973] [CenterPoint_Node]: input fps: 2.40, out fps: 2.40, infer time ms: 28, post process time ms: 55\n[hobot_centerpoint-1] [WARN] [0948485762.396930973] [CenterPoint_Node]: input fps: 2.40, out fps: 2.40, infer time ms: 28, post process time ms: 55\n[hobot_centerpoint-1] [WARN] [0948485762.816782057] [CenterPoint_Node]: input fps: 2.40, out fps: 2.40, infer time ms: 27, post process time ms: 56\n[hobot_centerpoint-1] [WARN] [0948485763.239294099] [CenterPoint_Node]: input fps: 2.39, out fps: 2.39, infer time ms: 27, post process time ms: 57\n[hobot_centerpoint-1] [WARN] [0948485763.661555807] [CenterPoint_Node]: input fps: 2.39, out fps: 2.39, infer time ms: 27, post process time ms: 57\n[hobot_centerpoint-1] [WARN] [0948485764.084410183] [CenterPoint_Node]: input fps: 2.39, out fps: 2.39, infer time ms: 27, post process time ms: 57\n[hobot_centerpoint-1] [WARN] [0948485764.502788849] [CenterPoint_Node]: input fps: 2.37, out fps: 2.37, infer time ms: 27, post process time ms: 55\n"})})}),(0,r.jsx)(a.A,{value:"humble",label:"Humble",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-text",children:"[INFO] [launch]: All log files can be found below /root/.ros/log/2025-05-08-10-05-16-060526-ubuntu-20968\n[INFO] [launch]: Default logging verbosity is set to INFO\nwebserver has launch\n[INFO] [hobot_centerpoint-1]: process started with pid [20971]\n[INFO] [websocket-2]: process started with pid [20973]\n[hobot_centerpoint-1] [UCP]: log level = 3\n[hobot_centerpoint-1] [UCP]: UCP version = 3.3.3\n[hobot_centerpoint-1] [VP]: log level = 3\n[hobot_centerpoint-1] [DNN]: log level = 3\n[hobot_centerpoint-1] [HPL]: log level = 3\n[websocket-2] [WARN] [1746669916.389039854] [websocket]:\n[websocket-2] Parameter:\n[websocket-2]  image_topic: /image_jpeg\n[websocket-2]  image_type: mjpeg\n[websocket-2]  only_show_image: 1\n[websocket-2]  output_fps: 0\n[websocket-2] [INFO] [1746669916.389302684] [websocket]: Websocket using image mjpeg\n[hobot_centerpoint-1] [UCPT]: log level = 6\n[hobot_centerpoint-1] [DSP]: log level = 3\n[hobot_centerpoint-1] [INFO] [1746669916.477961938] [centerpoint_node]: CenterPointNode init\n[hobot_centerpoint-1] [WARN] [1746669916.478312520] [centerpoint_node]:\n[hobot_centerpoint-1]  topic_name: image_jpeg\n[hobot_centerpoint-1]  save_image: false\n[hobot_centerpoint-1]  glog_level: 1\n[hobot_centerpoint-1] [WARN] [1746669916.482928131] [ai_wrapper]:\n[hobot_centerpoint-1]  Set glog level in cmd line with '--glog_level=$num'\n[hobot_centerpoint-1]    EXAMPLE_SYSTEM = 0,  EXAMPLE_REPORT = 1,  EXAMPLE_DETAIL = 2,  EXAMPLE_DEBUG = 3\n[hobot_centerpoint-1] [BPU][[BPU_MONITOR]][281473110813600][INFO]BPULib verison(2, 1, 2)[0d3f195]!\n[hobot_centerpoint-1] [DNN] HBTL_EXT_DNN log level:6\n[hobot_centerpoint-1] [DNN]: 3.3.3_(4.1.17 HBRT)\n[hobot_centerpoint-1] [INFO] [1746669917.244757440] [centerpoint_node]: Get render imgs size: 1, frame_id: 0, duration ms infer: 46.38, postp: 9.55, prep: 16.01\n[hobot_centerpoint-1] [INFO] [1746669917.264258828] [centerpoint_node]: Publish ros compressed image msg, format: jpeg, topic: image_jpeg\n"})})})]}),"\n",(0,r.jsxs)(t.p,{children:["The output log shows that the topic for publishing algorithm inference results is ",(0,r.jsx)(t.code,{children:"/hobot_centerpoint"}),", and a total of 81 playback point cloud files are loaded. After inference and post-processing (including rendering and publishing of inference results), the algorithm runs at a frame rate of approximately 2.4fps."]}),"\n",(0,r.jsxs)(t.p,{children:["Enter ",(0,r.jsx)(t.a,{href:"http://IP:8000",children:"http://IP:8000"})," in the browser on the PC side to view the images and algorithm rendering effects (IP is the IP address of the RDK):"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/function/image/box_adv/render_centerpoint_det.jpg",alt:""})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}}}]);