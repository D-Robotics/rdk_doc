"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[61633],{28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>d});var i=t(96540);const o={},r=i.createContext(o);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),i.createElement(r.Provider,{value:n},e.children)}},29666:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>s});const i=JSON.parse('{"id":"Advanced_development/mcu_development/S100/mcu_port/development_manual","title":"Port Development Guide","description":"Basic Overview","source":"@site/i18n/en/docusaurus-plugin-content-docs-docs_s/current/07_Advanced_development/05_mcu_development/01_S100/12_mcu_port/02_development_manual.md","sourceDirName":"07_Advanced_development/05_mcu_development/01_S100/12_mcu_port","slug":"/Advanced_development/mcu_development/S100/mcu_port/development_manual","permalink":"/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_port/development_manual","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770605065000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Port Usage Guide","permalink":"/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_port/user_manual"},"next":{"title":"MCU Ramdump Feature","permalink":"/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/mcu_ramdump"}}');var o=t(74848),r=t(28453);const l={sidebar_position:1},d="Port Development Guide",c={},s=[{value:"Basic Overview",id:"basic-overview",level:2},{value:"Port_Func Module",id:"port_func-module",level:2},{value:"PinCtrl Configuration Description",id:"pinctrl-configuration-description",level:3},{value:"Port Module",id:"port-module",level:2},{value:"Pin Initial State Configuration",id:"pin-initial-state-configuration",level:3}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"port-development-guide",children:"Port Development Guide"})}),"\n",(0,o.jsx)(n.h2,{id:"basic-overview",children:"Basic Overview"}),"\n",(0,o.jsx)(n.p,{children:'The Port module is generally divided into two major parts: the external APIs and the "Low Level Driver (LLD)." This document only covers the user API development part.'}),"\n",(0,o.jsx)(n.h2,{id:"port_func-module",children:"Port_Func Module"}),"\n",(0,o.jsx)(n.p,{children:"The SweetPotato MCU system provides a Port_Func module for overall functional configuration."}),"\n",(0,o.jsx)(n.p,{children:"In the McalCdd directory path, the external interfaces of the Port_Func module are defined as follows:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Driver source code:\nMcalCdd/Port/inc/Port_Func.h\nMcalCdd/Port/src/Port_Func.c\n"})}),"\n",(0,o.jsx)(n.p,{children:"Under the Config directory, specific PinCtrl configurations for the MCU peripherals' pins are defined:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# PIN definition source code:\nConfig/McalCdd/gen_s100_sip_B_mcu1/Port/inc/Port_FuncCfg.h\nConfig/McalCdd/gen_s100_sip_B_mcu1/Port/src/Port_FuncCfg.c\n"})}),"\n",(0,o.jsx)(n.h3,{id:"pinctrl-configuration-description",children:"PinCtrl Configuration Description"}),"\n",(0,o.jsxs)(n.p,{children:["In ",(0,o.jsx)(n.code,{children:"Config/McalCdd/gen_s100_sip_B_mcu1/Port/inc/Port_FuncCfg.h"}),", macros are provided to facilitate defining pin attributes:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-C",children:"#define PORT_FUNC_MCU_PIN(Pin_Idx, Pin_Name, Pin_Func, Schmitt, Input_En, SlewRate, Pull_Type, Drive_Strength) { \\\n\t(uint8)(Pin_Idx), /**< Pin Id */ \\\n\t(Pin_Name), /**< Pin name */ \\\n\t(boolean)(TRUE), /**< IsUsed */ \\\n\t{ \\\n\t\t(boolean)(TRUE), /**< ModeChang */ \\\n\t\t(boolean)(Schmitt), /**< Schmitt Trigger */ \\\n\t\t(boolean)(Input_En), /**< Input Enable*/ \\\n\t\t(boolean)(FALSE), /**< Is Used GPIO */ \\\n\t\t(boolean)(FALSE), /**< Direciton change allowed */ \\\n\t\t(Pin_Func), /**< Pin Function */ \\\n\t\t(SlewRate), /**< Slew Rate */ \\\n\t\t(Pull_Type), /**< Pin Pull Type */ \\\n\t\t(Drive_Strength), /**< Pin Drive Strength */ \\\n\t\t(PORT_PIN_DIR_IN), /**< GPIO Direction */ \\\n\t\t(PORT_PIN_LEVEL_LOW) /**< GPIO Output Value */ \\\n\t} \\\n}\n\n...\n\n\n#define PORT_FUNC_AON_PIN(Pin_Idx, Pin_Name, Pin_Func, Schmitt, Input_En, SlewRate, Pull_Type, Drive_Strength) { \\\n\t(uint8)((Pin_Idx) + (S100_PORT_MCU_PIN_NUM)), /**< Pin Id Converted */ \\\n\t(Pin_Name), /**< Pin name */ \\\n\t(boolean)(TRUE), /**< IsUsed */ \\\n\t{ \\\n\t\t(boolean)(TRUE), /**< ModeChang */ \\\n\t\t(boolean)(Schmitt), /**< Schmitt Trigger */ \\\n\t\t(boolean)(Input_En), /**< Input Enable*/ \\\n\t\t(boolean)(FALSE), /**< Is Used GPIO */ \\\n\t\t(boolean)(FALSE), /**< Direciton change allowed */ \\\n\t\t(Pin_Func), /**< Pin Function */ \\\n\t\t(SlewRate), /**< Slew Rate */ \\\n\t\t(Pull_Type), /**< Pin Pull Type */ \\\n\t\t(Drive_Strength), /**< Pin Drive Strength */ \\\n\t\t(PORT_PIN_DIR_IN), /**< GPIO Direction */ \\\n\t\t(PORT_PIN_LEVEL_LOW) /**< GPIO Output Value */ \\\n\t} \\\n}\n\n...\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Based on actual functional requirements, SweetPotato provides a default set of pin attribute definitions in the file ",(0,o.jsx)(n.code,{children:"Config/McalCdd/gen_s100_sip_B_mcu1/Port/src/Port_FuncCfg.c"}),". Customers can modify these according to their specific needs."]}),"\n",(0,o.jsx)(n.h2,{id:"port-module",children:"Port Module"}),"\n",(0,o.jsx)(n.p,{children:"The Port module is SweetPotato MCU's low-level PinCtrl module. Typically, users only need to use the Port_Func module to initialize and configure peripherals they intend to use. The following section covers advanced Port development topics; some features are only available in the commercial version of the code."}),"\n",(0,o.jsx)(n.h3,{id:"pin-initial-state-configuration",children:"Pin Initial State Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["During startup, MCU0 calls the ",(0,o.jsx)(n.code,{children:"Port_Init()"})," interface to configure the initial state of all MCU pins. By default, MCU1 does not call the ",(0,o.jsx)(n.code,{children:"Port_Init()"})," interface again during its startup."]}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["It is not recommended for users to invoke ",(0,o.jsx)(n.code,{children:"Port_Init()"})," a second time on MCU1, as re-initializing pin states may cause basic functionalities such as power supply in the S100 SIP to malfunction."]})}),"\n",(0,o.jsxs)(n.p,{children:["The initial states of each pin are defined in ",(0,o.jsx)(n.code,{children:"Config/McalCdd/gen_s100_sip_B/Port/src/Port_PBCfg.c"}),", as shown in the following example:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-c",children:'...\n    /* Pin Id,  Pin name,      IsUsed,        ModeChang,    SchmittTriger,  InputEnable,     IsUsedGpio,     DirChang,   PinMode,    Config Type,        Pull Type,       Drive Strength,         GpioDir,           GpioData*/\n    {(uint8)51, "EMAC2_TX_CLK", (boolean)TRUE, {(boolean)TRUE, (boolean)FALSE, (boolean)TRUE, (boolean)TRUE, (boolean)TRUE, GPIO, PORT_PIN_CONFIG_TYPE0, PORT_PULL_NONE, PORT_DRIVE_STRENGTH_5, PORT_PIN_DIR_IN, PORT_PIN_LEVEL_LOW}},\n...\n'})}),"\n",(0,o.jsx)(n.p,{children:"The code is split into two lines:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The first line is a ",(0,o.jsx)(n.strong,{children:"comment line"})," indicating the meaning of each parameter."]}),"\n",(0,o.jsxs)(n.li,{children:["The second line is the ",(0,o.jsx)(n.strong,{children:"code line"})," defining the state of each individual pin. Key configuration items are explained below:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"PinMode"}),": Specifies the specific function of the pin. Refer to ",(0,o.jsx)(n.code,{children:"Config/McalCdd/gen_s100_sip_B/Port/src/Port_PBCfg.h"})," for available function definitions."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"Config Type"}),": Defines the pin's SlewRate control. For detailed definitions, commercial version users can refer to ",(0,o.jsx)(n.code,{children:"Port/Inc/Port_Lld.h"}),", while community version users can refer to ",(0,o.jsx)(n.code,{children:"Include/Port_Lld.h"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"IsUsed"}),": Indicates whether the Port module will configure this pin during initialization."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ModeChange"}),": Specifies whether the pin's function can be modified at runtime when calling Port module APIs (excluding Port_Func module APIs)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"IsUsedGpio"}),": Indicates whether the Port module will configure this pin's GPIO direction and output value during initialization."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Customers can define the initial state of pins according to their requirements."})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}}}]);