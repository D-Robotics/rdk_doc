"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[17608],{28453:(n,i,p)=>{p.d(i,{R:()=>t,x:()=>l});var e=p(96540);const r={},s=e.createContext(r);function t(n){const i=e.useContext(s);return e.useMemo(function(){return"function"==typeof n?n(i):{...i,...n}},[i,n])}function l(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),e.createElement(s.Provider,{value:i},n.children)}},36306:(n,i,p)=>{p.r(i),p.d(i,{assets:()=>c,contentTitle:()=>l,default:()=>_,frontMatter:()=>t,metadata:()=>e,toc:()=>u});const e=JSON.parse('{"id":"Advanced_development/linux_development/driver_development_s100/driver_pinctrl_dev","title":"Pinctrl\u8c03\u8bd5\u6307\u5357","description":"Pinctrl\u4f7f\u7528","source":"@site/docs_s/07_Advanced_development/02_linux_development/04_driver_development_s100/05_driver_pinctrl_dev.md","sourceDirName":"07_Advanced_development/02_linux_development/04_driver_development_s100","slug":"/Advanced_development/linux_development/driver_development_s100/driver_pinctrl_dev","permalink":"/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_pinctrl_dev","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1757920682000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"GPIO\u4f7f\u7528","permalink":"/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_gpio_dev"},"next":{"title":"IPC\u6a21\u5757\u4ecb\u7ecd","permalink":"/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_ipc"}}');var r=p(74848),s=p(28453);const t={sidebar_position:5},l="Pinctrl\u8c03\u8bd5\u6307\u5357",c={},u=[{value:"Pinctrl\u4f7f\u7528",id:"pinctrl\u4f7f\u7528",level:2},{value:"Pinmux\u529f\u80fd",id:"pinmux\u529f\u80fd",level:3},{value:"Pinconf\u529f\u80fd",id:"pinconf\u529f\u80fd",level:3},{value:"io-domain\u529f\u80fd",id:"io-domain\u529f\u80fd",level:3},{value:"\u6e90\u7801\u8bf4\u660e",id:"\u6e90\u7801\u8bf4\u660e",level:2},{value:"Pinctrl \u9a71\u52a8\u4f7f\u7528\u8bf4\u660e",id:"pinctrl-\u9a71\u52a8\u4f7f\u7528\u8bf4\u660e",level:2},{value:"Pinmux\u548cpinconf\u7684\u8bbe\u7f6e",id:"pinmux\u548cpinconf\u7684\u8bbe\u7f6e",level:3},{value:"Pinconf\u652f\u6301\u8bbe\u7f6e\u7684\u5c5e\u6027\u4e0e\u8bbe\u7f6e\u6811\u4e2d\u5bf9\u5e94\u5173\u952e\u5b57",id:"pinconf\u652f\u6301\u8bbe\u7f6e\u7684\u5c5e\u6027\u4e0e\u8bbe\u7f6e\u6811\u4e2d\u5bf9\u5e94\u5173\u952e\u5b57",level:3},{value:"\u7535\u538b\u57df\u8bbe\u7f6e",id:"\u7535\u538b\u57df\u8bbe\u7f6e",level:3},{value:"Pinctrl\u8282\u70b9\u53c2\u8003\u8bbe\u7f6e",id:"pinctrl\u8282\u70b9\u53c2\u8003\u8bbe\u7f6e",level:3},{value:"\u8282\u70b9\u5f15\u7528",id:"\u8282\u70b9\u5f15\u7528",level:3},{value:"Pinctrl debugfs\u4f7f\u7528\u8bf4\u660e",id:"pinctrl-debugfs\u4f7f\u7528\u8bf4\u660e",level:2},{value:"Pin\u4fe1\u606f\u67e5\u8be2",id:"pin\u4fe1\u606f\u67e5\u8be2",level:3},{value:"/sys/kernel/debug/pinctrl/pinctrl-devices",id:"syskerneldebugpinctrlpinctrl-devices",level:4},{value:"/sys/kernel/debug/pinctrl/pinctrl-handles",id:"syskerneldebugpinctrlpinctrl-handles",level:4},{value:"/sys/kernel/debug/pinctrl/pinctrl-maps",id:"syskerneldebugpinctrlpinctrl-maps",level:4},{value:"/sys/kernel/debug/pinctrl/&lt;pinctrl_dev&gt;/gpio-ranges",id:"syskerneldebugpinctrlpinctrl_devgpio-ranges",level:4},{value:"/sys/kernel/debug/pinctrl/&lt;pinctrl_dev&gt;/pinconf-pins",id:"syskerneldebugpinctrlpinctrl_devpinconf-pins",level:4},{value:"/sys/kernel/debug/pinctrl/&lt;pinctrl_dev&gt;/pinconf-groups",id:"syskerneldebugpinctrlpinctrl_devpinconf-groups",level:4},{value:"/sys/kernel/debug/pinctrl/&lt;pinctrl_dev&gt;/pingroups",id:"syskerneldebugpinctrlpinctrl_devpingroups",level:4},{value:"/sys/kernel/debug/pinctrl/&lt;pinctrl_dev&gt;/pinmux-functions",id:"syskerneldebugpinctrlpinctrl_devpinmux-functions",level:4},{value:"/sys/kernel/debug/pinctrl/&lt;pinctrl_dev&gt;/pinmux-pins",id:"syskerneldebugpinctrlpinctrl_devpinmux-pins",level:4},{value:"/sys/kernel/debug/&lt;pinctrl_dev&gt;/pinmux-select",id:"syskerneldebugpinctrl_devpinmux-select",level:4},{value:"/sys/kernel/debug/&lt;pinctrl_dev&gt;/pins",id:"syskerneldebugpinctrl_devpins",level:4}];function d(n){const i={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"pinctrl\u8c03\u8bd5\u6307\u5357",children:"Pinctrl\u8c03\u8bd5\u6307\u5357"})}),"\n",(0,r.jsx)(i.h2,{id:"pinctrl\u4f7f\u7528",children:"Pinctrl\u4f7f\u7528"}),"\n",(0,r.jsx)(i.p,{children:"S100\u82af\u7247\u4e2d3\u4e2asys\u5305\u542b\u53ef\u8f6f\u4ef6\u63a7\u5236\u7684pin\u811a\uff0c\u6839\u636e\u7528\u6237\u7684\u9700\u8981\uff0c\u53ef\u4ee5\u5bf9pin\u811a\u8fdb\u884c\u529f\u80fd\u590d\u7528\uff0c\u5c5e\u6027\u8bbe\u7f6e\u548c\u7535\u538b\u57df\u8bbe\u7f6e\u3002"}),"\n",(0,r.jsx)(i.h3,{id:"pinmux\u529f\u80fd",children:"Pinmux\u529f\u80fd"}),"\n",(0,r.jsx)(i.p,{children:"soc\u4e2d\u7684pin\u811a\u53ef\u4ee5\u88ab\u8bbe\u7f6e\u4e3a\u4e0d\u540c\u7684\u529f\u80fd\uff0c\u901a\u8fc7pinmux\u8bbe\u7f6e\u53ef\u4ee5\u6839\u636e\u7528\u6237\u9700\u8981\u914d\u7f6e\u4e3a\u76f8\u5e94\u7684\u529f\u80fd\uff0c\u6bcf\u4e2a\u5f15\u811a\u6709\u56db\u79cd\u590d\u7528\u529f\u80fd\u53ef\u9009\u3002"}),"\n",(0,r.jsx)(i.h3,{id:"pinconf\u529f\u80fd",children:"Pinconf\u529f\u80fd"}),"\n",(0,r.jsx)(i.p,{children:"soc\u4e2d\u7684pin\u811a\u53ef\u4ee5\u88ab\u8bbe\u7f6e\u4e3a\u4e0d\u540c\u7684\u72b6\u6001\uff0c\u5171\u5305\u542b\u4ee5\u4e0b\u51e0\u79cd\u5c5e\u6027\uff1a"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u4e0a\u4e0b\u62c9\u8bbe\u7f6e"}),"\n",(0,r.jsx)(i.li,{children:"\u9a71\u52a8\u5f3a\u5ea6\u8bbe\u7f6e"}),"\n",(0,r.jsx)(i.li,{children:"\u7535\u538b\u6a21\u5f0f\u8bbe\u7f6e"}),"\n",(0,r.jsx)(i.li,{children:"\u8f93\u5165\u4f7f\u80fd\u8bbe\u7f6e"}),"\n",(0,r.jsx)(i.li,{children:"\u65bd\u5bc6\u7279\u8bbe\u7f6e"}),"\n",(0,r.jsx)(i.li,{children:"\u538b\u6446\u7387\u9009\u62e9"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"io-domain\u529f\u80fd",children:"io-domain\u529f\u80fd"}),"\n",(0,r.jsx)(i.p,{children:"S100\u4e2d\u5171\u5b58\u5728\u4e24\u79cd\u7535\u538b\u57df\uff0c\u5206\u522b\u4e3a1.8v\u548c3.3v\uff0c\u4e0d\u540c\u7684pin\u811a\u9700\u8981\u5de5\u4f5c\u5728\u5408\u9002\u7684\u7535\u538b\u57df\u4e2d\u3002\u624b\u518c\u4e2d\u5c06pin\u811a\u5212\u5206\u5165power group\u4e2d\uff0c\u5728\u624b\u518c\u4e2d\u53ef\u4ee5\u770b\u5230\u6bcf\u4e2apower group\u63a7\u5236\u7740\u4e00\u7ec4pin\u811a\u3002"}),"\n",(0,r.jsx)(i.h2,{id:"\u6e90\u7801\u8bf4\u660e",children:"\u6e90\u7801\u8bf4\u660e"}),"\n",(0,r.jsx)(i.p,{children:"pinctrl-hobot.c\u6587\u4ef6\u4e2d\u5305\u542b\u4e86\u6240\u6709S100\u7cfb\u5217pinctrl\u7684\u4e3b\u903b\u8f91\u4ee3\u7801\uff0c\u5411pinctrl\u6ce8\u518cS100\u7684pinctrl\u8bbe\u5907\uff0c\u5e76\u5411\u4e0b\u63d0\u4f9bS100 pinctrl\u8bbe\u5907\u7684\u6ce8\u518c\u3002"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-{.shell}",children:"/* \u8def\u5f84 */\nhobot-drivers/pinctrl/pinctrl-hobot.c     #pinctrl \u9a71\u52a8\u4ee3\u7801\u6e90\u6587\u4ef6\nhobot-drivers/pinctrl/pinctrl-hobot.h     #pinctrl \u9a71\u52a8\u4ee3\u7801\u5934\u6587\u4ef6\n"})}),"\n",(0,r.jsx)(i.p,{children:"pinctrl-hobot-s100.c\u6587\u4ef6\u4e2d\u5305\u542b\u4e86\u6240\u6709s100\u7684pin\uff0cpin group\uff0cpin\nfunction\u4fe1\u606f\u3002"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-{.shell}",children:"/* \u8def\u5f84 */\nhobot-drivers/pinctrl/pinctrl-hobot-s100.c     # S100 \u9a71\u52a8\u6570\u636e\u4ee3\u7801\n"})}),"\n",(0,r.jsx)(i.h2,{id:"pinctrl-\u9a71\u52a8\u4f7f\u7528\u8bf4\u660e",children:"Pinctrl \u9a71\u52a8\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,r.jsx)(i.h3,{id:"pinmux\u548cpinconf\u7684\u8bbe\u7f6e",children:"Pinmux\u548cpinconf\u7684\u8bbe\u7f6e"}),"\n",(0,r.jsx)(i.p,{children:"pinmux\u548cpinconf\u4e00\u822c\u662f\u5728\u8bbe\u5907dts\u91cc\u914d\u7f6e\uff0c\u5177\u4f53\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-C",children:'&pinctrl_peri {\n    pinctrl_test_default: pinctrl_test_default {\n        /* pinmux \u7684\u8bbe\u7f6e\uff0c \u5c06peri_i2c5_scl\u548cperi_i2c5_sda\u4e24\u4e2a\u5f15\u811a\u590d\u7528\u4e3aperi_i2c5\u7684\u529f\u80fd*/\n        pinmux {\n            function = "peri_i2c5";\n            pins = "peri_i2c5_scl", "peri_i2c5_sda";\n        };\n        /* pinconf \u7684\u8bbe\u7f6e\uff0c \u4e3aperi_i2c5_scl\u548cperi_i2c5_sda\u4e24\u4e2a\u5f15\u811a\u914d\u7f6e\u9a71\u52a8\u7535\u6d41\uff0c\u4e0a\u4e0b\u62c9\uff0c\u8f93\u5165\u4f7f\u80fd\uff0c\u7535\u538b\u6a21\u5f0f\uff0c\u538b\u6446\u7387\uff0c\u8f93\u5165\u65bd\u5bc6\u7279\u7b49\u7535\u5668\u5c5e\u6027\u914d\u7f6e*/\n        pinconf {\n            /* \u4e24\u4e2a\u5f15\u811a */\n            pins = "peri_i2c5_scl", "peri_i2c5_sda";\n            /* \u9a71\u52a8\u7535\u6d41\u914d\u7f6e */\n            drive-strength = <7>;\n            /* \u914d\u7f6e\u4e3a\u4e0b\u62c9 */\n            bias-pull-down;\n            /* \u7981\u7528\u8f93\u5165 */\n            input-disable;\n            /* \u7981\u7528\u4f4e\u7535\u538b\u6a21\u5f0f */\n            low-power-disable;\n            /* \u538b\u6446\u7387\u8bbe\u7f6e\u4e3a1 */\n            slew-rate = <1>;\n            /* \u7981\u7528\u8f93\u5165\u65bd\u5bc6\u7279 */\n            input-schmitt-disable;\n        };\n    };\n\n    pinctrl_test_sleep: pinctrl_test_sleep {\n        pinmux {\n            function = "peri_i2c5";\n            pins = "peri_i2c5_scl", "peri_i2c5_sda";\n        };\n        pinconf {\n            pins = "peri_i2c5_scl", "peri_i2c5_sda";\n            drive-strength = <1>;\n            bias-pull-up;\n            input-enable;\n            low-power-enable;\n            slew-rate = <0>;\n            input-schmitt-enable;\n        };\n    };\n};\n'})}),"\n",(0,r.jsx)(i.h3,{id:"pinconf\u652f\u6301\u8bbe\u7f6e\u7684\u5c5e\u6027\u4e0e\u8bbe\u7f6e\u6811\u4e2d\u5bf9\u5e94\u5173\u952e\u5b57",children:"Pinconf\u652f\u6301\u8bbe\u7f6e\u7684\u5c5e\u6027\u4e0e\u8bbe\u7f6e\u6811\u4e2d\u5bf9\u5e94\u5173\u952e\u5b57"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"\u5173\u952e\u5b57"}),(0,r.jsx)(i.th,{children:"\u5c5e\u6027"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"bias-pull-up"}),(0,r.jsx)(i.td,{children:"\u4e0a\u62c9\u8bbe\u7f6e"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"bias-pull-down"}),(0,r.jsx)(i.td,{children:"\u4e0b\u62c9\u8bbe\u7f6e"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"bias-disable"}),(0,r.jsx)(i.td,{children:"\u60ac\u7a7a\u8bbe\u7f6e"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"drive-strength"}),(0,r.jsx)(i.td,{children:"\u9a71\u52a8\u5f3a\u5ea6"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"low-power-disable"}),(0,r.jsx)(i.td,{children:"\u9ad8\u7535\u538b\u6a21\u5f0f\uff083.3v\uff09"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"low-power-enable"}),(0,r.jsx)(i.td,{children:"\u4f4e\u7535\u538b\u6a21\u5f0f\uff081.8v\uff09"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"input-disable"}),(0,r.jsx)(i.td,{children:"\u8f93\u5165\u4e0d\u4f7f\u80fd"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"input-enable"}),(0,r.jsx)(i.td,{children:"\u8f93\u5165\u4f7f\u80fd"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"input-schmitt-enable"}),(0,r.jsx)(i.td,{children:"\u65bd\u5bc6\u7279\u89e6\u53d1\u4f7f\u80fd"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"input-schmitt-disable"}),(0,r.jsx)(i.td,{children:"\u65bd\u5bc6\u7279\u89e6\u53d1\u4e0d\u4f7f\u80fd"})]})]})]}),"\n",(0,r.jsx)(i.h3,{id:"\u7535\u538b\u57df\u8bbe\u7f6e",children:"\u7535\u538b\u57df\u8bbe\u7f6e"}),"\n",(0,r.jsx)(i.p,{children:"pin\u811aio-domain\u7684\u8bbe\u7f6e\uff0c\u4f1a\u76f4\u63a5\u5f71\u54cd\u5230\u6a21\u5757\u529f\u80fd\u7684\u6b63\u5e38\u8fd0\u884c\uff0c\u751a\u81f3\u7535\u538b\u57df\u7684\u8bbe\u7f6e\u9519\u8bef\uff0c\u9020\u6210\u5143\u5668\u4ef6\u635f\u574f\uff0c\u4f7f\u7535\u8def\u677f\u65e0\u6cd5\u5de5\u4f5c\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u56e0\u6b64\u7ed3\u5408\u4e4b\u524dbringup\u652f\u6301\u7ecf\u9a8c\uff0c\u7ed9\u51fa\u5982\u4e0b\u786c\u4ef6\u7535\u538b\u503c\u548c\u8f6f\u4ef6io-domain\u8bbe\u7f6e\u4e00\u81f4\u6027\u786e\u8ba4\u7684\u5b9e\u8df5\u7ecf\u9a8c\uff1a"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"\u9996\u5148\u5404\u4e2a\u6a21\u5757\u7684\u8f6f\u786c\u4ef6\u8d1f\u8d23\u4eba\u8fdb\u884c\u62c9\u901a\uff0c\u786e\u8ba4\u6a21\u5757\u4e2d\u76f8\u5173pin\u811a\u9002\u7528\u7684io-domain\u8303\u56f4\uff0c\u4fdd\u8bc1\u9700\u6c42\u4e00\u81f4\u6027\uff0c\u5e76\u4e14\u8f93\u51fa\u300apin\u811aio-domain\u8bbe\u7f6e\u624b\u518c\u300b\u4e2d\u7684\u53c2\u8003\u503c\u90e8\u5206\uff1b\uff08\u6587\u6863\u540d\u4ec5\u4f9b\u53c2\u8003\uff09"}),"\n",(0,r.jsx)(i.li,{children:"\u7136\u540e\u6839\u636e\u7b2c\u4e00\u6b65\u4e2d\u786e\u8ba4\u7684\u4fe1\u606f\uff0c\u5728\u8bbe\u5907\u6811\u4e2d\u8fdb\u884c\u76f8\u5e94\u7684io-domain\u8bbe\u7f6e\uff1b"}),"\n",(0,r.jsx)(i.li,{children:"\u5728\u5b8c\u6210\u7b2c\u4e8c\u6b65\u64cd\u4f5c\u540e\uff0c\u5728\u6837\u677f\u4e0a\u6293\u53d6\u6240\u6709pin\u811a\u7684io-domain\u503c\uff0c\u5e76\u4e14\u5c06\u83b7\u5f97\u7684\u503c\u586b\u5165\u300apin\u811aio-domain\u8bbe\u7f6e\u624b\u518c\u300b\u4e2d\u7684\u5b9e\u9645\u503c\u90e8\u5206\uff0c\u8bc6\u522b\u5b58\u5728\u7684gap\uff1b"}),"\n",(0,r.jsx)(i.li,{children:"\u7531\u4e8eS100\u4e2d\u4e00\u4e2agroup power\u63a7\u5236\u4e00\u7ec4pin\u811a\uff0c\u4e00\u4e2apin\u811a\u7684\u8bbe\u7f6e\u53ef\u80fd\u4f1a\u5f71\u54cd\u540c\u7ec4\u4e2d\u5176\u5b83\u7684pin\u3002\u56e0\u6b64\u62c9\u901a\u5bf9\u9f50\u4f1a\u8bae\uff0c\u6839\u636e\u7b2c\u4e09\u6b65\u4e2d\u8bc6\u522b\u51fa\u6765\u7684gap\u4fe1\u606f\uff0c\u8fdb\u884c\u8ba8\u8bba\u548c\u4fee\u590d\uff0c\u76f4\u5230gap\u6d88\u9664\u3002"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"pinctrl\u8282\u70b9\u53c2\u8003\u8bbe\u7f6e",children:"Pinctrl\u8282\u70b9\u53c2\u8003\u8bbe\u7f6e"}),"\n",(0,r.jsx)(i.p,{children:"S100 acore\u4e2dpinctrl\u8bbe\u5907\u6811\u6587\u4ef6\u8def\u5f84\u4e3a: hobot-drivers/kernel-dts/drobot-s100-pinctrl.dtsi\u3002"}),"\n",(0,r.jsx)(i.p,{children:"pinctrl\u8282\u70b9\u4e2d\u5c06\u4e00\u7ec4pin\u7ec4\u5408\u5230\u4e00\u8d77\uff0c\u6bcf\u4e2a\u8282\u70b9\u7684\u914d\u7f6e\u5305\u542b\u591a\u4e2a\u5b50\u8282\u70b9."}),"\n",(0,r.jsx)(i.p,{children:'\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9"pinmux"\u4e2d\u5305\u62ec\u5f15\u811a\u590d\u7528\u7684\u4fe1\u606f\uff0c\u5176\u4e2d"function"\u8868\u793a\u8bbe\u5907\u590d\u7528\u5f15\u811a\u7684\u529f\u80fd\uff0c"pins"\u8868\u793a\u8be5\u590d\u7528\u529f\u80fd\u4e0b\u6240\u9700\u8981\u7684\u5f15\u811a\u3002'}),"\n",(0,r.jsx)(i.p,{children:'\u7b2c\u4e8c\u4e2a\u5b50\u8282\u70b9"pinconf"\u5305\u62ec\u4e86\u5f15\u811a\u7684\u914d\u7f6e\u4fe1\u606f\uff08\u4f7f\u7528\u9ed8\u8ba4\u503c\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4e0d\u52a0pinconf\u8282\u70b9\uff09\uff0c"pins"\u8868\u793a\u9700\u8981\u8fdb\u884c\u914d\u7f6e\u7684\u5f15\u811a\uff0c"pinconf_*"\u5373\u4e3a\u914d\u7f6e\u7684\u5185\u5bb9\uff0c\u4e3b\u8981\u5305\u62ec\u4e86\u9a71\u52a8\u5f3a\u5ea6\uff0c\u4e0a\u4e0b\u62c9\uff0c\u7535\u538b\u6a21\u5f0f\u7b49\u3002'}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-C",children:'&pinctrl_peri {\n     pinctrl_test_default: pinctrl_test_default {\n         pinmux {\n             function = "peri_i2c5";\n             pins = "peri_i2c5_scl", "peri_i2c5_sda";\n         };\n         pinconf {\n             pins = "peri_i2c5_scl", "peri_i2c5_sda";\n             drive-strength = <7>;\n             bias-pull-down;\n             input-disable;\n             low-power-disable;\n             slew-rate = <1>;\n             input-schmitt-disable;\n         };\n     };\n\n     pinctrl_test_sleep: pinctrl_test_sleep {\n         pinmux {\n             function = "peri_i2c5";\n             pins = "peri_i2c5_scl", "peri_i2c5_sda";\n         };\n         pinconf {\n             pins = "peri_i2c5_scl", "peri_i2c5_sda";\n             drive-strength = <1>;\n             bias-pull-up;\n             input-enable;\n             low-power-enable;\n             slew-rate = <0>;\n             input-schmitt-enable;\n         };\n     };\n };\n'})}),"\n",(0,r.jsx)(i.h3,{id:"\u8282\u70b9\u5f15\u7528",children:"\u8282\u70b9\u5f15\u7528"}),"\n",(0,r.jsx)(i.p,{children:'\u9a71\u52a8\u5728\u4f7f\u7528pinctrl\u7684\u63a5\u53e3\u524d\uff0c\u9700\u8981\u5728DTS\u91cc\u914d\u7f6e\u76f8\u5e94\u7684pinctrl\u8282\u70b9\uff0c\u5f53\u9a71\u52a8probe\u7684\u65f6\u5019\uff0c\u4f1a\u5c06"default"\u5bf9\u5e94\u7684\u8fd9\u7ec4pinctrl\u914d\u7f6e\u5230\u5bc4\u5b58\u5668\u91cc\u9762\uff0c\u800c\u5176\u5b83\u7ec4\u7684\u914d\u7f6e\u9700\u8981\u5728\u4ee3\u7801\u91cc\u9762\u663e\u793a\u8c03\u7528\uff0c\u8fdb\u884c\u5207\u6362\u4f7f\u7528\u3002'}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-dts",children:'pinctrl_test: pinctrl_test {\n        compatible = "horizon,s100-pinctrl-test";\n        pinctrl-names = "default", "sleep";\n        pinctrl-0 = <&pinctrl_test_default>;\n        pinctrl-1 = <&pinctrl_test_sleep>;\n        #address-cells = <1>;\n        #size-cells = <0>;\n};\n'})}),"\n",(0,r.jsx)(i.p,{children:"\u663e\u793a\u5207\u6362pinctrl state\u9700\u8981\u8c03\u7528pinctrl_select_state\u63a5\u53e3\u3002"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-C",children:"/**\n * pinctrl_select_state() - select/activate/program a pinctrl state to HW\n * @p: the pinctrl handle for the device that requests configuration\n * @state: the state handle to select/activate/program\n */\nint pinctrl_select_state(struct pinctrl *p, struct pinctrl_state *state)\n"})}),"\n",(0,r.jsx)(i.h2,{id:"pinctrl-debugfs\u4f7f\u7528\u8bf4\u660e",children:"Pinctrl debugfs\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,r.jsx)(i.admonition,{type:"info",children:(0,r.jsx)(i.p,{children:"\u6ce8\u610f\uff1a\u975eroot\u7528\u6237\u9700\u8981\u5728\u547d\u4ee4\u524d\u6dfb\u52a0\u201csudo\u201d"})}),"\n",(0,r.jsx)(i.h3,{id:"pin\u4fe1\u606f\u67e5\u8be2",children:"Pin\u4fe1\u606f\u67e5\u8be2"}),"\n",(0,r.jsx)(i.h4,{id:"syskerneldebugpinctrlpinctrl-devices",children:"/sys/kernel/debug/pinctrl/pinctrl-devices"}),"\n",(0,r.jsx)(i.p,{children:"\u67e5\u770b\u7cfb\u7edf\u4e2d\u90fd\u6709\u54ea\u4e9bpinctrl\u8bbe\u5907\uff0c\u662f\u5426\u4f7f\u7528pinmux\u548cpinconf\u6a21\u5757\u3002"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-shell",children:"root@ubuntu:~# cat /sys/kernel/debug/pinctrl/pinctrl-devices\nname [pinmux] [pinconf]\nperi yes yes\ncam yes yes\nvideo yes yes\n"})}),"\n",(0,r.jsx)(i.h4,{id:"syskerneldebugpinctrlpinctrl-handles",children:"/sys/kernel/debug/pinctrl/pinctrl-handles"}),"\n",(0,r.jsx)(i.p,{children:"\u67e5\u770b\u5df2\u7ecf\u88ab\u7533\u8bf7\u8fc7\u7684\u5f15\u811a\u914d\u7f6e\u6620\u5c04\u3002"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-shell",children:"root@ubuntu:~# cat /sys/kernel/debug/pinctrl/pinctrl-handles\n Requested pin control handlers their pinmux maps:\n device: 39420000.i2c current state: default\n state: default\n     type: MUX_GROUP controller cam group: cam_i2c0_scl (8) function: cam_i2c0 (6)\n     type: MUX_GROUP controller cam group: cam_i2c0_sda (9) function: cam_i2c0 (6)\n     type: CONFIGS_GROUP controller cam group cam_i2c0_scl (8)config 00000109\n     type: CONFIGS_GROUP controller cam group cam_i2c0_sda (9)config 00000109\n device: 39430000.i2c current state: default\n state: default\n     type: MUX_GROUP controller cam group: cam_i2c1_scl (10) function: cam_i2c1 (7)\n     type: MUX_GROUP controller cam group: cam_i2c1_sda (11) function: cam_i2c1 (7)\n     type: CONFIGS_GROUP controller cam group cam_i2c1_scl (10)config 00000109\n     type: CONFIGS_GROUP controller cam group cam_i2c1_sda (11)config 00000109\n device: 39440000.i2c current state: default\n state: default\n     type: MUX_GROUP controller cam group: cam_i2c2_scl (12) function: cam_i2c2 (8)\n     type: MUX_GROUP controller cam group: cam_i2c2_sda (13) function: cam_i2c2 (8)\n     type: CONFIGS_GROUP controller cam group cam_i2c2_scl (12)config 00000109\n     type: CONFIGS_GROUP controller cam group cam_i2c2_sda (13)config 00000109\n device: 39450000.i2c current state: default\n state: default\n     type: MUX_GROUP controller cam group: cam_i2c3_scl (14) function: cam_i2c3 (9)\n     type: MUX_GROUP controller cam group: cam_i2c3_sda (15) function: cam_i2c3 (9)\n     type: CONFIGS_GROUP controller cam group cam_i2c3_scl (14)config 00000109\n     type: CONFIGS_GROUP controller cam group cam_i2c3_sda (15)config 00000109\n\n ...\n\n root@ubuntu:~#\n"})}),"\n",(0,r.jsx)(i.h4,{id:"syskerneldebugpinctrlpinctrl-maps",children:"/sys/kernel/debug/pinctrl/pinctrl-maps"}),"\n",(0,r.jsx)(i.p,{children:"\u67e5\u770b\u88ab\u4f7f\u7528\u7684\u5f15\u811amaps\uff0c\u5305\u542b\u6bcf\u4e2a\u88ab\u4f7f\u7528\u7684\u5f15\u811a\u6240\u5728\u7684\u63a7\u5236\u5668\uff0c\u54ea\u4e9b\u8bbe\u5907\u5728\u4f7f\u7528\uff0c\u5904\u4e8e\u54ea\u4e2apinctrl\u72b6\u6001\u4e0b\uff0c\u5904\u4e8e\u90a3\u4e00\u7ec4\u5f15\u811a\uff0c\u88ab\u590d\u7528\u4e3a\u4ec0\u4e48\u529f\u80fd\u3002"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-{.shell}",children:"root@ubuntu:~# cat /sys/kernel/debug/pinctrl/pinctrl-maps\nPinctrl maps:\ndevice 39420000.i2c\nstate default\ntype MUX_GROUP (2)\ncontrolling device 370f3000.pinctrl\ngroup cam_i2c0_scl\nfunction cam_i2c0\n\ndevice 39420000.i2c\nstate default\ntype MUX_GROUP (2)\ncontrolling device 370f3000.pinctrl\ngroup cam_i2c0_sda\nfunction cam_i2c0\n\ndevice 39420000.i2c\nstate default\ntype CONFIGS_GROUP (4)\ncontrolling device 370f3000.pinctrl\ngroup cam_i2c0_scl\nconfig 00000109\n\n...\n\nroot@ubuntu:~#\n"})}),"\n",(0,r.jsx)(i.h4,{id:"syskerneldebugpinctrlpinctrl_devgpio-ranges",children:"/sys/kernel/debug/pinctrl/<pinctrl_dev>/gpio-ranges"}),"\n",(0,r.jsxs)(i.p,{children:["\u67e5\u770bpinctrl\u7cfb\u7edf\u4e2d\u5f15\u811a\u5e8f\u53f7\u548cgpio\u5b50\u7cfb\u7edf\u4e2d\u5f15\u811a\u7684\u6620\u5c04\u5173\u7cfb\u3002\u4ee5\u4e0b\u547d\u4ee4\u4ee5",(0,r.jsx)(i.code,{children:"<pinctrl_dev>"}),"\u4e3a",(0,r.jsx)(i.code,{children:"39ff5000.pinctrl-peri"}),"\u4e3a\u4f8b\u3002"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-{.shell}",children:"root@ubuntu:~# cat /sys/kernel/debug/pinctrl/39ff5000.pinctrl-peri/gpio-ranges\nGPIO ranges handled:\n0: 394f0000.gpio GPIOS [480 - 511] PINS [2 - 33]\n0: 39500000.gpio GPIOS [474 - 479] PINS [34 - 39]\nroot@ubuntu:~#\n"})}),"\n",(0,r.jsx)(i.h4,{id:"syskerneldebugpinctrlpinctrl_devpinconf-pins",children:"/sys/kernel/debug/pinctrl/<pinctrl_dev>/pinconf-pins"}),"\n",(0,r.jsxs)(i.p,{children:["\u67e5\u770b\u6bcf\u4e2a\u5f15\u811a\u7684\u4fe1\u606f\uff0c\u5305\u542bpinmux\u5bf9\u5e94\u7684\u5bc4\u5b58\u5668\u5730\u5740\u548c\u503c\u548cpinconf\u5bf9\u5e94\u7684\u5bc4\u5b58\u5668\u5730\u5740\u548c\u503c\uff0c\u662f\u5426\u652f\u6301\u7535\u538b\u8f6c\u6362\u4ee5\u53ca\u7535\u538b\u503c\u3002\u4ee5\u4e0b\u547d\u4ee4\u4ee5",(0,r.jsx)(i.code,{children:"<pinctrl_dev>"}),"\u4e3a",(0,r.jsx)(i.code,{children:"39ff5000.pinctrl-peri"}),"\u4e3a\u4f8b\u3002"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-{.shell}",children:"root@ubuntu:~# cat /sys/kernel/debug/pinctrl/39ff5000.pinctrl-peri/pinconf-pins\nPin config settings per pin\nFormat: pin (name): configs\npin 0 (UFS_REF_CLK): type 2, pwr 0, funs:(0,20,20,20,), mux(39ff5060: 0), cfg(39ff6010: 31), pwr(39ff5040: 1)\npin 1 (UFS_RSTO): type 2, pwr 0, funs:(0,20,20,20,), mux(39ff5064: 0), cfg(39ff6014: 31), pwr(39ff5040: 1)\npin 2 (EMAC_MDC_HSI0): type 2, pwr 0, funs:(1,2,20,3,), mux(39ff5068: 0), cfg(39ff6018: 31), pwr(39ff5040: 1)\npin 3 (EMAC_MDIO_HSI0): type 3, pwr 0, funs:(1,20,20,3,), mux(39ff506c: 0), cfg(39ff601c: 32), pwr(39ff5040: 1)\npin 4 (SD_CLK): type 0, pwr 1, funs:(4,20,20,3,), mux(39ff5070: 0), cfg(39ff6020: 58), pwr(39ff5040: 1)\npin 5 (SD_CMD): type 0, pwr 1, funs:(4,20,20,3,), mux(39ff5074: 0), cfg(39ff6024: 58), pwr(39ff5040: 1)\npin 6 (SD_DATA0): type 4, pwr 1, funs:(4,20,20,3,), mux(39ff5078: 0), cfg(39ff6028: 58), pwr(39ff5040: 1)\npin 7 (SD_DATA1): type 4, pwr 1, funs:(4,20,20,3,), mux(39ff507c: 0), cfg(39ff602c: 58), pwr(39ff5040: 1)\npin 8 (SD_DATA2): type 4, pwr 1, funs:(4,20,20,3,), mux(39ff5080: 0), cfg(39ff6030: 58), pwr(39ff5040: 1)\npin 9 (SD_DATA3): type 4, pwr 1, funs:(4,20,20,3,), mux(39ff5084: 0), cfg(39ff6034: 58), pwr(39ff5040: 1)\npin 10 (SD_DATA4): type 4, pwr 1, funs:(4,20,20,3,), mux(39ff5088: 0), cfg(39ff6038: 58), pwr(39ff5040: 1)\npin 11 (SD_DATA5): type 4, pwr 1, funs:(4,20,20,3,), mux(39ff508c: 0), cfg(39ff603c: 58), pwr(39ff5040: 1)\npin 12 (SD_DATA6): type 4, pwr 1, funs:(4,20,20,3,), mux(39ff5090: 0), cfg(39ff6040: 58), pwr(39ff5040: 1)\npin 13 (SD_DATA7): type 4, pwr 1, funs:(4,20,20,3,), mux(39ff5094: 0), cfg(39ff6044: 58), pwr(39ff5040: 1)\npin 14 (SD_DATA_STRB): type 4, pwr 1, funs:(4,20,20,3,), mux(39ff5098: 0), cfg(39ff6048: 18), pwr(39ff5040: 1)\npin 15 (SD_DET_N): type 2, pwr 0, funs:(4,5,20,3,), mux(39ff509c: 3), cfg(39ff604c: 50), pwr(39ff5040: 1)\npin 16 (SD_WPROT): type 3, pwr 0, funs:(4,6,20,3,), mux(39ff50a0: 0), cfg(39ff6050: 50), pwr(39ff5040: 1)\npin 17 (I2C5_SCL): type 2, pwr 0, funs:(7,8,20,3,), mux(39ff50a4: 0), cfg(39ff6054: 31), pwr(39ff5040: 1)\npin 18 (I2C5_SDA): type 3, pwr 0, funs:(7,9,20,3,), mux(39ff50a8: 0), cfg(39ff6058: 32), pwr(39ff5040: 1)\npin 19 (SPI0_CSN0): type 2, pwr 0, funs:(10,20,20,3,), mux(39ff50ac: 0), cfg(39ff605c: 31), pwr(39ff5040: 1)\npin 20 (SPI0_CSN1): type 3, pwr 0, funs:(10,11,20,3,), mux(39ff50b0: 0), cfg(39ff6060: 32), pwr(39ff5040: 1)\npin 21 (SPI0_MOSI): type 3, pwr 0, funs:(10,20,20,3,), mux(39ff50b4: 0), cfg(39ff6064: 32), pwr(39ff5040: 1)\npin 22 (SPI0_MISO): type 3, pwr 0, funs:(10,20,20,3,), mux(39ff50b8: 0), cfg(39ff6068: 32), pwr(39ff5040: 1)\npin 23 (SPI0_SCLK): type 2, pwr 0, funs:(10,20,20,3,), mux(39ff50bc: 0), cfg(39ff606c: 31), pwr(39ff5040: 1)\npin 24 (SPI1_CSN0): type 3, pwr 0, funs:(12,20,20,3,), mux(39ff50c0: 0), cfg(39ff6070: 32), pwr(39ff5040: 1)\npin 25 (SPI1_CSN1): type 3, pwr 0, funs:(12,13,20,3,), mux(39ff50c4: 0), cfg(39ff6074: 32), pwr(39ff5040: 1)\npin 26 (SPI1_MOSI): type 3, pwr 0, funs:(12,20,20,3,), mux(39ff50c8: 0), cfg(39ff6078: 32), pwr(39ff5040: 1)\npin 27 (SPI1_MISO): type 3, pwr 0, funs:(12,20,20,3,), mux(39ff50cc: 0), cfg(39ff607c: 32), pwr(39ff5040: 1)\npin 28 (SPI1_SCLK): type 3, pwr 0, funs:(12,20,20,3,), mux(39ff50d0: 0), cfg(39ff6080: 32), pwr(39ff5040: 1)\npin 29 (UART0_TXD): type 3, pwr 0, funs:(14,20,20,3,), mux(39ff50d4: 0), cfg(39ff6084: 32), pwr(39ff5040: 1)\npin 30 (UART0_RXD): type 3, pwr 0, funs:(14,20,20,3,), mux(39ff50d8: 0), cfg(39ff6088: 32), pwr(39ff5040: 1)\npin 31 (UART0_RTSN): type 2, pwr 0, funs:(14,15,20,3,), mux(39ff50dc: 0), cfg(39ff608c: 31), pwr(39ff5040: 1)\npin 32 (UART0_CTSN): type 3, pwr 0, funs:(14,20,20,3,), mux(39ff50e0: 0), cfg(39ff6090: 32), pwr(39ff5040: 1)\npin 33 (UART1_TXD): type 3, pwr 0, funs:(16,17,20,3,), mux(39ff50e4: 0), cfg(39ff6094: 32), pwr(39ff5040: 1)\npin 34 (UART1_RXD): type 3, pwr 0, funs:(16,18,20,3,), mux(39ff50e8: 0), cfg(39ff6098: 32), pwr(39ff5040: 1)\npin 35 (PCM0_MCLK): type 2, pwr 0, funs:(19,20,20,3,), mux(39ff50ec: 3), cfg(39ff609c: 32), pwr(39ff5040: 1)\npin 36 (PCM0_BCLK): type 3, pwr 0, funs:(19,20,20,3,), mux(39ff50f0: 3), cfg(39ff60a0: 32), pwr(39ff5040: 1)\npin 37 (PCM0_FSYNC): type 3, pwr 0, funs:(19,20,20,3,), mux(39ff50f4: 3), cfg(39ff60a4: 32), pwr(39ff5040: 1)\npin 38 (PCM0_DATA0): type 3, pwr 0, funs:(19,20,20,3,), mux(39ff50f8: 3), cfg(39ff60a8: 32), pwr(39ff5040: 1)\npin 39 (PCM0_DATA1): type 2, pwr 0, funs:(19,20,20,3,), mux(39ff50fc: 3), cfg(39ff60ac: 32), pwr(39ff5040: 1)\n"})}),"\n",(0,r.jsx)(i.h4,{id:"syskerneldebugpinctrlpinctrl_devpinconf-groups",children:"/sys/kernel/debug/pinctrl/<pinctrl_dev>/pinconf-groups"}),"\n",(0,r.jsxs)(i.p,{children:["\u67e5\u770b\u6bcf\u4e2a\u5f15\u811a\u7684\u7535\u6c14\u5c5e\u6027\u914d\u7f6e\uff0c\u4e0a\u4e0b\u62c9\uff0c\u8f93\u5165\u4f7f\u80fd\uff0c\u65bd\u5bc6\u7279\uff0c\u538b\u6446\u7387\u7b49\u7b49\u3002\u4ee5\u4e0b\u547d\u4ee4\u4ee5",(0,r.jsx)(i.code,{children:"<pinctrl_dev>"}),"\u4e3a",(0,r.jsx)(i.code,{children:"39ff5000.pinctrl-peri"}),"\u4e3a\u4f8b\u3002"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-{.shell}",children:"root@ubuntu:~# cat /sys/kernel/debug/pinctrl/39ff5000.pinctrl-peri/pinconf-groups\nPin config settings per pin group\nFormat: group (name): configs\n0 (peri_ufs_ref_clk): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), output drive strength (1 mA), input enabled, input schmitt enabled, slew rate (0)\n1 (peri_ufs_rsto): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), output drive strength (1 mA), input enabled, input schmitt enabled, slew rate (0)\n2 (peri_emac_mdc_hsi0): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), output drive strength (1 mA), input enabled, input schmitt enabled, slew rate (0)\n3 (peri_emac_mdio_hsi0): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n4 (peri_sd_clk): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), output drive strength (0 mA), input enabled, input schmitt enabled, pin low power (1 mode), slew rate (0)\n5 (peri_sd_cmd): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), output drive strength (0 mA), input enabled, input schmitt enabled, pin low power (1 mode), slew rate (0)\n6 (peri_sd_data0): input bias disabled, input bias pull down (1 ohms), input bias pull up (0 ohms), input enabled, pin low power (1 mode)\n7 (peri_sd_data1): input bias disabled, input bias pull down (1 ohms), input bias pull up (0 ohms), input enabled, pin low power (1 mode)\n8 (peri_sd_data2): input bias disabled, input bias pull down (1 ohms), input bias pull up (0 ohms), input enabled, pin low power (1 mode)\n9 (peri_sd_data3): input bias disabled, input bias pull down (1 ohms), input bias pull up (0 ohms), input enabled, pin low power (1 mode)\n10 (peri_sd_data4): input bias disabled, input bias pull down (1 ohms), input bias pull up (0 ohms), input enabled, pin low power (1 mode)\n11 (peri_sd_data5): input bias disabled, input bias pull down (1 ohms), input bias pull up (0 ohms), input enabled, pin low power (1 mode)\n12 (peri_sd_data6): input bias disabled, input bias pull down (1 ohms), input bias pull up (0 ohms), input enabled, pin low power (1 mode)\n13 (peri_sd_data7): input bias disabled, input bias pull down (1 ohms), input bias pull up (0 ohms), input enabled, pin low power (1 mode)\n14 (peri_sd_data_strb): input bias disabled, input bias pull down (0 ohms), input bias pull up (0 ohms), input enabled, pin low power (1 mode)\n15 (peri_sd_det_n): input bias disabled, input bias pull down (1 ohms), input bias pull up (0 ohms), output drive strength (0 mA), input enabled, input schmitt enabled, slew rate (0)\n16 (peri_sd_wprot): input bias disabled, input bias pull down (1 ohms), input bias pull up (0 ohms), input enabled\n17 (peri_i2c5_scl): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), output drive strength (1 mA), input enabled, input schmitt enabled, slew rate (0)\n18 (peri_i2c5_sda): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n19 (peri_spi0_csn0): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), output drive strength (1 mA), input enabled, input schmitt enabled, slew rate (0)\n20 (peri_spi0_csn1): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n21 (peri_spi0_mosi): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n22 (peri_spi0_miso): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n23 (peri_spi0_sclk): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), output drive strength (1 mA), input enabled, input schmitt enabled, slew rate (0)\n24 (peri_spi1_csn0): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n25 (peri_spi1_csn1): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n26 (peri_spi1_mosi): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n27 (peri_spi1_miso): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n28 (peri_spi1_sclk): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n29 (peri_uart0_txd): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n30 (peri_uart0_rxd): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n31 (peri_uart0_rtsn): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), output drive strength (1 mA), input enabled, input schmitt enabled, slew rate (0)\n32 (peri_uart0_ctsn): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n33 (peri_uart1_txd): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n34 (peri_uart1_rxd): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n35 (peri_pcm0_mclk): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), output drive strength (2 mA), input enabled, input schmitt enabled, slew rate (0)\n36 (peri_pcm0_bclk): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n37 (peri_pcm0_fsync): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n38 (peri_pcm0_data0): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), input enabled\n39 (peri_pcm0_data1): input bias disabled, input bias pull down (0 ohms), input bias pull up (1 ohms), output drive strength (2 mA), input enabled, input schmitt enabled, slew rate (0)\n"})}),"\n",(0,r.jsx)(i.h4,{id:"syskerneldebugpinctrlpinctrl_devpingroups",children:"/sys/kernel/debug/pinctrl/<pinctrl_dev>/pingroups"}),"\n",(0,r.jsxs)(i.p,{children:["\u67e5\u770b\u6bcf\u4e2a\u5f15\u811a\u7ec4\u5185\u5f15\u811a\u7684\u914d\u7f6e\uff0cS100\u662f\u6bcf\u4e2a\u5f15\u811a\u662f\u4e00\u4e2agroup\u3002\u4ee5\u4e0b\u547d\u4ee4\u4ee5",(0,r.jsx)(i.code,{children:"<pinctrl_dev>"}),"\u4e3a",(0,r.jsx)(i.code,{children:"39ff5000.pinctrl-peri"}),"\u4e3a\u4f8b\u3002"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-{.shell}",children:"root@ubuntu:~# cat /sys/kernel/debug/pinctrl/39ff5000.pinctrl-peri/pingroups\nregistered pin groups:\ngroup: peri_ufs_ref_clk\npin 0 (UFS_REF_CLK)\n\ngroup: peri_ufs_rsto\npin 1 (UFS_RSTO)\n\ngroup: peri_emac_mdc_hsi0\npin 2 (EMAC_MDC_HSI0)\n\ngroup: peri_emac_mdio_hsi0\npin 3 (EMAC_MDIO_HSI0)\n\ngroup: peri_sd_clk\npin 4 (SD_CLK)\n\ngroup: peri_sd_cmd\npin 5 (SD_CMD)\n\ngroup: peri_sd_data0\npin 6 (SD_DATA0)\n\ngroup: peri_sd_data1\npin 7 (SD_DATA1)\n\ngroup: peri_sd_data2\npin 8 (SD_DATA2)\n\ngroup: peri_sd_data3\npin 9 (SD_DATA3)\n\ngroup: peri_sd_data4\npin 10 (SD_DATA4)\n\ngroup: peri_sd_data5\npin 11 (SD_DATA5)\n\ngroup: peri_sd_data6\npin 12 (SD_DATA6)\n\ngroup: peri_sd_data7\npin 13 (SD_DATA7)\n\ngroup: peri_sd_data_strb\npin 14 (SD_DATA_STRB)\n\ngroup: peri_sd_det_n\npin 15 (SD_DET_N)\n\ngroup: peri_sd_wprot\npin 16 (SD_WPROT)\n\ngroup: peri_i2c5_scl\npin 17 (I2C5_SCL)\n\ngroup: peri_i2c5_sda\npin 18 (I2C5_SDA)\n\ngroup: peri_spi0_csn0\npin 19 (SPI0_CSN0)\n\ngroup: peri_spi0_csn1\npin 20 (SPI0_CSN1)\n\ngroup: peri_spi0_mosi\npin 21 (SPI0_MOSI)\n\ngroup: peri_spi0_miso\npin 22 (SPI0_MISO)\n\ngroup: peri_spi0_sclk\npin 23 (SPI0_SCLK)\n\ngroup: peri_spi1_csn0\npin 24 (SPI1_CSN0)\n\ngroup: peri_spi1_csn1\npin 25 (SPI1_CSN1)\n\ngroup: peri_spi1_mosi\npin 26 (SPI1_MOSI)\n\ngroup: peri_spi1_miso\npin 27 (SPI1_MISO)\n\ngroup: peri_spi1_sclk\npin 28 (SPI1_SCLK)\n\ngroup: peri_uart0_txd\npin 29 (UART0_TXD)\n\ngroup: peri_uart0_rxd\npin 30 (UART0_RXD)\n\ngroup: peri_uart0_rtsn\npin 31 (UART0_RTSN)\n\ngroup: peri_uart0_ctsn\npin 32 (UART0_CTSN)\n\ngroup: peri_uart1_txd\npin 33 (UART1_TXD)\n\ngroup: peri_uart1_rxd\npin 34 (UART1_RXD)\n\ngroup: peri_pcm0_mclk\npin 35 (PCM0_MCLK)\n\ngroup: peri_pcm0_bclk\npin 36 (PCM0_BCLK)\n\ngroup: peri_pcm0_fsync\npin 37 (PCM0_FSYNC)\n\ngroup: peri_pcm0_data0\npin 38 (PCM0_DATA0)\n\ngroup: peri_pcm0_data1\npin 39 (PCM0_DATA1)\n\nroot@ubuntu:~#\n"})}),"\n",(0,r.jsx)(i.h4,{id:"syskerneldebugpinctrlpinctrl_devpinmux-functions",children:"/sys/kernel/debug/pinctrl/<pinctrl_dev>/pinmux-functions"}),"\n",(0,r.jsxs)(i.p,{children:["\u5f15\u811a\u6309\u7167function\u8fdb\u884c\u5206\u7ec4\u3002\u4ee5\u4e0b\u547d\u4ee4\u4ee5",(0,r.jsx)(i.code,{children:"<pinctrl_dev>"}),"\u4e3a",(0,r.jsx)(i.code,{children:"39ff5000.pinctrl-peri"}),"\u4e3a\u4f8b\u3002"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-{.shell}",children:"root@ubuntu:~# cat /sys/kernel/debug/pinctrl/39ff5000.pinctrl-peri/pinmux-functions\nfunction 0: peri_ufs, groups = [ peri_ufs_ref_clk peri_ufs_rsto ]\nfunction 1: peri_emac, groups = [ peri_emac_mdc_hsi0 peri_emac_mdio_hsi0 ]\nfunction 2: peri_clkout, groups = [ peri_emac_mdc_hsi0 ]\nfunction 3: peri_gpio, groups = [ peri_emac_mdc_hsi0 peri_emac_mdio_hsi0 peri_sd_clk peri_sd_cmd peri_sd_data0 peri_sd_data1 peri_sd_data2 peri_sd_data3 peri_sd_data4 peri_sd_data5 peri_sd_data6 peri_sd_data7 peri_sd_data_strb peri_sd_det_n peri_sd_wprot peri_i2c5_scl peri_i2c5_sda peri_spi0_csn0 peri_spi0_csn1 peri_spi0_mosi peri_spi0_miso peri_spi0_sclk peri_spi1_csn0 peri_spi1_csn1 peri_spi1_mosi peri_spi1_miso peri_spi1_sclk peri_uart0_txd peri_uart0_rxd peri_uart0_rtsn peri_uart0_ctsn peri_uart1_txd peri_uart1_rxd peri_pcm0_mclk peri_pcm0_bclk peri_pcm0_fsync peri_pcm0_data0 peri_pcm0_data1 ]\nfunction 4: peri_sd, groups = [ peri_sd_clk peri_sd_cmd peri_sd_data0 peri_sd_data1 peri_sd_data2 peri_sd_data3 peri_sd_data4 peri_sd_data5 peri_sd_data6 peri_sd_data7 peri_sd_data_strb peri_sd_det_n peri_sd_wprot ]\nfunction 5: peri_pcm1_bclk, groups = [ peri_sd_det_n ]\nfunction 6: peri_pcm1_fsync, groups = [ peri_sd_wprot ]\nfunction 7: peri_i2c5, groups = [ peri_i2c5_scl peri_i2c5_sda ]\nfunction 8: peri_uart2_rxd, groups = [ peri_i2c5_scl ]\nfunction 9: peri_uart2_txd, groups = [ peri_i2c5_sda ]\nfunction 10: peri_spi0, groups = [ peri_spi0_csn0 peri_spi0_csn1 peri_spi0_mosi peri_spi0_miso peri_spi0_sclk ]\nfunction 11: peri_uart3_rxd, groups = [ peri_spi0_csn1 ]\nfunction 12: peri_spi1, groups = [ peri_spi1_csn0 peri_spi1_csn1 peri_spi1_mosi peri_spi1_miso peri_spi1_sclk ]\nfunction 13: peri_uart3_txd, groups = [ peri_spi1_csn1 ]\nfunction 14: peri_uart0, groups = [ peri_uart0_txd peri_uart0_rxd peri_uart0_rtsn peri_uart0_ctsn ]\nfunction 15: peri_pcm1_mclk, groups = [ peri_uart0_rtsn ]\nfunction 16: peri_uart1, groups = [ peri_uart1_txd peri_uart1_rxd ]\nfunction 17: peri_pcm1_data1, groups = [ peri_uart1_txd ]\nfunction 18: peri_pcm1_data0, groups = [ peri_uart1_rxd ]\nfunction 19: peri_pcm0, groups = [ peri_pcm0_mclk peri_pcm0_bclk peri_pcm0_fsync peri_pcm0_data0 peri_pcm0_data1 ]\nroot@ubuntu:~#\n"})}),"\n",(0,r.jsx)(i.h4,{id:"syskerneldebugpinctrlpinctrl_devpinmux-pins",children:"/sys/kernel/debug/pinctrl/<pinctrl_dev>/pinmux-pins"}),"\n",(0,r.jsxs)(i.p,{children:["\u67e5\u770b\u54ea\u4e9b\u5f15\u811a\u88ab\u5360\u7528\u4e86\uff0c\u662fMUX\u5360\u7528\u8fd8\u662fGPIO\u5360\u7528\u3002\u4ee5\u4e0b\u547d\u4ee4\u4ee5",(0,r.jsx)(i.code,{children:"<pinctrl_dev>"}),"\u4e3a",(0,r.jsx)(i.code,{children:"39ff5000.pinctrl-peri"}),"\u4e3a\u4f8b\u3002"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-{.shell}",children:"root@ubuntu:~# cat /sys/kernel/debug/pinctrl/39ff5000.pinctrl-peri/pinmux-pins\nPinmux settings per pin\nFormat: pin (name): mux_owner gpio_owner hog?\npin 0 (UFS_REF_CLK): 39410000.ufs (GPIO UNCLAIMED) function peri_ufs group peri_ufs_ref_clk\npin 1 (UFS_RSTO): 39410000.ufs (GPIO UNCLAIMED) function peri_ufs group peri_ufs_rsto\npin 2 (EMAC_MDC_HSI0): 330f0000.ethernet (GPIO UNCLAIMED) function peri_emac group peri_emac_mdc_hsi0\npin 3 (EMAC_MDIO_HSI0): 330f0000.ethernet (GPIO UNCLAIMED) function peri_emac group peri_emac_mdio_hsi0\npin 4 (SD_CLK): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 5 (SD_CMD): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 6 (SD_DATA0): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 7 (SD_DATA1): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 8 (SD_DATA2): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 9 (SD_DATA3): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 10 (SD_DATA4): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 11 (SD_DATA5): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 12 (SD_DATA6): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 13 (SD_DATA7): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 14 (SD_DATA_STRB): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 15 (SD_DET_N): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 16 (SD_WPROT): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 17 (I2C5_SCL): 39470000.i2c (GPIO UNCLAIMED) function peri_i2c5 group peri_i2c5_scl\npin 18 (I2C5_SDA): 39470000.i2c (GPIO UNCLAIMED) function peri_i2c5 group peri_i2c5_sda\npin 19 (SPI0_CSN0): 39800000.spi (GPIO UNCLAIMED) function peri_spi0 group peri_spi0_csn0\npin 20 (SPI0_CSN1): 39800000.spi (GPIO UNCLAIMED) function peri_spi0 group peri_spi0_csn1\npin 21 (SPI0_MOSI): 39800000.spi (GPIO UNCLAIMED) function peri_spi0 group peri_spi0_mosi\npin 22 (SPI0_MISO): 39800000.spi (GPIO UNCLAIMED) function peri_spi0 group peri_spi0_miso\npin 23 (SPI0_SCLK): 39800000.spi (GPIO UNCLAIMED) function peri_spi0 group peri_spi0_sclk\npin 24 (SPI1_CSN0): 39810000.spi (GPIO UNCLAIMED) function peri_spi1 group peri_spi1_csn0\npin 25 (SPI1_CSN1): 39810000.spi 394f0000.gpio:503 function peri_spi1 group peri_spi1_csn1\npin 26 (SPI1_MOSI): 39810000.spi (GPIO UNCLAIMED) function peri_spi1 group peri_spi1_mosi\npin 27 (SPI1_MISO): 39810000.spi (GPIO UNCLAIMED) function peri_spi1 group peri_spi1_miso\npin 28 (SPI1_SCLK): 39810000.spi (GPIO UNCLAIMED) function peri_spi1 group peri_spi1_sclk\npin 29 (UART0_TXD): 394a0000.uart (GPIO UNCLAIMED) function peri_uart0 group peri_uart0_txd\npin 30 (UART0_RXD): 394a0000.uart (GPIO UNCLAIMED) function peri_uart0 group peri_uart0_rxd\npin 31 (UART0_RTSN): 394a0000.uart (GPIO UNCLAIMED) function peri_uart0 group peri_uart0_rtsn\npin 32 (UART0_CTSN): 394a0000.uart (GPIO UNCLAIMED) function peri_uart0 group peri_uart0_ctsn\npin 33 (UART1_TXD): 394b0000.uart0 (GPIO UNCLAIMED) function peri_uart1 group peri_uart1_txd\npin 34 (UART1_RXD): 394b0000.uart0 (GPIO UNCLAIMED) function peri_uart1 group peri_uart1_rxd\npin 35 (PCM0_MCLK): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 36 (PCM0_BCLK): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 37 (PCM0_FSYNC): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 38 (PCM0_DATA0): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 39 (PCM0_DATA1): (MUX UNCLAIMED) (GPIO UNCLAIMED)\n"})}),"\n",(0,r.jsx)(i.h4,{id:"syskerneldebugpinctrl_devpinmux-select",children:"/sys/kernel/debug/<pinctrl_dev>/pinmux-select"}),"\n",(0,r.jsxs)(i.p,{children:["\u53ef\u4ee5\u901a\u8fc7\u8282\u70b9pinmux-functions\u6765\u67e5\u8be2\u9700\u8981\u6bcf\u4e2apin\u7684group\u548cfunction\uff0c\n\u901a\u8fc7pinmux-select\u8282\u70b9\u8bbe\u7f6epinmux\uff0c \u53c2\u6570group name\u548cfunc name\u3002\n\u4ee5\u4e0b\u547d\u4ee4\u4ee5",(0,r.jsx)(i.code,{children:"<pinctrl_dev>"}),"\u4e3a",(0,r.jsx)(i.code,{children:"39ff5000.pinctrl-peri"}),"\u4e3a\u4f8b\u3002"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-{.shell}",children:'cd /sys/kernel/debug/pinctrl/39ff5000.pinctrl-peri/\necho  "peri_spi0_csn0 peri_gpio"  > pinmux-select\necho  "peri_i2c5_scl peri_i2c5"  > pinmux-select\necho  "peri_i2c5_sda peri_i2c5"  > pinmux-select\n'})}),"\n",(0,r.jsx)(i.h4,{id:"syskerneldebugpinctrl_devpins",children:"/sys/kernel/debug/<pinctrl_dev>/pins"}),"\n",(0,r.jsxs)(i.p,{children:["\u67e5\u770b\u6bcf\u4e2a\u5f15\u811a\u7684\u4fe1\u606f\uff0c\u5305\u542b\u5f15\u811a\u540d\u79f0\u548c\u5bf9\u5e94\u7684gpio\u7ba1\u811a\u3002\u4ee5\u4e0b\u547d\u4ee4\u4ee5",(0,r.jsx)(i.code,{children:"<pinctrl_dev>"}),"\u4e3a",(0,r.jsx)(i.code,{children:"39ff5000.pinctrl-peri"}),"\u4e3a\u4f8b\u3002"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-{.shell}",children:"root@ubuntu:~# cat /sys/kernel/debug/pinctrl/39ff5000.pinctrl-peri/pins\nregistered pins: 40\npin 0 (UFS_REF_CLK) 0:?\npin 1 (UFS_RSTO) 0:?\npin 2 (EMAC_MDC_HSI0) 0:394f0000.gpio\npin 3 (EMAC_MDIO_HSI0) 1:394f0000.gpio\npin 4 (SD_CLK) 2:394f0000.gpio\npin 5 (SD_CMD) 3:394f0000.gpio\npin 6 (SD_DATA0) 4:394f0000.gpio\npin 7 (SD_DATA1) 5:394f0000.gpio\npin 8 (SD_DATA2) 6:394f0000.gpio\npin 9 (SD_DATA3) 7:394f0000.gpio\npin 10 (SD_DATA4) 8:394f0000.gpio\npin 11 (SD_DATA5) 9:394f0000.gpio\npin 12 (SD_DATA6) 10:394f0000.gpio\npin 13 (SD_DATA7) 11:394f0000.gpio\npin 14 (SD_DATA_STRB) 12:394f0000.gpio\npin 15 (SD_DET_N) 13:394f0000.gpio\npin 16 (SD_WPROT) 14:394f0000.gpio\npin 17 (I2C5_SCL) 15:394f0000.gpio\npin 18 (I2C5_SDA) 16:394f0000.gpio\npin 19 (SPI0_CSN0) 17:394f0000.gpio\npin 20 (SPI0_CSN1) 18:394f0000.gpio\npin 21 (SPI0_MOSI) 19:394f0000.gpio\npin 22 (SPI0_MISO) 20:394f0000.gpio\npin 23 (SPI0_SCLK) 21:394f0000.gpio\npin 24 (SPI1_CSN0) 22:394f0000.gpio\npin 25 (SPI1_CSN1) 23:394f0000.gpio\npin 26 (SPI1_MOSI) 24:394f0000.gpio\npin 27 (SPI1_MISO) 25:394f0000.gpio\npin 28 (SPI1_SCLK) 26:394f0000.gpio\npin 29 (UART0_TXD) 27:394f0000.gpio\npin 30 (UART0_RXD) 28:394f0000.gpio\npin 31 (UART0_RTSN) 29:394f0000.gpio\npin 32 (UART0_CTSN) 30:394f0000.gpio\npin 33 (UART1_TXD) 31:394f0000.gpio\npin 34 (UART1_RXD) 0:39500000.gpio\npin 35 (PCM0_MCLK) 1:39500000.gpio\npin 36 (PCM0_BCLK) 2:39500000.gpio\npin 37 (PCM0_FSYNC) 3:39500000.gpio\npin 38 (PCM0_DATA0) 4:39500000.gpio\npin 39 (PCM0_DATA1) 5:39500000.gpio\nroot@ubuntu:~#\n"})})]})}function _(n={}){const{wrapper:i}={...(0,s.R)(),...n.components};return i?(0,r.jsx)(i,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}}}]);