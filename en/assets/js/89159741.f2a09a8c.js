"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[83709],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var d=s(96540);const i={},r=d.createContext(i);function o(e){const n=d.useContext(r);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),d.createElement(r.Provider,{value:n},e.children)}},82859:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>l});const d=JSON.parse('{"id":"FAQ/multimedia","title":"8.4 Multimedia Processing and Applications","description":"This section addresses frequently asked questions related to video codec, audio processing, and other multimedia features on the Digua RDK board.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/08_FAQ/04_multimedia.md","sourceDirName":"08_FAQ","slug":"/FAQ/multimedia","permalink":"/rdk_doc/en/FAQ/multimedia","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1751886176000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"8.3 Application Development, Compilation, and Examples","permalink":"/rdk_doc/en/FAQ/applications_and_examples"},"next":{"title":"8.5 Algorithm toolchain class","permalink":"/rdk_doc/en/FAQ/toolchain"}}');var i=s(74848),r=s(28453);const o={sidebar_position:4},a="8.4 Multimedia Processing and Applications",c={},l=[{value:"Video Codec",id:"video-codec",level:2},{value:"Q1: What could cause errors when decoding RTSP video streams on the development board (as shown in the image below)?",id:"q1-what-could-cause-errors-when-decoding-rtsp-video-streams-on-the-development-board-as-shown-in-the-image-below",level:3},{value:"Common Audio Questions",id:"common-audio-questions",level:2},{value:"Q1: In the example, tinyalsa is used. What do its parameters mean and how do you use it?",id:"q1-in-the-example-tinyalsa-is-used-what-do-its-parameters-mean-and-how-do-you-use-it",level:3},{value:"Q2: How to distinguish and use USB sound cards and onboard sound cards on the RDK board, especially when multiple audio devices are connected?",id:"q2-how-to-distinguish-and-use-usb-sound-cards-and-onboard-sound-cards-on-the-rdk-board-especially-when-multiple-audio-devices-are-connected",level:3},{value:"Q3: How can the RDK X3 series audio sub-board coexist and be used simultaneously with a USB sound card (e.g., managed by PulseAudio)?",id:"q3-how-can-the-rdk-x3-series-audio-sub-board-coexist-and-be-used-simultaneously-with-a-usb-sound-card-eg-managed-by-pulseaudio",level:3}];function t(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"84-multimedia-processing-and-applications",children:"8.4 Multimedia Processing and Applications"})}),"\n",(0,i.jsx)(n.p,{children:"This section addresses frequently asked questions related to video codec, audio processing, and other multimedia features on the Digua RDK board."}),"\n",(0,i.jsx)(n.h2,{id:"video-codec",children:"Video Codec"}),"\n",(0,i.jsx)(n.h3,{id:"q1-what-could-cause-errors-when-decoding-rtsp-video-streams-on-the-development-board-as-shown-in-the-image-below",children:"Q1: What could cause errors when decoding RTSP video streams on the development board (as shown in the image below)?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/08_FAQ/image/multimedia/image-20220728110439753.png",alt:"RTSP decoding error image"}),"\n",(0,i.jsx)(n.strong,{children:"A:"})," Common causes and solutions for RTSP video stream decoding errors include:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Missing PPS and SPS parameter information in the stream:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reason:"})," The RTSP stream (especially H.264 format) pushed by the streaming server must contain ",(0,i.jsx)(n.code,{children:"PPS"})," (Picture Parameter Set) and ",(0,i.jsx)(n.code,{children:"SPS"})," (Sequence Parameter Set) information. The decoder needs these to correctly parse the video."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Solution:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If you use ",(0,i.jsx)(n.code,{children:"ffmpeg"})," to stream from a video file (such as ",(0,i.jsx)(n.code,{children:".mp4"}),", ",(0,i.jsx)(n.code,{children:".avi"}),"), add the ",(0,i.jsx)(n.code,{children:"-bsf:v h264_mp4toannexb"})," (H.264 Bitstream Filter: MP4 to Annex B) option to your command (note: in newer ffmpeg versions, ",(0,i.jsx)(n.code,{children:"-vbsf"})," is replaced by ",(0,i.jsx)(n.code,{children:"-bsf:v"}),"). This filter will automatically add ",(0,i.jsx)(n.code,{children:"PPS"})," and ",(0,i.jsx)(n.code,{children:"SPS"})," information to the stream.\n",(0,i.jsxs)(n.strong,{children:["Example ",(0,i.jsx)(n.code,{children:"ffmpeg"})," streaming command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"ffmpeg -re -stream_loop -1 -i xxx.mp4 -c:v copy -bsf:v h264_mp4toannexb -f rtsp rtsp://192.168.1.195:8554/h264_stream\n"})}),"\n","(Replace ",(0,i.jsx)(n.code,{children:"xxx.mp4"})," with your video file name and ",(0,i.jsx)(n.code,{children:"rtsp://192.168.1.195:8554/h264_stream"})," with your actual RTSP server address.)"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Resolution support limitations:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The RDK board may only support decoding RTSP video streams up to certain resolutions, such as ",(0,i.jsx)(n.strong,{children:"1080p (1920x1080)"}),". Please confirm that your RTSP stream resolution is within the supported range. Refer to your board's documentation for the exact supported list."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Streaming software compatibility:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"VLC is not recommended for direct streaming:"})," Using VLC to stream RTSP may not work with RDK decoding, as VLC may not always add or ensure ",(0,i.jsx)(n.code,{children:"PPS"})," and ",(0,i.jsx)(n.code,{children:"SPS"})," information in the stream. It is recommended to use ",(0,i.jsx)(n.code,{children:"ffmpeg"})," or other professional streaming tools that ensure complete stream parameters."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"common-audio-questions",children:"Common Audio Questions"}),"\n",(0,i.jsx)(n.h3,{id:"q1-in-the-example-tinyalsa-is-used-what-do-its-parameters-mean-and-how-do-you-use-it",children:"Q1: In the example, tinyalsa is used. What do its parameters mean and how do you use it?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"A:"})," ",(0,i.jsx)(n.code,{children:"tinyalsa"})," is a lightweight audio library mainly used in Android and embedded Linux systems. It provides a simplified interface to ALSA (Advanced Linux Sound Architecture), making audio processing easier for developers."]}),"\n",(0,i.jsxs)(n.p,{children:["Here are some common ",(0,i.jsx)(n.code,{children:"tinyalsa"})," commands and the meaning of their parameters:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"List all sound cards:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tinymix -l\n"})}),"\n",(0,i.jsx)(n.p,{children:"This command lists all recognized sound cards and their controls in the system."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"List controls of a specific sound card:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tinymix -c <card_number> -l\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"<card_number>"})," is the index of the sound card. This command lists all controls of the specified sound card."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Get the value of a specific control:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tinymix -c <card_number> <control_name>\n"})}),"\n",(0,i.jsx)(n.p,{children:"This command shows the current value of a specific control on the given sound card. For example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tinymix -c 0 'ADC PGA Gain'\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This displays the current value of the control named ",(0,i.jsx)(n.code,{children:"ADC PGA Gain"})," on card 0."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Set the value of a specific control:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tinymix -c <card_number> <control_name> <value>\n"})}),"\n",(0,i.jsx)(n.p,{children:"This command sets the value of a specific control on the given sound card. For example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tinymix -c 0 'ADC PGA Gain' 80%\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This sets the control ",(0,i.jsx)(n.code,{children:"ADC PGA Gain"})," on card 0 to 80%."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"View current audio status:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tinymix -c <card_number> -s\n"})}),"\n",(0,i.jsx)(n.p,{children:"This command displays the current audio status of the specified sound card, including the values of all controls."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Play an audio file:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tinyplay <file_name>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This command plays the specified audio file. ",(0,i.jsx)(n.code,{children:"<file_name>"})," is the path and name of the audio file. For example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tinyplay /path/to/audio.wav\n"})}),"\n",(0,i.jsx)(n.p,{children:"This will play the specified audio file."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Record audio:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tinycap <file_name> -D <card_number> -d <device_number> -c <channels> -b <bit_depth> -r <sample_rate> -p <period_size> -n <periods> -t <duration>\n"})}),"\n",(0,i.jsx)(n.p,{children:"This command records audio and saves it to the specified file. The parameters mean:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"<file_name>"}),": Name of the recorded audio file."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"-D <card_number>"}),": Specify the sound card index."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"-d <device_number>"}),": Specify the device index (usually the PCM device)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"-c <channels>"}),": Number of recording channels (e.g., 2 for stereo, 4 for quad)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"-b <bit_depth>"}),": Audio bit depth (e.g., 16 for 16-bit)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"-r <sample_rate>"}),": Sampling rate (e.g., 48000 for 48kHz)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"-p <period_size>"}),": Period size (in frames)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"-n <periods>"}),": Number of periods."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"-t <duration>"}),": Recording duration (in seconds)."]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tinycap ./recorded_audio.wav -D 0 -d 1 -c 2 -b 16 -r 48000 -p 512 -n 4 -t 5\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This command records 2-channel, 16-bit, 48kHz audio for 5 seconds using card 0, device 1, and saves it as ",(0,i.jsx)(n.code,{children:"recorded_audio.wav"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"q2-how-to-distinguish-and-use-usb-sound-cards-and-onboard-sound-cards-on-the-rdk-board-especially-when-multiple-audio-devices-are-connected",children:"Q2: How to distinguish and use USB sound cards and onboard sound cards on the RDK board, especially when multiple audio devices are connected?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"A:"})," When both onboard sound cards (e.g., via an audio sub-board) and USB sound cards are connected to the RDK board, the Linux audio system (ALSA) assigns different card numbers to each. You need to know the correct card number to control a specific audio device."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"View recognized sound cards and their numbers:"}),"\nUse the following command to list all recognized sound cards and their corresponding numbers and names:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cat /proc/asound/cards\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example output (assuming USB sound card is registered first, onboard sound card second):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:" 0 [RC08          ]: USB-Audio - ROCWARE RC08\n                      ROCWARE RC08 at usb-xhci-hcd.2.auto-1.2, high speed\n 1 [duplexaudio   ]: simple-card - duplex-audio\n                      duplex-audio\n"})}),"\n",(0,i.jsx)(n.p,{children:"In this example:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["USB sound card ",(0,i.jsx)(n.code,{children:"ROCWARE RC08"})," is assigned card number ",(0,i.jsx)(n.strong,{children:"0"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Onboard sound card ",(0,i.jsx)(n.code,{children:"duplexaudio"})," (usually the RDK audio sub-board) is assigned card number ",(0,i.jsx)(n.strong,{children:"1"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," The assignment order may change depending on device insertion order, driver loading order, etc. If the USB sound card is plugged in after system boot, it may get a higher card number."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Use ",(0,i.jsx)(n.code,{children:"amixer"})," or ",(0,i.jsx)(n.code,{children:"tinymix"})," to specify the card for operations:"]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["When using ",(0,i.jsx)(n.code,{children:"amixer"})," (ALSA Mixer command-line utility) or ",(0,i.jsx)(n.code,{children:"tinymix"})," to view or adjust audio parameters, if you do not specify the card and device number, they usually operate on card number 0 by default."]}),"\n",(0,i.jsxs)(n.li,{children:["To operate a specific sound card, use the ",(0,i.jsx)(n.code,{children:"-c <card_number>"})," (or ",(0,i.jsx)(n.code,{children:"-c<card_number>"}),") parameter to specify the card number, and possibly ",(0,i.jsx)(n.code,{children:"-D hw:<card_number>"})," or ",(0,i.jsx)(n.code,{children:"-d <device_number>"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"View controls for a specific sound card (e.g., onboard sound card, card number 1):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"amixer -c 1 controls \n# Or use hardware device name: amixer -D hw:1 controls\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Get or set the value of a specific control on a sound card (e.g., get the value of 'ADC PGA Gain' on onboard sound card number 1):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"amixer -c 1 sget 'ADC PGA Gain',0\n"})}),"\n","To set a value, use ",(0,i.jsx)(n.code,{children:"sset"})," instead of ",(0,i.jsx)(n.code,{children:"sget"}),", for example: ",(0,i.jsx)(n.code,{children:"amixer -c 1 sset 'ADC PGA Gain',0 80%"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"With these methods, you can accurately identify and control different audio devices connected to the RDK board."}),"\n",(0,i.jsx)(n.h3,{id:"q3-how-can-the-rdk-x3-series-audio-sub-board-coexist-and-be-used-simultaneously-with-a-usb-sound-card-eg-managed-by-pulseaudio",children:"Q3: How can the RDK X3 series audio sub-board coexist and be used simultaneously with a USB sound card (e.g., managed by PulseAudio)?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"A:"})," If you want to use both the onboard audio sub-board (e.g., WM8960 chip-based) and an external USB sound card on the RDK X3, and have PulseAudio recognize and manage them, some configuration is required."]}),"\n",(0,i.jsx)(n.p,{children:"The following steps use the WM8960 audio sub-board and a USB full-duplex sound card as an example:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Ensure the audio sub-board works properly:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"First, follow the sub-board's guide to ensure its driver is loaded and it works for recording and playback when used alone."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Connect the USB sound card and identify new nodes:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Connect the USB sound card to the RDK X3's USB port. Wait for the system to load the driver."}),"\n",(0,i.jsxs)(n.li,{children:["Check the ",(0,i.jsx)(n.code,{children:"/dev/snd/"})," directory for new PCM device nodes. ALSA creates nodes for each card's PCM device (playback, capture).","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ls /dev/snd/\n"})}),"\n",(0,i.jsxs)(n.strong,{children:["Example output (assuming ",(0,i.jsx)(n.code,{children:"controlC0"}),", ",(0,i.jsx)(n.code,{children:"pcmC0D0c"}),", ",(0,i.jsx)(n.code,{children:"pcmC0D0p"}),", ",(0,i.jsx)(n.code,{children:"pcmC0D1c"}),", ",(0,i.jsx)(n.code,{children:"pcmC0D1p"})," are for the audio sub-board, and ",(0,i.jsx)(n.code,{children:"pcmC1D0c"}),", ",(0,i.jsx)(n.code,{children:"pcmC1D0p"})," are for the USB sound card):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"by-path  controlC0  pcmC0D0c  pcmC0D0p  pcmC0D1c  pcmC0D1p  pcmC1D0c  pcmC1D0p  timer\n"})}),"\n","In this example:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pcmC0..."})," usually corresponds to card 0. ",(0,i.jsx)(n.code,{children:"D0c"})," means device 0 capture, ",(0,i.jsx)(n.code,{children:"D0p"})," means device 0 playback. ",(0,i.jsx)(n.code,{children:"D1c"}),", ",(0,i.jsx)(n.code,{children:"D1p"})," may be a second PCM device (e.g., HDMI audio output)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pcmC1D0c"}),", ",(0,i.jsx)(n.code,{children:"pcmC1D0p"})," correspond to card 1, i.e., the new USB sound card. If the USB sound card is full-duplex with only one PCM device, it will have one capture and one playback endpoint."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Modify PulseAudio configuration file (",(0,i.jsx)(n.code,{children:"/etc/pulse/default.pa"}),"):"]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"To let PulseAudio load and use both sound cards, edit its default configuration file."}),"\n",(0,i.jsxs)(n.li,{children:["Find the module loading section for ALSA sources (for capture) and sinks (for playback), usually inside the ",(0,i.jsx)(n.code,{children:".ifexists module-udev-detect.so"})," or ",(0,i.jsx)(n.code,{children:".else"})," block."]}),"\n",(0,i.jsxs)(n.li,{children:["After the existing ",(0,i.jsx)(n.code,{children:"load-module module-alsa-source"})," and ",(0,i.jsx)(n.code,{children:"load-module module-alsa-sink"})," lines, add new lines for your USB sound card (assuming it is card 1, device 0; confirm with ",(0,i.jsx)(n.code,{children:"cat /proc/asound/cards"}),")."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Example ",(0,i.jsx)(n.code,{children:"/etc/pulse/default.pa"})," modification:"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-apacheconf",children:"# ... (other content) ...\n\n.ifexists module-udev-detect.so\n# load-module module-udev-detect tsched=0 # or similar\n\n### Existing ALSA Sink/Source for onboard audio (card 0)\n### Adjust device=hw:X,Y according to your actual configuration\n### For example, if onboard playback is card 0, device 1; onboard capture is card 0, device 0\nload-module module-alsa-sink device=hw:0,1 mmap=false tsched=0 fragments=2 fragment_size=960 rate=48000 channels=2 rewind_safeguard=960\nload-module module-alsa-source device=hw:0,0 mmap=false tsched=0 fragments=2 fragment_size=960 rate=48000 channels=2\n\n### Add these lines for the USB sound card (assuming it's card 1, device 0 for both playback and capture)\n### Note: device=hw:1,0 is based on previous ls /dev/snd/ and cat /proc/asound/cards,\n### confirm the actual card number (X) and device number (Y) with `cat /proc/asound/cards`, `aplay -l`, and `arecord -l`.\nload-module module-alsa-sink device=hw:1,0 # For USB sound card playback\nload-module module-alsa-source device=hw:1,0 # For USB sound card capture\n\n.else\n# ... (Fallback configuration if udev-detect is not available) ...\n# You might need to add similar lines here if this block is active\n### Fallback sink\nload-module module-alsa-sink # Default sink\n### Fallback source\nload-module module-alsa-source device=hw:0,0 # Example for onboard capture\n\n### Add for USB sound card if udev is not used\n# load-module module-alsa-sink device=hw:1,0\n# load-module module-alsa-source device=hw:1,0\n.endif\n\n# ... (other content) ...\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Important notes:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.code,{children:"device=hw:X,Y"}),", ",(0,i.jsx)(n.code,{children:"X"})," is the card number, ",(0,i.jsx)(n.code,{children:"Y"})," is the PCM device number. Use ",(0,i.jsx)(n.code,{children:"cat /proc/asound/cards"})," (for X) and ",(0,i.jsx)(n.code,{children:"aplay -l"})," / ",(0,i.jsx)(n.code,{children:"arecord -l"})," (for Y) to confirm the actual values for your USB sound card."]}),"\n",(0,i.jsxs)(n.li,{children:["The parameters like ",(0,i.jsx)(n.code,{children:"mmap=false tsched=0 fragments=2 fragment_size=960 rate=48000 channels=2 rewind_safeguard=960"})," are optimized for specific audio sub-boards. For USB sound cards, you may not need all these parameters; try with just ",(0,i.jsx)(n.code,{children:"device=hw:X,Y"})," first. If you encounter audio glitches, try adjusting these parameters."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Save configuration and restart:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Save the changes to ",(0,i.jsx)(n.code,{children:"/etc/pulse/default.pa"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Reboot the RDK board to reload PulseAudio configuration."}),"\n",(0,i.jsxs)(n.li,{children:["Alternatively, restart the PulseAudio service (if supported, e.g., ",(0,i.jsx)(n.code,{children:"systemctl --user restart pulseaudio.service"})," or ",(0,i.jsx)(n.code,{children:"pulseaudio -k && pulseaudio --start"}),"), but a full reboot is usually cleaner."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["After rebooting, you should see both input and output devices for the two sound cards in your system's sound settings (if using a desktop environment) or via ",(0,i.jsx)(n.code,{children:"pactl list sources"})," / ",(0,i.jsx)(n.code,{children:"pactl list sinks"}),", and be able to select and use them."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}}}]);