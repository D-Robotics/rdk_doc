"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[66290],{28453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>l});var r=s(96540);const c={},o=r.createContext(c);function d(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:d(e.components),r.createElement(o.Provider,{value:n},e.children)}},81049:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>d,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"Advanced_development/linux_development/driver_development_x5/driver_lowpower","title":"Low Power Mode Debugging Guide","description":"Overview","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/07_Advanced_development/02_linux_development/driver_development_x5/driver_lowpower.md","sourceDirName":"07_Advanced_development/02_linux_development/driver_development_x5","slug":"/Advanced_development/linux_development/driver_development_x5/driver_lowpower","permalink":"/rdk_doc/en/Advanced_development/linux_development/driver_development_x5/driver_lowpower","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1755152490000,"sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Thermal System","permalink":"/rdk_doc/en/Advanced_development/linux_development/driver_development_x5/driver_thermal_dev"},"next":{"title":"6.3 Hardware Unit Testing","permalink":"/rdk_doc/en/Advanced_development/linux_development/hardware_unit_test/"}}');var c=s(74848),o=s(28453);const d={sidebar_position:10},l="Low Power Mode Debugging Guide",i={},t=[{value:"Overview",id:"overview",level:2},{value:"DVFS Frequency and Voltage Scaling",id:"dvfs-frequency-and-voltage-scaling",level:2},{value:"BPU Frequency Scaling",id:"bpu-frequency-scaling",level:3},{value:"GPU 3D Frequency Scaling",id:"gpu-3d-frequency-scaling",level:3},{value:"DDR Frequency Scaling",id:"ddr-frequency-scaling",level:3},{value:"CPU Frequency and Voltage Scaling",id:"cpu-frequency-and-voltage-scaling",level:3},{value:"CPU hotplug",id:"cpu-hotplug",level:2},{value:"Power Control for Devices",id:"power-control-for-devices",level:2},{value:"Sleep and Wake-up",id:"sleep-and-wake-up",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"low-power-mode-debugging-guide",children:"Low Power Mode Debugging Guide"})}),"\n",(0,c.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,c.jsx)(n.p,{children:"The power consumption of a chip is closely related to its operating voltage, clock frequency, and ambient temperature. Under a certain load, increasing voltage, clock frequency, and ambient temperature will result in higher power consumption. Therefore, to reduce power consumption, we can focus on lowering the voltage, clock frequency, and improving heat dissipation. The low-power methods discussed in this document mainly involve adjusting and controlling clock frequencies and voltages. Additionally, reducing the load can also help reduce power consumption, and customers can optimize circuits based on their product requirements. However, it's important to note that low-power modes may negatively impact performance, so the decision to enter low power mode should depend on the use case."}),"\n",(0,c.jsx)(n.h2,{id:"dvfs-frequency-and-voltage-scaling",children:"DVFS Frequency and Voltage Scaling"}),"\n",(0,c.jsx)(n.p,{children:"In the X5, CPU, GPU 3D, BPU, and DDR support frequency scaling, while the CPU also supports voltage scaling."}),"\n",(0,c.jsx)(n.h3,{id:"bpu-frequency-scaling",children:"BPU Frequency Scaling"}),"\n",(0,c.jsx)(n.p,{children:"You can control the frequency scaling of the BPU through the following path:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"/sys/class/devfreq/3a000000.bpu\n"})}),"\n",(0,c.jsx)(n.p,{children:"Currently, the BPU supports two frequency points."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"root@buildroot:/$ cat /sys/class/devfreq/3a000000.bpu/available_frequencies\n500000000 1000000000\n"})}),"\n",(0,c.jsx)(n.p,{children:"The BPU-supported governors include:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"userspace"}),": Specifies the frequency based on the user's configuration."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"performance"}),": Sets the highest frequency."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"powersave"}),": Runs at the lowest frequency."]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"To adjust the BPU governor, you can use the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"echo userspace >/sys/class/devfreq/3a000000.bpu/governor\necho performance >/sys/class/devfreq/3a000000.bpu/governor\necho powersave >/sys/class/devfreq/3a000000.bpu/governor\n"})}),"\n",(0,c.jsx)(n.p,{children:"If you wish to manually adjust the frequency, you can use the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"echo userspace >/sys/class/devfreq/3a000000.bpu/governor\necho 500000000 >/sys/class/devfreq/3a000000.bpu/userspace/set_freq\n"})}),"\n",(0,c.jsx)(n.p,{children:"To check the current frequency, you can use the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"cat /sys/class/devfreq/3a000000.bpu/cur_freq\n"})}),"\n",(0,c.jsx)(n.h3,{id:"gpu-3d-frequency-scaling",children:"GPU 3D Frequency Scaling"}),"\n",(0,c.jsx)(n.p,{children:"You can control the GPU 3D frequency scaling through the following path:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"/sys/class/devfreq/3c000000.gc8000\n"})}),"\n",(0,c.jsx)(n.p,{children:"Currently, the GPU 3D supports 4 frequency points:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"cat /sys/class/devfreq/3c000000.gc8000/available_frequencies\n200000000 400000000 750000000 1000000000\n"})}),"\n",(0,c.jsx)(n.p,{children:"The GPU 3D-supported governors include:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"userspace"}),": Specifies the frequency based on the user's configuration."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"performance"}),": Sets the GPU 3D to the highest frequency."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"powersave"}),": Runs at the lowest frequency."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"simple_ondemand"}),": Adjusts the frequency on-demand based on the workload."]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"To adjust the GPU 3D governor, you can use the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"echo userspace >/sys/class/devfreq/3c000000.gc8000/governor\necho performance >/sys/class/devfreq/3c000000.gc8000/governor\necho powersave >/sys/class/devfreq/3c000000.gc8000/governor\necho simple_ondemand >/sys/class/devfreq/3c000000.gc8000/governor\n"})}),"\n",(0,c.jsx)(n.p,{children:"If you wish to manually adjust the frequency for GPU 3D, you can use the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"echo userspace >/sys/class/devfreq/3c000000.gc8000/governor\necho 750000000 >/sys/class/devfreq/3c000000.gc8000/userspace/set_freq\n"})}),"\n",(0,c.jsx)(n.p,{children:"To check the current frequency of GPU 3D, you can use the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"cat /sys/class/devfreq/3c000000.gc8000/cur_freq\n"})}),"\n",(0,c.jsx)(n.h3,{id:"ddr-frequency-scaling",children:"DDR Frequency Scaling"}),"\n",(0,c.jsx)(n.p,{children:"You can control the DDR frequency scaling through the following path:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"/sys/class/devfreq/soc\\:ddrc-freq\n"})}),"\n",(0,c.jsx)(n.p,{children:"The supported frequency points may vary depending on the DDR chip. You can obtain the current supported frequency points with the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"root@buildroot:/$ cat /sys/class/devfreq/soc\\:ddrc-freq/available_frequencies\n266000000 1066000000 2133000000 3200000000\n"})}),"\n",(0,c.jsx)(n.p,{children:"The DDR-supported governors include:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"userspace"}),": Specifies the frequency based on the user's configuration."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"performance"}),": Sets DDR to the highest frequency."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"simple_ondemand"}),": Adjusts the frequency based on the DDR load."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"powersave"}),": Runs DDR at the lowest frequency."]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"To adjust the DDR governor, you can use the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"echo userspace >/sys/class/devfreq/soc\\:ddrc-freq/governor\necho performance >/sys/class/devfreq/soc\\:ddrc-freq/governor\necho simple_ondemand >/sys/class/devfreq/soc\\:ddrc-freq/governor\necho powersave >/sys/class/devfreq/soc\\:ddrc-freq/governor\n"})}),"\n",(0,c.jsx)(n.p,{children:"If you wish to manually adjust the DDR frequency, you can use the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"echo userspace >/sys/class/devfreq/soc\\:ddrc-freq/governor\necho 266000000 >/sys/class/devfreq/soc\\:ddrc-freq/userspace/set_freq\n"})}),"\n",(0,c.jsx)(n.p,{children:"To check the current DDR frequency, you can use the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"cat /sys/class/devfreq/soc\\:ddrc-freq/cur_freq\n"})}),"\n",(0,c.jsx)(n.h3,{id:"cpu-frequency-and-voltage-scaling",children:"CPU Frequency and Voltage Scaling"}),"\n",(0,c.jsx)(n.p,{children:"You can control the CPU frequency and voltage scaling through the following path:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"/sys/devices/system/cpu/cpufreq/policy0/\n"})}),"\n",(0,c.jsx)(n.p,{children:"The currently supported CPU frequencies can be viewed with the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"cat /sys/devices/system/cpu/cpufreq/policy0/scaling_available_frequencies\n300000 600000 1200000 1500000\n"})}),"\n",(0,c.jsx)(n.p,{children:"In addition, overclocking is supported with a frequency of 1.8 GHz."}),"\n",(0,c.jsx)(n.p,{children:"You can enable the overclocking feature with the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"echo 1 >/sys/devices/system/cpu/cpufreq/boost\necho performance >/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor\n"})}),"\n",(0,c.jsx)(n.p,{children:"When overclocked to 1.8 GHz, the CPU operates at a voltage of 1V, while other frequency points correspond to a voltage of 800mV."}),"\n",(0,c.jsx)(n.p,{children:"The currently supported CPU governors include:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"performance"}),": Runs at the highest frequency."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"ondemand"}),": Adjusts the frequency based on system load."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"userspace"}),": Specifies the frequency based on the user's configuration."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"powersave"}),": Runs at the lowest frequency."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"schedutil"}),": Adjusts the frequency based on load, and is used in conjunction with the CPU scheduler."]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"To adjust the CPU governor, you can use the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"echo performance >/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor\necho ondemand >/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor\necho userspace >/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor\necho powersave >/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor\necho schedutil >/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor\n"})}),"\n",(0,c.jsx)(n.p,{children:"If you wish to manually adjust the CPU frequency, you can use the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"echo userspace >/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor\necho 1200000 >/sys/devices/system/cpu/cpufreq/policy0/scaling_setspeed\n"})}),"\n",(0,c.jsx)(n.p,{children:"To check the current CPU frequency, you can use the following command:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"cat /sys/devices/system/cpu/cpufreq/policy0/cpuinfo_cur_freq\n"})}),"\n",(0,c.jsx)(n.h2,{id:"cpu-hotplug",children:"CPU hotplug"}),"\n",(0,c.jsx)(n.p,{children:"When CPU cores are not in use, they can be hot-plugged (disabled) to further reduce power consumption. Except for core0, which does not support hotplug, cores 1 through 7 support hotplug."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"echo 0 >/sys/devices/system/cpu/cpu1/online  #disable cpu1\necho 1 >/sys/devices/system/cpu/cpu1/online  #enable cpu1\n"})}),"\n",(0,c.jsx)(n.h2,{id:"power-control-for-devices",children:"Power Control for Devices"}),"\n",(0,c.jsx)(n.p,{children:"Devices such as BPU, GPU, ISP, VIDEO CODEC, JPEG, and HIFI have independent power control. These devices are powered on only when in use (when the driver is opened) and powered off when not in use (when the driver is closed). This helps reduce the overall power consumption of the X5 SOC."}),"\n",(0,c.jsx)(n.h2,{id:"sleep-and-wake-up",children:"Sleep and Wake-up"}),"\n",(0,c.jsxs)(n.p,{children:["Sleep mode can be triggered by a long press of a button or by entering the ",(0,c.jsx)(n.code,{children:"hobot-suspend"})," command. A short press of the button will wake the device up."]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}}}]);