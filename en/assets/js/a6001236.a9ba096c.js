"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[51692],{28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>s});var l=i(96540);const a={},o=l.createContext(a);function t(e){const n=l.useContext(o);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),l.createElement(o.Provider,{value:n},e.children)}},93585:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>p,frontMatter:()=>t,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"Advanced_development/multimedia_development/multimedia_application/overview","title":"Example Code Introduction","description":"This chapter mainly introduces example code for the multimedia modules on the chip, primarily covering usage examples of multimedia hardware acceleration modules. It includes single-module functional examples, multi-module cascaded examples, and application solution examples. Users can leverage these examples to quickly perform functional evaluations, and referring to the implementation code will help them get started rapidly and develop applications tailored to their specific needs.","source":"@site/i18n/en/docusaurus-plugin-content-docs-docs_s/current/07_Advanced_development/03_multimedia_development/02_multimedia_application/01_overview.md","sourceDirName":"07_Advanced_development/03_multimedia_development/02_multimedia_application","slug":"/Advanced_development/multimedia_development/multimedia_application/overview","permalink":"/rdk_doc/en/rdk_s/Advanced_development/multimedia_development/multimedia_application/overview","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1764750792000,"sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"7.3.2 \u591a\u5a92\u4f53\u5e94\u7528\u5f00\u53d1 ","permalink":"/rdk_doc/en/rdk_s/02_multimedia_application"},"next":{"title":"sample_vin Usage Instructions","permalink":"/rdk_doc/en/rdk_s/Advanced_development/multimedia_development/multimedia_application/sample_vin"}}');var a=i(74848),o=i(28453);const t={},s="Example Code Introduction",r={},d=[{value:"Example Source Code Directory Structure",id:"example-source-code-directory-structure",level:2},{value:"Example Usage Guide",id:"example-usage-guide",level:2},{value:"Example Development Guide",id:"example-development-guide",level:2},{value:"Compilation Instructions",id:"compilation-instructions",level:3},{value:"Common Issues",id:"common-issues",level:2},{value:"Insufficient space in <code>/app</code> directory causing example execution failure",id:"insufficient-space-in-app-directory-causing-example-execution-failure",level:3},{value:"Kernel logs flooding the serial terminal",id:"kernel-logs-flooding-the-serial-terminal",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"example-code-introduction",children:"Example Code Introduction"})}),"\n",(0,a.jsx)(n.p,{children:"This chapter mainly introduces example code for the multimedia modules on the chip, primarily covering usage examples of multimedia hardware acceleration modules. It includes single-module functional examples, multi-module cascaded examples, and application solution examples. Users can leverage these examples to quickly perform functional evaluations, and referring to the implementation code will help them get started rapidly and develop applications tailored to their specific needs."}),"\n",(0,a.jsx)(n.p,{children:"By using the examples provided in this chapter, users will be able to:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Understand the basic functionality and applicable scenarios of each hardware acceleration module."}),"\n",(0,a.jsx)(n.li,{children:"Learn how to efficiently combine multiple modules to solve real-world problems."}),"\n",(0,a.jsx)(n.li,{children:"Quickly master the usage of the example code, thereby saving development time."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"example-source-code-directory-structure",children:"Example Source Code Directory Structure"}),"\n",(0,a.jsxs)(n.p,{children:["All example source code is stored in the ",(0,a.jsx)(n.code,{children:"/app/multimedia_samples"})," directory on the device."]}),"\n",(0,a.jsx)(n.p,{children:"The source code directory structure is organized and named according to functionality and scenarios as follows:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:".\n\u251c\u2500\u2500 chip_base_test    # Driver functional unit tests; please refer to [BSP Development Guide - Driver Functional Unit Tests] for usage instructions\n\u251c\u2500\u2500 Makefile.in       # Makefile parameter configuration, including cross-compilation toolchain, header file and library references, etc.\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 sample_codec      # Example code for video/image codec modules, including encoding and decoding for H264/H265/JPEG/MJPEG\n\u251c\u2500\u2500 sample_gdc        # Example code demonstrating various transformation modes supported by the GDC module\n\u251c\u2500\u2500 sample_isp        # Example code for the ISP module, including ISP initialization and retrieving ISP-processed data\n\u251c\u2500\u2500 sample_pipeline   # Example code cascading multiple functional modules, e.g., VIN->ISP->PYM->GDC->CODEC encoding data pipeline functional test\n\u251c\u2500\u2500 sample_vin        # Initialize Camera Sensor and acquire images from the VIN module\n\u251c\u2500\u2500 sample_pym        # Initialize the PYM module and use PYM to downscale images\n\u251c\u2500\u2500 sample_gpu_3d     # Examples demonstrating 3D GPU usage via both OpenCL and OpenGLES APIs\n\u251c\u2500\u2500 sunrise_camera    # Integrated application solution example leveraging most modules, supporting smart cameras and intelligent analysis boxes; video streams and algorithm results can be viewed via a web browser\n\u251c\u2500\u2500 utils             # Common utility functions and structures\n\u2514\u2500\u2500 vp_sensors        # Camera Sensor configuration code, used by other modules requiring Camera Sensor functionality\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Note: The ",(0,a.jsx)(n.code,{children:"vp_sensors"})," directory contains supported ",(0,a.jsx)(n.code,{children:"Camera Sensor"})," drivers and configuration files, and is not a standalone example program. For instructions on adding new ",(0,a.jsx)(n.code,{children:"Camera Sensors"}),", please refer to ",(0,a.jsx)(n.code,{children:"vp_sensors/README.md"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"example-usage-guide",children:"Example Usage Guide"}),"\n",(0,a.jsxs)(n.p,{children:["All example programs and their dependent resource files are installed by default in the ",(0,a.jsx)(n.code,{children:"/app/multimedia_samples"})," directory on the development board. Users can directly log in to the board and run these examples. For instance, to use the ",(0,a.jsx)(n.code,{children:"sample_pym"})," example, follow these commands:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"#1. Enter the source code directory\ncd /app/multimedia_samples/sample_pym\n\n#2. Compile the program\nmake\n\n#3. Run sample_pym to display help information\n\n./sample_pym\nUsage: sample_pym [OPTIONS]\nOptions:\n-i, --input_file FILE   Specify the input file\n-w, --input_width WIDTH Specify the input width\n-h, --input_height HEIGHT       Specify the input height\n-f, --feedback                  Specify feedback mode\n-V, --verbose           Enable verbose mode\n"})}),"\n",(0,a.jsx)(n.p,{children:"All other examples can be used in the same manner."}),"\n",(0,a.jsx)(n.h2,{id:"example-development-guide",children:"Example Development Guide"}),"\n",(0,a.jsx)(n.h3,{id:"compilation-instructions",children:"Compilation Instructions"}),"\n",(0,a.jsx)(n.p,{children:"Dependencies for the example code in this module are as follows:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Depends on header files and libraries generated from BSP source compilation (e.g., hbre), as well as header files and dynamic libraries such as ffmpeg in the root filesystem. Library and path references are specified in the Makefile under each Sample directory:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"LDFLAGS += -lvpf -lvio -lcam -lhbmem\nLDFLAGS := -L/usr/hobot/lib\nINCDIR := -I/usr/hobot/include -I/usr/include/cjson/\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsxs)(n.li,{children:["Depends on Sensor configuration files in the ",(0,a.jsx)(n.code,{children:"/app/multimedia_samples/vp_sensors"})," directory. File references are specified in ",(0,a.jsx)(n.code,{children:"/app/multimedia_samples/Makefile.in"})," as follows:"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"INCS += -I . \\\n\t-I ${PLATFORM_SAMPLES_DIR}/utils/ \\\n\t-I ${PLATFORM_SAMPLES_DIR}/vp_sensors\n\nSRC_PATH := ${PLATFORM_SAMPLES_DIR}/utils\nSRC_PATH += $(shell find ${PLATFORM_SAMPLES_DIR}/vp_sensors -maxdepth 1 -type d)\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Compile all examples together"})}),"\n",(0,a.jsx)(n.p,{children:"Currently not supported."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Compile individual examples"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Log in to the device."}),"\n",(0,a.jsxs)(n.li,{children:["Navigate to each example directory under ",(0,a.jsx)(n.code,{children:"/app/multimedia_samples/"})," for independent development and compilation. For example, to compile the ",(0,a.jsx)(n.code,{children:"sample_vin"})," example individually:","\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"cd /app/multimedia_samples/sample_vin/get_vin_data\nmake\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["The compiled executable resides in the current directory and can be run directly. For example, ",(0,a.jsx)(n.code,{children:"get_vin_data"})," is the compiled executable:","\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"root@ubuntu:/app/multimedia_samples/sample_vin/get_vin_data# ls\nget_vin_data  get_vin_data.c  get_vin_data.o  Makefile\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,a.jsxs)(n.h3,{id:"insufficient-space-in-app-directory-causing-example-execution-failure",children:["Insufficient space in ",(0,a.jsx)(n.code,{children:"/app"})," directory causing example execution failure"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Cause:"})," The ",(0,a.jsx)(n.code,{children:"/app"})," directory is mounted from the app partition. Some example programs generate large amounts of video/image data during execution, potentially filling up the available space and causing unexpected behavior."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Solution:"})," Copy the program to another directory for execution, or clean up unnecessary data."]}),"\n",(0,a.jsx)(n.h3,{id:"kernel-logs-flooding-the-serial-terminal",children:"Kernel logs flooding the serial terminal"}),"\n",(0,a.jsx)(n.p,{children:"To reduce kernel log verbosity on the board and avoid excessive logging that interferes with observing program execution flow, run the following command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"echo 4 > /proc/sys/kernel/printk\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);