"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[82295],{28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>l});var d=i(96540);const o={},t=d.createContext(o);function s(e){const n=d.useContext(t);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),d.createElement(t.Provider,{value:n},e.children)}},59556:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>d,toc:()=>a});const d=JSON.parse('{"id":"Advanced_development/multimedia_development/debug_info","title":"7.3.11 Query Multimedia Module Debug Information","description":"Interaction between Driver and Multimedia System","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/07_Advanced_development/03_multimedia_development/debug_info.md","sourceDirName":"07_Advanced_development/03_multimedia_development","slug":"/Advanced_development/multimedia_development/debug_info","permalink":"/rdk_doc/en/Advanced_development/multimedia_development/debug_info","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1760066808000,"sidebarPosition":11,"frontMatter":{"sidebar_position":11},"sidebar":"tutorialSidebar","previous":{"title":"7.3.10 Video Decoding","permalink":"/rdk_doc/en/Advanced_development/multimedia_development/video_decode"},"next":{"title":"7.3.12 Multimedia Performance Debugging","permalink":"/rdk_doc/en/Advanced_development/multimedia_development/performance_debug"}}');var o=i(74848),t=i(28453);const s={sidebar_position:11},l="7.3.11 Query Multimedia Module Debug Information",r={},a=[{value:"Interaction between Driver and Multimedia System",id:"interaction-between-driver-and-multimedia-system",level:2},{value:"VIO Debug Information",id:"vio-debug-information",level:2},{value:"SIF Debug Information",id:"sif-debug-information",level:3},{value:"ISP Debug Information",id:"isp-debug-information",level:3},{value:"IPU Debug Information",id:"ipu-debug-information",level:3},{value:"PYM Debug Information",id:"pym-debug-information",level:3},{value:"IAR Debug Information",id:"iar-debug-information",level:3},{value:"VPU Debug Information",id:"vpu-debug-information",level:2},{value:"VENC Debug Information",id:"venc-debug-information",level:3},{value:"VDEC Debug Information",id:"vdec-debug-information",level:3},{value:"JPU Debug Information",id:"jpu-debug-information",level:2},{value:"JENC Debug Information",id:"jenc-debug-information",level:3},{value:"JDEC Debug Information",id:"jdec-debug-information",level:3},{value:"Media Module Log Viewing",id:"media-module-log-viewing",level:2},{value:"Log Levels",id:"log-levels",level:3},{value:"Log Tags",id:"log-tags",level:3},{value:"Log Filtering",id:"log-filtering",level:3},{value:"Log Storage",id:"log-storage",level:3}];function c(e){const n={blockquote:"blockquote",code:"code",del:"del",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"7311-query-multimedia-module-debug-information",children:"7.3.11 Query Multimedia Module Debug Information"})}),"\n",(0,o.jsx)(n.h2,{id:"interaction-between-driver-and-multimedia-system",children:"Interaction between Driver and Multimedia System"}),"\n",(0,o.jsx)(n.p,{children:"In VIN, the control of the camera is done entirely in user space, while the control of mipi/ISP is done in the driver. By passing the user-space related configurations to the driver, the driver sets up the hardware. The relevant device nodes are as follows:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/debug_info/drive_and_multimedia.png",alt:"image-20220327233823654"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"mipi_host0~4:"})," mipi host configuration nodes, mainly for mipi_host initialization."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"mipi_dphy:"})," dphy related node."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"mipi_dev0:"})," This device node will be enabled in the configuration to enable mipi_dev output."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"SIF has two nodes:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"sif_capture:"})," Set sif-related property information, initialize the sif module, and dump images from the sif module."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"sif_ddrin:"})," Set the properties/size/format of the ddrin node. Only used in sif-offline-isp scenario, responsible for reading memory data to isp."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"ISP-related nodes:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ac_calib:"})," Set calibration effect library."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ac_isp:"})," Use isp effect adjustment interface."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ac_isp4uf0~7:"})," Use isp driver algorithm library to send commands."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ac_sbuf0~7:"})," Algorithm library synchronizes some algorithm data with isp driver through this device node."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"video0~7:"})," isp v4l2 device node, set size/format/size, interact with the device through memory mapping."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"In VIN, MIPI/SIF functions are relatively simple. For MIPI, it is actually several nodes abstracted from the hardware for user configuration parameters, so as to set the MIPI HOST to the corresponding state and be able to accept MIPI data input from the sensor."}),"\n",(0,o.jsx)(n.p,{children:"SIF takes the data received by MIPI HOST and performs certain processing, such as saving different sensor data to different ddr addresses."}),"\n",(0,o.jsx)(n.p,{children:"ISP's functions are relatively complex. It needs to interact with the sensor, load the corresponding algorithm library and effect library. In the configuration code:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/debug_info/7c497fc6373c2c0a35f2248f7fc16280.png",alt:""})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ispAlgoState:"})," This tag indicates the use of 3A algorithm, which will use the algorithm in the lib_algo.so library."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"calib:"})," This is the effect library configured for different sensors, used to adjust sensor effects."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"vio-debug-information",children:"VIO Debug Information"}),"\n",(0,o.jsx)(n.h3,{id:"sif-debug-information",children:"SIF Debug Information"}),"\n",(0,o.jsx)(n.p,{children:"View SIF debug information:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"cat /sys/devices/platform/soc/a4001000.sif/cfg_info\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/debug_info/354af0a4710e0c5a631ab6a96bf932c6.png",alt:""})}),"\n",(0,o.jsx)(n.h3,{id:"isp-debug-information",children:"ISP Debug Information"}),"\n",(0,o.jsx)(n.p,{children:"View ISP debug information:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"cat /sys/devices/platform/soc/b3000000.isp/isp_status\n"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/debug_info/a6cabe90c204d0510e417106b32b3622.png",alt:""})}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"ipu-debug-information",children:"IPU Debug Information"}),"\n",(0,o.jsx)(n.p,{children:"View enabled pipelines:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cat /sys/devices/platform/soc/a4040000.ipu/info/enabled_pipeline\n"})}),"\n",(0,o.jsx)(n.p,{children:"View pipeline configurations:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cat /sys/devices/platform/soc/a4040000.ipu/info/pipelinex_info # x can be 0-7\n# Example\ncat /sys/devices/platform/soc/a4040000.ipu/info/pipeline0_info\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/debug_info/5c314a3ac1028e4de8293548efb65704.png",alt:""})}),"\n",(0,o.jsx)(n.p,{children:"Explanation:"}),"\n",(0,o.jsxs)(n.p,{children:["subdev0 corresponds to ipu src, subdev1",(0,o.jsx)(n.del,{children:"6 correspond to ipu us/ds0"}),"ds4. The information in parentheses after subdev represents the number of buffers in each state for that channel."]}),"\n",(0,o.jsx)(n.h3,{id:"pym-debug-information",children:"PYM Debug Information"}),"\n",(0,o.jsx)(n.p,{children:"View enabled pipelines:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"cat /sys/devices/platform/soc/a4042000.pym/info/enabled_pipeline\n"})}),"\n",(0,o.jsx)(n.p,{children:"Check the configuration of each pipe:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cat /sys/devices/platform/soc/a4042000.pym/info/pipelinex_info # x takes values of 0-7\n# Example\ncat /sys/devices/platform/soc/a4042000.pym/info/pipeline0_info\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/debug_info/81aec6c1b63287146ec1a11be9780b71.png",alt:""})}),"\n",(0,o.jsx)(n.h3,{id:"iar-debug-information",children:"IAR Debug Information"}),"\n",(0,o.jsx)(n.p,{children:"View IAR debug information:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"cat /sys/kernel/debug/iar\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/debug_info/c437b118301b57610a49246d39de9213.png",alt:""})}),"\n",(0,o.jsx)(n.h2,{id:"vpu-debug-information",children:"VPU Debug Information"}),"\n",(0,o.jsx)(n.h3,{id:"venc-debug-information",children:"VENC Debug Information"}),"\n",(0,o.jsx)(n.p,{children:"View encoding information:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"cat /sys/kernel/debug/vpu/venc\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/debug_info/01ef41acb92787b58fe84a0a5241b7dc.png",alt:""})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/debug_info/c5df92bf5f46a0575c1f049867871ffe.png",alt:""})}),"\n",(0,o.jsx)(n.h3,{id:"vdec-debug-information",children:"VDEC Debug Information"}),"\n",(0,o.jsx)(n.p,{children:"View decoding information:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"cat /sys/kernel/debug/vpu/vdec\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/debug_info/7f297a9c2dfd3b25a308f898b97f89c2.png",alt:""})}),"\n",(0,o.jsx)(n.h2,{id:"jpu-debug-information",children:"JPU Debug Information"}),"\n",(0,o.jsx)(n.h3,{id:"jenc-debug-information",children:"JENC Debug Information"}),"\n",(0,o.jsx)(n.p,{children:"View encoding information:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"cat /sys/kernel/debug/jpu/jenc\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/debug_info/1944f201c81a20991a2623a464ac749c.png",alt:""})}),"\n",(0,o.jsx)(n.h3,{id:"jdec-debug-information",children:"JDEC Debug Information"}),"\n",(0,o.jsx)(n.p,{children:"View decoding information:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"cat /sys/kernel/debug/jpu/jdec\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/debug_info/64fdce46047c2462decae977fd2d2288.png",alt:""})}),"\n",(0,o.jsx)(n.h2,{id:"media-module-log-viewing",children:"Media Module Log Viewing"}),"\n",(0,o.jsx)(n.h3,{id:"log-levels",children:"Log Levels"}),"\n",(0,o.jsx)(n.p,{children:"Console output logs and logcat logs are mutually exclusive. They can be controlled by the environment variable LOGLEVEL."}),"\n",(0,o.jsx)(n.p,{children:"For example, set export LOGLEVEL=14 to output all logs that are higher than or equal to the Debug level to the console."}),"\n",(0,o.jsx)(n.p,{children:"If you want to view Debug and higher level logs through logcat, you need to set export LOGLEVEL=4."}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Console Output Log"}),(0,o.jsx)(n.th,{}),(0,o.jsx)(n.th,{children:"Logcat Log Level"}),(0,o.jsx)(n.th,{})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"CONSOLE_DEBUG_LEVEL"}),(0,o.jsx)(n.td,{children:"14"}),(0,o.jsx)(n.td,{children:"ALOG_DEBUG_LEVEL"}),(0,o.jsx)(n.td,{children:"4"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"CONSOLE_INFO_LEVEL"}),(0,o.jsx)(n.td,{children:"13"}),(0,o.jsx)(n.td,{children:"ALOG_INFO_LEVEL"}),(0,o.jsx)(n.td,{children:"3"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"CONSOLE_WARNING_LEVEL"}),(0,o.jsx)(n.td,{children:"12"}),(0,o.jsx)(n.td,{children:"ALOG_WARNING_LEVEL"}),(0,o.jsx)(n.td,{children:"2"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"CONSOLE_ERROR_LEVEL"}),(0,o.jsx)(n.td,{children:"11"}),(0,o.jsx)(n.td,{children:"ALOG_ERROR_LEVEL"}),(0,o.jsx)(n.td,{children:"1"})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"log-tags",children:"Log Tags"}),"\n",(0,o.jsx)(n.p,{children:"The media module defines several LOG_TAGs. The following are all available tags:"}),"\n",(0,o.jsx)(n.table,{children:(0,o.jsx)(n.thead,{children:(0,o.jsx)(n.tr,{children:(0,o.jsx)(n.th,{children:"vio-core vio-devop ipu sif dwe gdc pym vin isp rgn mipi vp vps venc vdec audio vot vio-bufmgr ffmedia multimedia"})})})}),"\n",(0,o.jsx)(n.p,{children:"Note:"}),"\n",(0,o.jsx)(n.p,{children:"Logs without tags cannot be filtered. They will be printed if they meet the LOG LEVEL requirements (usually seen in applications or modules without tags)."}),"\n",(0,o.jsx)(n.p,{children:"To add a tag to an application:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:'You can define #define LOG_TAG "APP" at the beginning of the file.'}),"\n",(0,o.jsx)(n.li,{children:'Include the relevant header file #include "logging.h".3. The logs in the application are printed using the macro definition of the pr_xxx switch in the logging.h header file.'}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"log-filtering",children:"Log Filtering"}),"\n",(0,o.jsx)(n.p,{children:"The logs of each module can be filtered and viewed through logcat. Here is how to filter the logs related to modules. logcat is an open-source command, and other parameters can be explored independently."}),"\n",(0,o.jsx)(n.p,{children:"For example, if you only want to print the logs of the vps module with a log level higher than Debug and output them to a file, you can do the following:"}),"\n",(0,o.jsxs)(n.p,{children:["logcat vps",":D"," -f log.txt"]}),"\n",(0,o.jsx)(n.p,{children:"If you want to view the logs of multiple modules, you can append the filters at the end, such as viewing the logs of the vps/vin modules with a log level higher than Debug:"}),"\n",(0,o.jsxs)(n.p,{children:["logcat vps",":D"," vin",":D"," -f log.txt"]}),"\n",(0,o.jsx)(n.h3,{id:"log-storage",children:"Log Storage"}),"\n",(0,o.jsx)(n.p,{children:"Kernel logs will be saved in the /userdata/log/kernel/ directory."}),"\n",(0,o.jsx)(n.p,{children:"When LOGLEVEL is set to 4, upper layer logs will be saved in the /userdata/log/usr/ directory."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);