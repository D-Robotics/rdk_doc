"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[39126],{15490:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Advanced_development/linux_development/realtime_kernel","title":"7.2.3 Applying the Real-Time Kernel","description":"The RDKS100 enables the real-time kernel by default. A real-time kernel is an operating system kernel capable of providing more precise and reliable response times, commonly used in applications with high time-sensitivity requirements, such as robotic control and industrial automation. Below are commands for enabling and disabling the real-time kernel, along with common use cases and testing methods.","source":"@site/i18n/en/docusaurus-plugin-content-docs-docs_s/current/07_Advanced_development/02_linux_development/03_realtime_kernel.md","sourceDirName":"07_Advanced_development/02_linux_development","slug":"/Advanced_development/linux_development/realtime_kernel","permalink":"/rdk_doc/en/rdk_s/Advanced_development/linux_development/realtime_kernel","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770723091000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"7.2.2 Kernel Headers","permalink":"/rdk_doc/en/rdk_s/Advanced_development/linux_development/kernel_headers"},"next":{"title":"7.2.4 RDK S100\u9a71\u52a8\u5f00\u53d1\u6307\u5357","permalink":"/rdk_doc/en/rdk_s/driver_development_s100"}}');var s=t(74848),l=t(28453);const r={sidebar_position:3},c="7.2.3 Applying the Real-Time Kernel",o={},d=[{value:"Real-Time Performance Testing",id:"real-time-performance-testing",level:2},{value:"Installing the rt-tests Tool",id:"installing-the-rt-tests-tool",level:3},{value:"Running the cyclictest",id:"running-the-cyclictest",level:3},{value:"Analyzing Test Results",id:"analyzing-test-results",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"723-applying-the-real-time-kernel",children:"7.2.3 Applying the Real-Time Kernel"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"RDKS100"})," enables the real-time kernel by default. A real-time kernel is an operating system kernel capable of providing more precise and reliable response times, commonly used in applications with high time-sensitivity requirements, such as robotic control and industrial automation. Below are commands for enabling and disabling the real-time kernel, along with common use cases and testing methods."]}),"\n",(0,s.jsx)(n.h2,{id:"real-time-performance-testing",children:"Real-Time Performance Testing"}),"\n",(0,s.jsxs)(n.p,{children:["When testing the performance of a real-time kernel, a commonly used tool is ",(0,s.jsx)(n.code,{children:"rt-tests"}),", which includes multiple test programs for evaluating real-time kernel performance. The following is an example of using ",(0,s.jsx)(n.code,{children:"rt-tests"})," for performance testing:"]}),"\n",(0,s.jsx)(n.h3,{id:"installing-the-rt-tests-tool",children:"Installing the rt-tests Tool"}),"\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"rt-tests"})," is not yet installed, use the following commands to install it:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sudo apt update\nsudo apt install rt-tests\n"})}),"\n",(0,s.jsx)(n.h3,{id:"running-the-cyclictest",children:"Running the cyclictest"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"cyclictest"})," is a commonly used test within ",(0,s.jsx)(n.code,{children:"rt-tests"})," for evaluating a system's timing behavior and response latency. Execute the following command to run the ",(0,s.jsx)(n.code,{children:"cyclictest"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sudo cyclictest -l50000000 -m -S -p90 -i200 -h400\n"})}),"\n",(0,s.jsx)(n.p,{children:"This command runs a real-time performance test with the following parameters:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-l50000000"}),": Sets the number of test iterations."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-m"}),": Instructs ",(0,s.jsx)(n.code,{children:"cyclictest"})," to lock current and subsequent memory pages using ",(0,s.jsx)(n.code,{children:"mlock"})," during the test, preventing swapping from affecting results."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-S"}),": Specifies a standard SMP architecture test where all threads use the same ",(0,s.jsx)(n.code,{children:"-a"}),", ",(0,s.jsx)(n.code,{children:"-t"}),", ",(0,s.jsx)(n.code,{children:"-n"}),", and priority settings."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-p90"}),": Specifies the real-time thread priority. ",(0,s.jsx)(n.code,{children:"-p90"})," means the test runs under real-time scheduling class with priority 90."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-i200"}),": Sets the sleep interval (in microseconds) for test threads."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-h400"}),": After completion, outputs a histogram showing the count of latencies below the specified threshold (400 microseconds)."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The test results will display the system\u2019s minimum, maximum, and average latency, along with other performance statistics."}),"\n",(0,s.jsx)(n.h3,{id:"analyzing-test-results",children:"Analyzing Test Results"}),"\n",(0,s.jsxs)(n.p,{children:["Analyze the ",(0,s.jsx)(n.code,{children:"cyclictest"})," results to evaluate the real-time kernel's performance. Pay close attention to the minimum and maximum latencies to ensure they fall within acceptable ranges. A lower maximum latency and more consistent latency values indicate better real-time kernel performance. The figures below show test results obtained while using the real-time kernel and running the ",(0,s.jsx)(n.code,{children:"/app/pydev_demo/03_mipi_camera_sample"})," example."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/image/realtime_kernel/image-20230914145619064.png",alt:"image-20230914145619064"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/02_linux_development/image/realtime_kernel/image-20230914145234528.png",alt:"image-20230914145234528"})}),"\n",(0,s.jsxs)(n.p,{children:["The fields in the ",(0,s.jsx)(n.code,{children:"cyclictest"})," output have the following meanings:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"T"}),": Thread number and thread ID used in the test."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"P"}),": Priority used during the test. In your output, the value is 90, indicating the test ran under real-time scheduling class with priority 90."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"I"}),": Expected wake-up interval (in microseconds) for the latency measurement thread."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"C"}),": Number of latency measurements taken (i.e., loop count)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Min"}),": Minimum latency (in microseconds) observed in the current test cycle."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Act"}),": Actual latency (in microseconds) observed in the current test cycle."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Avg"}),": Average latency (in microseconds) observed in the current test cycle."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Max"}),": Maximum latency (in microseconds) observed in the current test cycle."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var i=t(96540);const s={},l=i.createContext(s);function r(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);