"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[54551],{11470:(e,n,a)=>{a.d(n,{A:()=>k});var r=a(96540),i=a(34164),t=a(23104),o=a(56347),d=a(205),s=a(57485),l=a(31682),c=a(70679);function u(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:n,children:a}=e;return(0,r.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:a,default:r}})=>({value:e,label:n,attributes:a,default:r}))}(a);return function(e){const n=(0,l.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,a])}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const a=(0,o.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,s.aZ)(i),(0,r.useCallback)(e=>{if(!i)return;const n=new URLSearchParams(a.location.search);n.set(i,e),a.replace({...a.location,search:n.toString()})},[i,a])]}function x(e){const{defaultValue:n,queryString:a=!1,groupId:i}=e,t=h(e),[o,s]=(0,r.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=n.find(e=>e.default)??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:t})),[l,u]=m({queryString:a,groupId:i}),[x,b]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[a,i]=(0,c.Dv)(n);return[a,(0,r.useCallback)(e=>{n&&i.set(e)},[n,i])]}({groupId:i}),v=(()=>{const e=l??x;return p({value:e,tabValues:t})?e:null})();(0,d.A)(()=>{v&&s(v)},[v]);return{selectedValue:o,selectValue:(0,r.useCallback)(e=>{if(!p({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),b(e)},[u,b,t]),tabValues:t}}var b=a(92303);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=a(74848);function f({className:e,block:n,selectedValue:a,selectValue:r,tabValues:o}){const d=[],{blockElementScrollPositionUntilNextRender:s}=(0,t.a_)(),l=e=>{const n=e.currentTarget,i=d.indexOf(n),t=o[i].value;t!==a&&(s(n),r(t))},c=e=>{let n=null;switch(e.key){case"Enter":l(e);break;case"ArrowRight":{const a=d.indexOf(e.currentTarget)+1;n=d[a]??d[0];break}case"ArrowLeft":{const a=d.indexOf(e.currentTarget)-1;n=d[a]??d[d.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},e),children:o.map(({value:e,label:n,attributes:r})=>(0,j.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{d.push(e)},onKeyDown:c,onClick:l,...r,className:(0,i.A)("tabs__item",v.tabItem,r?.className,{"tabs__item--active":a===e}),children:n??e},e))})}function g({lazy:e,children:n,selectedValue:a}){const t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=t.find(e=>e.props.value===a);return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:t.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a}))})}function _(e){const n=x(e);return(0,j.jsxs)("div",{className:(0,i.A)("tabs-container",v.tabList),children:[(0,j.jsx)(f,{...n,...e}),(0,j.jsx)(g,{...n,...e})]})}function k(e){const n=(0,b.A)();return(0,j.jsx)(_,{...e,children:u(e.children)},String(n))}},19365:(e,n,a)=>{a.d(n,{A:()=>o});a(96540);var r=a(34164);const i={tabItem:"tabItem_Ymn6"};var t=a(74848);function o({children:e,hidden:n,className:a}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,r.A)(i.tabItem,a),hidden:n,children:e})}},28453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>d});var r=a(96540);const i={},t=r.createContext(i);function o(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:n},e.children)}},38932:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"Basic_Application/audio/rdk_x3_and_rdk_x3_module/wm8960_audio_hat","title":"wm8960_audio_hat","description":"Product Overview","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/03_Basic_Application/05_audio/rdk_x3_and_rdk_x3_module/wm8960_audio_hat.md","sourceDirName":"03_Basic_Application/05_audio/rdk_x3_and_rdk_x3_module","slug":"/Basic_Application/audio/rdk_x3_and_rdk_x3_module/wm8960_audio_hat","permalink":"/rdk_doc/en/Basic_Application/audio/rdk_x3_and_rdk_x3_module/wm8960_audio_hat","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1766730309000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"audio_driver_hat2_rev2","permalink":"/rdk_doc/en/Basic_Application/audio/rdk_x3_and_rdk_x3_module/audio_driver_hat2_rev2"},"next":{"title":"3.5.2 RDK X5","permalink":"/rdk_doc/en/03_Basic_Application/05_audio/rdk_x5"}}');var i=a(74848),t=a(28453),o=a(11470),d=a(19365);const s={sidebar_position:2},l="Waveshare WM8960 Audio HAT",c={},u=[{value:"Product Overview",id:"product-overview",level:2},{value:"Installation",id:"installation",level:2},{value:"Hardware Setup",id:"hardware-setup",level:3},{value:"Software Configuration",id:"software-configuration",level:3},{value:"Uninstallation",id:"uninstallation",level:3},{value:"Usage",id:"usage",level:2},{value:"1. Check the Sound Card Device",id:"1-check-the-sound-card-device",level:3},{value:"Recording",id:"recording",level:3},{value:"Playback",id:"playback",level:3},{value:"Recording",id:"recording-1",level:3},{value:"Playback",id:"playback-1",level:3},{value:"FAQ",id:"faq",level:2}];function h(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"waveshare-wm8960-audio-hat",children:"Waveshare WM8960 Audio HAT"})}),"\n",(0,i.jsx)(n.h2,{id:"product-overview",children:"Product Overview"}),"\n",(0,i.jsx)(n.p,{children:"The WM8960 Audio HAT, produced by Waveshare, is an audio adapter board based on the WM8960 Codec. It supports dual-channel microphone recording and audio playback. The appearance of the adapter board is shown below:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/02_audio/image/image-audio-wm8960.jpg",alt:"image-audio-wm8960"})}),"\n",(0,i.jsxs)(n.p,{children:["For detailed information about the audio adapter board, please refer to the ",(0,i.jsx)(n.a,{href:"https://www.waveshare.net/wiki/WM8960_Audio_HAT",children:"WM8960 Audio HAT"})," documentation."]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.h3,{id:"hardware-setup",children:"Hardware Setup"}),"\n",(0,i.jsxs)(o.A,{groupId:"rdk-type",children:[(0,i.jsx)(d.A,{value:"rdk-x3-pi",label:"RDK-X3-PI",children:(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Connect the adapter board to the 40-pin header of the RDK X3 as shown below:",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/02_audio/image/image-wm8960-audio-hat-setup.jpg",alt:"image-wm8960-audio-hat-setup"})]}),"\n"]})}),(0,i.jsx)(d.A,{value:"rdk-x3-md",label:"RDK-X3-Module",children:(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Connect the adapter board to the 40-pin header of the RDK X3 as shown below:",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/02_audio/image/image-x3md-wm8960.png",alt:"image-x3md-wm8960"})]}),"\n"]})})]}),"\n",(0,i.jsx)(n.h3,{id:"software-configuration",children:"Software Configuration"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"srpi-config"})," to configure the audio board.",(0,i.jsx)(n.br,{}),"\n","Navigate to ",(0,i.jsx)(n.code,{children:"3 Interface Options"})," -> ",(0,i.jsx)(n.code,{children:"I5 Audio"}),(0,i.jsx)(n.br,{}),"\n","Select ",(0,i.jsx)(n.code,{children:"WM8960 Audio HAT"}),":\n",(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/02_audio/image/image-audio-driver-hat-config01.png",alt:"image-audio-driver-hat-config00"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Run the command ",(0,i.jsx)(n.code,{children:"sync && reboot"})," to restart the development board. If the following device nodes appear under ",(0,i.jsx)(n.code,{children:"/dev/snd"}),", the adapter board has been installed successfully:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"root@ubuntu:~# ls /dev/snd/\nby-path  controlC0  pcmC0D0c  pcmC0D0p  pcmC0D1c  pcmC0D1p  timer\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["On the ",(0,i.jsx)(n.code,{children:"RDK X3"}),", the playback node for this audio board is ",(0,i.jsx)(n.code,{children:"pcmC0D0p"}),", and the recording node is ",(0,i.jsx)(n.code,{children:"pcmC0D1c"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"uninstallation",children:"Uninstallation"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"srpi-config"})," to configure the audio board.",(0,i.jsx)(n.br,{}),"\n","Navigate to ",(0,i.jsx)(n.code,{children:"3 Interface Options"})," -> ",(0,i.jsx)(n.code,{children:"I5 Audio"}),(0,i.jsx)(n.br,{}),"\n","Select ",(0,i.jsx)(n.code,{children:"UNSET"})," to uninstall the audio driver and related configurations."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Remove the adapter board."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(n.h3,{id:"1-check-the-sound-card-device",children:"1. Check the Sound Card Device"}),"\n",(0,i.jsx)(n.p,{children:"Check if the sound card exists and verify the device number."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"To confirm if the sound card is registered, run:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cat /proc/asound/cards \n"})}),"\n",(0,i.jsx)(n.p,{children:"Example output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:" root@ubuntu:~# cat /proc/asound/cards\n 0 [hobotsnd6      ]: hobotsnd6 - hobotsnd6\n                      hobotsnd6\n"})}),"\n",(0,i.jsx)(n.p,{children:'If an entry similar to "hobotsnd6" is visible, it indicates that the sound card has been recognized.'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"To check the location of the functional devices, run:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cat /proc/asound/devices\n"})}),"\n",(0,i.jsx)(n.p,{children:"Example output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"root@ubuntu:~# cat /proc/asound/devices\n    2: [ 0]   : control\n    3: [ 0- 0]: digital audio playback\n    4: [ 0- 0]: digital audio capture\n    5: [ 0- 1]: digital audio playback\n    6: [ 0- 1]: digital audio capture\n    33:        : timer\n"})}),"\n",(0,i.jsx)(n.h3,{id:"recording",children:"Recording"}),"\n",(0,i.jsxs)(o.A,{groupId:"rdk-type",children:[(0,i.jsxs)(d.A,{value:"rdk-x3-pi",label:"RDK-X3-PI",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Dual-channel microphone recording"})}),(0,i.jsx)(n.p,{children:"Use tinycap to record 2-channel audio:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"tinycap ./2chn_test.wav -D 0 -d 0 -c 2 -b 16 -r 48000 -p 512 -n 4 -t 5\n"})}),(0,i.jsx)(n.h3,{id:"playback",children:"Playback"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Dual-channel audio playback"})}),(0,i.jsx)(n.p,{children:"Using tinyplay to play recorded audio files, the commonly used parameters are as follows:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"tinyplay ./2chn_test.wav -D 0 -d 1\n"})})]}),(0,i.jsxs)(d.A,{value:"rdk-x3-md",label:"RDK-X3-Module",children:[(0,i.jsx)(n.h3,{id:"recording-1",children:"Recording"}),(0,i.jsx)(n.p,{children:"Dual-channel microphone recording:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:" tinycap ./2chn_test.wav -D 0 -d 1 -c 2 -b 16 -r 48000 -p 512 -n 4 -t 5\n"})}),(0,i.jsx)(n.h3,{id:"playback-1",children:"Playback"}),(0,i.jsx)(n.p,{children:"Dual-channel audio playback:\nUse tinyplay to play the recorded audio file. Common parameters are as follows:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"tinyplay ./2chn_test.wav -D 0 -d 0\n"})})]})]}),"\n",(0,i.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"/rdk_doc/en/FAQ/multimedia",children:"See this link for common audio issues"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);