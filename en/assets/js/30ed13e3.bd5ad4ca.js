"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[10121],{11470:(e,n,o)=>{o.d(n,{A:()=>w});var r=o(96540),i=o(34164),t=o(23104),a=o(56347),s=o(205),c=o(57485),l=o(31682),d=o(70679);function h(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function u(e){const{values:n,children:o}=e;return(0,r.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:o,default:r}})=>({value:e,label:n,attributes:o,default:r}))}(o);return function(e){const n=(0,l.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,o])}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const o=(0,a.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(i),(0,r.useCallback)(e=>{if(!i)return;const n=new URLSearchParams(o.location.search);n.set(i,e),o.replace({...o.location,search:n.toString()})},[i,o])]}function g(e){const{defaultValue:n,queryString:o=!1,groupId:i}=e,t=u(e),[a,c]=(0,r.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const o=n.find(e=>e.default)??n[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:n,tabValues:t})),[l,h]=m({queryString:o,groupId:i}),[g,b]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[o,i]=(0,d.Dv)(n);return[o,(0,r.useCallback)(e=>{n&&i.set(e)},[n,i])]}({groupId:i}),x=(()=>{const e=l??g;return p({value:e,tabValues:t})?e:null})();(0,s.A)(()=>{x&&c(x)},[x]);return{selectedValue:a,selectValue:(0,r.useCallback)(e=>{if(!p({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);c(e),h(e),b(e)},[h,b,t]),tabValues:t}}var b=o(92303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=o(74848);function j({className:e,block:n,selectedValue:o,selectValue:r,tabValues:a}){const s=[],{blockElementScrollPositionUntilNextRender:c}=(0,t.a_)(),l=e=>{const n=e.currentTarget,i=s.indexOf(n),t=a[i].value;t!==o&&(c(n),r(t))},d=e=>{let n=null;switch(e.key){case"Enter":l(e);break;case"ArrowRight":{const o=s.indexOf(e.currentTarget)+1;n=s[o]??s[0];break}case"ArrowLeft":{const o=s.indexOf(e.currentTarget)-1;n=s[o]??s[s.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},e),children:a.map(({value:e,label:n,attributes:r})=>(0,f.jsx)("li",{role:"tab",tabIndex:o===e?0:-1,"aria-selected":o===e,ref:e=>{s.push(e)},onKeyDown:d,onClick:l,...r,className:(0,i.A)("tabs__item",x.tabItem,r?.className,{"tabs__item--active":o===e}),children:n??e},e))})}function v({lazy:e,children:n,selectedValue:o}){const t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=t.find(e=>e.props.value===o);return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:t.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==o}))})}function _(e){const n=g(e);return(0,f.jsxs)("div",{className:(0,i.A)("tabs-container",x.tabList),children:[(0,f.jsx)(j,{...n,...e}),(0,f.jsx)(v,{...n,...e})]})}function w(e){const n=(0,b.A)();return(0,f.jsx)(_,{...e,children:h(e.children)},String(n))}},19365:(e,n,o)=>{o.d(n,{A:()=>a});o(96540);var r=o(34164);const i={tabItem:"tabItem_Ymn6"};var t=o(74848);function a({children:e,hidden:n,className:o}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,r.A)(i.tabItem,o),hidden:n,children:e})}},28453:(e,n,o)=>{o.d(n,{R:()=>a,x:()=>s});var r=o(96540);const i={},t=r.createContext(i);function a(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(t.Provider,{value:n},e.children)}},96126:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>c,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"Robot_development/boxs/audio/hobot_audio","title":"Intelligent Voice","description":"Introduction","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/05_Robot_development/03_boxs/audio/hobot_audio.md","sourceDirName":"05_Robot_development/03_boxs/audio","slug":"/Robot_development/boxs/audio/hobot_audio","permalink":"/rdk_doc/en/Robot_development/boxs/audio/hobot_audio","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1756900553000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Stereo OCC Algorithm","permalink":"/rdk_doc/en/Robot_development/boxs/spatial/dstereo_occupancy"},"next":{"title":"Sensevoice","permalink":"/rdk_doc/en/Robot_development/boxs/audio/sensevoice_ros2"}}');var i=o(74848),t=o(28453),a=o(11470),s=o(19365);const c={sidebar_position:1},l="Intelligent Voice",d={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Supported Platforms",id:"supported-platforms",level:2},{value:"Preparation",id:"preparation",level:2},{value:"Connect the audio board",id:"connect-the-audio-board",level:3},{value:"Interface connection",id:"interface-connection",level:4},{value:"Circular microphone array",id:"circular-microphone-array",level:4},{value:"Linear Microphone Array",id:"linear-microphone-array",level:4},{value:"Power Check",id:"power-check",level:4},{value:"Configure the Audio Board",id:"configure-the-audio-board",level:4},{value:"Usage",id:"usage",level:2},{value:"Result Analysis",id:"result-analysis",level:2}];function u(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"intelligent-voice",children:"Intelligent Voice"})}),"\n","\n",(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(n.p,{children:["The D-Robotics intelligent voice algorithm adopts a local offline mode, subscribes to audio data and sends it to BPU for processing, and then publishes messages such as ",(0,i.jsx)(n.strong,{children:"wake-up, command word recognition"}),", ",(0,i.jsx)(n.strong,{children:"DOA\uff08Direction of Arrival\uff09"}),", and ",(0,i.jsx)(n.strong,{children:"ASR\uff08Automatic Speech Recognition\uff09"}),". The implementation of intelligent voice function corresponds to the ",(0,i.jsx)(n.strong,{children:"hobot_audio"})," package of TogetheROS.Bot, which is suitable for the circular and linear four-microphone arrays supported by RDK."]}),"\n",(0,i.jsxs)(n.p,{children:["Code repository:  (",(0,i.jsx)(n.a,{href:"https://github.com/D-Robotics/hobot_audio.git",children:"https://github.com/D-Robotics/hobot_audio.git"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Application scenarios: The intelligent voice algorithm can recognize wake-up words and custom command words in audio, interpret speech content as corresponding instructions or convert it into text, and can achieve functions such as voice control and speech translation. It is mainly used in areas such as smart home, intelligent cockpit, and smart wearables."}),"\n",(0,i.jsxs)(n.p,{children:["Example of voice-controlled car movement: ",(0,i.jsx)(n.a,{href:"../../apps/car_audio_control",children:"Voice-controlled car movement"})]}),"\n",(0,i.jsx)(n.h2,{id:"supported-platforms",children:"Supported Platforms"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Platform"}),(0,i.jsx)(n.th,{children:"System"}),(0,i.jsx)(n.th,{children:"Function"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RDK X3"}),(0,i.jsx)(n.td,{children:"Ubuntu 20.04 (Foxy), Ubuntu 22.04 (Humble)"}),(0,i.jsx)(n.td,{children:"Start the audio module algorithm and display the results in the terminal"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RDK X5"}),(0,i.jsx)(n.td,{children:"Ubuntu 22.04 (Humble)"}),(0,i.jsx)(n.td,{children:"Start the audio module algorithm and display the results in the terminal"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Note: Only supports RDK X3."})}),"\n",(0,i.jsx)(n.h2,{id:"preparation",children:"Preparation"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The RDK has been burned with the  Ubuntu 20.04/22.04 system image provided by D-Robotics."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The TogetheROS.Bot has been successfully installed on the RDK."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The intelligent voice algorithm package has been successfully installed on the RDK, installation command:"}),"\n",(0,i.jsxs)(a.A,{groupId:"tros-distro",children:[(0,i.jsx)(s.A,{value:"foxy",label:"Foxy",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install tros-hobot-audio\n"})})}),(0,i.jsx)(s.A,{value:"humble",label:"Humble",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install tros-humble-hobot-audio\n"})})})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Connect the circular or linear four-microphone audio board to the RDK according to the following method."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"connect-the-audio-board",children:"Connect the audio board"}),"\n",(0,i.jsx)(n.h4,{id:"interface-connection",children:"Interface connection"}),"\n",(0,i.jsx)(n.h4,{id:"circular-microphone-array",children:"Circular microphone array"}),"\n",(0,i.jsx)(n.p,{children:"The circular microphone board is an integrated design, as shown in the following image:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/function/image/box_adv/cir_mic_board.png",alt:"cir_mic_board"})}),"\n",(0,i.jsx)(n.p,{children:"Purchase link:"}),"\n",(0,i.jsxs)(n.p,{children:["(",(0,i.jsx)(n.a,{href:"https://www.waveshare.net/shop/Audio-Driver-HAT.htm",children:"https://www.waveshare.net/shop/Audio-Driver-HAT.htm"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Connection steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Connect the microphone board to the RDK X3 40-pin GPIO GPIO interface. After the connection, it looks like the following image:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/function/image/box_adv/circle_mic_full.png",alt:"circle_mic_full"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Connect the power supply, network cable, etc."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"linear-microphone-array",children:"Linear Microphone Array"}),"\n",(0,i.jsx)(n.p,{children:"The linear microphone array consists of an audio adapter board and a linear microphone board. The physical diagram and connection instructions are as follows:"}),"\n",(0,i.jsx)(n.p,{children:"Audio adapter board:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/function/image/box_adv/connect_board.jpg",alt:"connect_board"})}),"\n",(0,i.jsx)(n.p,{children:"Linear microphone board:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/function/image/box_adv/line_mic.jpg",alt:"line_mic"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"First, connect the RDK X3 to the audio adapter board, aligning the pins of both devices. The connection is shown in the following figure:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/function/image/box_adv/link.jpg",alt:"link"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Next, connect the RDK X3 to the microphone array board. The adapter board FPC interface is connected to the microphone array board with a 15-pin FFC cable.The connection is shown in the following figure:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/function/image/box_adv/link_mic.jpg",alt:"link_mic"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Connect the AEC line."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/function/image/box_adv/mic_line.jpg",alt:"mic_line"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Connect the power supply, network cable, etc."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"power-check",children:"Power Check"}),"\n",(0,i.jsxs)(n.p,{children:["After connecting the RDK to the microphone array, power it on. Use the command ",(0,i.jsx)(n.code,{children:"i2cdetect -r -y 0"})," to check the device connection. If the connection is successful, three addresses should be read on the I2C bus. See the following figure:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/function/image/box_adv/detect_mic.jpg",alt:"detect_mic"})}),"\n",(0,i.jsx)(n.p,{children:"If no devices are detected, please check the device connection again."}),"\n",(0,i.jsx)(n.h4,{id:"configure-the-audio-board",children:"Configure the Audio Board"}),"\n",(0,i.jsxs)(n.p,{children:["When using the audio board for the first time, you need to use ",(0,i.jsx)(n.code,{children:"srpi-config"})," for configuration, otherwise the audio device will not be recognized."]}),"\n",(0,i.jsxs)(a.A,{groupId:"board_type",children:[(0,i.jsx)(s.A,{value:"rdk_x3",label:"RDK_X3",children:(0,i.jsxs)(n.p,{children:["For the configuration method, refer to the RDK User Manual ",(0,i.jsx)(n.a,{href:"/rdk_doc/en/Basic_Application/audio/rdk_x3_and_rdk_x3_module/audio_driver_hat2_rev2",children:"RDK X3 Waveshare Audio Drive"})]})}),(0,i.jsx)(s.A,{value:"rdk_x5",label:"RDK_X5",children:(0,i.jsxs)(n.p,{children:["For the configuration method, refer to the RDK User Manual ",(0,i.jsx)(n.a,{href:"/rdk_doc/en/Basic_Application/audio/rdk_x5/audio_driver_hat2_rev2",children:"RDK X5 WaveShare Audio Drive"})]})})]}),"\n",(0,i.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsxs)(n.p,{children:["After the smart voice hobot_audio package starts running, it will capture audio from the microphone array and send the captured audio data to the smart voice algorithm SDK module for intelligent processing. It will output wake-up events, command words, ASR results, and other smart information. Wake-up events and command words are published as ",(0,i.jsx)(n.code,{children:"audio_msg::msg::SmartAudioData"})," type messages, while ASR results are published as ",(0,i.jsx)(n.code,{children:"std_msgs::msg::String"})," type messages."]}),"\n",(0,i.jsx)(n.p,{children:"The specific process is shown in the following diagram:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/function/image/box_adv/hobot_audio.jpg",alt:"hobot_audio"})}),"\n",(0,i.jsxs)(n.p,{children:["The smart voice function supports ASR recognition after denoising the raw audio. The default wake word and command words are defined in the ",(0,i.jsx)(n.em,{children:"config/hrsc/cmd_word.json"})," file under the root directory of the smart voice function module, which are set in chinese as:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "cmd_word": [\n        "\u5730\u74dc\u4f60\u597d",\n        "\u5411\u524d\u8d70",\n        "\u5411\u540e\u9000",\n        "\u5411\u5de6\u8f6c",\n        "\u5411\u53f3\u8f6c",\n        "\u505c\u6b62\u8fd0\u52a8"\n    ]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"The wake-up word and command words can be configured according to your needs. Changing the wake-up word may affect the default wake-up word and command word effects. It is recommended to use Chinese wake-up words and command words, preferably phrases that are easy to pronounce, with a length of 3 to 5 characters."}),"\n",(0,i.jsx)(n.p,{children:"In addition, the smart voice function supports outputting the DOA (Direction of Arrival) of the sound source, measured in degrees. For a circular microphone array, the DOA angle range is 0 degrees to 360 degrees, and for a linear microphone array, the DOA angle range is 0 degrees to 180 degrees."}),"\n",(0,i.jsx)(n.p,{children:"The relative position relationship of the angles is closely related to the installation position of the microphones. Here are the DOA angle diagrams for a circular microphone array and a linear microphone array:"}),"\n",(0,i.jsxs)(n.p,{children:["DOA angle diagram for circular microphone array:\n",(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/04_apps/image/car_audio_tracking/doa_circle.jpg",alt:"doa_circle"})]}),"\n",(0,i.jsxs)(n.p,{children:["DOA angle diagram for linear microphone array:\n",(0,i.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/04_apps/image/car_audio_tracking/doa_line.jpg",alt:"doa_line"})]}),"\n",(0,i.jsx)(n.p,{children:"To run the hobot_audio package on the RDK:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Copy the configuration file"}),"\n"]}),"\n",(0,i.jsxs)(a.A,{groupId:"tros-distro",children:[(0,i.jsx)(s.A,{value:"foxy",label:"Foxy",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Configure the tros.b environment\nsource /opt/tros/setup.bash\n"})})}),(0,i.jsx)(s.A,{value:"humble",label:"Humble",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Configure the tros.b environment\nsource /opt/tros/humble/setup.bash\n"})})})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"# Copy the configuration file required for running the example from the installation path of tros.b.\ncp -r /opt/tros/${TROS_DISTRO}/lib/hobot_audio/config/ .\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Confirm the configuration file"}),"\n",(0,i.jsxs)(n.p,{children:["The default configuration of the configuration file ",(0,i.jsx)(n.em,{children:"config/audio_config.json"})," is as follows:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n   "micphone_enable": 1,\n   "micphone_name": "hw:0,0",\n   "micphone_rate": 16000,\n   "micphone_chn": 8,\n   "micphone_buffer_time": 0,\n   "micphone_nperiods": 4,\n   "micphone_period_size": 512,\n   "voip_mode": 0,\n   "mic_type": 0,\n   "asr_mode": 0,\n```"asr_channel": 3,\n   "save_audio": 0\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"The configuration that needs to be confirmed includes: microphone device number, microphone array type, and whether ASR results need to be published."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.strong,{children:"microphone device number"})," is set through the ",(0,i.jsx)(n.code,{children:"micphone_name"}),' field, with the default value being "hw:0,0", which represents audio device Card0 Device0. The device number can be checked using the command ',(0,i.jsx)(n.code,{children:"ls /dev/snd"}),', such as: "pcmC0D1c"; the last letter "c" represents capture device, C0 represents Card0, D1 represents Device1, and this parameter can be modified to "hw:0,1".']}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.strong,{children:"microphone array type"})," is set through the ",(0,i.jsx)(n.code,{children:"mic_type"})," field, with the default value being ",(0,i.jsx)(n.code,{children:"0"}),", which represents the circular microphone array. If a linear microphone array is used, this field should be modified to ",(0,i.jsx)(n.code,{children:"1"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ASR output"})," is set through the ",(0,i.jsx)(n.code,{children:"asr_mode"})," field, with the default value being ",(0,i.jsx)(n.code,{children:"0"}),", which means no ASR results will be outputted. To enable ASR output, this field needs to be changed to ",(0,i.jsx)(n.code,{children:"1"})," or ",(0,i.jsx)(n.code,{children:"2"}),", where ",(0,i.jsx)(n.code,{children:"1"})," means performing ASR recognition and publishing results once after wake-up, and ",(0,i.jsx)(n.code,{children:"2"})," means continuously performing ASR recognition and publishing results."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Configure the tros.b environment and launch the application"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(a.A,{groupId:"tros-distro",children:[(0,i.jsx)(s.A,{value:"foxy",label:"Foxy",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"# Configure the tros.b environment\nsource /opt/tros/setup.bash\n\n# Disable debug print information\nexport GLOG_minloglevel=3\n\n# Start the launch file\nros2 launch hobot_audio hobot_audio.launch.py\n"})})}),(0,i.jsx)(s.A,{value:"humble",label:"Humble",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"# Configure the tros.b environment\nsource /opt/tros/humble/setup.bash\n\n# Disable debug print information\nexport GLOG_minloglevel=3\n\n# Start the launch file\nros2 launch hobot_audio hobot_audio.launch.py\n"})})})]}),"\n",(0,i.jsx)(n.h2,{id:"result-analysis",children:"Result Analysis"}),"\n",(0,i.jsx)(n.p,{children:"The following information is outputted on the terminal:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"alsa_device_init, snd_pcm_open. handle((nil)), name(hw:0,0), direct(1), mode(0)\nsnd_pcm_open succeed. name(hw:0,0), handle(0x557d6e4d00)\nRate set to 16000Hz (requested 16000Hz)\nBuffer size range from 16 to 20480\nPeriod size range from 16 to 10240\nRequested period size 512 frames\nPeriods = 4\nwas set period_size = 512\nwas set buffer_size = 2048\nalsa_device_init. hwparams(0x557d6e4fa0), swparams(0x557d6e5210)\n"})}),"\n",(0,i.jsx)(n.p,{children:"The above log shows that the audio device initialization is successful, and the audio device is opened for audio collection."}),"\n",(0,i.jsx)(n.p,{children:'When a person speaks the Chinese command words "\u5730\u74dc\u4f60\u597d", "\u5411\u524d\u8d70", "\u5411\u5de6\u8f6c", "\u5411\u53f3\u8f6c", "\u5411\u540e\u9000" one by one next to the microphone, the speech algorithm SDK outputs the recognition results after intelligent processing, and the log shows the following:'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"recv hrsc sdk event wakeup success, wkp count is 1\n[WARN] [1657869437.600230208] [hobot_audio]: recv event:0\nrecv hrsc sdk doa data: 100\nrecv hrsc sdk command data: Go forward\n[WARN] [1657869443.870029101] [hobot_audio]: recv cmd word: Walk forward\nrecv hrsc sdk doa data: 110\nrecv hrsc sdk command data: Turn left\n[WARN] [1657869447.623147766] [hobot_audio]: recv cmd word: Turn left\nrecv hrsc sdk doa data: 100\nrecv hrsc sdk command data: Turn right\n[WARN] [1657869449.865822772] [hobot_audio]: recv cmd word: Turn right\nrecv hrsc sdk doa data: 110\nrecv hrsc sdk command data: Move backward\n[WARN] [1657869452.313969277] [hobot_audio]: recv cmd word: Move backward\n"})}),"\n",(0,i.jsx)(n.p,{children:'log shows that the voice commands "\u5411\u524d\u8d70", "\u5411\u5de6\u8f6c", "\u5411\u53f3\u8f6c"and "\u5411\u540e\u9000" are recognized, and the DOA angle information is output, e.g. "recv hrsc sdk doa data: 110" indicates that the DOA angle is 110 degrees.'}),"\n",(0,i.jsxs)(n.p,{children:["The default topic name for the smart audio messages published by hobot_audio is: ",(0,i.jsx)(n.strong,{children:"/audio_smart"}),". In another terminal, you can use the command ",(0,i.jsx)(n.code,{children:"ros2 topic list"})," to query the information of this topic:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"$ ros2 topic list\n/audio_smart\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If ASR output is enabled, the message topic published is: ",(0,i.jsx)(n.strong,{children:"/audio_asr"}),", and the ",(0,i.jsx)(n.code,{children:"ros2 topic list"})," result is:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"$ ros2 topic list\n/audio_smart\n/audio_asr\n"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}}}]);