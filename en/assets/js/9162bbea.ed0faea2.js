"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[16867],{27716:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>p,frontMatter:()=>t,metadata:()=>d,toc:()=>s});const d=JSON.parse('{"id":"Basic_Application/cdev_demo_sample/decode2display","title":"3.2.2 decode2display Sample Introduction","description":"Sample Overview","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/03_Basic_Application/02_cdev_demo_sample/decode2display.md","sourceDirName":"03_Basic_Application/02_cdev_demo_sample","slug":"/Basic_Application/cdev_demo_sample/decode2display","permalink":"/rdk_doc/en/Basic_Application/cdev_demo_sample/decode2display","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770786802000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"3.2.1 BPU Sample Introduction","permalink":"/rdk_doc/en/Basic_Application/cdev_demo_sample/bpu"},"next":{"title":"3.2.3 rtsp2display Example Introduction","permalink":"/rdk_doc/en/Basic_Application/cdev_demo_sample/rtsp2display"}}');var o=i(74848),a=i(28453);const t={sidebar_position:2},c="3.2.2 decode2display Sample Introduction",r={},s=[{value:"Sample Overview",id:"sample-overview",level:2},{value:"Effect Demonstration",id:"effect-demonstration",level:2},{value:"Hardware Preparation",id:"hardware-preparation",level:2},{value:"Hardware Connection",id:"hardware-connection",level:3},{value:"Quick Start",id:"quick-start",level:2},{value:"Code and Board Location",id:"code-and-board-location",level:3},{value:"Compilation and Execution",id:"compilation-and-execution",level:3},{value:"Execution Effect",id:"execution-effect",level:3},{value:"Detailed Introduction",id:"detailed-introduction",level:2},{value:"Sample Program Parameter Options Description",id:"sample-program-parameter-options-description",level:3},{value:"Software Architecture Description",id:"software-architecture-description",level:3},{value:"API Flow Description",id:"api-flow-description",level:3},{value:"FAQ",id:"faq",level:3}];function l(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"322-decode2display-sample-introduction",children:"3.2.2 decode2display Sample Introduction"})}),"\n",(0,o.jsx)(n.h2,{id:"sample-overview",children:"Sample Overview"}),"\n",(0,o.jsxs)(n.p,{children:["decode2display is a ",(0,o.jsx)(n.strong,{children:"C language interface"})," development code example located in the ",(0,o.jsx)(n.code,{children:"/app/cdev_demo"})," directory, demonstrating how to use C language for decoding and displaying to the screen. By referring to this example, users can understand and develop related applications."]}),"\n",(0,o.jsx)(n.h2,{id:"effect-demonstration",children:"Effect Demonstration"}),"\n",(0,o.jsxs)(n.p,{children:["The following image shows the phenomenon of the RDK connected to an HDMI screen during program execution and the network terminal output through SSH connection to the RDK.",(0,o.jsx)(n.br,{}),"\n","The HDMI screen will loop playback the decoded file, while the VScode remote RDK network terminal continuously prints the program's execution status."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/02_cdev_demo_sample/image/cdev_decode2dsiplay_output.png",alt:"output-img"})}),"\n",(0,o.jsx)(n.h2,{id:"hardware-preparation",children:"Hardware Preparation"}),"\n",(0,o.jsx)(n.p,{children:"Prepare an RDK development board and log in to the desktop via HDMI."}),"\n",(0,o.jsx)(n.h3,{id:"hardware-connection",children:"Hardware Connection"}),"\n",(0,o.jsx)(n.p,{children:"This example does not require a mouse and keyboard, so only an HDMI display, Ethernet port, and power cable are connected here."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/02_cdev_demo_sample/image/hardware-connect.png",alt:"connect-img"})}),"\n",(0,o.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,o.jsx)(n.h3,{id:"code-and-board-location",children:"Code and Board Location"}),"\n",(0,o.jsxs)(n.p,{children:["Navigate to the ",(0,o.jsx)(n.code,{children:"/app/cdev_demo/decode2display"})," location, where you can see the decode2display example contains 2 files:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"root@ubuntu:/app/cdev_demo/decode2display# tree\n.\n\u251c\u2500\u2500 decoder2display.c\n\u2514\u2500\u2500 Makefile\n\n"})}),"\n",(0,o.jsx)(n.h3,{id:"compilation-and-execution",children:"Compilation and Execution"}),"\n",(0,o.jsx)(n.p,{children:"We can directly use the make command in this directory to compile the decoder2display executable file."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"root@ubuntu:/app/cdev_demo/decode2display# tree\n.\n\u251c\u2500\u2500 decoder2display\n\u251c\u2500\u2500 decoder2display.c\n\u251c\u2500\u2500 decoder2display.o\n\u2514\u2500\u2500 Makefile\n\n"})}),"\n",(0,o.jsx)(n.h3,{id:"execution-effect",children:"Execution Effect"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"First"}),", we need to prepare the input data. Here we can copy existing board data, such as the 1920x1080.h264 file from the ",(0,o.jsx)(n.code,{children:"/opt/tros/humble/lib/hobot_codec/config/1920x1080.h264"})," directory to the current directory for separate operation without affecting the original data."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Second"}),", we use ",(0,o.jsx)(n.code,{children:"systemctl stop lightdm"})," to stop the display service."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Finally"}),", we use the ",(0,o.jsx)(n.code,{children:"./decoder2display"})," command. The default execution result is to decode the 1920x1080.h264 file and display it on the monitor."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"root@ubuntu:/app/cdev_demo/decode2display# sudo ./decoder2display -w 1920 -h 1080 -i 1920x1080.h264\nOpened DRM device: /dev/dri/card0\n1920x1080\n1280x800\n1280x720\n720x576\n720x480\n640x480\ndisp_w=1920, disp_h=1080\nsp_start_decode success!\nOpened DRM device: /dev/dri/card0\nDRM is available, using libdrm for rendering.\n------------------------------------------------------\nPlane 0:\n  Plane ID: 41\n  Src W: 1920\n  Src H: 1080\n  CRTC X: 0\n  CRTC Y: 0\n  CRTC W: 1920\n  CRTC H: 1080\n  Format: NV12\n  Z Pos: 0\n  Alpha: 65535\n  Pixel Blend Mode: 1\n  Rotation: -1\n  Color Encoding: -1\n  Color Range: -1\n------------------------------------------------------\nSetting DRM client capabilities...\nSetting up KMS...\nCRTC ID: 31\nCRTC ID: 63\nNumber of connectors: 1\nConnector ID: 74\n    Type: 11\n    Type Name: HDMI-A\n    Connection: Connected\n    Modes: 30\n    Subpixel: 1\n    Mode 0: 1280x800 @ 59Hz\n    Mode 1: 1920x1080 @ 60Hz\n    Mode 2: 1920x1080 @ 60Hz\n    Mode 3: 1920x1080 @ 60Hz\n    Mode 4: 1920x1080i @ 60Hz\n    Mode 5: 1920x1080i @ 60Hz\n    Mode 6: 1920x1080i @ 60Hz\n    Mode 7: 1920x1080 @ 50Hz\n    Mode 8: 1920x1080i @ 50Hz\n    Mode 9: 1920x1080 @ 24Hz\n    Mode 10: 1920x1080 @ 24Hz\n    Mode 11: 1280x720 @ 60Hz\n    Mode 12: 1280x720 @ 60Hz\n    Mode 13: 1280x720 @ 60Hz\n    Mode 14: 1280x720 @ 50Hz\n    Mode 15: 720x576 @ 50Hz\n    Mode 16: 720x576 @ 50Hz\n    Mode 17: 720x576i @ 50Hz\n    Mode 18: 720x576i @ 50Hz\n    Mode 19: 720x480 @ 60Hz\n    Mode 20: 720x480 @ 60Hz\n    Mode 21: 720x480 @ 60Hz\n    Mode 22: 720x480 @ 60Hz\n    Mode 23: 720x480 @ 60Hz\n    Mode 24: 720x480i @ 60Hz\n    Mode 25: 720x480i @ 60Hz\n    Mode 26: 720x480i @ 60Hz\n    Mode 27: 720x480i @ 60Hz\n    Mode 28: 640x480 @ 60Hz\n    Mode 29: 640x480 @ 60Hz\nsp_start_display success!\n2000/01/01 09:44:29.126 !INFO [SetImageFrame][0495]N2D init done!\n\nCreated new framebuffer: fb_id=77 for dma_buf_fd=56\nadd mapping dma_buf_fd:56 fb_id:77, mapping_count: 1\nCreated new framebuffer: fb_id=79 for dma_buf_fd=57\nadd mapping dma_buf_fd:57 fb_id:79, mapping_count: 2\n2000/01/01 09:44:46.374 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n2000/01/01 09:45:03.869 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n2000/01/01 09:45:21.331 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n2000/01/01 09:45:38.826 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n2000/01/01 09:45:56.299 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n2000/01/01 09:46:13.737 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n2000/01/01 09:46:31.219 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n2000/01/01 09:46:48.713 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n2000/01/01 09:47:06.197 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n2000/01/01 09:47:23.669 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n2000/01/01 09:47:41.161 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n2000/01/01 09:47:58.649 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n2000/01/01 09:48:16.111 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n2000/01/01 09:48:33.572 !INFO [vp_decode_work_func][0974]No more input data available, avpacket.size: 0. Re-cycling to send again.\n"})}),"\n",(0,o.jsx)(n.p,{children:"The content displayed on the HDMI screen is as follows:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/02_cdev_demo_sample/image/cdev_decode2display_vlc.png",alt:"HDMI_IMG"})}),"\n",(0,o.jsx)(n.h2,{id:"detailed-introduction",children:"Detailed Introduction"}),"\n",(0,o.jsx)(n.h3,{id:"sample-program-parameter-options-description",children:"Sample Program Parameter Options Description"}),"\n",(0,o.jsx)(n.p,{children:"We can directly execute the target file to confirm the parameter options description:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"root@ubuntu:/app/cdev_demo/decode2display# sudo ./decoder2display \nUsage: decoder2display [OPTION...]\ndecode2display sample -- An example of streaming video decoding to the display\n\n  -h, --height=height        height of input video\n  -i, --input=path           input video path\n  -w, --width=width          width of input video\n  -?, --help                 Give this help list\n      --usage                Give a short usage message\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Where:",(0,o.jsx)(n.br,{}),"\n",(0,o.jsx)(n.code,{children:"-h"})," is a required option, representing the pixel height of the input video",(0,o.jsx)(n.br,{}),"\n",(0,o.jsx)(n.code,{children:"-w"})," is a required option, representing the pixel width of the input video",(0,o.jsx)(n.br,{}),"\n",(0,o.jsx)(n.code,{children:"-i"})," is a required option, representing the file path of the input video"]}),"\n",(0,o.jsx)(n.h3,{id:"software-architecture-description",children:"Software Architecture Description"}),"\n",(0,o.jsx)(n.p,{children:"This Sample is implemented based on the spcdev interface. It parses the parameters passed to main, obtains the display resolution through libspcdev.so API, initializes the decoder and display modules, and determines whether VPS is needed based on the adapted resolution and display resolution."}),"\n",(0,o.jsx)("center",{children:(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/02_cdev_demo_sample/image/cdev_decode2display_software_arch.png",alt:"software_arch"})})}),"\n",(0,o.jsx)(n.h3,{id:"api-flow-description",children:"API Flow Description"}),"\n",(0,o.jsx)("center",{children:(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/02_cdev_demo_sample/image/cdev_decode2display_api_flow.png",alt:"API_Flow"})})}),"\n",(0,o.jsx)(n.h3,{id:"faq",children:"FAQ"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Q:"})," Is there more detailed documentation for the API?",(0,o.jsx)(n.br,{}),"\n",(0,o.jsx)(n.strong,{children:"A:"})," You can check at the ",(0,o.jsx)(n.a,{href:"/rdk_doc/en/Basic_Application/multi_media_sp_dev_api/multi_media_api/cdev_multimedia_api_x3/decoder_api",children:"Decoding Module API"})," location."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Q:"})," Why use ",(0,o.jsx)(n.code,{children:"systemctl stop lightdm"}),"?",(0,o.jsx)(n.br,{}),"\n",(0,o.jsx)(n.strong,{children:"A:"})," We can also use windows for display, but it consumes too many resources, which may cause lag or stuttering. Displaying directly to the monitor provides a more intuitive effect."]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>c});var d=i(96540);const o={},a=d.createContext(o);function t(e){const n=d.useContext(a);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),d.createElement(a.Provider,{value:n},e.children)}}}]);