"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[39241],{28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>d});var l=i(96540);const s={},r=l.createContext(s);function o(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),l.createElement(r.Provider,{value:n},e.children)}},51443:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"Advanced_development/linux_development/kernel_headers","title":"7.2.2 Kernel Headers","description":"If you need to compile kernel modules or similar code on your development board, you must install the Linux kernel headers. These header files contain various constant definitions, macro definitions, function interface declarations, and data structure definitions from the Linux kernel, and are essential dependencies required to compile kernel module code.","source":"@site/i18n/en/docusaurus-plugin-content-docs-docs_s/current/07_Advanced_development/02_linux_development/02_kernel_headers.md","sourceDirName":"07_Advanced_development/02_linux_development","slug":"/Advanced_development/linux_development/kernel_headers","permalink":"/rdk_doc/en/rdk_s/Advanced_development/linux_development/kernel_headers","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1769600600000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"7.2.1 Development Environment Setup and Build Instructions","permalink":"/rdk_doc/en/rdk_s/Advanced_development/linux_development/environment_build"},"next":{"title":"7.2.3 Applying the Real-Time Kernel","permalink":"/rdk_doc/en/rdk_s/Advanced_development/linux_development/realtime_kernel"}}');var s=i(74848),r=i(28453);const o={sidebar_position:2},d="7.2.2 Kernel Headers",t={},c=[{value:"Installation",id:"installation",level:2},{value:"Usage Example",id:"usage-example",level:2},{value:"Hello World Kernel Module",id:"hello-world-kernel-module",level:3},{value:"Writing the Hello World Kernel Module",id:"writing-the-hello-world-kernel-module",level:4},{value:"Writing the Makefile",id:"writing-the-makefile",level:4},{value:"Module Signing",id:"module-signing",level:4},{value:"Load the module",id:"load-the-module",level:4},{value:"Configure automatic loading at boot",id:"configure-automatic-loading-at-boot",level:4},{value:"Third-party kernel driver module compilation example",id:"third-party-kernel-driver-module-compilation-example",level:3},{value:"PCAN",id:"pcan",level:4}];function a(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"722-kernel-headers",children:"7.2.2 Kernel Headers"})}),"\n",(0,s.jsx)(n.p,{children:"If you need to compile kernel modules or similar code on your development board, you must install the Linux kernel headers. These header files contain various constant definitions, macro definitions, function interface declarations, and data structure definitions from the Linux kernel, and are essential dependencies required to compile kernel module code."}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.p,{children:"You can install the kernel headers and kernel compilation dependencies using the following commands:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install linux-headers-6.1.112-rt43\nsudo apt install bison flex\n"})}),"\n",(0,s.jsxs)(n.p,{children:["After successful execution, the kernel headers will be installed under the ",(0,s.jsx)(n.code,{children:"/usr/src"})," directory:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sunrise@ubuntu:~$ ls /usr/src/linux-headers-$(uname -r)\nDocumentation  Makefile        arch   crypto   include   ipc     mm    samples   sound  virt\nKbuild         Module.symvers  block  drivers  init      kernel  net   scripts   tools\nKconfig        System.map      certs  fs       io_uring  lib     rust  security  usr\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Do not"})," run the ",(0,s.jsx)(n.code,{children:"make clean"})," command inside the ",(0,s.jsx)(n.code,{children:"/usr/src/linux-headers-$(uname -r)"})," directory, as this will break the kernel module compilation environment on your board.",(0,s.jsx)(n.br,{}),"\n","If you have already executed ",(0,s.jsx)(n.code,{children:"make clean"}),", please reinstall the ",(0,s.jsx)(n.code,{children:"linux-headers-6.1.112-rt43"})," package to restore the environment."]})}),"\n",(0,s.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,s.jsx)(n.h3,{id:"hello-world-kernel-module",children:"Hello World Kernel Module"}),"\n",(0,s.jsxs)(n.p,{children:["We'll demonstrate how to use kernel headers by developing a simple ",(0,s.jsx)(n.code,{children:"Hello World"})," kernel module. The general steps are as follows:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Prepare the source code (using ",(0,s.jsx)(n.code,{children:"${HOME}/test_ko"})," under the ",(0,s.jsx)(n.code,{children:"sunrise"})," user as an example)"]}),"\n",(0,s.jsx)(n.li,{children:"Write a Makefile to compile the driver module"}),"\n",(0,s.jsx)(n.li,{children:"Sign the driver module"}),"\n",(0,s.jsx)(n.li,{children:"Test loading and unloading the module"}),"\n",(0,s.jsx)(n.li,{children:"(Optional) Configure automatic module loading at boot"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"writing-the-hello-world-kernel-module",children:"Writing the Hello World Kernel Module"}),"\n",(0,s.jsxs)(n.p,{children:["Open your preferred editor (e.g., VIM) and create a file named ",(0,s.jsx)(n.code,{children:"hello.c"})," with the following content:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:'#include <linux/module.h>\n#include <linux/kernel.h>\n#include <linux/init.h>\n\nMODULE_LICENSE("GPL");\nMODULE_AUTHOR("Your Name");\nMODULE_DESCRIPTION("Simple Hello World kernel module");\n\nstatic int __init hello_init(void)\n{\n\tprintk(KERN_INFO "Hello, World! Kernel module loaded.\\n");\n\treturn 0;\n}\n\nstatic void __exit hello_exit(void)\n{\n\tprintk(KERN_INFO "Goodbye, World! Kernel module unloaded.\\n");\n}\n\nmodule_init(hello_init);\nmodule_exit(hello_exit);\n'})}),"\n",(0,s.jsxs)(n.p,{children:["This module prints ",(0,s.jsx)(n.code,{children:"Hello, World!"})," when loaded and ",(0,s.jsx)(n.code,{children:"Goodbye, World!"})," when unloaded."]}),"\n",(0,s.jsx)(n.h4,{id:"writing-the-makefile",children:"Writing the Makefile"}),"\n",(0,s.jsxs)(n.p,{children:["Open your preferred editor (e.g., VIM) and create a file named ",(0,s.jsx)(n.code,{children:"Makefile"})," with the following content:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-makefile",children:"ifneq ($(KERNELRELEASE),)\nobj-m := hello.o\nelse\nKERN_VER ?= $(shell uname -r)\n\nKERN_DIR ?= /lib/modules/$(KERN_VER)/build\n\nPWD := $(shell pwd)\n\n.PHONY := all prepare clean\n\nall: prepare\n\t$(MAKE) -C $(KERN_DIR) M=$(PWD) modules\n\t$(MAKE) -C $(KERN_DIR) KERNELRELEASE=$(KERN_VER) M=$(PWD) modules_install\n\nprepare:\n\t$(MAKE) -C $(KERN_DIR) prepare\n\nclean:\n\t$(MAKE) -C $(KERN_DIR) M=$(PWD) clean\n\nendif\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PWD"})," specifies the source code path (i.e., the location of ",(0,s.jsx)(n.code,{children:"hello.c"}),");"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"KERN_DIR"})," specifies the kernel source path;"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"KERNELRELEASE"})," is a variable defined in the top-level kernel Makefile, typically used to determine whether the current build is running under the ",(0,s.jsx)(n.code,{children:"Kbuild"})," framework;"]}),"\n",(0,s.jsxs)(n.li,{children:["Invoke the kernel's native ",(0,s.jsx)(n.code,{children:"prepare"})," target to set up the tools required for compiling and installing kernel modules;"]}),"\n",(0,s.jsxs)(n.li,{children:["Invoke the kernel's native ",(0,s.jsx)(n.code,{children:"modules"})," target to compile the kernel module;"]}),"\n",(0,s.jsxs)(n.li,{children:["Invoke the kernel's native ",(0,s.jsx)(n.code,{children:"modules_install"})," target to sign and install the compiled kernel module into the system's module directory."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["After saving the ",(0,s.jsx)(n.code,{children:"Makefile"}),", run the ",(0,s.jsx)(n.code,{children:"make"})," command to compile the module and generate the ",(0,s.jsx)(n.code,{children:"hello.ko"})," file:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sunrise@ubuntu:~/test_ko$ sudo make\nmake -C /lib/modules/6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8/build prepare\nmake[1]: Entering directory '/usr/src/linux-headers-6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8'\n  SYNC    include/config/auto.conf.cmd\n  HOSTCC  scripts/basic/fixdep\n  HOSTCC  scripts/kconfig/conf.o\n  HOSTCC  scripts/kconfig/confdata.o\n  HOSTCC  scripts/kconfig/expr.o\n  LEX     scripts/kconfig/lexer.lex.c\n  YACC    scripts/kconfig/parser.tab.[ch]\n  HOSTCC  scripts/kconfig/lexer.lex.o\n  HOSTCC  scripts/kconfig/menu.o\n  HOSTCC  scripts/kconfig/parser.tab.o\n  HOSTCC  scripts/kconfig/preprocess.o\n  HOSTCC  scripts/kconfig/symbol.o\n  HOSTCC  scripts/kconfig/util.o\n  HOSTLD  scripts/kconfig/conf\n  HOSTCC  scripts/dtc/dtc.o\n  HOSTCC  scripts/dtc/flattree.o\n  HOSTCC  scripts/dtc/fstree.o\n  HOSTCC  scripts/dtc/data.o\n  HOSTCC  scripts/dtc/livetree.o\n  HOSTCC  scripts/dtc/treesource.o\n  HOSTCC  scripts/dtc/srcpos.o\n  HOSTCC  scripts/dtc/checks.o\n  HOSTCC  scripts/dtc/util.o\n  LEX     scripts/dtc/dtc-lexer.lex.c\n  YACC    scripts/dtc/dtc-parser.tab.[ch]\n  HOSTCC  scripts/dtc/dtc-lexer.lex.o\n  HOSTCC  scripts/dtc/dtc-parser.tab.o\n  HOSTLD  scripts/dtc/dtc\n  HOSTCC  scripts/dtc/libfdt/fdt.o\n  HOSTCC  scripts/dtc/libfdt/fdt_ro.o\n  HOSTCC  scripts/dtc/libfdt/fdt_wip.o\n  HOSTCC  scripts/dtc/libfdt/fdt_sw.o\n  HOSTCC  scripts/dtc/libfdt/fdt_rw.o\n  HOSTCC  scripts/dtc/libfdt/fdt_strerror.o\n  HOSTCC  scripts/dtc/libfdt/fdt_empty_tree.o\n  HOSTCC  scripts/dtc/libfdt/fdt_addresses.o\n  HOSTCC  scripts/dtc/libfdt/fdt_overlay.o\n  HOSTCC  scripts/dtc/fdtoverlay.o\n  HOSTLD  scripts/dtc/fdtoverlay\n  HOSTCC  scripts/kallsyms\n  HOSTCC  scripts/sorttable\n  HOSTCC  scripts/asn1_compiler\n  HOSTCC  scripts/sign-file\n  UPD     include/config/kernel.release\n  UPD     include/generated/utsrelease.h\n  UPD     include/generated/compile.h\n  GEN     arch/arm64/include/generated/asm/cpucaps.h\n  GEN     arch/arm64/include/generated/asm/sysreg-defs.h\n  CC      scripts/mod/empty.o\n  HOSTCC  scripts/mod/mk_elfconfig\n  MKELF   scripts/mod/elfconfig.h\n  HOSTCC  scripts/mod/modpost.o\n  CC      scripts/mod/devicetable-offsets.s\n  UPD     scripts/mod/devicetable-offsets.h\n  HOSTCC  scripts/mod/file2alias.o\n  HOSTCC  scripts/mod/sumversion.o\n  HOSTLD  scripts/mod/modpost\n  CALL    scripts/checksyscalls.sh\n  CHKSHA1 include/linux/atomic/atomic-arch-fallback.h\n  CHKSHA1 include/linux/atomic/atomic-instrumented.h\n  CHKSHA1 include/linux/atomic/atomic-long.h\n  LD      arch/arm64/kernel/vdso/vdso.so.dbg\n  VDSOSYM include/generated/vdso-offsets.h\n  OBJCOPY arch/arm64/kernel/vdso/vdso.so\nmake[1]: Leaving directory '/usr/src/linux-headers-6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8'\nmake -C /lib/modules/6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8/build M=/home/sunrise/test_ko modules\nmake[1]: Entering directory '/usr/src/linux-headers-6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8'\n  CC [M]  /home/sunrise/test_ko/hello.o\n  MODPOST /home/sunrise/test_ko/Module.symvers\n  CC [M]  /home/sunrise/test_ko/hello.mod.o\n  LD [M]  /home/sunrise/test_ko/hello.ko\nmake[1]: Leaving directory '/usr/src/linux-headers-6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8'\nmake -C /lib/modules/6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8/build KERNELRELEASE=6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8 M=/home/sunrise/test_ko modules_install\nmake[1]: Entering directory '/usr/src/linux-headers-6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8'\n  INSTALL /lib/modules/6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8/extra/hello.ko\n  SIGN    /lib/modules/6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8/extra/hello.ko\n  DEPMOD  /lib/modules/6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8\nmake[1]: Leaving directory '/usr/src/linux-headers-6.1.112-rt43-DR-4.0.2-2507191817-g7253c2-g30e6e8'\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The kernel version shown in the output above will vary depending on your system version;"}),"\n",(0,s.jsxs)(n.li,{children:["For more details on compiling external kernel modules, please refer to: ",(0,s.jsx)(n.a,{href:"https://kernel.org/doc/html/v6.1/kbuild/modules.html",children:"Linux Kernel Doc | Building External Modules"}),"."]}),"\n"]})}),"\n",(0,s.jsx)(n.h4,{id:"module-signing",children:"Module Signing"}),"\n",(0,s.jsxs)(n.p,{children:["The compiled driver module has already been automatically signed via ",(0,s.jsx)(n.code,{children:"modules_install"}),". If you wish to sign it manually, execute the following commands:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Create a signing script.\nsunrise@ubuntu:~/test_ko#\ncat << EOF > drobot-sign-file.sh\n#!/bin/bash\n\nsigning_ko=\\$1\noutput_f=\\$2\n\nif [ ! -f "\\${signing_ko}" ];then\n\techo "\\${signing_ko} not found!"\n\texit 1\nfi\n\nmodule_build_dir=/lib/modules/\\$(uname -r)/build\n\nsigning_algo=\\$(cat \\${module_build_dir}/.config | grep -w CONFIG_MODULE_SIG_HASH | awk -F \'=\' \'{print \\$2}\' | tr -d \'"\')\nsigning_key_name=\\$(cat \\${module_build_dir}/.config | grep -w CONFIG_MODULE_SIG_KEY | awk -F \'=\' \'{print \\$2}\' | tr -d \'"\')\n\nsigning_key_f=\\${module_build_dir}/\\${signing_key_name}\nsigning_key_x509_f=\\${module_build_dir}/certs/signing_key.x509\n\nif [ -z "\\${output_f}" ];then\n\techo -n "Saving signed module to \\${signing_ko} ..."\nelse\n\techo -n "Saving signed module to \\${output_f} ..."\nfi\n\n\\${module_build_dir}/scripts/sign-file \\${signing_algo} \\${signing_key_f} \\${signing_key_x509_f} \\${signing_ko} \\${output_f}\n\necho "Done!"\nEOF\n\nsunrise@ubuntu:~/test_ko# chmod +x ./drobot-sign-file.sh\nsunrise@ubuntu:~/test_ko# ./drobot-sign-file.sh hello.ko\nSaving signed module to hello.ko ...Done!\n'})}),"\n",(0,s.jsx)(n.p,{children:"If you load the driver module without signing it, the following error will occur:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"ERROR: could not insert module hello.ko: Required key not available\n"})}),"\n",(0,s.jsx)(n.h4,{id:"load-the-module",children:"Load the module"}),"\n",(0,s.jsxs)(n.p,{children:["Load the ko: ",(0,s.jsx)(n.code,{children:"modprobe hello"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sunrise@ubuntu:~/test_ko# sudo modprobe hello\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Check if the ko is loaded: ",(0,s.jsx)(n.code,{children:"lsmod | grep hello"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sunrise@ubuntu:~/test_ko# lsmod | grep hello\nhello                  262144  0\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Unload the ko: ",(0,s.jsx)(n.code,{children:"modprobe -r hello"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sunrise@ubuntu:~/test_ko# sudo modprobe -r  hello\n[ 3136.909409] Goodbye, World!\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Run the command ",(0,s.jsx)(n.code,{children:"dmesg"})," to view the kernel log messages as follows:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sunrise@ubuntu:~/test_ko$ dmesg | tail -n 2\n[  525.710661] Hello, World! Kernel module loaded.\n[  612.716435] Goodbye, World! Kernel module unloaded.\n"})}),"\n",(0,s.jsx)(n.h4,{id:"configure-automatic-loading-at-boot",children:"Configure automatic loading at boot"}),"\n",(0,s.jsxs)(n.p,{children:["Create a new configuration file with the ",(0,s.jsx)(n.code,{children:".conf"})," extension under the ",(0,s.jsx)(n.code,{children:"/lib/modules-load.d"})," directory, for example ",(0,s.jsx)(n.code,{children:"hello.conf"}),". Add the name of the module you want to load automatically in this configuration file (without the ",(0,s.jsx)(n.code,{children:".ko"})," extension). For example, to automatically load ",(0,s.jsx)(n.code,{children:"hello.ko"}),", add a line containing ",(0,s.jsx)(n.code,{children:"hello"}),". If multiple modules need to be loaded, you can list each module on a separate line in a single configuration file. You can easily create and configure the file using the following command:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo echo hello > /lib/modules-load.d/hello.conf\n"})}),"\n",(0,s.jsx)(n.h3,{id:"third-party-kernel-driver-module-compilation-example",children:"Third-party kernel driver module compilation example"}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Disclaimer"}),":"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"D-Robotics assumes no responsibility for the development/maintenance of any third-party driver modules."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"D-Robotics is not liable for any issues arising from running third-party source code on the D-Robotics platform."}),"\n"]}),"\n"]})]}),"\n",(0,s.jsx)(n.h4,{id:"pcan",children:"PCAN"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Please ensure your RDK development board is properly connected to the internet and can access the PCAN official website. For example, use the command ",(0,s.jsx)(n.code,{children:"ping peak-system.com"}),". Sample output is as follows:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"sunrise@ubuntu:~$ ping peak-system.com -c 5\nPING peak-system.com (37.202.3.222) 56(84) bytes of data.\n64 bytes from r2096.agenturserver.it (37.202.3.222): icmp_seq=1 ttl=45 time=280 ms\n64 bytes from r2096.agenturserver.it (37.202.3.222): icmp_seq=3 ttl=45 time=279 ms\n64 bytes from r2096.agenturserver.it (37.202.3.222): icmp_seq=4 ttl=45 time=278 ms\n64 bytes from r2096.agenturserver.it (37.202.3.222): icmp_seq=5 ttl=45 time=277 ms\n\n--- peak-system.com ping statistics ---\n5 packets transmitted, 4 received, 20% packet loss, time 4024ms\nrtt min/avg/max/mdev = 277.180/278.460/280.280/1.152 ms\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["According to the official ",(0,s.jsx)(n.code,{children:"peak-system"})," instructions, download the ",(0,s.jsx)(n.code,{children:"pcan-kernel-version.sh"})," script and confirm the driver version you need to download:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Download pcan-kernel-version.sh\nwget https://www.peak-system.com/fileadmin/media/linux/files/pcan-kernel-version.sh.tar.gz\n# Extract script\ntar -xzf pcan-kernel-version.sh.tar.gz\n# Run the script\n./pcan-kernel-version.sh\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"D-Robotics RDK Super series only supports Linux kernel version 6.1."})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Download the PCAN driver:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Depending on the actual internet environment, the download may take minutes to hours\nwget --content-disposition https://www.peak-system.com/quick/PCAN-Linux-Driver\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"--content-disposition"})," option: saves the file locally using the filename provided by the server;"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:'Extract the PCAN driver archive. Here we use the PCAN driver version "8.20.0" released on 2025-08-16 as an example. Please adjust the command according to the actual file you downloaded:'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"tar -xzf peak-linux-driver-8.20.0.tar.gz\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Compile the driver:"}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Please ensure that the linux-headers-6.1.112-rt43 package on your board is version 4.0.3 or higher."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Install local module build prerequisites\nsudo apt install flex bison -y\n\n# Install PCAN driver prerequisites\nsudo apt install libpopt-dev -y\n\n# Setup local module build environment\nsudo make -C /usr/src/linux-headers-$(uname -r) prepare\n\n# Build PCAN Driver modules\ncd peak-linux-driver-8.20.0\nmake\n\n# Install PCAN drivers and libraries\nsudo make install\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Sign and use the PCAN driver. The following example uses PCAN driver version 8.20.0, where the driver modules are installed by default to ",(0,s.jsx)(n.code,{children:"/lib/modules/6.1.112/misc/"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Create a signing script as described in the ",(0,s.jsx)(n.a,{href:"#module-signing",children:"Module Signing"})," section;"]}),"\n",(0,s.jsxs)(n.li,{children:["Run the signing command:","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Sign file\nsudo bash drobot-sign-file.sh /lib/modules/6.1.112/misc/pcan.ko\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Use the PCAN driver:","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Insert PCAN driver\nsudo insmod /lib/modules/6.1.112/misc/pcan.ko\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);