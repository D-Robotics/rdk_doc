"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[46924,79002],{11470:(e,t,n)=>{n.d(t,{A:()=>w});var o=n(96540),r=n(34164),s=n(23104),a=n(56347),l=n(205),i=n(57485),c=n(31682),d=n(70679);function u(e){return o.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,o.useMemo)(()=>{const e=t??function(e){return u(e).map(({props:{value:e,label:t,attributes:n,default:o}})=>({value:e,label:t,attributes:n,default:o}))}(n);return function(e){const t=(0,c.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,n])}function b({value:e,tabValues:t}){return t.some(t=>t.value===e)}function p({queryString:e=!1,groupId:t}){const n=(0,a.W6)(),r=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,i.aZ)(r),(0,o.useCallback)(e=>{if(!r)return;const t=new URLSearchParams(n.location.search);t.set(r,e),n.replace({...n.location,search:t.toString()})},[r,n])]}function v(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,s=h(e),[a,i]=(0,o.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!b({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=t.find(e=>e.default)??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:s})),[c,u]=p({queryString:n,groupId:r}),[v,m]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,r]=(0,d.Dv)(t);return[n,(0,o.useCallback)(e=>{t&&r.set(e)},[t,r])]}({groupId:r}),g=(()=>{const e=c??v;return b({value:e,tabValues:s})?e:null})();(0,l.A)(()=>{g&&i(g)},[g]);return{selectedValue:a,selectValue:(0,o.useCallback)(e=>{if(!b({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),m(e)},[u,m,s]),tabValues:s}}var m=n(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var _=n(74848);function f({className:e,block:t,selectedValue:n,selectValue:o,tabValues:a}){const l=[],{blockElementScrollPositionUntilNextRender:i}=(0,s.a_)(),c=e=>{const t=e.currentTarget,r=l.indexOf(t),s=a[r].value;s!==n&&(i(t),o(s))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1];break}}t?.focus()};return(0,_.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},e),children:a.map(({value:e,label:t,attributes:o})=>(0,_.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{l.push(e)},onKeyDown:d,onClick:c,...o,className:(0,r.A)("tabs__item",g.tabItem,o?.className,{"tabs__item--active":n===e}),children:t??e},e))})}function x({lazy:e,children:t,selectedValue:n}){const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===n);return e?(0,o.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,_.jsx)("div",{className:"margin-top--md",children:s.map((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==n}))})}function j(e){const t=v(e);return(0,_.jsxs)("div",{className:(0,r.A)("tabs-container",g.tabList),children:[(0,_.jsx)(f,{...t,...e}),(0,_.jsx)(x,{...t,...e})]})}function w(e){const t=(0,m.A)();return(0,_.jsx)(j,{...e,children:u(e.children)},String(t))}},19365:(e,t,n)=>{n.d(t,{A:()=>a});n(96540);var o=n(34164);const r={tabItem:"tabItem_Ymn6"};var s=n(74848);function a({children:e,hidden:t,className:n}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,o.A)(r.tabItem,n),hidden:t,children:e})}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>l});var o=n(96540);const r={},s=o.createContext(r);function a(e){const t=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(s.Provider,{value:t},e.children)}},33044:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>b,frontMatter:()=>i,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"Robot_development/boxs/driver/hobot_bev","title":"BEV Perception Algorithm","description":"Function Introduction","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/05_Robot_development/03_boxs/driver/hobot_bev.md","sourceDirName":"05_Robot_development/03_boxs/driver","slug":"/Robot_development/boxs/driver/hobot_bev","permalink":"/rdk_doc/en/Robot_development/boxs/driver/hobot_bev","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770955066000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"LiDAR Object Detection Algorithm","permalink":"/rdk_doc/en/Robot_development/boxs/driver/hobot_centerpoint"},"next":{"title":"Monocular Elevation Network","permalink":"/rdk_doc/en/Robot_development/boxs/spatial/elevation_net"}}');var r=n(74848),s=n(28453),a=n(11470),l=n(19365);const i={sidebar_position:3},c="BEV Perception Algorithm",d={},u=[{value:"Function Introduction",id:"function-introduction",level:2},{value:"Supported Platforms",id:"supported-platforms",level:2},{value:"Preparation",id:"preparation",level:2},{value:"Usage Guide",id:"usage-guide",level:2},{value:"Local Dataset Playback",id:"local-dataset-playback",level:3},{value:"Result Analysis",id:"result-analysis",level:2}];function h(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"bev-perception-algorithm",children:"BEV Perception Algorithm"})}),"\n","\n",(0,r.jsx)(t.h2,{id:"function-introduction",children:"Function Introduction"}),"\n",(0,r.jsxs)(t.p,{children:["The BEV Perception Algorithm is a ",(0,r.jsx)(t.code,{children:"BEV"})," multi-task model trained on the ",(0,r.jsx)(t.a,{href:"https://www.nuscenes.org/nuscenes",children:"nuscenes"})," dataset using ",(0,r.jsx)(t.a,{href:"https://developer.d-robotics.cc/api/v1/fileData/horizon_j5_open_explorer_cn_doc/hat/source/examples/bev.html",children:"OpenExplorer"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"The algorithm takes six sets of image data as input, namely the front, front-left, front-right, rear, rear-left and rear-right views. The model outputs 10 categories of targets with their corresponding 3D detection bounding boxes (including obstacles, various types of vehicles, traffic signs, etc.), as well as semantic segmentation of lane lines, sidewalks and road edges."}),"\n",(0,r.jsx)(t.p,{children:"This example uses local image data as input, leverages the BPU for algorithm inference, and publishes image messages with rendered algorithm perception results, which are displayed in a browser on the PC side."}),"\n",(0,r.jsxs)(t.p,{children:["Code Repository: (",(0,r.jsx)(t.a,{href:"https://github.com/D-Robotics/hobot_bev.git",children:"https://github.com/D-Robotics/hobot_bev.git"}),")"]}),"\n",(0,r.jsx)(t.h2,{id:"supported-platforms",children:"Supported Platforms"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Platform"}),(0,r.jsx)(t.th,{children:"Running Method"}),(0,r.jsx)(t.th,{children:"Example Function"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"RDK Ultra"}),(0,r.jsx)(t.td,{children:"Ubuntu 20.04 (Foxy)"}),(0,r.jsx)(t.td,{children:"Local playback with inference rendering results displayed via web"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"RDK S100, RDK S100P"}),(0,r.jsx)(t.td,{children:"Ubuntu 22.04 (Humble)"}),(0,r.jsx)(t.td,{children:"Local playback with inference rendering results displayed via web"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"preparation",children:"Preparation"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"The RDK has been flashed with the Ubuntu 20.04/Ubuntu 22.04 system image."}),"\n",(0,r.jsx)(t.li,{children:"TogetheROS.Bot has been successfully installed on the RDK."}),"\n",(0,r.jsx)(t.li,{children:"Ensure the PC can access the RDK via the network."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"usage-guide",children:"Usage Guide"}),"\n",(0,r.jsx)(t.h3,{id:"local-dataset-playback",children:"Local Dataset Playback"}),"\n",(0,r.jsx)(t.p,{children:"This example uses local dataset playback for inference, then publishes image messages with rendered algorithm results. The published images and corresponding algorithm results are displayed in a browser on the PC side via the websocket package."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:(0,r.jsx)(t.strong,{children:"Prepare Playback Dataset"})})}),"\n",(0,r.jsxs)(a.A,{groupId:"tros-distro",children:[(0,r.jsx)(l.A,{value:"foxy",label:"Foxy",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"# Download the dataset on the board\nwget http://archive.d-robotics.cc/TogetheROS/data/hobot_bev_data.tar.gz\n\n# Decompress the file\nmkdir -p hobot_bev_data\ntar -zxvf hobot_bev_data.tar.gz -C hobot_bev_data\n\n# The decompressed dataset is in the hobot_bev_data/data directory\n"})})}),(0,r.jsx)(l.A,{value:"humble",label:"Humble",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"# Download the dataset on the board\ncd ~\nwget http://archive.d-robotics.cc/TogetheROS/data/nuscenes_bev_val/nuscenes_bev_val.tar.gz\n\n# Decompress the file\nmkdir -p ~/hobot_bev_data\ntar -zxvf ~/nuscenes_bev_val.tar.gz -C ~/hobot_bev_data\n"})})})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:(0,r.jsx)(t.strong,{children:"Run Dataset Playback"})})}),"\n",(0,r.jsxs)(a.A,{groupId:"tros-distro",children:[(0,r.jsx)(l.A,{value:"foxy",label:"Foxy",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"# Configure the TogetheROS.Bot environment\nsource /opt/tros/setup.bash\n\n# Launch the websocket service\nros2 launch websocket websocket_service.launch.py\n\n# Launch the run script and specify the dataset path\nros2 launch hobot_bev hobot_bev.launch.py image_pre_path:=hobot_bev_data/data\n"})})}),(0,r.jsx)(l.A,{value:"humble",label:"Humble",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"# Configure the TogetheROS.Bot Humble environment\nsource /opt/tros/humble/setup.bash\n\nif [ -L qat ]; then rm qat; fi\nln -s `ros2 pkg prefix hobot_bev`/lib/hobot_bev/qat/ qat\nln -s ~/hobot_bev_data/nuscenes_bev_val nuscenes_bev_val\n\n# Launch the run script\nros2 launch hobot_bev hobot_bev.launch.py\n"})})})]}),"\n",(0,r.jsx)(t.h2,{id:"result-analysis",children:"Result Analysis"}),"\n",(0,r.jsx)(t.p,{children:"The following information is output in the running terminal:"}),"\n",(0,r.jsxs)(a.A,{groupId:"tros-distro",children:[(0,r.jsx)(l.A,{value:"foxy",label:"Foxy",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-text",children:"[INFO] [launch]: All log files can be found below /root/.ros/log/2023-07-05-17-47-07-232907-hobot-2627970\n[INFO] [launch]: Default logging verbosity is set to INFO\n[INFO] [hobot_bev-1]: process started with pid [2627972]\n[INFO] [websocket-2]: process started with pid [2627974]\n[hobot_bev-1] [WARN] [1688579227.907268364] [bev_node]:\n[hobot_bev-1]  image_pre_path: hobot_bev_data/data\n[hobot_bev-1] [BPU_PLAT]BPU Platform Version(1.3.3)!\n[hobot_bev-1] [HBRT] set log level as 0. version = 3.14.25.0\n[hobot_bev-1] [DNN] Runtime version = 1.12.3_(3.14.25 HBRT)\n[hobot_bev-1] [WARN] [1688579228.714778531] [dnn]: Run default SetOutputParser.\n[hobot_bev-1] [WARN] [1688579228.714925489] [dnn]: Set output parser with default dnn node parser, you will get all output tensors and should parse output_tensors in PostProcess.\n[hobot_bev-1] [WARN] [1688579228.886846489] [bev_node]: loop 0/1002\n[hobot_bev-1] [WARN] [1688579229.474568573] [bev_node]: loop 1/1002\n[hobot_bev-1] [WARN] [1688579230.058551781] [bev_node]: loop 2/1002\n[hobot_bev-1] [WARN] [1688579230.691667198] [bev_node]: loop 3/1002\n[hobot_bev-1] [WARN] [1688579231.324658782] [bev_node]: loop 4/1002\n[hobot_bev-1] [WARN] [1688579231.365145532] [bev_node]: input fps: 2.47, out fps: 2.52, infer time ms: 12, post process time ms: 659\n[hobot_bev-1] [WARN] [1688579231.915645741] [bev_node]: loop 5/1002\n[hobot_bev-1] [WARN] [1688579231.996993824] [bev_node]: input fps: 2.47, out fps: 2.52, infer time ms: 12, post process time ms: 658\n"})})}),(0,r.jsx)(l.A,{value:"humble",label:"Humble",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-text",children:"[INFO] [launch]: All log files can be found below /root/.ros/log/2025-05-08-09-44-40-838952-ubuntu-20037\n[INFO] [launch]: Default logging verbosity is set to INFO\n[INFO] [hobot_bev-1]: process started with pid [20040]\n[INFO] [websocket-2]: process started with pid [20042]\n[hobot_bev-1] [UCP]: log level = 3\n[hobot_bev-1] [UCP]: UCP version = 3.3.3\n[hobot_bev-1] [VP]: log level = 3\n[hobot_bev-1] [DNN]: log level = 3\n[hobot_bev-1] [HPL]: log level = 3\n[websocket-2] [WARN] [1746668681.078783258] [websocket]:\n[websocket-2] Parameter:\n[websocket-2]  image_topic: /image_jpeg\n[websocket-2]  image_type: mjpeg\n[websocket-2]  only_show_image: 1\n[websocket-2]  output_fps: 0\n[websocket-2] [INFO] [1746668681.079077507] [websocket]: Websocket using image mjpeg\n[hobot_bev-1] [UCPT]: log level = 6\n[hobot_bev-1] [DSP]: log level = 3\n[hobot_bev-1] [INFO] [1746668681.182092730] [bev_node]: BevNode init\n[hobot_bev-1] [WARN] [1746668681.182327429] [bev_node]:\n[hobot_bev-1]  topic_name: image_jpeg\n[hobot_bev-1]  save_image: false\n[hobot_bev-1]  glog_level: 1\n[hobot_bev-1] [WARN] [1746668681.186660916] [ai_wrapper]:\n[hobot_bev-1]  Set glog level in cmd line with '--glog_level=$num'\n[hobot_bev-1]    EXAMPLE_SYSTEM = 0,  EXAMPLE_REPORT = 1,  EXAMPLE_DETAIL = 2,  EXAMPLE_DEBUG = 3\n[hobot_bev-1] [BPU][[BPU_MONITOR]][281473498852256][INFO]BPULib verison(2, 1, 2)[0d3f195]!\n[hobot_bev-1] [DNN] HBTL_EXT_DNN log level:6\n[hobot_bev-1] [DNN]: 3.3.3_(4.1.17 HBRT)\n[hobot_bev-1] [INFO] [1746668681.944706857] [bev_node]: Get render imgs size: 8, frame_id: 0, duration ms infer: 12.52, postp: 3.37, prep: 0.00\n[hobot_bev-1] [INFO] [1746668681.997575564] [bev_node]: Publish ros compressed image msg, format: jpeg, topic: image_jpeg\n"})})})]}),"\n",(0,r.jsxs)(t.p,{children:["Enter ",(0,r.jsx)(t.code,{children:"http://IP:8000"})," in the browser on the PC side to view the images and algorithm rendering effects (IP refers to the IP address of the RDK):"]}),"\n",(0,r.jsxs)(a.A,{groupId:"tros-distro",children:[(0,r.jsx)(l.A,{value:"foxy",label:"Foxy",children:(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/function/image/box_adv/render_bev.jpeg",alt:""})})}),(0,r.jsx)(l.A,{value:"humble",label:"Humble",children:(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/function/image/box_adv/render_bev_s100.jpeg",alt:""})})})]})]})}function b(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);