"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[85306],{11470:(e,t,n)=>{n.d(t,{A:()=>y});var o=n(96540),r=n(34164),s=n(23104),a=n(56347),l=n(205),i=n(57485),d=n(31682),c=n(70679);function u(e){return o.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,o.useMemo)(()=>{const e=t??function(e){return u(e).map(({props:{value:e,label:t,attributes:n,default:o}})=>({value:e,label:t,attributes:n,default:o}))}(n);return function(e){const t=(0,d.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,n])}function p({value:e,tabValues:t}){return t.some(t=>t.value===e)}function b({queryString:e=!1,groupId:t}){const n=(0,a.W6)(),r=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,i.aZ)(r),(0,o.useCallback)(e=>{if(!r)return;const t=new URLSearchParams(n.location.search);t.set(r,e),n.replace({...n.location,search:t.toString()})},[r,n])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,s=h(e),[a,i]=(0,o.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=t.find(e=>e.default)??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:s})),[d,u]=b({queryString:n,groupId:r}),[m,f]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,r]=(0,c.Dv)(t);return[n,(0,o.useCallback)(e=>{t&&r.set(e)},[t,r])]}({groupId:r}),g=(()=>{const e=d??m;return p({value:e,tabValues:s})?e:null})();(0,l.A)(()=>{g&&i(g)},[g]);return{selectedValue:a,selectValue:(0,o.useCallback)(e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),f(e)},[u,f,s]),tabValues:s}}var f=n(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=n(74848);function _({className:e,block:t,selectedValue:n,selectValue:o,tabValues:a}){const l=[],{blockElementScrollPositionUntilNextRender:i}=(0,s.a_)(),d=e=>{const t=e.currentTarget,r=l.indexOf(t),s=a[r].value;s!==n&&(i(t),o(s))},c=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1];break}}t?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},e),children:a.map(({value:e,label:t,attributes:o})=>(0,x.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{l.push(e)},onKeyDown:c,onClick:d,...o,className:(0,r.A)("tabs__item",g.tabItem,o?.className,{"tabs__item--active":n===e}),children:t??e},e))})}function v({lazy:e,children:t,selectedValue:n}){const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===n);return e?(0,o.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==n}))})}function j(e){const t=m(e);return(0,x.jsxs)("div",{className:(0,r.A)("tabs-container",g.tabList),children:[(0,x.jsx)(_,{...t,...e}),(0,x.jsx)(v,{...t,...e})]})}function y(e){const t=(0,f.A)();return(0,x.jsx)(j,{...e,children:u(e.children)},String(t))}},11581:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"Robot_development/apps/fall_detection","title":"5.4.3 Pose Detection","description":"Introduction","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/05_Robot_development/04_apps/fall_detection.md","sourceDirName":"05_Robot_development/04_apps","slug":"/Robot_development/apps/fall_detection","permalink":"/rdk_doc/en/Robot_development/apps/fall_detection","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1756748286000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"5.4.2 Navigation2","permalink":"/rdk_doc/en/Robot_development/apps/navigation2"},"next":{"title":"5.4.4 Robot Follows the Human Body","permalink":"/rdk_doc/en/Robot_development/apps/car_tracking"}}');var r=n(74848),s=n(28453),a=n(11470),l=n(19365);const i={sidebar_position:3},d="5.4.3 Pose Detection",c={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Supported Platforms",id:"supported-platforms",level:2},{value:"Preparation",id:"preparation",level:2},{value:"RDK Platform",id:"rdk-platform",level:3},{value:"Usage",id:"usage",level:2},{value:"RDK",id:"rdk",level:3},{value:"Result analysis",id:"result-analysis",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"543-pose-detection",children:"5.4.3 Pose Detection"})}),"\n","\n",(0,r.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(t.p,{children:"The Pose Detection subscribes to the image messages published by the camera, detects key points of the human body, analyzes the body posture, and publishes pose events."}),"\n",(0,r.jsx)(t.p,{children:"Pose events are published using a custom algorithm message. Users can subscribe to the msg of this topic for application development."}),"\n",(0,r.jsx)(t.p,{children:"Currently, only fall detection function is supported, which detects whether a person falls."}),"\n",(0,r.jsxs)(t.p,{children:["Code Repository:  (",(0,r.jsx)(t.a,{href:"https://github.com/D-Robotics/hobot_falldown_detection",children:"https://github.com/D-Robotics/hobot_falldown_detection"}),")"]}),"\n",(0,r.jsx)(t.h2,{id:"supported-platforms",children:"Supported Platforms"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Platform"}),(0,r.jsx)(t.th,{children:"System"}),(0,r.jsx)(t.th,{children:"Function"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"RDK X3, RDK X3 Module, RDK X5"}),(0,r.jsx)(t.td,{children:"Ubuntu 20.04 (Foxy), Ubuntu 22.04 (Humble)"}),(0,r.jsx)(t.td,{children:"Start MIPI/USB camera to capture images, perform human body key point detection and pose detection, and finally display images and algorithm effects through web, and publish pose events"})]})})]}),"\n",(0,r.jsx)(t.h2,{id:"preparation",children:"Preparation"}),"\n",(0,r.jsx)(t.h3,{id:"rdk-platform",children:"RDK Platform"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"RDK has flashed the  Ubuntu 20.04/22.04 image provided by D-Robotics."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"The TogetheROS.Bot has been successfully installed on the RDK."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Make sure the PC is in the same network segment as the RDK, and the IP address of the first three segments should be consistent."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"The RDK has installed MIPI or USB cameras."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(t.h3,{id:"rdk",children:"RDK"}),"\n",(0,r.jsx)(t.p,{children:"The pose detection package subscribes to the data published by the human body key point detection package, publishes algorithm messages after algorithm inference, and uses the websocket package to render and display the published images and corresponding algorithm results on the PC browser."}),"\n",(0,r.jsx)(t.p,{children:"Friendly reminder: When experiencing the app, rotate the camera by 90 degrees to simulate the effect of a person falling."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Publish images using MIPI camera"})}),"\n",(0,r.jsxs)(a.A,{groupId:"tros-distro",children:[(0,r.jsx)(l.A,{value:"foxy",label:"Foxy",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"source /opt/tros/setup.bash\ncp -r /opt/tros/${TROS_DISTRO}/lib/mono2d_body_detection/config/ .\nexport CAM_TYPE=mipi\n\nros2 launch hobot_falldown_detection hobot_falldown_detection.launch.py\n"})})}),(0,r.jsx)(l.A,{value:"humble",label:"Humble",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"source /opt/tros/humble/setup.bash\ncp -r /opt/tros/${TROS_DISTRO}/lib/mono2d_body_detection/config/ .\nexport CAM_TYPE=mipi\n\nros2 launch hobot_falldown_detection hobot_falldown_detection.launch.py\n"})})})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Publish images using USB camera"})}),"\n",(0,r.jsxs)(a.A,{groupId:"tros-distro",children:[(0,r.jsx)(l.A,{value:"foxy",label:"Foxy",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"source /opt/tros/setup.bash\ncp -r /opt/tros/${TROS_DISTRO}/lib/mono2d_body_detection/config/ .\nexport CAM_TYPE=usb\n\nros2 launch hobot_falldown_detection hobot_falldown_detection.launch.py\n"})})}),(0,r.jsx)(l.A,{value:"humble",label:"Humble",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"source /opt/tros/humble/setup.bash\ncp -r /opt/tros/${TROS_DISTRO}/lib/mono2d_body_detection/config/ .\nexport CAM_TYPE=usb\n\nros2 launch hobot_falldown_detection hobot_falldown_detection.launch.py\n"})})})]}),"\n",(0,r.jsx)(t.p,{children:"For the explanation of the parameters in the command, please refer to the README.md in the hobot_falldown_detection package source code."}),"\n",(0,r.jsx)(t.h2,{id:"result-analysis",children:"Result analysis"}),"\n",(0,r.jsx)(t.p,{children:"After starting the pose detection package, the following information will be displayed in the terminal:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"[hobot_falldown_detection-4] [INFO] [1660271558.250055538] [body_kps_Subscriber]: receive targetType: personpointType: body_kps\n[hobot_falldown_detection-4] [INFO] [1660271558.250598996] [fall_down_publisher]: track_id: 1 is fall down\n"})}),"\n",(0,r.jsx)(t.p,{children:"The output log shows that the body_kps data is subscribed and the pose event is published."}),"\n",(0,r.jsxs)(t.p,{children:["In the PC's browser, enter ",(0,r.jsx)(t.code,{children:"http://IP:8000"}),", and the body detection frame, keypoints, and pose detection results will be displayed in the web interface (IP refers to the IP address of the RDK):"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/04_apps/image/fall_detection/falldown.jpg",alt:""})})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},19365:(e,t,n)=>{n.d(t,{A:()=>a});n(96540);var o=n(34164);const r={tabItem:"tabItem_Ymn6"};var s=n(74848);function a({children:e,hidden:t,className:n}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,o.A)(r.tabItem,n),hidden:t,children:e})}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>l});var o=n(96540);const r={},s=o.createContext(r);function a(e){const t=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);