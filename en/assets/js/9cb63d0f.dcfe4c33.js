"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[44076],{11470:(e,n,t)=>{t.d(n,{A:()=>y});var a=t(96540),s=t(34164),i=t(23104),r=t(56347),o=t(205),l=t(57485),c=t(31682),d=t(70679);function u(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,a.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:t,default:a}})=>({value:e,label:n,attributes:t,default:a}))}(t);return function(e){const n=(0,c.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function p({queryString:e=!1,groupId:n}){const t=(0,r.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(s),(0,a.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(t.location.search);n.set(s,e),t.replace({...t.location,search:n.toString()})},[s,t])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,i=h(e),[r,l]=(0,a.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:i})),[c,u]=p({queryString:t,groupId:s}),[f,g]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,s]=(0,d.Dv)(n);return[t,(0,a.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),b=(()=>{const e=c??f;return m({value:e,tabValues:i})?e:null})();(0,o.A)(()=>{b&&l(b)},[b]);return{selectedValue:r,selectValue:(0,a.useCallback)(e=>{if(!m({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),g(e)},[u,g,i]),tabValues:i}}var g=t(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=t(74848);function _({className:e,block:n,selectedValue:t,selectValue:a,tabValues:r}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,i.a_)(),c=e=>{const n=e.currentTarget,s=o.indexOf(n),i=r[s].value;i!==t&&(l(n),a(i))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:r.map(({value:e,label:n,attributes:a})=>(0,x.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:c,...a,className:(0,s.A)("tabs__item",b.tabItem,a?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function j({lazy:e,children:n,selectedValue:t}){const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=i.find(e=>e.props.value===t);return e?(0,a.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:i.map((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function v(e){const n=f(e);return(0,x.jsxs)("div",{className:(0,s.A)("tabs-container",b.tabList),children:[(0,x.jsx)(_,{...n,...e}),(0,x.jsx)(j,{...n,...e})]})}function y(e){const n=(0,g.A)();return(0,x.jsx)(v,{...e,children:u(e.children)},String(n))}},19365:(e,n,t)=>{t.d(n,{A:()=>r});t(96540);var a=t(34164);const s={tabItem:"tabItem_Ymn6"};var i=t(74848);function r({children:e,hidden:n,className:t}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,a.A)(s.tabItem,t),hidden:n,children:e})}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var a=t(96540);const s={},i=a.createContext(s);function r(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(i.Provider,{value:n},e.children)}},87156:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>m,frontMatter:()=>l,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"Robot_development/boxs/detection/efficientnet","title":"EfficientNet_Det","description":"Introduction","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/05_Robot_development/03_boxs/detection/efficientnet.md","sourceDirName":"05_Robot_development/03_boxs/detection","slug":"/Robot_development/boxs/detection/efficientnet","permalink":"/rdk_doc/en/Robot_development/boxs/detection/efficientnet","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1756782991000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"MobileNet_SSD","permalink":"/rdk_doc/en/Robot_development/boxs/detection/mobilenet"},"next":{"title":"YOLO-World","permalink":"/rdk_doc/en/Robot_development/boxs/detection/hobot_yolo_world"}}');var s=t(74848),i=t(28453),r=t(11470),o=t(19365);const l={sidebar_position:4},c="EfficientNet_Det",d={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Supported Platforms",id:"supported-platforms",level:2},{value:"Preparations",id:"preparations",level:2},{value:"RDK",id:"rdk",level:3},{value:"Usage",id:"usage",level:2},{value:"RDK",id:"rdk-1",level:3},{value:"Use MIPI Camera to Publish Images",id:"use-mipi-camera-to-publish-images",level:4},{value:"Use USB Camera to Publish Images",id:"use-usb-camera-to-publish-images",level:4},{value:"Use Local Images Offline",id:"use-local-images-offline",level:4},{value:"Result Analysis",id:"result-analysis",level:2},{value:"Use Camera to Publish Images",id:"use-camera-to-publish-images",level:3},{value:"Use local image offline",id:"use-local-image-offline",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"efficientnet_det",children:"EfficientNet_Det"})}),"\n","\n",(0,s.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsx)(n.p,{children:"EfficientNet_Det is an detection algorithm that takes images as input and utilizes BPU for algorithm inference. It publishes algorithm messages containing object categories and detection boxes."}),"\n",(0,s.jsxs)(n.p,{children:["EfficientNet_Det is an Onnx model and trained using the ",(0,s.jsx)(n.a,{href:"http://cocodataset.org/",children:"COCO dataset"}),". It supports 80 types of object detection, including humans, animals, fruits, and vehicles."]}),"\n",(0,s.jsxs)(n.p,{children:["Code repository:  (",(0,s.jsx)(n.a,{href:"https://github.com/D-Robotics/hobot_dnn",children:"https://github.com/D-Robotics/hobot_dnn"}),")"]}),"\n",(0,s.jsx)(n.p,{children:"Applications: EfficientNet_Det can be used for tasks such as vehicle detection and is mainly applied in the fields of autonomous driving and smart home."}),"\n",(0,s.jsx)(n.h2,{id:"supported-platforms",children:"Supported Platforms"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Platform"}),(0,s.jsx)(n.th,{children:"System"}),(0,s.jsx)(n.th,{children:"Function"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"RDK X3, RDK X3 Module, RDK X5"}),(0,s.jsx)(n.td,{children:"Ubuntu 20.04 (Foxy), Ubuntu 22.04 (Humble)"}),(0,s.jsxs)(n.td,{children:["\xb7 Start MIPI/USB camera and display inference results through web",(0,s.jsx)("br",{}),"\xb7 Use local data to save rendering results offline"]})]})})]}),"\n",(0,s.jsx)(n.h2,{id:"preparations",children:"Preparations"}),"\n",(0,s.jsx)(n.h3,{id:"rdk",children:"RDK"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The RDK has been pre-installed with the  Ubuntu 20.04/22.04 system image provided by D-Robotics."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"TogetheROS.Bot has been successfully installed on the RDK."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"A MIPI or USB camera has been installed on the RDK. If there is no camera available, you can experience the algorithm using locally JPEG/PNG images or MP4, H.264, and H.265 videos offline."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Make sure the PC can access the RDK through the network."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.h3,{id:"rdk-1",children:"RDK"}),"\n",(0,s.jsx)(n.h4,{id:"use-mipi-camera-to-publish-images",children:"Use MIPI Camera to Publish Images"}),"\n",(0,s.jsx)(n.p,{children:"EfficientNet_Det subscribes to images published by the sensor package, performs inference, and publishes algorithm messages. WebSocket package is used to render and display the published images and corresponding algorithm results on a PC browser."}),"\n",(0,s.jsxs)(r.A,{groupId:"tros-distro",children:[(0,s.jsx)(o.A,{value:"foxy",label:"Foxy",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Configure the tros.b environment\nsource /opt/tros/setup.bash\n\n# Configuring MIPI camera\nexport CAM_TYPE=mipi\n\n# Start the launch file\nros2 launch dnn_node_example dnn_node_example.launch.py dnn_example_config_file:=config/efficient_det_workconfig.json dnn_example_image_width:=480 dnn_example_image_height:=272\n"})})}),(0,s.jsx)(o.A,{value:"humble",label:"Humble",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Configure the tros.b environment\nsource /opt/tros/humble/setup.bash\n\n# Configuring MIPI camera\nexport CAM_TYPE=mipi\n\n# Start the launch file\nros2 launch dnn_node_example dnn_node_example.launch.py dnn_example_config_file:=config/efficient_det_workconfig.json dnn_example_image_width:=480 dnn_example_image_height:=272\n"})})})]}),"\n",(0,s.jsx)(n.h4,{id:"use-usb-camera-to-publish-images",children:"Use USB Camera to Publish Images"}),"\n",(0,s.jsxs)(r.A,{groupId:"tros-distro",children:[(0,s.jsx)(o.A,{value:"foxy",label:"Foxy",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Configure the tros.b environment\nsource /opt/tros/setup.bash\n\n# Configuring USB camera\nexport CAM_TYPE=usb\n\n# Start the launch file\nros2 launch dnn_node_example dnn_node_example.launch.py dnn_example_config_file:=config/efficient_det_workconfig.json dnn_example_image_width:=480 dnn_example_image_height:=272\n"})})}),(0,s.jsx)(o.A,{value:"humble",label:"Humble",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Configure the tros.b environment\nsource /opt/tros/humble/setup.bash\n\n# Configuring USB camera\nexport CAM_TYPE=usb\n\n# Start the launch file\nros2 launch dnn_node_example dnn_node_example.launch.py dnn_example_config_file:=config/efficient_det_workconfig.json dnn_example_image_width:=480 dnn_example_image_height:=272\n"})})})]}),"\n",(0,s.jsx)(n.h4,{id:"use-local-images-offline",children:"Use Local Images Offline"}),"\n",(0,s.jsx)(n.p,{children:"The EfficientNet_Det detection algorithm example uses local JPEG/PNG images for rendering the algorithm results after inference, which are stored in the local path."}),"\n",(0,s.jsxs)(r.A,{groupId:"tros-distro",children:[(0,s.jsx)(o.A,{value:"foxy",label:"Foxy",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Configure the tros.b environment\nsource /opt/tros/setup.bash\n\n# Start the launch file\nros2 launch dnn_node_example dnn_node_example_feedback.launch.py dnn_example_config_file:=config/efficient_det_workconfig.json dnn_example_image:=config/target.jpg\n"})})}),(0,s.jsx)(o.A,{value:"humble",label:"Humble",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Configure the tros.b environment\nsource /opt/tros/humble/setup.bash\n\n# Start the launch file\nros2 launch dnn_node_example dnn_node_example_feedback.launch.py dnn_example_config_file:=config/efficient_det_workconfig.json dnn_example_image:=config/target.jpg\n"})})})]}),"\n",(0,s.jsx)(n.h2,{id:"result-analysis",children:"Result Analysis"}),"\n",(0,s.jsx)(n.h3,{id:"use-camera-to-publish-images",children:"Use Camera to Publish Images"}),"\n",(0,s.jsx)(n.p,{children:"The terminal output during the execution is as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"[example-3] [WARN] [1655093196.041759782] [example]: Create ai msg publisher with topic_name: hobot_dnn_detection\n[example-3] [WARN] [1655093196.041878985] [example]: Create img hbmem_subscription with topic_name: /hbmem_img\n[example-3] [WARN] [1655093197.405840936] [img_sub]: Sub img fps 8.57\n[example-3] [WARN] [1655093197.687361687] [example]: Smart fps 8.04\n[example-3] [WARN] [1655093198.559784569] [img_sub]: Sub img fps 6.94\n[example-3] [WARN] [1655093198.891958094] [example]: Smart fps 6.64\n[example-3] [WARN] [1655093199.735312707] [img_sub]: Sub img fps 6.81\n[example-3] [WARN] [1655093200.013067298] [example]: Smart fps 7.14\n[example-3] [WARN] [1655093200.890569474] [img_sub]: Sub img fps 6.93\n[example-3] [WARN] [1655093201.175239677] [example]: Smart fps 6.88\n[example-3] [WARN] [1655093202.011887441] [img_sub]: Sub img fps 7.14\n[example-3] [WARN] [1655093202.302124315] [example]: Smart fps 7.10\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The log output shows that the topic for publishing the inference results of the algorithm is ",(0,s.jsx)(n.code,{children:"hobot_dnn_detection"}),", and the topic for subscribing to the image is ",(0,s.jsx)(n.code,{children:"/hbmem_img"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["To view the image and the rendering effect of the algorithm, enter ",(0,s.jsx)(n.a,{href:"http://IP:8000",children:"http://IP:8000"})," in the browser on the PC (where IP is the IP address of the RDK):"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/detection/image/box_basic/efficient_det_render_web.jpeg",alt:"render_web"})}),"\n",(0,s.jsx)(n.h3,{id:"use-local-image-offline",children:"Use local image offline"}),"\n",(0,s.jsx)(n.p,{children:"The terminal output is as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"[example-1] [INFO] [1654931461.278066695] [example]: Output from image_name: config/target.jpg, frame_id: feedback, stamp: 0.0\n[example-1] [INFO] [1654931461.278186816] [PostProcessBase]: outputs size: 10\n[example-1] [INFO] [1654931461.278231981] [PostProcessBase]: out box size: 2\n[example-1] [INFO] [1654931461.278303520] [PostProcessBase]: det rect: 380.107 170.888 511.048 372.511, det type: potted plant, score:1.16971\n[example-1] [INFO] [1654931461.278396934] [PostProcessBase]: det rect: 79.3884 263.497 373.645 372.554, det type: couch, score:1.0287\n"})}),"\n",(0,s.jsx)(n.p,{children:"The log shows that the algorithm has inferred 2 targets from the input image, and outputs the coordinates of the detection boxes (the order of the output coordinates is the top-left x and y coordinates, and the bottom-right x and y coordinates) and the categories. The rendered image is saved as render_feedback_0_0.jpeg, and here is the rendering effect:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/05_Robot_development/03_boxs/detection/image/box_basic/efficient_det_render_feedback.jpeg",alt:"render_feedback"})})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);