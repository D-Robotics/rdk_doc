"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[24122],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var t=s(96540);const r={},i=t.createContext(r);function l(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}},77193:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>l,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"Advanced_development/linux_development/hardware_unit_test/bpu_cpu_ddr_stress","title":"CPU-BPU-DDR \u538b\u529b\u6d4b\u8bd5","description":"\u6d4b\u8bd5\u539f\u7406","source":"@site/docs_s/07_Advanced_development/02_linux_development/05_hardware_unit_test/01-bpu_cpu_ddr_stress.md","sourceDirName":"07_Advanced_development/02_linux_development/05_hardware_unit_test","slug":"/Advanced_development/linux_development/hardware_unit_test/bpu_cpu_ddr_stress","permalink":"/rdk_doc/en/rdk_s/Advanced_development/linux_development/hardware_unit_test/bpu_cpu_ddr_stress","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1756804952000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"AutoTest \u4f7f\u7528\u65b9\u6cd5","permalink":"/rdk_doc/en/rdk_s/Advanced_development/linux_development/hardware_unit_test/the_auto_test"},"next":{"title":"eMMC \u538b\u529b\u6d4b\u8bd5","permalink":"/rdk_doc/en/rdk_s/Advanced_development/linux_development/hardware_unit_test/emmc_stress"}}');var r=s(74848),i=s(28453);const l={sidebar_position:1},d="CPU-BPU-DDR \u538b\u529b\u6d4b\u8bd5",c={},o=[{value:"\u6d4b\u8bd5\u539f\u7406",id:"\u6d4b\u8bd5\u539f\u7406",level:2},{value:"\u51c6\u5907\u5de5\u4f5c",id:"\u51c6\u5907\u5de5\u4f5c",level:2},{value:"\u6d4b\u8bd5\u65b9\u6cd5",id:"\u6d4b\u8bd5\u65b9\u6cd5",level:2},{value:"\u6d4b\u8bd5\u6307\u6807",id:"\u6d4b\u8bd5\u6307\u6807",level:2},{value:"\u6d4b\u8bd5\u7ed3\u679c",id:"\u6d4b\u8bd5\u7ed3\u679c",level:3}];function h(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"cpu-bpu-ddr-\u538b\u529b\u6d4b\u8bd5",children:"CPU-BPU-DDR \u538b\u529b\u6d4b\u8bd5"})}),"\n",(0,r.jsx)(n.h2,{id:"\u6d4b\u8bd5\u539f\u7406",children:"\u6d4b\u8bd5\u539f\u7406"}),"\n",(0,r.jsx)(n.p,{children:"CPU-BPU-DDR \u538b\u529b\u6d4b\u8bd5\u7684\u6d4b\u8bd5\u539f\u7406\u4e3b\u8981\u6d89\u53ca\u5bf9 CPU\u3001 BPU \u548c DDR \u5728\u9ad8\u8d1f\u8377\u6761\u4ef6\u4e0b\u7684\u6027\u80fd\u548c\u7a33\u5b9a\u6027\u8fdb\u884c\u8bc4\u4f30\uff0c\u4ee5\u4e0b\u662f\u8fd9\u4e9b\u7ec4\u4ef6\u538b\u529b\u6d4b\u8bd5\u7684\u4e00\u4e9b\u57fa\u672c\u539f\u7406\uff1a"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"1. CPU DDR \u538b\u529b\u6d4b\u8bd5"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6d4b\u8bd5\u76ee\u6807"}),"\uff1a\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"stressapptest"})," \u5de5\u5177\u6a21\u62df\u9ad8\u8d1f\u8f7d\u73af\u5883\uff0c\u8fdb\u884c\u5927\u91cf\u8ba1\u7b97\u3001\u6570\u636e\u5904\u7406\u548c\u5185\u5b58\u64cd\u4f5c\uff0c\u6d4b\u8bd5\u7cfb\u7edf\u5728\u591a\u7ebf\u7a0b\u5e76\u53d1\u4efb\u52a1\u4e0b\u7684\u6027\u80fd\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6d4b\u8bd5\u76ee\u7684"}),"\uff1a\u9a8c\u8bc1 CPU \u5728\u957f\u65f6\u95f4\u9ad8\u8d1f\u8f7d\u4e0b\u7684\u7a33\u5b9a\u6027\u4e0e\u6027\u80fd\uff0c\u786e\u4fdd CPU \u548c DDR \u80fd\u5728\u9ad8\u8d1f\u8377\u8fd0\u884c\u65f6\u7ef4\u6301\u6b63\u5e38\u5de5\u4f5c\uff0c\u907f\u514d\u5d29\u6e83\u3001\u8fc7\u70ed\u6216\u6027\u80fd\u4e0b\u964d\u7b49\u95ee\u9898\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"stressapptest CPU \u538b\u6d4b\u539f\u7406\uff1a"})," CPU \u538b\u6d4b\u4e3b\u8981\u901a\u8fc7\u591a\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\u4e00\u4e9b\u8ba1\u7b97\u5bc6\u96c6\u578b\u7684\u4efb\u52a1\u6765\u5b9e\u73b0\uff0c\u8fd9\u4e9b\u4efb\u52a1\u5305\u62ec\uff1a\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u3001\u591a\u7ebf\u7a0b\u5e76\u884c\u6267\u884c\u7b49\u3002"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u7ebf\u7a0b\u521b\u5efa\uff1a ",(0,r.jsx)(n.code,{children:"stressapptest"})," \u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"pthread_create()"})," \u6765\u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u6267\u884c\u8ba1\u7b97\u4efb\u52a1\uff0c\u7ebf\u7a0b\u7684\u6570\u91cf\u901a\u5e38\u7531\u7528\u6237\u901a\u8fc7 -C \u53c2\u6570\u6307\u5b9a\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-C",children:"for (int i = 0; i < num_threads; i++) {\n\tpthread_create(&threads[i], NULL, cpu_stress_function, (void*)i);\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\uff1a\u6bcf\u4e2a\u7ebf\u7a0b\u4f1a\u6267\u884c\u4e00\u4e9b\u8ba1\u7b97\u5bc6\u96c6\u578b\u7684\u64cd\u4f5c\uff0c\u4f8b\u5982\u6d6e\u70b9\u6570\u8ba1\u7b97\u3001\u5185\u5b58\u8bfb\u5199\u7b49\uff0c\u8fd9\u4f1a\u6d88\u8017 CPU \u8d44\u6e90\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-C",children:"void* cpu_stress_function(void* arg) {\n\twhile (true) {\n\t\t\t// Perform some CPU-intensive calculations\n\t\t\tdouble a = 3.14159265358979;\n\t\t\tfor (int i = 0; i < 1000000; i++) {\n\t\t\t\t\ta = a * a * 3.14159;  // Simulate a calculation\n\t\t\t}\n\t}\n\treturn NULL;\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u7ebf\u7a0b\u540c\u6b65\u548c\u7ba1\u7406\uff1a\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"pthread_join()"})," \u7b49\u51fd\u6570\u786e\u4fdd\u7ebf\u7a0b\u7684\u6b63\u786e\u6267\u884c\u548c\u540c\u6b65\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"stressapptest DDR \u538b\u6d4b\u539f\u7406\uff1a"})," DDR \u5185\u5b58 \u7684\u538b\u529b\u6d4b\u8bd5\u4e3b\u6d89\u53ca\u5927\u91cf\u7684\u5185\u5b58\u5206\u914d\u3001\u8bbf\u95ee\u548c\u6570\u636e\u4ea4\u6362\uff0c\u901a\u8fc7\u9ad8\u5185\u5b58\u4f7f\u7528\u3001\u9891\u7e41\u7684\u5185\u5b58\u8bfb\u5199\u64cd\u4f5c\u3001\u4ee5\u53ca\u5185\u5b58\u5e26\u5bbd\u7684\u6d88\u8017\u6765\u8fdb\u884c\u3002"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5185\u5b58\u5206\u914d\uff1a \u5728\u5185\u5b58\u538b\u529b\u6d4b\u8bd5\u4e2d\uff0c stressapptest \u4f1a\u6839\u636e -M \u53c2\u6570\uff08\u4f8b\u5982 -M 8192 \uff09\u6765\u5206\u914d\u6307\u5b9a\u5927\u5c0f\u7684\u5185\u5b58\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-C",children:'void* allocate_memory(size_t size) {\n\tvoid* ptr = malloc(size);  // \u5206\u914d\u6307\u5b9a\u5927\u5c0f\u7684\u5185\u5b58\n\tif (ptr == NULL) {\n\t\t\tperror("Memory allocation failed");\n\t\t\texit(1);\n\t}\n\treturn ptr;\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5185\u5b58\u8bfb\u5199\u64cd\u4f5c : stressapptest \u4f1a\u5728\u5206\u914d\u7684\u5185\u5b58\u533a\u57df\u4e2d\u8fdb\u884c\u5927\u91cf\u7684\u8bfb\u53d6\u548c\u5199\u5165\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u5185\u5b58\u8bfb\u5199\u64cd\u4f5c\u7684\u4f8b\u5b50\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-C",children:"void stress_memory(void* ptr, size_t size) {\n\tvolatile char* data = (volatile char*)ptr;\n\t\t\tfor (size_t i = 0; i < size; i++) {\n\t\t\t\t\t\t\tdata[i] = (char)(i % 256);  // \u5199\u5165\u6570\u636e\n\t\t\t\t\t\t\tchar temp = data[i];  // \u8bfb\u53d6\u6570\u636e\n\t\t\t}\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7ebf\u7a0b\u8bbf\u95ee\u5185\u5b58\uff1a stressapptest \u4f7f\u7528\u591a\u7ebf\u7a0b\u6765\u589e\u52a0\u5185\u5b58\u538b\u529b\u3002\u591a\u4e2a\u7ebf\u7a0b\u5e76\u53d1\u5730\u5bf9\u5185\u5b58\u8fdb\u884c\u8bbf\u95ee\uff0c\u6a21\u62df\u9ad8\u8d1f\u8f7d\u4e0b\u5185\u5b58\u7684\u4f7f\u7528\u60c5\u51b5\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u547d\u4ee4\u5206\u6790\uff1a\u8fd0\u884c\u538b\u6d4b\u811a\u672c\u540e\uff0c\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a ",(0,r.jsx)(n.code,{children:'stressapptest -s "$stime" -M "$memory_size" -f /tmp/sat.io1 -f /tmp/sat.io2 -i "$io_threads" -m 8 -C 2 -W'})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'-s "$stime"'}),": \u8fd9\u4e2a\u53c2\u6570\u6307\u5b9a\u4e86 \u6d4b\u8bd5\u7684\u6301\u7eed\u65f6\u95f4\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'-M "$memory_size'}),'": \u8fd9\u4e2a\u53c2\u6570\u6307\u5b9a\u4e86\u5185\u5b58\u4f7f\u7528\u91cf\uff0c\u5728\u6e90\u7801\u4e2d\uff0c-M \u53c2\u6570\u7528\u4e8e\u63a7\u5236\u5185\u5b58\u7684\u5206\u914d\u5927\u5c0f\u3002']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-f /tmp/sat.io1 -f /tmp/sat.io2"}),": -f \u53c2\u6570\u7528\u4e8e\u6307\u5b9a\u6587\u4ef6\u7528\u4e8e I/O \u6d4b\u8bd5\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'-i "$io_threads"'}),": \u8be5\u53c2\u6570\u6307\u5b9a\u4e86\u7528\u4e8e I/O \u64cd\u4f5c\u7684\u7ebf\u7a0b\u6570\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-m 8"}),": \u8fd9\u4e2a\u53c2\u6570\u63a7\u5236 \u5185\u5b58\u538b\u529b\u7684\u5f3a\u5ea6\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-C 2"}),": \u8fd9\u4e2a\u53c2\u6570\u6307\u5b9a\u4e86\u8fdb\u884c\u538b\u529b\u6d4b\u8bd5\u65f6\u4f7f\u7528\u7684 CPU \u6838\u5fc3\u6570\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-W"}),": \u8fd9\u4e2a\u53c2\u6570\u542f\u7528\u4e86 \u5199\u64cd\u4f5c\uff0c\u610f\u5473\u7740\u4e0d\u4ec5\u8fdb\u884c\u5185\u5b58\u7684\u8bfb\u53d6\uff0c\u8fd8\u4f1a\u8fdb\u884c\u5199\u5165\u64cd\u4f5c\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"2. BPU \u538b\u529b\u6d4b\u8bd5"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6d4b\u8bd5\u76ee\u6807\uff1a"})," \u901a\u8fc7\u8fd0\u884c ",(0,r.jsx)(n.code,{children:"run.sh"})," \u811a\u672c\uff0c\u5e76\u5229\u7528 ",(0,r.jsx)(n.code,{children:"bpu_os_test"})," \u5de5\u5177\u8c03\u6574 -b \uff08 BPU \u6838\u5fc3 \uff09\u548c -r\uff08 BPU \u8d1f\u8f7d\u6bd4\u4f8b \uff09\u53c2\u6570\uff0c\u6a21\u62df\u4e0d\u540c\u7684 BPU \u8d1f\u8f7d\u573a\u666f\uff0c\u786e\u4fdd BPU \u5728\u9ad8\u8d1f\u8f7d\u4e0b\u4f9d\u7136\u80fd\u591f\u7a33\u5b9a\u5de5\u4f5c\u5e76\u8fbe\u5230\u9884\u671f\u6027\u80fd\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6d4b\u8bd5\u76ee\u7684"}),"\uff1a\u786e\u4fdd BPU \u5728\u6267\u884c\u8ba1\u7b97\u4efb\u52a1\u65f6\uff0c\u80fd\u591f\u8f93\u51fa\u4e0e\u9884\u671f\u76f8\u7b26\u7684\u6b63\u786e\u7ed3\u679c\uff0c\u68c0\u67e5 BPU \u957f\u65f6\u95f4\u9ad8\u8d1f\u8f7d\u8fd0\u884c\u4e0b\u4ecd\u80fd\u7a33\u5b9a\u5de5\u4f5c\uff0c\u4e0d\u51fa\u73b0\u5d29\u6e83\u6216\u9519\u8bef\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"tc_hbdk3 BPU \u538b\u6d4b\u539f\u7406\uff1a"})," \u901a\u8fc7\u52a0\u8f7d\u5305\u542b\u5927\u91cf\u8ba1\u7b97\u4efb\u52a1\u7684\u6a21\u578b\uff0c\u5229\u7528 BPU \u8fdb\u884c\u52a0\u901f\u8ba1\u7b97\uff0c\u4ece\u800c\u5b9e\u73b0\u5bf9 BPU \u7684\u538b\u529b\u6d4b\u8bd5\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u547d\u4ee4\u5206\u6790\uff1a"})," \u8fd0\u884c\u538b\u6d4b\u811a\u672c\u540e\uff0c\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a",(0,r.jsx)(n.code,{children:"tc_hbdk3 -t $1 -b $2 -f $HBM_FILE -i $SRC_FILE -n $MODEL_NAME -o $OUTPUT_0_0,$OUTPUT_0_1,$OUTPUT_1_0,$OUTPUT_1_1 -g 0 -c 0"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"-t $1 \uff1a \u4f20\u9012 $portion \u53c2\u6570\u7684\u503c\uff0c\u53ef\u4ee5\u7075\u6d3b\u5730\u63a7\u5236\u538b\u529b\u6d4b\u8bd5\u7684\u5f3a\u5ea6\uff0c\u5e76\u4e14\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u7684\u6d4b\u8bd5\u9700\u6c42\u6765\u9009\u62e9\u5408\u9002\u7684\u8d1f\u8f7d\u6c34\u5e73\u3002"}),"\n",(0,r.jsx)(n.li,{children:"-b $2 \uff1a \u9009\u62e9\u4f7f\u7528\u7684 BPU \u6838\u5fc3\u6570\u3002"}),"\n",(0,r.jsx)(n.li,{children:"-f $HBM_FILE\uff1a-f \u53c2\u6570\u6307\u5b9a\u4e86 HBM \u6587\u4ef6\u3002"}),"\n",(0,r.jsx)(n.li,{children:"-i $SRC_FILE\uff1a \u8be5\u6587\u4ef6\u5305\u542b\u6a21\u578b\u63a8\u7406\u6216\u8bad\u7ec3\u65f6\u4f7f\u7528\u7684\u8f93\u5165\u6570\u636e\uff0c\u7a0b\u5e8f\u4f1a\u4ece\u4e2d\u8bfb\u53d6\u6570\u636e\u5e76\u4f20\u9012\u7ed9 BPU \u8fdb\u884c\u8ba1\u7b97\u3002"}),"\n",(0,r.jsx)(n.li,{children:"-n $MODEL_NAME\uff1a -n \u53c2\u6570\u6307\u5b9a\u4e86\u8981\u52a0\u8f7d\u548c\u8fd0\u884c\u7684 \u6a21\u578b\u540d\u79f0"}),"\n",(0,r.jsx)(n.li,{children:"-o $OUTPUT_0_0 \uff1a \u8fd9\u4e9b\u8f93\u51fa\u6587\u4ef6\u7528\u4e8e\u4fdd\u5b58\u8ba1\u7b97\u7ed3\u679c\u6216\u65e5\u5fd7\u6570\u636e\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u51c6\u5907\u5de5\u4f5c",children:"\u51c6\u5907\u5de5\u4f5c"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"1."})," \u5f00\u59cb\u538b\u529b\u6d4b\u8bd5\u524d\uff0c\u9700\u8981\u5728\u82af\u7247\u4e0a\u6dfb\u52a0\u6563\u70ed\u7247\uff0c\u5426\u5219\u82af\u7247\u53ef\u80fd\u4f1a\u8fdb\u5165\u8fc7\u6e29\u4fdd\u62a4\u5f71\u54cd\u6d4b\u8bd5\u7ed3\u679c\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"2."})," \u786e\u8ba4\u5728 /app/chip_base_test/01_cpu_bpu_ddr \u8def\u5f84\u4e0b\u5b58\u5728\u7684\u6587\u4ef6\u662f\u5426\u5b8c\u6574\uff1a"]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["\u4e0b\u65b9\u8def\u5f84\u4e2d\u7684",(0,r.jsx)(n.code,{children:"/lib/"}),"\u8def\u5f84\u5185\u7684\u52a8\u6001\u5e93\u4ee5\u53ca",(0,r.jsx)(n.code,{children:"module"}),"\u8def\u5f84\u4e0b\u7684\u6a21\u578b\u6587\u4ef6\u53ca\u8f93\u5165\u6587\u4ef6\uff0c\u4ec5\u9650\u4e8e",(0,r.jsx)(n.strong,{children:"\u538b\u529b\u6d4b\u8bd5"}),"\u573a\u666f\u7528\u4e8e",(0,r.jsx)(n.strong,{children:"\u7ed9BPU\u52a0\u538b"}),"\u573a\u666f\uff0c\u4e0d\u80fd\u7528\u4e8e\u5176\u4ed6\u4efb\u4f55\u7528\u9014\u3002"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"01_cpu_bpu_ddr/\n\u2514\u2500\u2500 scripts\n    \u251c\u2500\u2500 Readme.md\n    \u251c\u2500\u2500 bpu_os_test\n    \u251c\u2500\u2500 lib\n    \u2502   \u251c\u2500\u2500 libhbrt4.so\n    \u2502   \u2514\u2500\u2500 libhbtl.so\n    \u251c\u2500\u2500 module\n    \u2502   \u251c\u2500\u2500 input_1.bin\n    \u2502   \u251c\u2500\u2500 input_2.bin\n    \u2502   \u2514\u2500\u2500 yolov3.hbm\n    \u251c\u2500\u2500 run.sh\n    \u251c\u2500\u2500 stop_test.sh\n    \u251c\u2500\u2500 stress_test.sh\n    \u2514\u2500\u2500 stressapptest\n\n3 directories, 11 files\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u6d4b\u8bd5\u65b9\u6cd5",children:"\u6d4b\u8bd5\u65b9\u6cd5"}),"\n",(0,r.jsx)(n.p,{children:"\u538b\u6d4b\u811a\u672c\u652f\u6301\u8f93\u5165\u540e\u7f00 -h \u67e5\u770b\u547d\u4ee4\u53c2\u6570\u7684\u8bf4\u660e :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"./stress_test.sh -h\n\nUsage: ./stress_test.sh [options]\n\nOptions:\n\t-t <time>        Set the test duration (e.g., 2h for hours, 30m for minutes; default: 48h).\n\t-m <size>        Set the memory size for stress test in MB (default: 100).\n\t-i <threads>     Set the I/O threads for stress test (default: 4).\n\t-b <bpu_core>    Specify the BPU core to use (default: 0).\n\t-r <portion>     Set the BPU portion value (default: 100).\n\t-o <directory>   Set the output directory for logs (default: ../../log).\n\t-h, --help       Show this help message and exit.\n\nExample:\n\t./stress_test.sh -t 24h -m 200 -i 8 -b 80\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5404\u53c2\u6570\u89e3\u6790\u5982\u4e0b\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"t <time>"}),": \u7528\u4e8e\u8bbe\u7f6e\u538b\u529b\u6d4b\u8bd5\u7684\u6301\u7eed\u65f6\u95f4 , \u65f6\u95f4\u683c\u5f0f\u53ef\u4ee5\u662f\u5c0f\u65f6\uff08\u5982 2h\uff09\u6216\u5206\u949f\uff08\u5982 30m\uff09\uff0c\u9ed8\u8ba4\u503c\u4e3a 48 \u5c0f\u65f6\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"m <size>"}),": \u7528\u4e8e\u8bbe\u7f6e\u538b\u529b\u6d4b\u8bd5\u4e2d\u5185\u5b58\u7684\u5927\u5c0f\uff08\u5355\u4f4d\uff1a MB\uff09\uff0c\u9ed8\u8ba4\u503c\u4e3a 100MB\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"i <threads>"}),": \u7528\u4e8e\u8bbe\u7f6e I/O \u7ebf\u7a0b\u7684\u6570\u91cf\uff0c\u9ed8\u8ba4\u503c\u4e3a 4 \u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"b <bpu_core>"}),": \u7528\u4e8e\u6307\u5b9a BPU\uff08\u57fa\u4e8e\u5904\u7406\u5355\u5143\uff09\u6838\u5fc3\u7684\u7f16\u53f7\uff0c\u9ed8\u8ba4\u503c\u4e3a 0 \u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"r <portion>"}),": \u7528\u4e8e\u8bbe\u7f6e BPU \u8d1f\u8f7d\u7684\u6bd4\u4f8b\uff0c\u9ed8\u8ba4\u503c\u4e3a 100 \uff08\u5373\u6ee1\u8d1f\u8f7d\uff09\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"o <directory>"}),": \u7528\u4e8e\u8bbe\u7f6e\u65e5\u5fd7\u8f93\u51fa\u7684\u76ee\u5f55\uff0c\u9ed8\u8ba4\u503c\u4e3a ../../log\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"h, --help"}),": \u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u5e76\u9000\u51fa\u811a\u672c\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u793a\u4f8b\uff1a"}),"\n\u4f8b\u5982\uff0c\u4f7f\u7528\u547d\u4ee4 ",(0,r.jsx)(n.code,{children:"sudo ./stress_test.sh -t 24h -m 200 -i 8 -b 80"})," \u6765\u8fd0\u884c\u4e00\u4e2a 24 \u5c0f\u65f6\u7684\u538b\u529b\u6d4b\u8bd5\uff0c\u4f7f\u7528 200MB \u5185\u5b58\uff0c 8 \u4e2a I/O \u7ebf\u7a0b\uff0c 80% \u7684 BPU \u8d1f\u8f7d\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u786e\u4fdd\u5df2\u5b8c\u6210\u51c6\u5907\u5de5\u4f5c\u540e\uff0c\u8fd0\u884c\u6d4b\u8bd5\u547d\u4ee4\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"cd /app/chip_base_test/01_cpu_bpu_ddr/scripts\n\nsudo ./stress_test.sh\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u538b\u6d4b\u811a\u672c\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"hrut_somstatus"})," \u547d\u4ee4\u6765\u76d1\u63a7 ",(0,r.jsx)(n.strong,{children:"stressapptest"})," \u7684\u8fd0\u884c\u60c5\u51b5\uff0c\u8fd0\u884c\u811a\u672c\u542f\u52a8\u65f6\u7684\u65e5\u5fd7\u5982\u4e0b\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"#hrut_somstatus\ntemperature--\x3e\n\tpvt_cmn_pvtc1_t1 : 66.322 (C)\n\tpvt_cmn_pvtc1_t2 : 65.771 (C)\n\tpvt_mcu_pvtc1_t1 : 67.976 (C)\n\tpvt_mcu_pvtc1_t2 : 68.344 (C)\n\tpvt_bpu_pvtc1_t1 : 68.712 (C)\nvoltage--\x3e\n\tFAKE     : 100.0 (mV)\n\tVDDQ_DDR2 : 503.0 (mV)\n\tVDD_MCU  : 748.0 (mV)\n\tVDDIO_PVT_MCU : 1802.0 (mV)\n\tVDDIO_TOP4_1V8 : 1802.0 (mV)\n\tVDDQ_DDR0 : 503.0 (mV)\n\tVDD2H_DDR0 : 1052.0 (mV)\n\tVAA_DDR0 : 1792.0 (mV)\n\tVDD_DDR0 : 742.0 (mV)\n\tVDDQ_DDR1 : 497.0 (mV)\n\tVDD2H_DDR1 : 1040.0 (mV)\n\tVAA_DDR1 : 1792.0 (mV)\n\tVDD_DDR1 : 742.0 (mV)\n\tCMN_PVTC1_V13 : 0.0 (mV)\n\tCMN_PVTC1_V14 : 0.0 (mV)\n\tCMN_PVTC1_V15 : 0.0 (mV)\n\tCMN_PVTC1_V16 : 0.0 (mV)\n\tVDDIO_SD_SDIO_T : 1788.0 (mV)\n\tVDD_CPU  : 776.0 (mV)\n\tCMN_PVTC1_V19 : 0.0 (mV)\n\tVAA_DDR2 : 1790.0 (mV)\n\tVDD2H_DDR2 : 1030.0 (mV)\n\tVDD_DDR2 : 737.0 (mV)\n\tVDDIO_TOP2_1V8 : 1780.0 (mV)\n\tVDD_BPU  : 731.0 (mV)\n\tVDDIO_TOP0_1V8 : 1790.0 (mV)\n\tPLL_TOP0_VDDHV : 1768.0 (mV)\n\tCMN_PVTC1_V27 : 0.0 (mV)\n\tCMN_PVTC1_V28 : 0.0 (mV)\n\tCMN_PVTC1_V29 : 0.0 (mV)\n\tCMN_PVTC1_V30 : 0.0 (mV)\n\tCMN_PVTC1_V31 : 0.0 (mV)\n\tCMN_PVTC1_V32 : 0.0 (mV)\n\tVDDIO_SD_33_MCU : 3308.0 (mV)\n\tVDDIO_ADC_MCU : 1802.0 (mV)\n\tVDDIO_MCU_1V8 : 1802.0 (mV)\n\tPLL_MCU_VDDHV : 1802.0 (mV)\n\tPLL_MCU_VDDPOST : 748.0 (mV)\n\tPLL_MCU_VDDREF : 748.0 (mV)\n\tVDD_TOP  : 753.0 (mV)\n\tVDD_AON  : 753.0 (mV)\n\tVDDIO_SD_AON_CA : 1644.0 (mV)\n\tVDDIO_PVT_1V8 : 1792.0 (mV)\n\tMCU_PVTC1_V11 : 0.0 (mV)\n\tMCU_PVTC1_V12 : 0.0 (mV)\n\tMCU_PVTC1_V13 : 0.0 (mV)\n\tMCU_PVTC1_V14 : 0.0 (mV)\n\tMCU_PVTC1_V15 : 0.0 (mV)\n\tMCU_PVTC1_V16 : 0.0 (mV)\ncpu frequency--\x3e\n\t\t\t\t\t\tmin   cur     max\n\tpolicy0: 1125000        1500000 1500000\n\tpolicy4: 1125000        1500000 1500000\nbpu status information----\x3e\n\t\t\t\t\t\t\t\tratio\n\tbpu0:   99\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"hrut_somstatus"})," \u547d\u4ee4\u7ed3\u679c\u89e3\u6790\u5982\u4e0b\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"temperature"})," \uff1a\u4ee3\u8868\u5f53\u524d \u677f\u8f7d\u3001 MCU\u3001 BPU \u7684\u6e29\u5ea6\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cpu frequency"})," \uff1a\u5206\u522b\u4ee3\u8868 CPU \u7684\u6700\u5c0f\u8fd0\u884c\u9891\u7387\u3001\u5f53\u524d\u8fd0\u884c\u9891\u7387\u548c\u6700\u5927\u8fd0\u884c\u9891\u7387\uff08 MHZ\uff09\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"bpu status information"})," \uff1a\u4ee3\u8868 BPU \u7684\u6700\u5c0f\u3001\u5f53\u524d\u548c\u6700\u5927\u8fd0\u884c\u9891\u7387\uff0c\u5176\u4e2d ratio \u4ee3\u8868 BPU \u5f53\u524d\u5360\u7528\u7387\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u6267\u884c ",(0,r.jsx)(n.code,{children:"htop"})," \u547d\u4ee4\u67e5\u770b ",(0,r.jsx)(n.code,{children:"CPU"})," \u7684\u5360\u7528\u7387"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/images_to_upload/Htop.png",alt:"Htop"})}),"\n",(0,r.jsx)(n.p,{children:"\u5176\u4e2d\u6bcf\u4e00\u884c\u663e\u793a\u4e86\u4e00\u4e2a CPU \u6838\u5fc3\u7684\u72b6\u6001\uff0c\u683c\u5f0f\u4e3a\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"CpuX  [ \u8fdb\u5ea6\u6761 ]\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CpuX"}),"\uff1a0~5\uff1a\u8868\u793a CPU \u6838\u5fc3\u7f16\u53f7\uff08\u672c\u8bbe\u5907\u4e3a 6 \u6838\u5fc3\uff09\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[########...]"}),"\uff1a\u4e3a\u6bcf\u4e2a\u6838\u5fc3\u7684\u5b9e\u65f6\u8d1f\u8f7d\u8fdb\u5ea6\u6761\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"#"}),"\uff1a\u8868\u793a\u7528\u6237\u6001\uff08user\uff09\u5360\u6bd4\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"*"}),"\uff1a\u8868\u793a\u5185\u6838\u6001\uff08system\uff09\u5360\u6bd4\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Load average: 7.10 9.56 9.57"}),"\uff1a\u8868\u793a\u7cfb\u7edf\u5728 1 \u5206\u949f\u30015 \u5206\u949f\u300115 \u5206\u949f\u5185\u7684\u5e73\u5747\u8d1f\u8f7d\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u6d4b\u8bd5\u6307\u6807",children:"\u6d4b\u8bd5\u6307\u6807"}),"\n",(0,r.jsxs)(n.p,{children:["\u6d4b\u8bd5\u7a0b\u5e8f\u542f\u52a8\u540e\uff0c\u4f1a\u5728 ",(0,r.jsx)(n.code,{children:"/app/chip_base_test/log"})," \u76ee\u5f55\u4e0b\u4ea7\u751f ",(0,r.jsx)(n.code,{children:"bpu-stressX.log"})," \u548c ",(0,r.jsx)(n.code,{children:"cpu-stressX.log"})," \u4e24\u4efd\u65e5\u5fd7\u6587\u4ef6\u7528\u6765\u8bb0\u5f55\u538b\u6d4b\u65f6\u7684\u72b6\u6001\uff0c\u786e\u4fdd\u80fd\u591f\u5728\u538b\u6d4b\u4e2d\u4fdd\u6301\u5982\u4e0b\u5185\u5bb9\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u80fd\u7a33\u5b9a\u8fd0\u884c 48 \u5c0f\u65f6\uff0c\u4e0d\u51fa\u73b0\u91cd\u542f\u6216\u6302\u6b7b\u7684\u60c5\u51b5\u3002"}),"\n",(0,r.jsxs)(n.li,{children:["\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u68c0\u67e5\u65e5\u5fd7\u6587\u4ef6\u4e2d\u662f\u5426\u5b58\u5728 ",(0,r.jsx)(n.code,{children:"fail"}),"\u3001",(0,r.jsx)(n.code,{children:"error"}),"\u3001",(0,r.jsx)(n.code,{children:"timeout"})," \u7b49\u5f02\u5e38\u6253\u5370\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"cd \"/app/chip_base_test/log/\" && grep -iE 'error|fail|timeout' bpu-stress*.log cpu-stress*.log\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u6267\u884c ",(0,r.jsx)(n.code,{children:"TOP"})," \u547d\u4ee4\u67e5\u770b CPU\u3001 BPU \u5360\u6bd4\u60c5\u51b5\uff0c\u6b63\u5e38\u72b6\u6001\u5e94\u7a33\u5b9a\u4fdd\u6301\u5728 98-100% \u533a\u95f4\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u6d4b\u8bd5\u7ed3\u679c",children:"\u6d4b\u8bd5\u7ed3\u679c"}),"\n",(0,r.jsx)(n.p,{children:"\u8f93\u5165\u547d\u4ee4\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"cd \"/app/chip_base_test/log/\" && grep -iE 'error|fail|timeout' bpu-stress*.log cpu-stress*.log\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u663e\u793a\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"cpu-stress1.log:2025/05/19-22:01:32(CST) Stats: Completed: 206320.00M in 9.46s 21819.44MB/s, with 0 hardware incidents, 0 errors\ncpu-stress1.log:2025/05/19-22:01:32(CST) Status: PASS - please verify no corrected errors\ncpu-stress2.log:2025/05/19-22:20:22(CST) Stats: Completed: 220626.00M in 9.00s 24511.95MB/s, with 0 hardware incidents, 0 errors\ncpu-stress2.log:2025/05/19-22:20:22(CST) Status: PASS - please verify no corrected errors\ncpu-stress3.log:2025/05/19-22:21:20(CST) Stats: Completed: 196480.00M in 9.00s 21829.11MB/s, with 0 hardware incidents, 0 errors\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6253\u5370\u4fe1\u606f\u4e2d\u5e76\u672a\u51fa\u73b0\u5176\u4ed6\u5f02\u5e38\u4fe1\u606f\uff0c\u4e14 errors \u6570\u91cf\u4e3a 0 \uff0c\u4ee3\u8868\u538b\u6d4b\u7ed3\u679c\u6b63\u5e38\u3002"})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);