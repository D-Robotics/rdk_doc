"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[25434],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>t});var r=i(96540);const d={},s=r.createContext(d);function a(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:a(e.components),r.createElement(s.Provider,{value:n},e.children)}},97659:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"Basic_Application/audio/audio_board_s100","title":"3.2.1 RDK S100 Series Audio Usage Guide","description":"S100 audio is developed based on the standard ALSA framework. In user space, the open-source alsa-lib provides libraries and binary tools for functional testing. This section describes the basic methods for audio functionality testing on the S100.","source":"@site/i18n/en/docusaurus-plugin-content-docs-docs_s/current/03_Basic_Application/02_audio/01_audio_board_s100.md","sourceDirName":"03_Basic_Application/02_audio","slug":"/Basic_Application/audio/audio_board_s100","permalink":"/rdk_doc/en/rdk_s/Basic_Application/audio/audio_board_s100","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1766730309000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"3.1.2 Using USB Cameras","permalink":"/rdk_doc/en/rdk_s/Basic_Application/Image/usb_camera"},"next":{"title":"3.3.1 Pin Definitions and Applications","permalink":"/rdk_doc/en/rdk_s/Basic_Application/03_40pin_user_guide/01_40pin_define"}}');var d=i(74848),s=i(28453);const a={sidebar_position:1},t="3.2.1 RDK S100 Series Audio Usage Guide",c={},o=[{value:"Introduction to alsa-lib",id:"introduction-to-alsa-lib",level:2},{value:"Parameter Description for arecord/aplay",id:"parameter-description-for-arecordaplay",level:3},{value:"Control Commands",id:"control-commands",level:3},{value:"Application Space Interface",id:"application-space-interface",level:3},{value:"Audio Driver HAT REV2",id:"audio-driver-hat-rev2",level:2},{value:"Preparation",id:"preparation",level:3},{value:"Device Nodes",id:"device-nodes",level:3},{value:"Functional Testing",id:"functional-testing",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"321-rdk-s100-series-audio-usage-guide",children:"3.2.1 RDK S100 Series Audio Usage Guide"})}),"\n",(0,d.jsx)(n.p,{children:"S100 audio is developed based on the standard ALSA framework. In user space, the open-source alsa-lib provides libraries and binary tools for functional testing. This section describes the basic methods for audio functionality testing on the S100."}),"\n",(0,d.jsx)(n.h2,{id:"introduction-to-alsa-lib",children:"Introduction to alsa-lib"}),"\n",(0,d.jsx)(n.h3,{id:"parameter-description-for-arecordaplay",children:"Parameter Description for arecord/aplay"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Common parameter explanations"}),"\n"]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Parameter"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Additional Notes"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-D"}),(0,d.jsxs)(n.td,{children:["Specifies the device node. Set via hw",":x",",x"]}),(0,d.jsx)(n.td,{children:"x,x correspond to the card number and device number respectively"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-c"}),(0,d.jsx)(n.td,{children:"Channel: number of audio channels, including mono, stereo, or multi-channel configurations such as 8/16 channels"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-r"}),(0,d.jsx)(n.td,{children:"Rate: also known as sample rate, i.e., the number of samples per second"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-f"}),(0,d.jsx)(n.td,{children:"Sample format (bit depth)"}),(0,d.jsx)(n.td,{children:"Common formats: U8/S16_LE/S32_LE"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-t"}),(0,d.jsx)(n.td,{children:"File type"}),(0,d.jsx)(n.td,{children:"Includes wav, voc, raw, etc."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-d"}),(0,d.jsx)(n.td,{children:"Recording duration (in seconds). Recording stops after the specified time"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"--period-size"}),(0,d.jsx)(n.td,{children:"Number of frames processed per hardware interrupt"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"--buffer-size"}),(0,d.jsx)(n.td,{children:"Size of the data buffer"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-I"}),(0,d.jsx)(n.td,{children:"Non-interleaved mode"}),(0,d.jsx)(n.td,{})]})]})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"Common commands"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"List sound cards and digital audio devices"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"arecord -l\naplay -l\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Query hardware capabilities"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"arecord --dump-hw-params -Dhw:0,0\naplay --dump-hw-params -Dhw:0,1 /dev/zero\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Loopback test command"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"arecord -Dhw:0,0 -c 2 -r 48000 -f S16_LE -t wav -d 10 | aplay -Dhw:0,1\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Non-interleaved data storage. Note: Non-interleaved data is raw PCM."}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"arecord -Dhw:0,0 -c 2 -r 48000 -f S16_LE -t wav -d 5 -I 0\naplay -Dhw:0,1 -c 2 -r 48000 -f S16_LE -t wav -I 0\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Interleaved data storage"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"arecord -Dhw:0,0 -c 2 -r 16000 -f S16_LE -t wav -d 5 test.wav\naplay -Dhw:0,1 test.wav\n"})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"control-commands",children:"Control Commands"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Query all control parameters and their current values for the current codec"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"amixer scontrols\namixer scontents\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Parameter adjustment"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"For example, adjusting playback volume:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"amixer sset 'DAC' 120 // Set\namixer sget 'DAC' // Get\n"})}),"\n",(0,d.jsx)(n.admonition,{title:"Note",type:"info",children:(0,d.jsx)(n.p,{children:"The default sound card/device number is 0,0. If multiple sound cards are connected in your actual setup, you must specify the correct card and device numbers using -D and -c."})}),"\n",(0,d.jsx)(n.p,{children:"How to confirm the current sound card/device number:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"arecord -l"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"**** List of CAPTURE Hardware Devices ****\ncard 0: s100snd2 [s100snd2], device 0: s100dailink0 ES7210 4CH ADC 0-0 []\n  Subdevices: 1/1\n  Subdevice #0: subdevice #0\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"/proc/asound/cards node"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"root@ubuntu:/userdata# cat /proc/asound/cards\n 0 [s100snd2       ]: s100snd2 - s100snd2\n                      s100snd2\n"})}),"\n",(0,d.jsx)(n.h3,{id:"application-space-interface",children:"Application Space Interface"}),"\n",(0,d.jsxs)(n.p,{children:["For API descriptions and usage, refer to the official documentation: ",(0,d.jsx)(n.a,{href:"https://www.alsa-project.org/alsa-doc/alsa-lib/pcm_2pcm_8c.html",children:"https://www.alsa-project.org/alsa-doc/alsa-lib/pcm_2pcm_8c.html"})]}),"\n",(0,d.jsx)(n.h2,{id:"audio-driver-hat-rev2",children:"Audio Driver HAT REV2"}),"\n",(0,d.jsx)(n.h3,{id:"preparation",children:"Preparation"}),"\n",(0,d.jsxs)(n.p,{children:["The S100 is compatible with the audio HAT produced by Waveshare, connecting to the S100 development board via the 40-pin header. For details about the HAT and connection instructions, refer to: ",(0,d.jsx)(n.a,{href:"/rdk_doc/en/rdk_s/Advanced_development/linux_development/driver_development_s100/driver_audio#Audio-HAT-Usage-Guide",children:"Audio HAT Usage Guide"})]}),"\n",(0,d.jsx)(n.h3,{id:"device-nodes",children:"Device Nodes"}),"\n",(0,d.jsx)(n.p,{children:"After the audio HAT is connected to the S100 and the driver is loaded, the following device nodes are created:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"pcmC0D0c: capture (recording)"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"pcmC0D1p: playback"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"controlC0: control"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"functional-testing",children:"Functional Testing"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Recording"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"arecord -Dhw:0,0 -c 2 -r 48000 -f S16_LE -t wav -d 5 test.wav\n"})}),"\n",(0,d.jsx)(n.p,{children:"This command records a 5-second WAV audio file with 48 kHz sampling rate, 2 channels, and 16-bit depth. Users can adjust these parameters according to their specific requirements."}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Playback"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"aplay -Dhw:0,1 test.wav\n"})}),"\n",(0,d.jsx)(n.p,{children:"This command plays a WAV file. The audio format is parsed from the WAV file header and passed to the driver."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}}}]);