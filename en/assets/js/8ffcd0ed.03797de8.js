"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[35315],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>s});var t=i(96540);const r={},o=t.createContext(r);function a(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(o.Provider,{value:n},e.children)}},84631:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"Basic_Application/pydev_demo_sample/web_display_camera_sample","title":"3.3.10 Web Display Camera Example Introduction","description":"Example Overview","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/03_Basic_Application/03_pydev_demo_sample/05_web_display_camera_sample.md","sourceDirName":"03_Basic_Application/03_pydev_demo_sample","slug":"/Basic_Application/pydev_demo_sample/web_display_camera_sample","permalink":"/rdk_doc/en/Basic_Application/pydev_demo_sample/web_display_camera_sample","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770185252000,"sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"3.3.9 MIPI Camera Sample Introduction","permalink":"/rdk_doc/en/Basic_Application/pydev_demo_sample/mipi_camera_sample"},"next":{"title":"3.3.11 RTSP Stream Decoding Example Introduction","permalink":"/rdk_doc/en/Basic_Application/pydev_demo_sample/decode_rtsp_stream"}}');var r=i(74848),o=i(28453);const a={sidebar_position:10},s="3.3.10 Web Display Camera Example Introduction",c={},d=[{value:"Example Overview",id:"example-overview",level:2},{value:"Effect Demonstration",id:"effect-demonstration",level:2},{value:"Hardware Preparation",id:"hardware-preparation",level:2},{value:"Hardware Connection",id:"hardware-connection",level:3},{value:"Quick Start",id:"quick-start",level:2},{value:"Code and Board Location",id:"code-and-board-location",level:3},{value:"Compilation and Execution",id:"compilation-and-execution",level:3},{value:"Execution Effect",id:"execution-effect",level:3},{value:"Detailed Introduction",id:"detailed-introduction",level:2},{value:"Example Program Parameter Options Description",id:"example-program-parameter-options-description",level:3},{value:"Software Architecture Description",id:"software-architecture-description",level:3},{value:"API Process Description",id:"api-process-description",level:3},{value:"FAQ",id:"faq",level:3}];function l(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"3310-web-display-camera-example-introduction",children:"3.3.10 Web Display Camera Example Introduction"})}),"\n",(0,r.jsx)(n.h2,{id:"example-overview",children:"Example Overview"}),"\n",(0,r.jsxs)(n.p,{children:["The Web display camera example is a ",(0,r.jsx)(n.strong,{children:"Python interface"})," development code example located in ",(0,r.jsx)(n.code,{children:"/app/pydev_demo/05_web_display_camera_sample/"}),", demonstrating how to stream MIPI camera video and object detection results to a browser in real-time through a web service. This example combines MIPI camera capture, AI object detection, video encoding, and WebSocket real-time transmission technologies, providing a complete web video monitoring solution."]}),"\n",(0,r.jsx)(n.h2,{id:"effect-demonstration",children:"Effect Demonstration"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/03_pydev_demo_sample/image/pydev_05_runing.png",alt:"output-img"})}),"\n",(0,r.jsx)(n.h2,{id:"hardware-preparation",children:"Hardware Preparation"}),"\n",(0,r.jsx)(n.h3,{id:"hardware-connection",children:"Hardware Connection"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Prepare an RDK development board"}),"\n",(0,r.jsx)(n.li,{children:"Connect the officially compatible MIPI camera"}),"\n",(0,r.jsx)(n.li,{children:"Connect an Ethernet cable to the development board"}),"\n",(0,r.jsxs)(n.li,{children:["Connect the power cable\n",(0,r.jsx)(n.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/03_pydev_demo_sample/image/pydev_05_hw_connect.png",alt:"connect-img"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsx)(n.h3,{id:"code-and-board-location",children:"Code and Board Location"}),"\n",(0,r.jsxs)(n.p,{children:["Navigate to ",(0,r.jsx)(n.code,{children:"/app/pydev_demo/05_web_display_camera_sample/"})," location, where you can see the Web display camera example contains the following files:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"root@ubuntu:/app/pydev_demo/05_web_display_camera_sample# tree\n.\n\u251c\u2500\u2500 mipi_camera_web.py\n\u251c\u2500\u2500 start_nginx.sh\n\u251c\u2500\u2500 webservice\n\u2502 \u251c\u2500\u2500 conf\n\u2502 \u2502 \u251c\u2500\u2500 nginx.conf\n\u2502 \u2502 \u2514\u2500\u2500 ...\n\u2502 \u251c\u2500\u2500 html\n\u2502 \u2502 \u251c\u2500\u2500 index.html\n\u2502 \u2502 \u251c\u2500\u2500 assets\n\u2502 \u2502 \u2514\u2500\u2500 ...\n\u2502 \u251c\u2500\u2500 logs\n\u2502 \u2514\u2500\u2500 sbin\n\u2502 \u2514\u2500\u2500 nginx\n\u2514\u2500\u2500 x3_pb2.py\n"})}),"\n",(0,r.jsx)(n.h3,{id:"compilation-and-execution",children:"Compilation and Execution"}),"\n",(0,r.jsx)(n.p,{children:"First, you need to start the Nginx server, then run the Python script:"}),"\n",(0,r.jsx)(n.admonition,{title:"Note",type:"info",children:(0,r.jsx)(n.p,{children:"When using the IMX477 camera, it is necessary to set fps=50 in the mipi_camera_web.py file (around line 39)."})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Start Nginx server\n./start_nginx.sh\n\n# Run Web camera example\npython3 mipi_camera_web.py\n"})}),"\n",(0,r.jsx)(n.h3,{id:"execution-effect",children:"Execution Effect"}),"\n",(0,r.jsx)(n.p,{children:"After running, the program will start the web service, and you can access the development board's IP address through a browser to view the real-time video stream and object detection results."}),"\n",(0,r.jsxs)(n.p,{children:["Access http://[Development Board IP] in your browser, default is  ",(0,r.jsx)(n.a,{href:"http://192.168.127.10%E3%80%82",children:"http://192.168.127.10\u3002"}),"\n",(0,r.jsx)(n.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/03_pydev_demo_sample/image/pydev_05_wb_disp_web_img.png",alt:"pydev_05_wb_disp_web_img"})]}),"\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.code,{children:"Web Display"})," in the browser to see the real-time video stream and object detection results. The effect can be viewed in the ",(0,r.jsx)(n.a,{href:"#effect-demonstration",children:"Effect Demonstration"})," section at the beginning of the article."]}),"\n",(0,r.jsx)(n.h2,{id:"detailed-introduction",children:"Detailed Introduction"}),"\n",(0,r.jsx)(n.h3,{id:"example-program-parameter-options-description",children:"Example Program Parameter Options Description"}),"\n",(0,r.jsx)(n.p,{children:"The Web display camera example does not require command line parameters and can be run directly. The program will automatically initialize the MIPI camera and WebSocket service."}),"\n",(0,r.jsx)(n.h3,{id:"software-architecture-description",children:"Software Architecture Description"}),"\n",(0,r.jsx)(n.p,{children:"The Web display camera example involves not only the mipi_camera_web.py source code but also the nginx server and web client, so the software architecture is relatively more complex than previous examples, including the following core components:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"MIPI Camera Capture: Using srcampy.Camera() to initialize the MIPI camera and capture video stream"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Object Detection Model: Loading FCOS object detection model for real-time inference on video frames"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Video Encoding: Using srcampy.Encoder() to encode video frames in JPEG format"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"WebSocket Service: Creating WebSocket server to push video frames and detection results in real-time"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Web Frontend: Providing HTML pages and JavaScript code for displaying video and detection results in the browser"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Nginx Server: Providing static file service and HTTP proxy functionality"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/03_pydev_demo_sample/image/pydev_05_wb_disp_cam_software_arch.png",alt:"software_arch"})})}),"\n",(0,r.jsx)(n.h3,{id:"api-process-description",children:"API Process Description"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Camera Initialization: cam.open_cam()"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Encoder Initialization: enc.encode()"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Model Loading: models = pyeasy_dnn.load('../models/fcos_512x512_nv12.bin')"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:'WebSocket Service Startup: websockets.serve(web_service, "0.0.0.0", 8080)'}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Real-time Processing Loop:"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Get image frames from the camera"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Perform object detection using the model"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Encode image frames to JPEG format"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Push images and detection results via WebSocket"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"http://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/03_Basic_Application/03_pydev_demo_sample/image/pydev_05_wb_disp_cam_api_flow.png",alt:"API_Flow"})})}),"\n",(0,r.jsx)(n.h3,{id:"faq",children:"FAQ"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Q:"})," What should I do if the example reports that the port is occupied when running?",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"A:"})," Please check if other programs are occupying port 8080. You can use the ",(0,r.jsx)(n.code,{children:"netstat -tlnp"})," command to check port usage."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Q:"})," What should I do if the browser cannot access the video stream?",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"A:"})," Please check the development board's network connection and ensure the firewall is not blocking access to relevant ports."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Q:"})," What should I do if the video stream has high latency?",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"A:"})," You can try reducing the video resolution or frame rate, or use a lighter object detection model."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Q:"})," How to modify the web frontend interface?",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"A:"})," You can modify the HTML, CSS, and JavaScript files in the ",(0,r.jsx)(n.code,{children:"webservice/html/"})," directory to customize the interface."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Q:"})," How to add new detection categories?",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"A:"})," You need to modify the ",(0,r.jsx)(n.code,{children:"get_classes()"})," function to add new category names, and either retrain the model or use a model that supports the new categories."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Q:"})," How to save the video stream?",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"A:"})," You can add video saving logic in the code, such as using OpenCV's VideoWriter class to save video files."]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);