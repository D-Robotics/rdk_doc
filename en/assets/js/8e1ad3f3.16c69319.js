"use strict";(self.webpackChunkrdk_doc=self.webpackChunkrdk_doc||[]).push([[38678],{28453:(e,n,c)=>{c.d(n,{R:()=>l,x:()=>t});var i=c(96540);const d={},r=i.createContext(d);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),i.createElement(r.Provider,{value:n},e.children)}},94263:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>s,contentTitle:()=>t,default:()=>a,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"Basic_Application/multi_media_sp_dev_api/multi_media_api/pydev_multimedia_api_x3/object_encoder","title":"Encoder Object","description":"The Encoder object implements encoding and compression functions for video data. It includes several methods, such as encode, encodefile, getimg, close, etc. The detailed explanation is as follows:","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/03_Basic_Application/06_multi_media_sp_dev_api/multi_media_api/pydev_multimedia_api_x3/object_encoder.md","sourceDirName":"03_Basic_Application/06_multi_media_sp_dev_api/multi_media_api/pydev_multimedia_api_x3","slug":"/Basic_Application/multi_media_sp_dev_api/multi_media_api/pydev_multimedia_api_x3/object_encoder","permalink":"/rdk_doc/en/Basic_Application/multi_media_sp_dev_api/multi_media_api/pydev_multimedia_api_x3/object_encoder","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770786802000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Camera Object","permalink":"/rdk_doc/en/Basic_Application/multi_media_sp_dev_api/multi_media_api/pydev_multimedia_api_x3/object_camera"},"next":{"title":"Decoder Object","permalink":"/rdk_doc/en/Basic_Application/multi_media_sp_dev_api/multi_media_api/pydev_multimedia_api_x3/object_decoder"}}');var d=c(74848),r=c(28453);const l={sidebar_position:2},t="Encoder Object",s={},o=[{value:"Basic Specifications",id:"basic-specifications",level:2},{value:"Reference Example",id:"reference-example",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"encode",id:"encode",level:2},{value:"close",id:"close",level:3},{value:"send_frame",id:"send_frame",level:3},{value:"encode_file",id:"encode_file",level:2},{value:"get_img",id:"get_img",level:2},{value:"close",id:"close-1",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"encoder-object",children:"Encoder Object"})}),"\n",(0,d.jsxs)(n.p,{children:["The Encoder object implements encoding and compression functions for video data. It includes several methods, such as ",(0,d.jsx)(n.code,{children:"encode"}),", ",(0,d.jsx)(n.code,{children:"encode_file"}),", ",(0,d.jsx)(n.code,{children:"get_img"}),", ",(0,d.jsx)(n.code,{children:"close"}),", etc. The detailed explanation is as follows:"]}),"\n",(0,d.jsx)(n.h2,{id:"basic-specifications",children:"Basic Specifications"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"RDK supports H.265/HEVC encoder, H.264/AVC encoder, H.265/HEVC decoder, H.264/AVC decoder, JPEG and MJPEG encoder/decoder."}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"reference-example",children:"Reference Example"}),"\n",(0,d.jsxs)(n.p,{children:["Example code for the Encoder object can be referred to in the ",(0,d.jsx)(n.code,{children:"mipi_camera_web.py"})," example."]}),"\n",(0,d.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"API Interface"}),(0,d.jsx)(n.th,{children:"Interface Function"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"encode"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Open the encoder"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"close"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Close the encoder"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"send_frame"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Send image data to the encoder"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"encode_file"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Send image data to the encoder"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"get_frame"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Stop the video stream and close the camera"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"get_img"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Stop the video stream and close the camera"})})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"encode",children:"encode"}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Function Description\u3011"}),"\n",(0,d.jsx)(n.p,{children:"Configure and enable the encode encoding module."}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Function Declaration\u3011"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"Encoder.encode(video_chn, encode_type , width, height, bits)\n"})}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Parameter Description\u3011"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Parameter Name"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Value Range"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"video_chn"}),(0,d.jsx)(n.td,{children:"Specifies the channel number of the video encoder"}),(0,d.jsx)(n.td,{children:"Range: 0~31"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"encode_type"}),(0,d.jsx)(n.td,{children:"Video encoding type"}),(0,d.jsxs)(n.td,{children:["Range: 1~3, corresponding to ",(0,d.jsx)(n.code,{children:"H264"}),", ",(0,d.jsx)(n.code,{children:"H265"}),", ",(0,d.jsx)(n.code,{children:"MJPEG"})," respectively"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"width"}),(0,d.jsx)(n.td,{children:"Width of the image input to the encoding module"}),(0,d.jsx)(n.td,{children:"Not exceeding 4096"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"height"}),(0,d.jsx)(n.td,{children:"Height of the image input to the encoding module"}),(0,d.jsx)(n.td,{children:"Not exceeding 4096"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"bits"}),(0,d.jsx)(n.td,{children:"Bitrate of the encoding module"}),(0,d.jsx)(n.td,{children:"Default: 8000kbps"})]})]})]}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Usage\u3011"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"#create encode object\nencode = libsrcampy.Encoder()\n\n#enable encode channel 0, solution: 1080p, format: H264\nret = encode.encode(0, 1, 1920, 1080)\n"})}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Return Value\u3011"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Return value"}),(0,d.jsx)(n.th,{children:"Definition"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:"Success"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-1"}),(0,d.jsx)(n.td,{children:"Failure"})]})]})]}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Notes\u3011"}),"\n",(0,d.jsx)(n.p,{children:"None"}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Reference Code\u3011"}),"\n",(0,d.jsx)(n.p,{children:"None"}),"\n",(0,d.jsx)(n.h3,{id:"close",children:"close"}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Function Description\u3011"}),"\n",(0,d.jsx)(n.p,{children:"Disable the enabled encoding channel."}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Function Declaration\u3011"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"Encoder.close()\n"})}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Parameter Description\u3011"}),"\n",(0,d.jsx)(n.p,{children:"\u65e0"}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Usage\u3011"}),"\n",(0,d.jsx)(n.p,{children:"\u65e0"}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Return Value\u3011"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Return value"}),(0,d.jsx)(n.th,{children:"Definition"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:"Success"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-1"}),(0,d.jsx)(n.td,{children:"Failure"})]})]})]}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Notes\u3011"}),"\n",(0,d.jsxs)(n.p,{children:["This interface should be used after invoking ",(0,d.jsx)(n.code,{children:"Encoder.encode()"})," to establish an encoding channel."]}),"\n",(0,d.jsx)(n.h3,{id:"send_frame",children:"send_frame"}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Function Description\u3011"}),"\n",(0,d.jsx)(n.p,{children:"Send the image data to the encoder."}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Function Declaration\u3011"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"Encoder.send_frame(img)\n"})}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Parameter Description\u3011"}),"\n",(0,d.jsx)(n.p,{children:"\u65e0"}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Usage\u3011"}),"\n",(0,d.jsx)(n.p,{children:"\u65e0"}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Return Value\u3011"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Return value"}),(0,d.jsx)(n.th,{children:"Definition"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:"Success"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-1"}),(0,d.jsx)(n.td,{children:"Failure"})]})]})]}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Notes\u3011"}),"\n",(0,d.jsxs)(n.p,{children:["This interface should be used after calling ",(0,d.jsx)(n.code,{children:"Encoder.encode()"})," to establish an encoding channel."]}),"\n",(0,d.jsx)(n.h2,{id:"encode_file",children:"encode_file"}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Function Description\u3011"}),"\n",(0,d.jsx)(n.p,{children:"Feeds image files into enabled encoding channels and encodes them according to a predetermined format."}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Function Declaration\u3011"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"Encoder.encode_file(img)\n"})}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Parameter Description\u3011"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Parameter Name"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Value Range"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"img"}),(0,d.jsx)(n.td,{children:"Image data to be encoded, in NV12 format"}),(0,d.jsx)(n.td,{children:"N/A"})]})})]}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Usage Example\u3011"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'fin = open("output.img", "rb")\ninput_img = fin.read()\nfin.close()\n\n# Input image data for encoding\nret = encode.encode_file(input_img)\n'})}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Return Values\u3011"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Return Value"}),(0,d.jsx)(n.th,{children:"Definition Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:"Success"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-1"}),(0,d.jsx)(n.td,{children:"Failure"})]})]})]}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Notes\u3011"}),"\n",(0,d.jsx)(n.p,{children:"None"}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Reference Code\u3011"}),"\n",(0,d.jsx)(n.p,{children:"None"}),"\n",(0,d.jsx)(n.h2,{id:"get_img",children:"get_img"}),"\n",(0,d.jsx)("font",{color:"blue",children:"\u3010Function Description\u3011"}),"\n",(0,d.jsx)(n.p,{children:"Get encoded data."}),"\n",(0,d.jsx)("font",{color:"blue",children:"\u3010Function Declaration\u3011"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"Encoder.get_img()\n"})}),"\n",(0,d.jsx)("font",{color:"blue",children:"\u3010Usage\u3011"}),"\n",(0,d.jsx)(n.p,{children:"N/A"}),"\n",(0,d.jsx)("font",{color:"blue",children:"\u3010Parameter Description\u3011"}),"\n",(0,d.jsx)(n.p,{children:"N/A"}),"\n",(0,d.jsx)("font",{color:"blue",children:"\u3010Return Value\u3011"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Return Value"}),(0,d.jsx)(n.th,{children:"Definition"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:"Success"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-1"}),(0,d.jsx)(n.td,{children:"Failure"})]})]})]}),"\n",(0,d.jsx)("font",{color:"blue",children:"\u3010Attention\u3011"}),"\n",(0,d.jsxs)(n.p,{children:["This interface should be used after calling ",(0,d.jsx)(n.code,{children:"Encoder.encode()"})," to create the encoding channel."]}),"\n",(0,d.jsx)("font",{color:"blue",children:"\u3010Code Sample\u3011"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'import sys, os, time\n\nimport numpy as np\nimport cv2\nfrom hobot_vio import libsrcampy\n\ndef test_encode():\n    #create encode object\n    enc = libsrcampy.Encoder()\n    ret = enc.encode(0, 1, 1920, 1080)\n    print("Encoder encode return:%d" % ret)\n\n    #save encoded data to file\n    fo = open("encode.h264", "wb+")\n    a = 0\n    fin = open("output.img", "rb")\n    input_img = fin.read()\n    fin.close()\n    while a < 100:\n        #send image data to encoder\n        ret = enc.encode_file(input_img)\n        print("Encoder encode_file return:%d" % ret)\n        #get encoded data\n        img = enc.get_img()\n        if img is not None:\n            fo.write(img)\n            print("encode write image success count: %d" % a)\n        else:\n            print("encode write image failed count: %d" % a)\n        a = a + 1\n\nenc.close()\nprint("test_encode done!!!")\n\ntest_encode()\n\n'})}),"\n",(0,d.jsx)(n.h2,{id:"close-1",children:"close"}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Description\u3011"}),"\n",(0,d.jsx)(n.p,{children:"Close the enabled encoding channel."}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Function\u3011"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"Encoder.close()\n"})}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Parameters\u3011"}),"\n",(0,d.jsx)(n.p,{children:"None"}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Usage\u3011"}),"\n",(0,d.jsx)(n.p,{children:"None"}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Return\u3011"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Return Value"}),(0,d.jsx)(n.th,{children:"Definition"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:"Success"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-1"}),(0,d.jsx)(n.td,{children:"Failed"})]})]})]}),"\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Note\u3011"}),"\n",(0,d.jsxs)(n.p,{children:["This interface should be used after calling ",(0,d.jsx)(n.code,{children:"Encoder.encode()"})," to create the encoding channel.\n",(0,d.jsx)("font",{color:"Blue",children:"\u3010Reference Code\u3011"})]}),"\n",(0,d.jsx)(n.p,{children:"None"})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}}}]);