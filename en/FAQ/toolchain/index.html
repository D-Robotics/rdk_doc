<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-FAQ/toolchain" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">8.5 Algorithm toolchain class | RDK DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/rdk_doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/rdk_doc/en/FAQ/toolchain"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="8.5 Algorithm toolchain class | RDK DOC"><meta data-rh="true" name="description" content="For toolchain issues, we recommend using the latest version first. For related download resources, please refer to: Download Resources Summary"><meta data-rh="true" property="og:description" content="For toolchain issues, we recommend using the latest version first. For related download resources, please refer to: Download Resources Summary"><link data-rh="true" rel="icon" href="/rdk_doc/en/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/rdk_doc/en/FAQ/toolchain"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/FAQ/toolchain" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/en/FAQ/toolchain" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/FAQ/toolchain" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"8. FAQs","item":"https://developer.d-robotics.cc/rdk_doc/en/FAQ"},{"@type":"ListItem","position":2,"name":"8.5 Algorithm toolchain class","item":"https://developer.d-robotics.cc/rdk_doc/en/FAQ/toolchain"}]}</script><script src="https://hm.baidu.com/hm.js?24dd63cad43b63889ea6bede5fd1ab9e" async></script><link rel="stylesheet" href="/rdk_doc/en/assets/css/styles.0fbd7d27.css">
<script src="/rdk_doc/en/assets/js/runtime~main.7c1ddca5.js" defer="defer"></script>
<script src="/rdk_doc/en/assets/js/main.9f5ca5db.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rdk_doc/en/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rdk_doc/en/RDK">RDK X3 / X5</a><a class="navbar__item navbar__link" href="/rdk_doc/en/rdk_s/RDK">RDK S100</a><a href="https://developer.d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>EN</a><ul class="dropdown__menu"><li><a href="/rdk_doc/FAQ/toolchain" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">CN</a></li><li><a href="/rdk_doc/en/FAQ/toolchain" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">EN</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rdk_doc/en/RDK">D-Robotics RDK Suite</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Quick_start">1. Quick Start</a><button aria-label="Expand sidebar category &#x27;1. Quick Start&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/System_configuration">2. System Configuration</a><button aria-label="Expand sidebar category &#x27;2. System Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Basic_Application">3. 基础应用开发 </a><button aria-label="Expand sidebar category &#x27;3. 基础应用开发 &#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Basic_Development">4. Algorithm Application Development</a><button aria-label="Expand sidebar category &#x27;4. Algorithm Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Robot_development">5. Robotics Application Development</a><button aria-label="Expand sidebar category &#x27;5. Robotics Application Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Application_case">6. Application Development Guide</a><button aria-label="Expand sidebar category &#x27;6. Application Development Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Advanced_development">7. Advanced Development</a><button aria-label="Expand sidebar category &#x27;7. Advanced Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rdk_doc/en/FAQ">8. FAQs</a><button aria-label="Collapse sidebar category &#x27;8. FAQs&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/FAQ/hardware_and_system">8.1 Hardware, System, and Environment Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/FAQ/interface">8.2 Interfaces, Peripherals, and Drivers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/FAQ/applications_and_examples">8.3 Application Development, Compilation, and Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/FAQ/multimedia">8.4 Multimedia Processing and Applications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rdk_doc/en/FAQ/toolchain">8.5 Algorithm toolchain class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/en/FAQ/tros_ros">8.6 TROS/ROS Development</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/en/Appendix">9. Appendix</a><button aria-label="Expand sidebar category &#x27;9. Appendix&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rdk_doc/en/Release_Note/release_note">10. Version release</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rdk_doc/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/en/FAQ"><span>8. FAQs</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">8.5 Algorithm toolchain class</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>8.5 Algorithm toolchain class</h1></header>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>🛠️ Toolchain and System Download Guide</div><div class="admonitionContent_BuS1"><p>For toolchain issues, we recommend using the latest version first. For related download resources, please refer to: <a href="/rdk_doc/en/Quick_start/download">Download Resources Summary</a></p></div></div>
<p>This section addresses frequently asked questions related to AI model deployment, algorithm development, and toolchain usage on the Horizon RDK platform.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q1-what-information-should-i-provide-when-seeking-technical-support-for-toolchain-issues">Q1: What information should I provide when seeking technical support for toolchain issues?<a href="#q1-what-information-should-i-provide-when-seeking-technical-support-for-toolchain-issues" class="hash-link" aria-label="Direct link to Q1: What information should I provide when seeking technical support for toolchain issues?" title="Direct link to Q1: What information should I provide when seeking technical support for toolchain issues?">​</a></h3>
<p><strong>A:</strong> To help technical support quickly identify and resolve your issue with the Horizon algorithm toolchain, please provide as much of the following information as possible:</p>
<ol>
<li><strong>Target RDK hardware platform and processor architecture:</strong> For example, RDK X3 (BPU Bernoulli2), RDK Ultra (BPU Bayes), RDK X5 (BPU Bayes-e), Super100 (BPU Nash-e), Super100P (BPU Nash-m).</li>
<li><strong>Algorithm toolchain conversion environment information:</strong></li>
</ol>
<ul>
<li><code>horizon_nn</code> package version (check with <code>pip list | grep horizon</code>).</li>
<li>Python version (e.g., Py3.8, Py3.10).</li>
<li>Toolchain Docker image version (if using Docker).</li>
</ul>
<ol start="3">
<li><strong>Original model file:</strong> Provide your ONNX model file (or other original format model files).</li>
<li><strong>Model conversion related files:</strong></li>
</ol>
<ul>
<li>The <code>yaml</code> configuration file used for conversion.</li>
<li>Complete <code>hb_mapper make_model_log</code> or similar log files (e.g., <code>hb_mapper_makertbin_log_*.log</code>).</li>
<li>The calibration dataset used for PTQ quantization (or its generation method and a few sample images).</li>
</ul>
<ol start="5">
<li><strong>Board deployment related files:</strong></li>
</ol>
<ul>
<li>Code snippets or the complete project used for deployment on the board.</li>
<li>Specific error messages and logs from runtime on the board.</li>
<li>RDK board system version information (obtain via the <code>rdkos_info</code> command).</li>
</ul>
<ol start="6">
<li><strong>Detailed steps to reproduce the issue:</strong> Clearly describe the step-by-step process to reproduce your problem.</li>
<li><strong>Expected vs. actual behavior:</strong> Describe what you expected to happen and what actually occurred.</li>
</ol>
<p><strong>Note:</strong> Many common issues may exist in older toolchain versions and have been fixed in newer releases. It is recommended to always use the latest official Docker image and toolchain version.</p>
<ul>
<li><strong>Docker image download and mounting references:</strong>
<ul>
<li><a href="https://developer.d-robotics.cc/forumDetail/136488103547258769" target="_blank" rel="noopener noreferrer">Docker Image Download Guide</a></li>
<li><a href="https://developer.d-robotics.cc/forumDetail/228559182180396619" target="_blank" rel="noopener noreferrer">Docker Mounting Guide</a></li>
</ul>
</li>
<li>For complex issues, it is recommended to share the complete conversion project, board deployment project, and detailed reproduction steps with technical support via cloud storage or similar means.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q2-what-official-resources-are-recommended-for-ai-algorithm-development">Q2: What official resources are recommended for AI algorithm development?<a href="#q2-what-official-resources-are-recommended-for-ai-algorithm-development" class="hash-link" aria-label="Direct link to Q2: What official resources are recommended for AI algorithm development?" title="Direct link to Q2: What official resources are recommended for AI algorithm development?">​</a></h3>
<p><strong>A:</strong></p>
<ol>
<li><strong>RDK User Manual - Algorithm Toolchain Section:</strong> The most fundamental and important reference, detailing toolchain installation, usage, features, and parameters.</li>
</ol>
<ul>
<li>General entry: <a href="https://developer.d-robotics.cc/rdk_doc/04_toolchain_development" target="_blank" rel="noopener noreferrer">https://developer.d-robotics.cc/rdk_doc/04_toolchain_development</a> (refer to the latest official documentation)</li>
</ul>
<ol start="2">
<li><strong>RDK Model Zoo:</strong> Official model example repository, including various AI models ported, optimized, quantized, and deployed on the RDK platform, with code and tutorials.</li>
</ol>
<ul>
<li>GitHub: <a href="https://github.com/D-Robotics/rdk_model_zoo" target="_blank" rel="noopener noreferrer">https://github.com/D-Robotics/rdk_model_zoo</a></li>
</ul>
<ol start="3">
<li><strong>Horizon Developer Community - Resource Center:</strong> Aggregates various development resources, including toolchains, SDKs, sample code, technical documents, and tutorial videos.</li>
</ol>
<ul>
<li>Community Resource Center: <a href="https://developer.d-robotics.cc/resource" target="_blank" rel="noopener noreferrer">https://developer.d-robotics.cc/resource</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q3-what-community-algorithm-resources-and-toolchain-manuals-are-available-for-the-rdk-x3-platform">Q3: What community algorithm resources and toolchain manuals are available for the RDK X3 platform?<a href="#q3-what-community-algorithm-resources-and-toolchain-manuals-are-available-for-the-rdk-x3-platform" class="hash-link" aria-label="Direct link to Q3: What community algorithm resources and toolchain manuals are available for the RDK X3 platform?" title="Direct link to Q3: What community algorithm resources and toolchain manuals are available for the RDK X3 platform?">​</a></h3>
<p><strong>A:</strong> For algorithm development on the RDK X3 platform, refer to the following OpenExplorer community resources:</p>
<ul>
<li><strong>RDK X3 Algorithm Toolchain Community Manual (OpenExplorer):</strong>
<a href="https://developer.d-robotics.cc/api/v1/fileData/horizon_xj3_open_explorer_cn_doc/index.html" target="_blank" rel="noopener noreferrer">https://developer.d-robotics.cc/api/v1/fileData/horizon_xj3_open_explorer_cn_doc/index.html</a></li>
<li><strong>RDK X3 OpenExplore Product Release and Resources:</strong>
<a href="https://developer.d-robotics.cc/forumDetail/136488103547258769" target="_blank" rel="noopener noreferrer">https://developer.d-robotics.cc/forumDetail/136488103547258769</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q4-what-community-algorithm-resources-and-toolchain-manuals-are-available-for-the-rdk-ultra-platform">Q4: What community algorithm resources and toolchain manuals are available for the RDK Ultra platform?<a href="#q4-what-community-algorithm-resources-and-toolchain-manuals-are-available-for-the-rdk-ultra-platform" class="hash-link" aria-label="Direct link to Q4: What community algorithm resources and toolchain manuals are available for the RDK Ultra platform?" title="Direct link to Q4: What community algorithm resources and toolchain manuals are available for the RDK Ultra platform?">​</a></h3>
<p><strong>A:</strong> For algorithm development on the RDK Ultra platform, refer to the following OpenExplorer community resources:</p>
<ul>
<li><strong>RDK Ultra Algorithm Toolchain Community Manual (OpenExplorer):</strong>
<a href="https://developer.d-robotics.cc/api/v1/fileData/horizon_j5_open_explorer_cn_doc/index.html" target="_blank" rel="noopener noreferrer">https://developer.d-robotics.cc/api/v1/fileData/horizon_j5_open_explorer_cn_doc/index.html</a></li>
<li><strong>RDK Ultra OpenExplore Product Release and Resources:</strong>
<a href="https://developer.d-robotics.cc/forumDetail/118363912788935318" target="_blank" rel="noopener noreferrer">https://developer.d-robotics.cc/forumDetail/118363912788935318</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q5-what-community-algorithm-resources-and-toolchain-manuals-are-available-for-the-rdk-x5-platform">Q5: What community algorithm resources and toolchain manuals are available for the RDK X5 platform?<a href="#q5-what-community-algorithm-resources-and-toolchain-manuals-are-available-for-the-rdk-x5-platform" class="hash-link" aria-label="Direct link to Q5: What community algorithm resources and toolchain manuals are available for the RDK X5 platform?" title="Direct link to Q5: What community algorithm resources and toolchain manuals are available for the RDK X5 platform?">​</a></h3>
<p><strong>A:</strong> For algorithm development on the RDK X5 platform, refer to the following OpenExplorer community resources:</p>
<ul>
<li><strong>RDK X5 Algorithm Toolchain Community Manual (OpenExplorer):</strong>
<a href="https://developer.d-robotics.cc/api/v1/fileData/x5_doc-v126cn/index.html" target="_blank" rel="noopener noreferrer">https://developer.d-robotics.cc/api/v1/fileData/x5_doc-v126cn/index.html</a> (check for the latest version)</li>
<li><strong>RDK X5 OpenExplore Product Release and Resources:</strong>
<a href="https://developer.d-robotics.cc/forumDetail/251934919646096384" target="_blank" rel="noopener noreferrer">https://developer.d-robotics.cc/forumDetail/251934919646096384</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q6-the-algorithm-toolchain-docker-image-is-based-on-ubuntu-2004-will-this-affect-running-the-generated-models-bin-or-hbm-on-rdk-boards-with-ubuntu-2204">Q6: The algorithm toolchain Docker image is based on Ubuntu 20.04. Will this affect running the generated models (.bin or .hbm) on RDK boards with Ubuntu 22.04?<a href="#q6-the-algorithm-toolchain-docker-image-is-based-on-ubuntu-2004-will-this-affect-running-the-generated-models-bin-or-hbm-on-rdk-boards-with-ubuntu-2204" class="hash-link" aria-label="Direct link to Q6: The algorithm toolchain Docker image is based on Ubuntu 20.04. Will this affect running the generated models (.bin or .hbm) on RDK boards with Ubuntu 22.04?" title="Direct link to Q6: The algorithm toolchain Docker image is based on Ubuntu 20.04. Will this affect running the generated models (.bin or .hbm) on RDK boards with Ubuntu 22.04?">​</a></h3>
<p><strong>A:</strong> <strong>No, it will not affect it.</strong>
The Horizon OpenExplorer algorithm toolchain Docker image is mainly for providing an isolated environment with all necessary conversion tools and dependencies. The generated model files (e.g., <code>.bin</code> for PTQ, <code>.hbm</code> for QAT) are binary instructions and weights for the specific BPU architecture on the RDK board. These files are decoupled from the Ubuntu version on the board, as long as the runtime libraries (e.g., <code>libdnn.so</code>) on the board are compatible with the toolchain version used for conversion.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q7-how-do-i-deploy-yolo-series-models-eg-yolov5-yolov8-yolov10-on-the-rdk-platform">Q7: How do I deploy YOLO series models (e.g., YOLOv5, YOLOv8, YOLOv10) on the RDK platform?<a href="#q7-how-do-i-deploy-yolo-series-models-eg-yolov5-yolov8-yolov10-on-the-rdk-platform" class="hash-link" aria-label="Direct link to Q7: How do I deploy YOLO series models (e.g., YOLOv5, YOLOv8, YOLOv10) on the RDK platform?" title="Direct link to Q7: How do I deploy YOLO series models (e.g., YOLOv5, YOLOv8, YOLOv10) on the RDK platform?">​</a></h3>
<p><strong>A:</strong> Horizon provides comprehensive tutorials and examples for deploying YOLO series models on the RDK platform.</p>
<ul>
<li>
<p><strong>YOLOv5 on RDK X3:</strong></p>
<ul>
<li><strong>Full deployment tutorial:</strong> <a href="https://developer.d-robotics.cc/forumDetail/198686198578007656" target="_blank" rel="noopener noreferrer">YOLOv5 Full Deployment on RDK X3</a></li>
<li><strong>YOLOv5s v2.0 training and conversion:</strong> For YOLOv5s tag 2.0, refer to the official toolchain getting started guide and this blog for training and conversion: <a href="https://developer.d-robotics.cc/forumDetail/163807123501918330" target="_blank" rel="noopener noreferrer">YOLOv5s v2.0 Training and Conversion Blog</a></li>
<li><strong>Higher version YOLOv5 output layer modification:</strong> For higher versions (v5.0, v6.0, v7.0, etc.), you may need to modify the output layer to fit RDK BPU post-processing requirements. See: <a href="https://developer.d-robotics.cc/forumDetail/177840589839214598" target="_blank" rel="noopener noreferrer">YOLOv5 Output Layer Modification Guide</a></li>
<li><strong>Board-side post-processing note:</strong> The post-processing in <code>/app/pydev_demo/07_yolov5_sample</code> may be directly copied from a specific training code version and is mainly for algorithm verification. For optimized deployment, refer to the RDK Model Zoo.</li>
<li><strong>Real-time video detection (TROS deployment, 30fps):</strong> <a href="https://developer.d-robotics.cc/forumDetail/198685796998563332" target="_blank" rel="noopener noreferrer">Deploy YOLOv5 with TROS at 30fps</a></li>
</ul>
</li>
<li>
<p><strong>YOLOv8 on RDK X3:</strong></p>
<ul>
<li><strong>Python multi-process 30fps reference:</strong> <a href="https://blog.csdn.net/SA2672873269/article/details/139780749" target="_blank" rel="noopener noreferrer">CSDN Blog - YOLOv8 RDK X3 Deployment</a></li>
</ul>
</li>
<li>
<p><strong>YOLOv10 on Bayes architecture platforms (RDK X5/Ultra):</strong></p>
<ul>
<li><strong>Python multi-thread 30fps reference:</strong> <a href="https://blog.csdn.net/SA2672873269/article/details/139224272" target="_blank" rel="noopener noreferrer">CSDN Blog - YOLOv10 Bayes Platform Deployment</a></li>
</ul>
</li>
<li>
<p><strong>General resource:</strong> Strongly recommended to check the <strong>RDK Model Zoo</strong> (<a href="https://github.com/D-Robotics/rdk_model_zoo" target="_blank" rel="noopener noreferrer">https://github.com/D-Robotics/rdk_model_zoo</a>), which contains official deployment examples, preprocessing/post-processing code, and optimization tips for various YOLO versions and other mainstream models.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q8-when-deploying-yolov5-i-get-an-error-like-cant-reshape-xxx-in-8484385-how-do-i-fix-this">Q8: When deploying YOLOv5, I get an error like <code>can&#x27;t reshape xxx in (84,84,3,85)</code>. How do I fix this?<a href="#q8-when-deploying-yolov5-i-get-an-error-like-cant-reshape-xxx-in-8484385-how-do-i-fix-this" class="hash-link" aria-label="Direct link to q8-when-deploying-yolov5-i-get-an-error-like-cant-reshape-xxx-in-8484385-how-do-i-fix-this" title="Direct link to q8-when-deploying-yolov5-i-get-an-error-like-cant-reshape-xxx-in-8484385-how-do-i-fix-this">​</a></h3>
<p><strong>A:</strong> This error is usually caused by a mismatch between the <strong>number of classes (num_classes)</strong> preset in the post-processing code and the actual number of classes in your trained/exported model.
For example, <code>85</code> typically means <code>(x, y, w, h, confidence + num_classes)</code>. For COCO (80 classes), <code>num_classes</code> is 80, so <code>5 + 80 = 85</code>. If your model is trained for 10 classes, it should be <code>5 + 10 = 15</code>.</p>
<ul>
<li><strong>Solution:</strong> Locate the YOLOv5 post-processing code (usually a Python script) and modify the class number parameter to match your model.</li>
<li><strong>Reference:</strong> The <a href="https://developer.d-robotics.cc/forumDetail/163807123501918330" target="_blank" rel="noopener noreferrer">YOLOv5s v2.0 Training and Conversion Blog</a> may also contain relevant instructions.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q9-when-deploying-yolov5-i-get-a-large-number-of-irregular-detection-boxes-why">Q9: When deploying YOLOv5, I get a large number of irregular detection boxes. Why?<a href="#q9-when-deploying-yolov5-i-get-a-large-number-of-irregular-detection-boxes-why" class="hash-link" aria-label="Direct link to Q9: When deploying YOLOv5, I get a large number of irregular detection boxes. Why?" title="Direct link to Q9: When deploying YOLOv5, I get a large number of irregular detection boxes. Why?">​</a></h3>
<p><strong>A:</strong> This is usually due to a mismatch between the ONNX model&#x27;s output head structure and the board-side post-processing code.</p>
<ul>
<li><strong>Possible cause 1: Output head not modified as required by BPU.</strong>
<ul>
<li>Higher versions of YOLOv5 may export ONNX models with decoded detection heads or without separating the three feature maps.</li>
<li>RDK BPU deployment usually requires the ONNX model to output raw feature maps, with the three feature maps as separate output nodes.</li>
<li><strong>Example images (top: incorrect, bottom: partially correct but still needs adjustment):</strong>
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/08_FAQ/image/AI_toolchain/3.png" alt="YOLOv5 incorrect output head example" class="img_ev3q">
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/08_FAQ/image/AI_toolchain/4.jfif" alt="YOLOv5 incorrect output head example" class="img_ev3q">
<em>Top: feature maps not separated, includes decoding. Bottom: feature maps separated, but may have unnecessary Sigmoid or missing NHWC conversion.</em></li>
</ul>
</li>
<li><strong>Solution:</strong>
<ul>
<li>Modify the YOLOv5 export script (usually <code>models/yolo.py</code>) to:<!-- -->
<ol>
<li>Remove detection heads (decoding layers, NMS, etc.).</li>
<li>Output the three feature maps (P3, P4, P5 or equivalent) as separate output nodes.</li>
<li>Ensure output dimension order matches toolchain requirements (e.g., sometimes convert NCHW to NHWC).</li>
<li>Do not add unnecessary activation functions (e.g., Sigmoid) unless required by post-processing.</li>
</ol>
</li>
<li><strong>Reference:</strong> <a href="https://developer.d-robotics.cc/forumDetail/177840589839214598" target="_blank" rel="noopener noreferrer">YOLOv5 Output Layer Modification Guide</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q10-when-deploying-yolov5-detection-boxes-appear-in-a-periodic-pattern-why">Q10: When deploying YOLOv5, detection boxes appear in a periodic pattern. Why?<a href="#q10-when-deploying-yolov5-detection-boxes-appear-in-a-periodic-pattern-why" class="hash-link" aria-label="Direct link to Q10: When deploying YOLOv5, detection boxes appear in a periodic pattern. Why?" title="Direct link to Q10: When deploying YOLOv5, detection boxes appear in a periodic pattern. Why?">​</a></h3>
<p><strong>A:</strong></p>
<ul>
<li><strong>Possible cause: Output dimensions do not match post-processing.</strong>
<ul>
<li>If your YOLOv5 model outputs 5D tensors (e.g., <code>[batch, num_anchors, grid_h, grid_w, (x,y,w,h,conf+classes)]</code> or <code>[batch, num_anchors*(5+num_classes), grid_h, grid_w]</code>), the BPU toolchain may misinterpret dimensions, resulting in periodic detection boxes.</li>
<li><strong>Example image:</strong>
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/08_FAQ/image/AI_toolchain/5.png" alt="YOLOv5 periodic detection box example" class="img_ev3q"></li>
</ul>
</li>
<li><strong>Solution:</strong>
<ul>
<li>When exporting the ONNX model, convert outputs to explicit 4D tensors (e.g., NHWC: <code>[batch, grid_h, grid_w, num_anchors*(5+num_classes)]</code>), and ensure post-processing matches this format.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q11-when-deploying-yolov5-detection-boxes-are-offset-from-their-correct-positions-why">Q11: When deploying YOLOv5, detection boxes are offset from their correct positions. Why?<a href="#q11-when-deploying-yolov5-detection-boxes-are-offset-from-their-correct-positions-why" class="hash-link" aria-label="Direct link to Q11: When deploying YOLOv5, detection boxes are offset from their correct positions. Why?" title="Direct link to Q11: When deploying YOLOv5, detection boxes are offset from their correct positions. Why?">​</a></h3>
<p><strong>A:</strong></p>
<ol>
<li><strong>Mismatch between rendering size and original image size:</strong></li>
</ol>
<ul>
<li>Detection box coordinates are relative to the model input size (e.g., 640x640). If you render these coordinates on an image of a different size without scaling, boxes will be offset.</li>
<li><strong>Solution:</strong> Scale coordinates back to the original image size before rendering. If padding was used, remove its effect.</li>
</ul>
<ol start="2">
<li><strong>Anchors mismatch:</strong></li>
</ol>
<ul>
<li>YOLOv5 decoding depends on preset anchors. If anchors used in post-processing differ from those used in training, box positions and sizes will be incorrect.</li>
<li><strong>Solution:</strong> Ensure anchors in post-processing exactly match those used during training.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q12-when-deploying-yolov5-all-detection-boxes-cluster-in-the-top-left-corner-why">Q12: When deploying YOLOv5, all detection boxes cluster in the top-left corner. Why?<a href="#q12-when-deploying-yolov5-all-detection-boxes-cluster-in-the-top-left-corner-why" class="hash-link" aria-label="Direct link to Q12: When deploying YOLOv5, all detection boxes cluster in the top-left corner. Why?" title="Direct link to Q12: When deploying YOLOv5, all detection boxes cluster in the top-left corner. Why?">​</a></h3>
<p><strong>A:</strong></p>
<ul>
<li><strong>Possible cause: Parameter passing issue in post-processing library (in some system versions).</strong>
<ul>
<li>In RDK OS 3.0.0 and above, <code>/app/pydev_demo/07_yolov5_sample</code> may use a CPython-wrapped post-processing library. If key parameters (e.g., class number) are not correctly passed, decoding fails and boxes cluster in the top-left.</li>
<li><strong>Example image:</strong>
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/08_FAQ/image/AI_toolchain/7.png" alt="YOLOv5 detection boxes cluster top-left" class="img_ev3q"></li>
</ul>
</li>
<li><strong>Solution:</strong>
<ul>
<li><strong>Recommended:</strong> Use post-processing from the <strong>RDK Model Zoo</strong> (<a href="https://github.com/D-Robotics/rdk_model_zoo" target="_blank" rel="noopener noreferrer">https://github.com/D-Robotics/rdk_model_zoo</a>), which is robust and optimized.</li>
<li><strong>If using onboard samples:</strong> Carefully check that all necessary parameters (class number, input resolution, anchors, thresholds, etc.) are correctly configured and passed.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q13-when-running-apppydev_demo07_yolov5_sample-with-my-own-model-i-get-a-segmentation-fault-what-should-i-do">Q13: When running <code>/app/pydev_demo/07_yolov5_sample</code> with my own model, I get a <code>Segmentation fault</code>. What should I do?<a href="#q13-when-running-apppydev_demo07_yolov5_sample-with-my-own-model-i-get-a-segmentation-fault-what-should-i-do" class="hash-link" aria-label="Direct link to q13-when-running-apppydev_demo07_yolov5_sample-with-my-own-model-i-get-a-segmentation-fault-what-should-i-do" title="Direct link to q13-when-running-apppydev_demo07_yolov5_sample-with-my-own-model-i-get-a-segmentation-fault-what-should-i-do">​</a></h3>
<p><strong>A:</strong></p>
<ul>
<li><strong>Reason:</strong> The onboard sample programs (like <code>07_yolov5_sample</code>) are designed for the included <code>.bin</code> model, with preprocessing, inference, and post-processing tailored for it.</li>
<li>If you replace the <code>.bin</code> file with your own model without updating the code accordingly, data format mismatches or memory errors can cause segmentation faults.</li>
<li><strong>Solution:</strong>
<ol>
<li><strong>Do not expect to run by simply replacing the bin file:</strong> For your own model, you must write or adapt the full inference pipeline (preprocessing, inference, post-processing).</li>
<li><strong>Refer to the RDK Model Zoo:</strong> For YOLOv5 and similar models, use the deployment examples in the <strong>RDK Model Zoo</strong> (<a href="https://github.com/D-Robotics/rdk_model_zoo" target="_blank" rel="noopener noreferrer">https://github.com/D-Robotics/rdk_model_zoo</a>).</li>
<li><strong>Understand post-processing:</strong> Study YOLOv5 post-processing (anchors decoding, confidence filtering, NMS, etc.) and ensure your code matches your model&#x27;s output format.</li>
</ol>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q14-if-the-model-inference-produces-no-results-or-results-are-far-from-expected-how-should-i-troubleshoot-pipeline-checklist">Q14: If the model inference produces no results or results are far from expected, how should I troubleshoot (pipeline checklist)?<a href="#q14-if-the-model-inference-produces-no-results-or-results-are-far-from-expected-how-should-i-troubleshoot-pipeline-checklist" class="hash-link" aria-label="Direct link to Q14: If the model inference produces no results or results are far from expected, how should I troubleshoot (pipeline checklist)?" title="Direct link to Q14: If the model inference produces no results or results are far from expected, how should I troubleshoot (pipeline checklist)?">​</a></h3>
<p><strong>A:</strong>
When model deployment yields poor or no results, systematically check the entire inference pipeline:</p>
<ol>
<li><strong>Preprocessing check:</strong></li>
</ol>
<ul>
<li><strong>Consistency with training:</strong> Ensure deployment preprocessing (resize, normalization, mean/std, color space, padding, etc.) matches training exactly.</li>
<li><strong>Visualize preprocessed data:</strong> Save and compare preprocessed images or arrays with training data.</li>
<li><strong>Toolchain <code>yaml</code> config:</strong> Ensure preprocessing parameters in the toolchain&#x27;s <code>yaml</code> file correctly &quot;cancel out&quot; any preprocessing done before calibration data is fed in, so the toolchain sees data matching the model&#x27;s first layer input distribution.</li>
</ul>
<ol start="2">
<li><strong>Model conversion check:</strong></li>
</ol>
<ul>
<li><strong>Toolchain version:</strong> Use the latest recommended toolchain.</li>
<li><strong><code>yaml</code> config:</strong> Double-check all parameters (input/output node names, data types, layouts, model type, BPU architecture, etc.).</li>
<li><strong>Calibration dataset (PTQ):</strong>
<ul>
<li>Calibration data quality and representativeness are critical for PTQ accuracy.</li>
<li>Preprocessing for calibration data must match deployment (or be &quot;inverse-preprocessed&quot; as needed).</li>
</ul>
</li>
<li><strong>Quantization-sensitive layer analysis:</strong> If PTQ accuracy drops, use toolchain analysis tools to identify sensitive layers and try mixed-precision or QAT.</li>
<li><strong>Conversion logs:</strong> Carefully review all logs for errors, warnings, or hints.</li>
</ul>
<ol start="3">
<li><strong>BPU inference and board runtime check:</strong></li>
</ol>
<ul>
<li><strong>Input data preparation:</strong> Ensure input data matches the model&#x27;s expected format (layout, type, shape).</li>
<li><strong>Memory management:</strong> Check buffer allocation and copying for correctness.</li>
<li><strong>Runtime version:</strong> Ensure board-side runtime libraries match the toolchain version.</li>
<li><strong>API calls:</strong> Verify correct API usage and parameter settings.</li>
</ul>
<ol start="4">
<li><strong>Post-processing check:</strong></li>
</ol>
<ul>
<li><strong>Match model output:</strong> Ensure post-processing logic matches the output node format, dimensions, and meaning.</li>
<li><strong>Parameter consistency:</strong> All parameters (anchors, class number, thresholds, etc.) must match training.</li>
<li><strong>Coordinate mapping:</strong> Map output coordinates back to the original image as needed.</li>
<li><strong>Logic errors:</strong> Check for bugs in post-processing code.</li>
</ul>
<ol start="5">
<li><strong>End-to-end validation:</strong></li>
</ol>
<ul>
<li><strong>Use known inputs/outputs:</strong> Test with samples where you know the correct results.</li>
<li><strong>Module-by-module validation:</strong> If possible, validate each pipeline module separately.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q15-how-can-i-obtain-board-side-hrt_-performance-analysis-tools-eg-hrt_model_exec-hrt_bpu_monitor">Q15: How can I obtain board-side <code>hrt_*</code> performance analysis tools (e.g., <code>hrt_model_exec</code>, <code>hrt_bpu_monitor</code>)?<a href="#q15-how-can-i-obtain-board-side-hrt_-performance-analysis-tools-eg-hrt_model_exec-hrt_bpu_monitor" class="hash-link" aria-label="Direct link to q15-how-can-i-obtain-board-side-hrt_-performance-analysis-tools-eg-hrt_model_exec-hrt_bpu_monitor" title="Direct link to q15-how-can-i-obtain-board-side-hrt_-performance-analysis-tools-eg-hrt_model_exec-hrt_bpu_monitor">​</a></h3>
<p><strong>A:</strong> The Horizon RDK system image or toolchain/SDK packages usually include command-line tools for model execution, performance analysis, and debugging, typically prefixed with <code>hrt_</code> (Horizon Robotics Tool).</p>
<ul>
<li><strong>Where to find:</strong>
<ul>
<li>These tools may be pre-installed in <code>/usr/bin</code> or <code>/opt/hobot/bin</code> on the RDK system.</li>
<li>They may also be included in the toolchain package (e.g., <code>ddk/package/board/&lt;target_os&gt;/bin/</code>), and you may need to copy them to the board or run them with their full path.</li>
</ul>
</li>
<li><strong>Official resource post:</strong> The developer community often provides posts or docs on obtaining and using these tools, e.g.:
<a href="https://developer.d-robotics.cc/forumDetail/228559182180396599" target="_blank" rel="noopener noreferrer">Board-side hrt_* Tool Download and Usage Guide</a> (check for latest validity)</li>
<li><strong>Common tools:</strong>
<ul>
<li><code>hrt_model_exec</code>: For running <code>.bin</code> models on the board for inference and performance testing.</li>
<li><code>hrt_bpu_monitor</code> (or <code>hrut_somstatus</code>, or performance printouts in <code>bpu_predict_xN_sample</code>): For monitoring BPU usage, frequency, temperature, etc.</li>
<li>Other specific debugging tools.</li>
</ul>
</li>
</ul>
<p>Refer to the latest RDK documentation or community resources for accurate information and download links.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="model_convert_errors_and_solutions">Model quantization errors and solutions <code>\</code><a href="#model_convert_errors_and_solutions" class="hash-link" aria-label="Direct link to model_convert_errors_and_solutions" title="Direct link to model_convert_errors_and_solutions">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hb_mapper-checker-01_checksh-model-validation-error">hb_mapper checker (01_check.sh) Model Validation Error<a href="#hb_mapper-checker-01_checksh-model-validation-error" class="hash-link" aria-label="Direct link to hb_mapper checker (01_check.sh) Model Validation Error" title="Direct link to hb_mapper checker (01_check.sh) Model Validation Error">​</a></h4>
<font color="Blue">【Issue】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR The shape of model input:input is [xxx] which has dimensions of 0. Please specify input-shape parameter.</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error occurs when the model input has a dynamic shape. To resolve it, you can specify the input shape using the <code>--input-shape input_name input_shape</code> parameter.</li>
</ul>
<font color="Blue">【Issue】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR HorizonRT does not support these CPU operators: {op_type}</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error happens when the CPU operator being used is unsupported by HorizonRT. To address this, check the list of supported operators provided and replace the unsupported one. If the unsupported operator is crucial to your model, contact HorizonRT for development evaluation.</li>
</ul>
<font color="Blue">【Issue】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Unsupported op {op_type}</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error results from using an unsupported BPU operator in your model. If the model&#x27;s overall performance meets your requirements, you can ignore this log. However, if performance expectations are not met, consider replacing the unsupported operator with a supported one from the provided operator list.</li>
</ul>
<font color="Blue">【Issue】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR nodes:[&#x27;{op_type}&#x27;] are specified as domain:xxx, which are not supported by official ONNX. Please check whether these ops are official ONNX ops or defined by yourself </span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>The reason for this error could be that the custom operator used is not supported by D-Robotics. To resolve it, you can either replace the operator with one listed in our supported operator list or develop and register a custom CPU operator.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="error-in-hb_mapper-makertbin-03_buildsh-model-conversion">Error in hb_mapper makertbin (03_build.sh) Model Conversion<a href="#error-in-hb_mapper-makertbin-03_buildsh-model-conversion" class="hash-link" aria-label="Direct link to Error in hb_mapper makertbin (03_build.sh) Model Conversion" title="Direct link to Error in hb_mapper makertbin (03_build.sh) Model Conversion">​</a></h4>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Layer {op_name}  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expects data shape within [[xxx][xxx]], but received [xxx]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Layer {op_name}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Expected tensor xxx to have n dimensions, but found m</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error might occur if the <code>{op_name}</code> operator is falling back to CPU computation due to unsupported dimensions. If the performance loss from using CPU is acceptable, you can ignore this message. However, if performance is a concern, review the operator support list and modify the op to a BPU-supported configuration.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">INFO: Layer {op_name} will be executed on CPU</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error indicates that <code>{op_name}</code> operator is being computed on CPU because its shape (CxHxW) exceeds the limit of 8192. If only a few operators are affected and the overall model performance meets expectations, there&#x27;s no need to worry. However, if performance is unsatisfactory, consider examining the operator support list for alternatives without shape limitations on BPU.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR There is an error in pass: {op_name}. Error message:xxx</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error might stem from an optimization failure of the <code>{op_name}</code> operator. To address this issue, please gather your model and .log files and provide them to D-Robotics technical support for analysis and resolution.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Error There is an error in pass:constant_folding. Error message: Could not find an implementation for the node {op_name}</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<p>This error typically occurs when ONNX Runtime encounters an operator (<code>op_name</code>) that it does not have a built-in implementation for. It might be a custom or unsupported operator in the current version of ORT. To resolve this issue, you should verify if the specific operator is supported by checking the ORT operator list. If it&#x27;s a core operator, consider contacting D-Robotics for development assessment or seeking an alternative implementation.</p>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">WARNING input shape [xxx] has length: n  ERROR list index out of range</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<p>This warning indicates that the input shape provided to the model is not compatible with its requirements, as it expects a four-dimensional shape (e.g., HxW for a 2D image), but received a shape with length <code>n</code> which is not recognized as a standard format. To fix this, ensure your input data is reshaped into a 4D tensor (e.g., change <code>xxx</code> to <code>1x1xHxW</code>).</p>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Start to parse the onnx model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">core dump</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<p>This error suggests that there was a failure during the parsing of the ONNX model. It could be due to missing or invalid information, such as naming issues with output or input nodes. Ensure that the exported ONNX model is properly formatted and that all necessary nodes have unique names. If the problem persists, check the model file for any syntax errors and consult the ONNX documentation.</p>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Start to calibrate/quantize the model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">core dump</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Start to compile the model </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">core dump</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error may occur because of a model quantization/compilation failure. In response to this error, please collect the model and.log file and provide it to D-Robotics technicians for analysis.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR model conversion faild: Inferred shape and existing shape differ in dimension x: (n) vs (m)</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error may occur because the input shape of the onnx model is illegal, or because the tool optimization pass is incorrect. In response to this error, please ensure that the onnx model is valid, and if the onnx model can be reasoned, please provide the model to D-Robotics technicians for analysis and processing.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">WARNING got unexpected input/output/sumin threshold on conv {op_name}! value: xxx</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error may occur because of incorrect data preprocessing, or because the weight value of the node is too small/too large. In response to this error, 1. Please check whether the data preprocessing is incorrect; 2. We recommend that you use BN operator to optimize data distribution.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR hbdk-cc compile hbir model failed with returncode -n</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error may occur because the model failed to compile. In response to this error, please collect the model and.log file and provide it to D-Robotics technicians for analysis.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR {op_type}  only support 4 dim input</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error may occur because the toolchain does not yet support the op input dimension as non-four-dimensional. In response to this error, we recommend that you adjust the op input dimension to four dimensions.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR {op_type} Not support this attribute/mode=xxx</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error may occur because the tool chain does not yet support this property of the op. For this error, you can replace it based on the operator support list we provide or contact D-Robotics for a development evaluation.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR There is no node can execute on BPU in this model, please make sure the model has at least one conv node which is supported by BPU.</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error may occur because there are no quantifiable BPU nodes in the model. In response to this error, ensure that the onnx model is valid and that at least one conv is used in the model. If the preceding conditions are met, collect the model and.log files and provide them to D-Robotics technicians for analysis and processing.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR [ONNXRuntimeError] : 9 : NOT_IMPLEMENTED : unable to find an implementation for the node with name: {op_name}, type: {op_type}, opset version.</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error arises when the model&#x27;s opset version exceeds what the toolchain supports. To resolve this, re-export the model, ensuring that <code>opset_version</code> is set to <code>10</code> or <code>11</code>.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ERROR The opset version of the onnx model is n, only model with opset_version 10/11 is supported </span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error occurs due to an unsupported opset version in the model. To rectify the issue, re-export the model with a compatible version, specifically setting <code>opset_version</code> to <code>10</code> or <code>11</code>.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">After using run_on_bpu, the conversion fails.</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error might occur due to the unsupported usage of the <code>run_on_bpu</code> operator at the moment. <code>run_on_bpu</code> currently only supports operators like <code>Relu</code>, <code>Softmax</code>, and pooling (e.g., <code>maxpool</code>, <code>avgpool</code>) at the end of the model, as well as CPU*+Transpose combinations (where you can specify a Transpose node name to run CPU* operations on BPU). If your model meets these conditions but still encounters issues, please contact D-Robotics technical support for further analysis. If it doesn&#x27;t meet the criteria, you can request a development evaluation.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: tool limits for max output num is 32</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>The error is likely due to a limitation in the toolchain that allows a maximum of 32 model output nodes. To resolve this, ensure your model has no more than 32 output nodes.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: xxx file parse failed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: xxx does not exist in xxx.</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error may stem from incorrect environment setup. Please use the provided Docker environment for quantization.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: exception in command: makertbin.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: cannot reshape array of size xxx into shape xxx.</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>The error is likely related to a preprocessing issue. Please refer to our documentation for relevant information on data preprocessing.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: load cal data for input xxx error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: cannot reshape array of size xxx into shape xxx</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error could be due to an incompatible toolchain version. Ensure you are using the corresponding SDK toolchain version provided.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR [ONNXRuntimeError] : 1 : FAIL : Non-zero status code returned while running HzCalibration node.Name:&#x27;xxx&#x27;Status Message :CUDA error cudaErrorNoKernelImageForDevice:no kernel image is available for execution on the device</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>The error might indicate a Docker loading issue. Try using the nvidia-docker loading command when loading Docker.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[ONNXRuntimeError] : 10 : INVALID_GRAPH : Load model from xxx.onnx failed:This is an invalid model. In Node, (&quot;xxx&quot;, HzSQuantizedPreprocess, &quot;&quot;, -1) : (&quot;images&quot;: tensor(int8),&quot;xxx&quot;: tensor(int8),&quot;xxx&quot;: tensor(int32),&quot;xxx&quot;: tensor(int8),) -&gt; (&quot;xxx&quot;: tensor(int8),) , Error No Op registered for HzSQuantizedPreprocess with domain_version of 11</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error suggests a mismatch between ONNX versions. Re-export your ONNX model with the opset version 10 and use OpenCV for preprocessing.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[E:onnxruntime:, sequential_executor.cc:183 Execute] Non-zero status code returned while running Resize node. Name:&#x27;xxx&#x27; Status Message: upsample.h:299 void onnxruntime::UpsampleBase::ScalesValidation(const std::vector&lt;float&gt;&amp;, onnxruntime::UpsampleMode) const scales.size() == 2 || (scales.size() == 4 &amp;&amp; scales[0] == 1 &amp;&amp; scales[1] == 1) was false. &#x27;Linear&#x27; mode and &#x27;Cubic&#x27; mode only support 2-D inputs (&#x27;Bilinear&#x27;, &#x27;Bicubic&#x27;) or 4-D inputs with the corresponding outermost 2 scale values being 1 in the Resize operator</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>The error is possibly related to ONNXRuntime&#x27;s internal logic. Since the model contains reshape operations, batch calibration is not possible, and it can only handle images individually. This should not affect the final results.</li>
</ul>
<font color="Blue">【Question】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: No guantifiable nodes were found, and the model is not supported</span><br></span></code></pre></div></div>
<font color="Green">【Answer】</font>
<ul>
<li>This error occurs when no quantifiable nodes are found in the model structure, indicating that the model is not compatible for quantization.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="algorithm-model-boarding-errors-and-solutions">Algorithm Model Boarding Errors and Solutions<a href="#algorithm-model-boarding-errors-and-solutions" class="hash-link" aria-label="Direct link to Algorithm Model Boarding Errors and Solutions" title="Direct link to Algorithm Model Boarding Errors and Solutions">​</a></h3>
<font color="Blue">【Problem】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(common.h:79): HR:ERROR: op_name:xxx invalid attr key xxx</span><br></span></code></pre></div></div>
<font color="Green">【Solution】</font>
<p>This error might occur because the specified attribute key for the op is not supported by libDNN. To resolve it, you can either replace the unsupported op with a compatible one from our operator support list or contact D-Robotics for further development evaluation.</p>
<font color="Blue">【Problem】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(hb_dnn_ndarray.cpp:xxx): data type of ndarray do not match specified type. NDArray dtype_: n, given：m</span><br></span></code></pre></div></div>
<font color="Green">【Solution】</font>
<p>The error arises when the input data type does not match the required type for the operator. libDNN currently lacks support for this input type; we will gradually enforce operator constraints during the model conversion phase. To fix, check our operator support list and consider replacing or contacting D-Robotics for development assessment.</p>
<font color="Blue">【Problem】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(validate_util.cpp:xxx): tensor aligned shape size is xxx , but tensor hbSysMem memSize is xxx, tensor hbSysMem memSize should &gt;= tensor aligned shape size!</span><br></span></code></pre></div></div>
<font color="Green">【Solution】</font>
<p>This error happens when the allocated memory for the input data is insufficient. To address this, ensure that you allocate memory usinghbDNNTensorProperties.alignedByteSize function to accommodate the required size.</p>
<font color="Blue">【Problem】</font>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(bpu_model_info.cpp:xxx): HR:ERROR: hbm model input feature names must be equal to graph node input names</span><br></span></code></pre></div></div>
<font color="Green">【Solution】</font>
<p>An error occurred because the input feature names for the HBM model must match the node input names in the graph. Make sure to verify and align the input names accordingly.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="model-quantization-and-board-usage-tips">Model Quantization and Board Usage Tips<a href="#model-quantization-and-board-usage-tips" class="hash-link" aria-label="Direct link to Model Quantization and Board Usage Tips" title="Direct link to Model Quantization and Board Usage Tips">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="transformer-usage-guide">Transformer Usage Guide<a href="#transformer-usage-guide" class="hash-link" aria-label="Direct link to Transformer Usage Guide" title="Direct link to Transformer Usage Guide">​</a></h4>
<p>This section will provide explanations of various transformers and their parameters, along with usage examples to assist you in working with transformers.</p>
<p>Before diving into the content, please note:</p>
<ul>
<li>The image data is in <strong>three-dimensional format</strong>; however, D-Robotics&#x27;s transformers operate on <strong>four-dimensional</strong> data. Transformers only apply operations to the <strong>first channel</strong> of input images.</li>
</ul>
<p><strong>AddTransformer</strong></p>
<p><strong>Explanation</strong>:
Performs an addition operation on all pixel values in the input image. This transformer converts the output data format to float32.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>value: The value to add to each pixel, which can be negative, like -128.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Subtract 128 from image data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AddTransformer(-128)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Add 127 to image data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AddTransformer(127)</span><br></span></code></pre></div></div>
<p><strong>MeanTransformer</strong></p>
<p><strong>Explanation</strong>:
Subtracts the mean_value from all pixel values in the input image.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>means: The value to subtract from each pixel, which can be negative, like -128.</li>
<li>data_format: Input layout type, can be either &quot;CHW&quot; or &quot;HWC&quot;, default is &quot;CHW&quot;.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Subtract 128.0 from each pixel (CHW format)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  MeanTransformer(np.array([128.0, 128.0, 128.0]))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Subtract different values for each channel (HWC format)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  MeanTransformer(np.array([103.94, 116.78, 123.68]), data_format=&quot;HWC&quot;)</span><br></span></code></pre></div></div>
<p><strong>ScaleTransformer</strong></p>
<p><strong>Explanation</strong>:
Multiplies all pixel values in the input image by the scale_value.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>scale_value: The coefficient to multiply by, such as 0.0078125 or 1/128.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Adjust pixel range from -128 to 127 to -1 to 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ScaleTransformer(0.0078125)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ScaleTransformer(1/128)</span><br></span></code></pre></div></div>
<p><strong>NormalizeTransformer</strong></p>
<p><strong>Explanation</strong>:
Normalizes the input image by performing a scaling operation. The transformer converts the output data format to float32.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>std: The value to divide each pixel by, typically the standard deviation of the first image.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Normalize pixel range [-128, 127] to -1 to 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NormalizeTransformer(128)</span><br></span></code></pre></div></div>
<p><strong>TransposeTransformer</strong></p>
<p><strong>Explanation</strong>:
Performs a layout transformation on the input image.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>order: The new order of dimensions after the transformation (related to the original layout). For example, for HWC, the order would be (2, 0, 1) to convert to CHW.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Convert HWC to CHW</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TransposeTransformer((2, 0, 1))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Convert CHW to HWC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TransposeTransformer((1, 2, 0))</span><br></span></code></pre></div></div>
<p><strong>HWC2CHWTransformer</strong></p>
<p><strong>Explanation</strong>:
Transforms input from NHWC to NCHW layout.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>None.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Convert NHWC to NCHW</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HWC2CHWTransformer()</span><br></span></code></pre></div></div>
<p><strong>CHW2HWCTransformer</strong></p>
<p><strong>Explanation</strong>:
Transforms input from NCHW to NHWC layout.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>None.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Convert NCHW to NHWC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CHW2HWCTransformer()</span><br></span></code></pre></div></div>
<p><strong>CenterCropTransformer</strong></p>
<p><strong>Explanation</strong>:
Crops a square image from the center of the input image. The transformer converts the output data format to float32, and uint8 if <code>data_type</code> is set to uint8.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>crop_size: The side length of the square to crop.</li>
<li>data_type: Output data type, can be &quot;float&quot; or &quot;uint8&quot;.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Crop a 224x224 center, default float32 output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CenterCropTransformer(crop_size=224)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Crop a 224x224 center, output as uint8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CenterCropTransformer(crop_size=224, data_type=&quot;uint8&quot;)</span><br></span></code></pre></div></div>
<p><strong>PILCenterCropTransformer</strong></p>
<p><strong>Explanation</strong>:
Uses PIL to crop a square image from the center of the input.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>size: The side length of the square to crop.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Crop a 224x224 center using PIL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PILCenterCropTransformer(size=224)</span><br></span></code></pre></div></div>
<p><strong>LongSideCropTransformer</strong></p>
<p><strong>Explanation</strong>:
Crops the longest edge of the input image while maintaining aspect ratio. The transformer converts the output data format to float32.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>None.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  LongSideCropTransformer()</span><br></span></code></pre></div></div>
<p><strong>PadResizeTransformer</strong></p>
<p><strong>Explanation</strong>:
Enlarges the image by padding and resizing. The transformer converts the output data format to float32.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>target_size: Target size as a tuple, e.g., (240, 240).</li>
<li>pad_value: Value to pad the array with, default is 127.</li>
<li>pad_position: Padding position, can be &quot;boundary&quot; or &quot;bottom_right&quot;, default is &quot;boundary&quot;.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Resize to 512x512, pad to bottom-right corner, pad value is 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PadResizeTransformer((512, 512), pad_position=&#x27;bottom_right&#x27;, pad_value=0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Resize to 608x608, pad to edges, pad value is 127</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PadResizeTransformer(target_size=(608, 608))</span><br></span></code></pre></div></div>
<p><strong>ResizeTransformer</strong></p>
<p><strong>Explanation</strong>:
Resizes the image to the specified target size.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>target_size: Target size as a tuple, e.g., (240, 240).</li>
<li>mode: Image processing mode, can be &quot;skimage&quot; or &quot;opencv&quot;, default is &quot;skimage&quot;.</li>
<li>method: Interpolation method, only used when mode is &quot;skimage&quot;. Range is 0-5, default is 1 (bicubic).</li>
<li>data_type: Output data type, can be uint8 or float, default is float.</li>
<li>interpolation: Interpolation method, only used when mode is &quot;opencv&quot;. Can be empty (default INTER_LINEAR) or one of OpenCV&#x27;s interpolation methods.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Resize to 224x224, using opencv with bilinear interpolation, float32 output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ResizeTransformer(target_size=(224, 224), mode=&#x27;opencv&#x27;, method=1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Resize to 256x256, using skimage with bilinear interpolation, float32 output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ResizeTransformer(target_size=(256, 256))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Resize to 256x256, using skimage with bilinear interpolation, uint8 output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ResizeTransformer(target_size=(256, 256), data_type=&quot;uint8&quot;)</span><br></span></code></pre></div></div>
<p><strong>PILResizeTransformer</strong></p>
<p><strong>Explanation</strong>:
Resizes the image using the PIL library.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>size: Target size as a tuple, e.g., (240, 240).</li>
<li>interpolation: PIL interpolation method, options include Image.NEAREST, Image.BILINEAR, Image.BICUBIC, Image.LANCZOS, default is Image.BILINEAR.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Resize the input image to the specified size using PIL</span><br></span></code></pre></div></div>
<p><strong>LinearResizeTransformer</strong></p>
<p><strong>Description</strong>:</p>
<p>Resize the input image to a size of 256x256 using linear interpolation.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PILResizeTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">256</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>ShortLongResizeTransformer</strong></p>
<p><strong>Explanation</strong>:</p>
<p>Performs resizing based on the original aspect ratio, with output dimensions determined by provided parameters. The process involves:</p>
<ol>
<li>Scaling by a factor calculated as <code>short_size</code> divided by the smaller dimension of the original image.</li>
<li>If the scaled maximum dimension exceeds <code>long_size</code>, the scaling factor adjusts to <code>long_size</code> divided by the larger original dimension.</li>
<li>Uses OpenCV&#x27;s <code>resize</code> method with the calculated scale factor to crop the image.</li>
</ol>
<p><strong>Parameters</strong>:</p>
<ul>
<li>short_size: Target length for the shorter side.</li>
<li>long_size: Target length for the longer side.</li>
<li>include_im: Default True, if True, returns both processed image and the original.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ShortLongResizeTransformer(short_size=20, long_size=100)</span><br></span></code></pre></div></div>
<p><strong>PadTransformer</strong></p>
<p><strong>Description</strong>:</p>
<p>Resize the image by padding to the desired target size using a scaling factor based on the original dimensions and a divisor.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>size_divisor: Division factor, default 128.</li>
<li>target_size: Desired target size, default 512.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PadTransformer(size_divisor=1024, target_size=1024)</span><br></span></code></pre></div></div>
<p><strong>ShortSideResizeTransformer</strong></p>
<p><strong>Explanation</strong>:</p>
<p>Crops the image to the specified short side size while maintaining the aspect ratio, using either float32 or uint8 output type and a specified interpolation method.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>short_size: Expected length of the shorter side.</li>
<li>data_type: Output data type, can be &quot;float&quot; or &quot;uint8&quot;, default &quot;float32&quot;.</li>
<li>interpolation: Interpolation method, accepts OpenCV interpolation types, defaults to None (uses INTER_LINEAR).</li>
</ul>
<p><strong>Usage Examples</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Resize to 256 with bilinear interpolation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ShortSideResizeTransformer(short_size=256)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Resize to 256 with Lanczos4 interpolation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ShortSideResizeTransformer(short_size=256, interpolation=Image.LANCZOS)</span><br></span></code></pre></div></div>
<p><strong>PaddedCenterCropTransformer</strong></p>
<p><strong>Description</strong>:</p>
<p>Performs center cropping with padding, specifically designed for EfficientNet-lite models.</p>
<p><strong>Note</strong>:</p>
<p>Works only for EfficientNet-lite instances.</p>
<p><strong>Calculation Process</strong>:</p>
<ol>
<li>Calculate the coefficient as <code>int((float(image_size) / (image_size + crop_pad)))</code>.</li>
<li>Compute the center size as the coefficient times the smaller of the original height and width.</li>
<li>Crop the image centered around the calculated size.</li>
</ol>
<p><strong>Parameters</strong>:</p>
<ul>
<li>image_size: Image size, default 224.</li>
<li>crop_pad: Padding amount, default 32.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PaddedCenterCropTransformer(image_size=240, crop_pad=32)</span><br></span></code></pre></div></div>
<p><strong>BGR2RGBTransformer</strong></p>
<p><strong>Description</strong>:</p>
<p>Converts the input format from BGR to RGB.</p>
<p><strong>Parameter</strong>:</p>
<ul>
<li>data_format: Data layout, can be &quot;CHW&quot; or &quot;HWC&quot;, default &quot;CHW&quot;.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># For NCHW layout, convert BGR to RGB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2RGBTransformer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For NHWC layout, convert BGR to RGB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2RGBTransformer(data_format=&quot;HWC&quot;)</span><br></span></code></pre></div></div>
<p><strong>RGB2BGRTransformer</strong></p>
<p><strong>Description</strong>:</p>
<p>Converts the input format from RGB to BGR.</p>
<p><strong>Parameter</strong>:</p>
<ul>
<li>data_format: Data layout, can be &quot;CHW&quot; or &quot;HWC&quot;, default &quot;CHW&quot;.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># For NCHW layout, convert RGB to BGR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RGB2BGRTransformer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For NHWC layout, convert RGB to BGR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RGB2BGRTransformer(data_format=&quot;HWC&quot;)</span><br></span></code></pre></div></div>
<p><strong>RGB2GRAYTransformer</strong></p>
<p><strong>Description</strong>:</p>
<p>Converts the input format from RGB to grayscale.</p>
<p><strong>Parameter</strong>:</p>
<ul>
<li>data_format: Input layout, can be &quot;CHW&quot; or &quot;HWC&quot;, default &quot;CHW&quot;.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># For NCHW layout, convert RGB to grayscale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RGB2GRAYTransformer(data_format=&#x27;CHW&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For NHWC layout, convert RGB to grayscale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RGB2GRAYTransformer(data_format=&#x27;HWC&#x27;)</span><br></span></code></pre></div></div>
<p><strong>BGR2GRAYTransformer</strong></p>
<p><strong>Description</strong>:</p>
<p>Converts the input format from BGR to grayscale.</p>
<p><strong>Parameter</strong>:</p>
<ul>
<li>data_format: Input layout, can be &quot;CHW&quot; or &quot;HWC&quot;, default &quot;CHW&quot;.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># For NCHW layout, convert BGR to grayscale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2GRAYTransformer(data_format=&#x27;CHW&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For NHWC layout, convert BGR to grayscale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2GRAYTransformer(data_format=&#x27;HWC&#x27;)</span><br></span></code></pre></div></div>
<p><strong>RGB2GRAY_128Transformer</strong></p>
<p><strong>Description</strong>:</p>
<p>Converts the input format from RGB to grayscale with values ranging from -128 to 127.</p>
<p><strong>Parameter</strong>:</p>
<ul>
<li>data_format: Input layout, must be &quot;CHW&quot; or &quot;HWC&quot;.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># For NCHW layout, convert RGB to 128-bit grayscale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RGB2GRAY_128Transformer(data_format=&#x27;CHW&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For NHWC layout, convert RGB to 128-bit grayscale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RGB2GRAY_128Transformer(data_format=&#x27;HWC&#x27;)</span><br></span></code></pre></div></div>
<p><strong>RGB2YUV444Transformer</strong></p>
<p><strong>Description</strong>:</p>
<p>Converts the input format from RGB to YUV444.</p>
<p><strong>Parameter</strong>:</p>
<ul>
<li>data_format: Input layout, can be &quot;CHW&quot; or &quot;HWC&quot;, required.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># For NCHW layout, convert RGB to YUV444</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2YUV444Transformer(data_format=&#x27;CHW&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For NHWC layout, convert RGB to YUV444</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2YUV444Transformer(data_format=&#x27;HWC&#x27;)</span><br></span></code></pre></div></div>
<p><strong>BGR2YUV444Transformer</strong></p>
<p><strong>Description</strong>:</p>
<p>Converts the input format from BGR to YUV444.</p>
<p><strong>Parameter</strong>:</p>
<ul>
<li>data_format: Input layout, can be &quot;CHW&quot; or &quot;HWC&quot;, required.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># For NCHW layout, convert BGR to YUV444</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2YUV444Transformer(data_format=&#x27;CHW&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For NHWC layout, convert BGR to YUV444</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2YUV444Transformer(data_format=&#x27;HWC&#x27;)</span><br></span></code></pre></div></div>
<p><strong>BGR2YUV444_128Transformer</strong></p>
<p><strong>Description</strong>:</p>
<p>Converts the input format from BGR to YUV444 with values ranging from -128 to 127.</p>
<p><strong>Parameter</strong>:</p>
<ul>
<li>data_format: Input layout, must be &quot;CHW&quot; or &quot;HWC&quot;.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># For NCHW layout, convert BGR to 128-bit YUV444</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2YUV444_128Transformer(data_format=&#x27;CHW&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For NHWC layout, convert BGR to 128-bit YUV444</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2YUV444_128Transformer(data_format=&#x27;HWC&#x27;)</span><br></span></code></pre></div></div>
<p><strong>RGB2YUV444_128Transformer</strong></p>
<p><strong>Description</strong>:</p>
<p>Converts the input format from RGB to YUV444 with values ranging from -128 to 127.</p>
<p><strong>Parameter</strong>:</p>
<ul>
<li>data_format: Input layout, can be &quot;CHW&quot; or &quot;HWC&quot;.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># For NCHW layout, convert RGB to 128-bit YUV444</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RGB2YUV444_128Transformer(data_format=&#x27;CHW&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For NHWC layout, convert RGB to 128-bit YUV444</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RGB2YUV444_128Transformer(data_format=&#x27;HWC&#x27;)</span><br></span></code></pre></div></div>
<p><strong>BGR2YUVBT601VIDEOTransformer</strong></p>
<p><strong>Description</strong>:
Transforms the input format from BGR to YUV_BT601_Video_Range.</p>
<p>YUV_BT601_Video_Range: Some camera inputs are in YUV BT601 (Video Range) format with values ranging from 16 to 235. This transformer is designed for such data.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>data_format: The input layout type, can be either &quot;CHW&quot; or &quot;HWC&quot;, default is &quot;CHW&quot;. This is a required field.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># For NCHW layout, convert BGR to YUV_BT601_Video_Range</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2YUVBT601VIDEOTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_format</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;CHW&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># For NHWC layout, convert BGR to YUV_BT601_Video_Range</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2YUVBT601VIDEOTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_format</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;HWC&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>RGB2YUVBT601VIDEOTransformer</strong></p>
<p><strong>Description</strong>:
Similar to BGR2YUVBT601VIDEOTransformer but for RGB input.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>data_format: The input layout type, can be either &quot;CHW&quot; or &quot;HWC&quot;, default is &quot;CHW&quot;. This is a required field.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># For NCHW layout, convert RGB to YUV_BT601_Video_Range</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RGB2YUVBT601VIDEOTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_format</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;CHW&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># For NHWC layout, convert RGB to YUV_BT601_Video_Range</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RGB2YUVBT601VIDEOTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_format</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;HWC&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>YUVTransformer</strong></p>
<p><strong>Description</strong>:
Converts the input format to YUV444.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>color_sequence: The color sequence, a required field.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Convert an image read as BGR to YUV444</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">YUVTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">color_sequence</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;BGR&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Convert an image read as RGB to YUV444</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">YUVTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">color_sequence</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;RGB&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>ReduceChannelTransformer</strong></p>
<p><strong>Description</strong>:
Reduces the C channel to a single channel. This transformer is mainly for handling channels like converting a shape of 1<em>3</em>224<em>224 to 1</em>1<em>224</em>224. Ensure the layout matches the data_format to avoid removing the wrong channel.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>data_format: The input layout type, can be either &quot;CHW&quot; or &quot;HWC&quot;, default is &quot;CHW&quot;.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Remove the C channel for NCHW layout</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ReduceChannelTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Remove the C channel for NHWC layout</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ReduceChannelTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_format</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;HWC&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>BGR2NV12Transformer</strong></p>
<p><strong>Description</strong>:
Translates input format from BGR to NV12.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>data_format: Input layout type, can be &quot;CHW&quot; or &quot;HWC&quot;, default is &quot;CHW&quot;.</li>
<li>cvt_mode: Conversion mode, can be &quot;rgb_calc&quot; or &quot;opencv&quot;, default is &quot;rgb_calc&quot;.<!-- -->
<ul>
<li>rgb_calc: Merges UV using a custom method.</li>
<li>opencv: Uses OpenCV&#x27;s method.</li>
</ul>
</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># For NCHW layout, convert BGR to NV12 with rgb_calc mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2NV12Transformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># For NHWC layout, convert BGR to NV12 with opencv mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BGR2NV12Transformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_format</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;HWC&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cvt_mode</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;opencv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>RGB2NV12Transformer</strong></p>
<p><strong>Description</strong>:
Similar to BGR2NV12Transformer but for RGB input.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>data_format: Input layout type, can be &quot;CHW&quot; or &quot;HWC&quot;, default is &quot;CHW&quot;.</li>
<li>cvt_mode: Conversion mode, can be &quot;rgb_calc&quot; or &quot;opencv&quot;, default is &quot;rgb_calc&quot;.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># For NCHW layout, convert RGB to NV12 with rgb_calc mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RGB2NV12Transformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># For NHWC layout, convert RGB to NV12 with opencv mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RGB2NV12Transformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_format</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;HWC&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cvt_mode</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;opencv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>NV12ToYUV444Transformer</strong></p>
<p><strong>Description</strong>:
Transforms input format from NV12 to YUV444.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>target_size: The desired size as a tuple, e.g., (240, 240).</li>
<li>yuv444_output_layout: The layout for the YUV444 output, can be &quot;HWC&quot; or &quot;CHW&quot;, default is &quot;HWC&quot;.</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># For NCHW layout and input size of 768*768, convert NV12 to YUV444</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NV12ToYUV444Transformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target_size</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">768</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">768</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># For NHWC layout and input size of 224*224, convert NV12 to YUV444</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NV12ToYUV444Transformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> yuv444_output_layout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;HWC&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>WarpAffineTransformer</strong></p>
<p><strong>Description</strong>:
Performs image affine transformation.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li>
<p>input_shape: The input shape value.</p>
</li>
<li>
<p>scale: The scaling factor.</p>
</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># For an image of size 512*512, scale the longer side by 1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WarpAffineTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">512</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">512</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>F32ToS8Transformer</strong></p>
<p><strong>Description</strong>:
Converts input format from float32 to int8.</p>
<p><strong>Parameters</strong>:
No parameters.</p>
<p><strong>Usage Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Convert input from float32 to int8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">F32ToS8Transformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>F32ToU8Transformer</strong></p>
<p><strong>Description</strong>:
Converts input format from float32 to uint8.</p>
<p><strong>Parameters</strong>:
No parameters.</p>
<p><strong>Usage Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Convert input from float32 to uint8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">F32ToU8Transformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>Example usage guide for YOLOv5x model</strong></p>
<ol>
<li>
<p>YOLOv5x Model:</p>
<ul>
<li>
<p>Download the corresponding .pt file from the URL: <a href="https://github.com/ultralytics/yolov5/releases/tag/v2.0" target="_blank" rel="noopener noreferrer">yolov5-2.0</a>. Make sure you use the tag <code>v2.0</code> to ensure successful conversion.</p>
<p>MD5SUMs:</p>
<table><thead><tr><th><strong>MD5SUM</strong></th><th><strong>File</strong></th></tr></thead><tbody><tr><td>2e296b5e31bf1e1b6b8ea4bf36153ea5</td><td>yolov5l.pt</td></tr><tr><td>16150e35f707a2f07e7528b89c032308</td><td>yolov5m.pt</td></tr><tr><td>42c681cf466c549ff5ecfe86bcc491a0</td><td>yolov5s.pt</td></tr><tr><td>069a6baa2a741dec8a2d44a9083b6d6e</td><td>yolov5x.pt</td></tr></tbody></table>
</li>
</ul>
</li>
<li>
<p>Modify the YOLOv5 code from GitHub (version v2.0) for better compatibility with post-processing:</p>
<ul>
<li>In models/yolo.py, remove the reshape and layout change at the end of each output branch.(<a href="https://github.com/ultralytics/yolov5/blob/v2.0/models/yolo.py" target="_blank" rel="noopener noreferrer">https://github.com/ultralytics/yolov5/blob/v2.0/models/yolo.py</a>)</li>
</ul>
</li>
</ol>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># x = x.copy()  # for profiling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># inference output</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">training </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            x</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">m</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># conv</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            bs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ny</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shape  </span><span class="token comment" style="color:#999988;font-style:italic"># x(bs,255,20,20) to x(bs,3,20,20,85)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">#  x[i] = x[i].view(bs, self.na, self.no, ny, nx).permute(0, 1, 3, 4, 2).contiguous()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            x</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">permute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">contiguous</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/08_FAQ/image/multimedia/yolov5.png" alt="yolov5" class="img_ev3q"></p>
<ol start="3">
<li>
<p>After cloning the code, run the script at <a href="https://github.com/ultralytics/yolov5/blob/v2.0/models/export.py" target="_blank" rel="noopener noreferrer">https://github.com/ultralytics/yolov5/blob/v2.0/models/export.py</a> to convert the .pt files to ONNX.</p>
</li>
<li>
<p><strong>Note</strong>: When using the export.py script, consider the following:</p>
<ul>
<li>Set the <code>opset_version</code> parameter in <code>torch.onnx.export</code> according to the ONNX opset version you intend to use.</li>
<li>Adjust the default input name parameters in the <code>torch.onnx.export</code> section as needed.</li>
</ul>
</li>
</ol>
<p>Please note that I have translated the text into English while maintaining the original format and code blocks. I have also made the requested changes to the image file name and data input size.</p>
<p>&quot;data&quot;  # Changed &quot;images&quot; to &quot;data&quot; to match the YOLOv5x example script in the model conversion package</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="checklist">Model Accuracy Optimization Checklist<a href="#checklist" class="hash-link" aria-label="Direct link to Model Accuracy Optimization Checklist" title="Direct link to Model Accuracy Optimization Checklist">​</a></h4>
<p>Follow the steps 1-5 strictly to verify the model&#x27;s accuracy, and keep the code and results for each step:</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/08_FAQ/image/multimedia/model_accuracy_check.png" alt="" class="img_ev3q"></p>
<p><strong>Before starting, ensure you have the correct Docker image or conversion environment version, and record the version information.</strong></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-validate-the-inference-results-of-the-float-onnx-model">1. Validate the inference results of the float ONNX model<a href="#1-validate-the-inference-results-of-the-float-onnx-model" class="hash-link" aria-label="Direct link to 1. Validate the inference results of the float ONNX model" title="Direct link to 1. Validate the inference results of the float ONNX model">​</a></h5>
<p>Enter the model conversion environment to test the single-image result of the float ONNX model (specifically, the ONNX model exported from the DL framework). This step&#x27;s result should be identical to the inference result of the trained model (except for possible minor differences due to NV12 format).</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> horizon_tc_ui </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> HB_ONNXRuntime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> cv2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">preprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># RGB conversion, Resize, CenterCrop...    </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># HWC to CHW</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># normalization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Load the model file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_ONNXRuntime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model_file</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">MODEL_PATH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Get input and output node names</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    input_names </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token builtin">input</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> sess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_inputs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    output_names </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> output </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> sess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_outputs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Prepare model input data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    feed_dict </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">input_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> preprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> input_name </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> input_names</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Original float ONNX, data dtype=float32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">output_names</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> feed_dict</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input_offset</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Postprocessing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    postprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">outputs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-verify-the-correctness-of-the-yaml-configuration-file-and-preprocessingpostprocessing-code">2. Verify the correctness of the YAML configuration file and preprocessing/postprocessing code<a href="#2-verify-the-correctness-of-the-yaml-configuration-file-and-preprocessingpostprocessing-code" class="hash-link" aria-label="Direct link to 2. Verify the correctness of the YAML configuration file and preprocessing/postprocessing code" title="Direct link to 2. Verify the correctness of the YAML configuration file and preprocessing/postprocessing code">​</a></h5>
<p>Test the single-image result of the <code>original_float.onnx</code> model, which should be consistent with the float ONNX model&#x27;s inference result (excluding possible minor differences due to NV12 data loss).</p>
<p>Use an open-source tool like Netron to inspect the <code>original_float.onnx</code> model, and examine the detailed properties of the &quot;HzPreprocess&quot; operator to obtain the required parameters for our preprocessing: <code>data_format</code> and <code>input_type</code>.</p>
<p>Since the HzPreprocess operator is present, the preprocessing in the converted model might differ from the original. This operator is added based on the configuration parameters in the YAML file (input_type_rt, input_type_train, norm_type, mean_value, scale_value). For more details, refer to the section on &quot;norm_type configuration parameter explanation&quot; in the PTQ principles and steps guide. The preprocessing node will appear in all conversion outputs.</p>
<p>Ideally, the HzPreprocess node should complete the full type conversion from input_type_rt to input_type_train, but this process is done on the D-Robotics AI chip hardware, which is not included in the ONNX model. Thus, the actual input type in the ONNX model uses a middle type representing the hardware&#x27;s handling of input_type_rt. For image models with inputs like RGB/BGR/NV12/YUV444/GRAY and dtype=uint8, apply <code>-128</code> in the preprocessing when using the <code>hb_session.run</code> interface; for featuremap models with dtype=float32, no <code>-128</code> is needed, as the input layout (NCHW/NHWC) remains the same as the original float model.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> horizon_tc_ui </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> HB_ONNXRuntime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> cv2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">preprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># BGR to RGB, Resize, CenterCrop...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># HWC to CHW (determined by the specific shape of the input node in the ONNX model)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># normalization (skip if normalization operation is already included in the model&#x27;s YAML file)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># -128 (apply to image inputs when using the hb_session.run interface; use input_offset for other interfaces)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Load the model file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_ONNXRuntime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model_file</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">MODEL_PATH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Get input and output node names</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    input_names </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token builtin">input</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> sess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_inputs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    output_names </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> output </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> sess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_outputs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Prepare model input data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    feed_dict </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> input_name </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> input_names</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        feed_dict</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">input_name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> preprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Image input models (RGB/BGR/NV12/YUV444/GRAY), data type = uint8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">output_names</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> feed_dict</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input_offset</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">128</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Feature map models, data type = float32. Comment out this line if the model input is not a feature map!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># outputs = sess.run_feature(output_names, feed_dict, input_offset=0)   </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Post-processing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    postprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">outputs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-validate-that-no-accuracy-loss-was-introduced-during-graph-optimization">3. Validate that no accuracy loss was introduced during graph optimization<a href="#3-validate-that-no-accuracy-loss-was-introduced-during-graph-optimization" class="hash-link" aria-label="Direct link to 3. Validate that no accuracy loss was introduced during graph optimization" title="Direct link to 3. Validate that no accuracy loss was introduced during graph optimization">​</a></h5>
<p>Test the single-image result of the <code>optimize_float.onnx</code> model, which should be identical to the <code>original_float.onnx</code> inference result.</p>
<p>Use Netron to inspect the <code>optimize_float.onnx</code> model and check the &quot;HzPreprocess&quot; operator&#x27;s details for the required preprocessing parameters: <code>data_format</code> and <code>input_type</code>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> horizon_tc_ui </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> HB_ONNXRuntime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> cv2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">preprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># BGR to RGB, Resize, CenterCrop...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># HWC to CHW (determined by the specific shape of the input node in the ONNX model)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># normalization (if normalization operation is already included in the model&#x27;s YAML file, skip it here)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># -128 (apply -128 to image inputs when using the hb_session.run interface; other interfaces can control with input_offset)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Load the model file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_ONNXRuntime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model_file</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">MODEL_PATH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Get input and output node names</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    input_names </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token builtin">input</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> sess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_inputs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    output_names </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> output </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> sess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_outputs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Prepare model input data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    feed_dict </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">input_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> preprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> input_name </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> input_names</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Image input models (RGB/BGR/NV12/YUV444/GRAY), data dtype= uint8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">output_names</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> feed_dict</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input_offset</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">128</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Feature map models, data dtype=float32. Comment out this line if the model does not take feature maps as input!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># outputs = sess.run_feature(output_names, feed_dict, input_offset=0)     </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Post-processing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    postprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">outputs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="4-verify-the-quantization-accuracy-meets-expectations">4. Verify the quantization accuracy meets expectations<a href="#4-verify-the-quantization-accuracy-meets-expectations" class="hash-link" aria-label="Direct link to 4. Verify the quantization accuracy meets expectations" title="Direct link to 4. Verify the quantization accuracy meets expectations">​</a></h5>
<p>Test the precision metrics of the <code>quantized.onnx</code> model.</p>
<p>Use Netron to open the <code>quantized.onnx</code> model and examine the &quot;HzPreprocess&quot; operator&#x27;s details for the needed preprocessing parameters: <code>data_format</code> and <code>input_type</code>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> horizon_tc_ui </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> HB_ONNXRuntime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> cv2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">preprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># BGR to RGB, Resize, CenterCrop...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># HWC to CHW (determine layout conversion based on the specific shape of the input node in the ONNX model)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># normalization (skip if normalization operation is already included in the model&#x27;s YAML file)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># -128 (apply -128 to image inputs when using the hb_session.run interface; other interfaces use input_offset)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Load the model file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_ONNXRuntime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model_file</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">MODEL_PATH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Get input and output node names</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    input_names </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token builtin">input</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> sess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_inputs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    output_names </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> output </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> sess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_outputs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Prepare model input data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    feed_dict </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">input_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> preprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> input_name </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> input_names</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Image input models (RGB/BGR/NV12/YUV444/GRAY), data dtype= uint8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">output_names</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> feed_dict</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input_offset</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">128</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Feature map model, data dtype=float32. Comment out the following line if the model input is not a feature map!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># outputs = sess.run_feature(output_names, feed_dict, input_offset=0) </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Post-processing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    postprocess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">outputs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p><strong>Verifying Model Compilation and Code Correctness</strong></p>
<p>Use the <code>hb_model_verifier</code> tool to ensure ../07_Advanced_development between the quantized.onnx and .bin files, with model outputs aligned to at least two or three decimal places.</p>
<p>For detailed instructions on using <code>hb_model_verifier</code>, please refer to the section on PTQ principles and steps in the &quot;hb_model_verifier tool&quot; content.</p>
<p>If the model ../07_Advanced_development check passes, carefully examine the board-side preprocessing and post-processing code!</p>
<p>In case of a failure in the ../07_Advanced_development check between the quantized.onnx and .bin models, contact D-Robotics technical support.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="quantization-yaml-configuration-file-templates">Quantization YAML Configuration File Templates<a href="#quantization-yaml-configuration-file-templates" class="hash-link" aria-label="Direct link to Quantization YAML Configuration File Templates" title="Direct link to Quantization YAML Configuration File Templates">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="rdk_x3_caffe_yaml_template">RDK X3 Caffe Model Quantization YAML Template<a href="#rdk_x3_caffe_yaml_template" class="hash-link" aria-label="Direct link to RDK X3 Caffe Model Quantization YAML Template" title="Direct link to RDK X3 Caffe Model Quantization YAML Template">​</a></h5>
<p>Create a <code>caffe_config.yaml</code> file and copy the following content, then fill in the marked <strong><code>required parameters</code></strong> to proceed with model conversion. For more information on parameter usage, see the &quot;<a href="/rdk_doc/en/07_Advanced_development/04_toolchain_development/intermediate/ptq_process#yaml_config">YAML Configuration File Explanation</a>&quot; chapter.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Copyright (c) 2020 D-Robotics.All Rights Reserved.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Parameters related to model conversion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">model_parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Float-point Caffe network data model file, e.g., caffe_model: &#x27;./horizon_x3_caffe.caffemodel&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">caffe_model</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Caffe network description file, e.g., prototxt: &#x27;./horizon_x3_caffe.prototxt&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">prototxt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">march</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bernoulli2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">layer_out_dump</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">working_dir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;model_output&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">output_model_file_prefix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;horizon_x3&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Input parameters related to the model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">input_parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">input_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">input_shape</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">input_type_rt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;nv12&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">input_layout_rt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Data type used in the original float model training framework, options: rgb/bgr/gray/featuremap/yuv444, e.g., input_type_train: &#x27;bgr&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">input_type_train</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Data layout used in the original float model training framework, options: NHWC/NCHW, e.g., input_layout_train: &#x27;NHWC&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">input_layout_train</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#input_batch: 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Preprocessing method used in the original float model training framework, options: no_preprocess/data_mean/data_scale/data_mean_and_scale</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># no_preprocess: No operation; mean_value or scale_value do not need to be configured</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># data_mean: Subtract channel mean (mean_value); comment out scale_value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># data_scale: Multiply image pixels by scale_value; comment out mean_value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># data_mean_and_scale: Subtract channel mean and then multiply by scale_value; both mean_value and scale_value must be configured</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">norm_type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Image mean value to subtract, separated by spaces if channel-wise, e.g., mean_value: 128.0 or mean_value: 111.0 109.0 118.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mean_value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Image scaling factor; separate by spaces if channel-wise, e.g., scale_value: 0.0078125 or scale_value: 0.0078125 0.001215 0.003680</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Parameters related to model quantization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">calibration_parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Directory containing reference images for model calibration, supporting formats like JPEG, BMP. These images should be from a test set, covering diverse scenarios, not extreme conditions like overexposure, saturation, blur, pure black, or pure white.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Configure according to the folder path in the 02_preprocess.sh script, e.g., cal_data_dir: &#x27;./calibration_data_yuv_f32&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cal_data_dir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cal_data_type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;float32&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">calibration_type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;default&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># max_percentile: 0.99996</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Compiler-related parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">compiler_parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">compile_mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;latency&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">debug</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># core_num: 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">optimize_level</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;O3&#x27;</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="rdk_x3_onnx_yaml_template">RDK X3 ONNX Model Quantization YAML Template<a href="#rdk_x3_onnx_yaml_template" class="hash-link" aria-label="Direct link to RDK X3 ONNX Model Quantization YAML Template" title="Direct link to RDK X3 ONNX Model Quantization YAML Template">​</a></h5>
<p>Create a <code>onnx_config.yaml</code> file and copy the following content, then fill in the marked <strong><code>required parameters</code></strong> to proceed with model conversion. For more information on parameter usage, see the &quot;<a href="/rdk_doc/07_Advanced_development/04_toolchain_development/intermediate/ptq_process#yaml_config">YAML Configuration File Explanation</a>&quot; chapter.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Copyright (c) 2020 D-Robotics.All Rights Reserved.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Parameters related to model conversion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">model_parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Float-point ONNX network data model file, e.g., onnx_model: &#x27;./horizon_x3_onnx.onnx&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">onnx_model</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">march</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bernoulli2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">layer_out_dump</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">working_dir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;model_output&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">output_model_file_prefix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;horizon_x3&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Input parameters related to the model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">input_parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">input_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">input_shape</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">input_type_rt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;nv12&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">input_layout_rt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Data type used in the original float model training framework, options: rgb/bgr/gray/featuremap/yuv444, e.g., input_type_train: &#x27;bgr&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">input_type_train</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Data layout used in the original float model training framework, options: NHWC/NCHW, e.g., input_layout_train: &#x27;NHWC&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">input_layout_train</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#input_batch: 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Preprocessing method used in the original float model training framework, options: no_preprocess/data_mean/data_scale/data_mean_and_scale</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># no_preprocess: No operation; mean_value or scale_value do not need to be configured</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># data_mean: Subtract channel mean (mean_value); comment out scale_value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># data_scale: Multiply image pixels by scale_value; comment out mean_value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># data_mean_and_scale: Subtract channel mean and then multiply by scale_value; both mean_value and scale_value must be configured</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">norm_type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Image mean value to subtract, separated by spaces if channel-wise, e.g., mean_value: 128.0 or mean_value: 111.0 109.0 118.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mean_value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required parameter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Image scaling factor; separate by spaces if channel-wise, e.g., scale_value: 0.0078125 or scale_value: 0.0078125 0.001215 0.003680</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-10-27T08:19:34.000Z" itemprop="dateModified">Oct 27, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rdk_doc/en/FAQ/multimedia"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">8.4 Multimedia Processing and Applications</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rdk_doc/en/FAQ/tros_ros"><div class="pagination-nav__sublabel">Next </div><div class="pagination-nav__label">8.6 TROS/ROS Development</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#q1-what-information-should-i-provide-when-seeking-technical-support-for-toolchain-issues" class="table-of-contents__link toc-highlight">Q1: What information should I provide when seeking technical support for toolchain issues?</a></li><li><a href="#q2-what-official-resources-are-recommended-for-ai-algorithm-development" class="table-of-contents__link toc-highlight">Q2: What official resources are recommended for AI algorithm development?</a></li><li><a href="#q3-what-community-algorithm-resources-and-toolchain-manuals-are-available-for-the-rdk-x3-platform" class="table-of-contents__link toc-highlight">Q3: What community algorithm resources and toolchain manuals are available for the RDK X3 platform?</a></li><li><a href="#q4-what-community-algorithm-resources-and-toolchain-manuals-are-available-for-the-rdk-ultra-platform" class="table-of-contents__link toc-highlight">Q4: What community algorithm resources and toolchain manuals are available for the RDK Ultra platform?</a></li><li><a href="#q5-what-community-algorithm-resources-and-toolchain-manuals-are-available-for-the-rdk-x5-platform" class="table-of-contents__link toc-highlight">Q5: What community algorithm resources and toolchain manuals are available for the RDK X5 platform?</a></li><li><a href="#q6-the-algorithm-toolchain-docker-image-is-based-on-ubuntu-2004-will-this-affect-running-the-generated-models-bin-or-hbm-on-rdk-boards-with-ubuntu-2204" class="table-of-contents__link toc-highlight">Q6: The algorithm toolchain Docker image is based on Ubuntu 20.04. Will this affect running the generated models (.bin or .hbm) on RDK boards with Ubuntu 22.04?</a></li><li><a href="#q7-how-do-i-deploy-yolo-series-models-eg-yolov5-yolov8-yolov10-on-the-rdk-platform" class="table-of-contents__link toc-highlight">Q7: How do I deploy YOLO series models (e.g., YOLOv5, YOLOv8, YOLOv10) on the RDK platform?</a></li><li><a href="#q8-when-deploying-yolov5-i-get-an-error-like-cant-reshape-xxx-in-8484385-how-do-i-fix-this" class="table-of-contents__link toc-highlight">Q8: When deploying YOLOv5, I get an error like <code>can&#39;t reshape xxx in (84,84,3,85)</code>. How do I fix this?</a></li><li><a href="#q9-when-deploying-yolov5-i-get-a-large-number-of-irregular-detection-boxes-why" class="table-of-contents__link toc-highlight">Q9: When deploying YOLOv5, I get a large number of irregular detection boxes. Why?</a></li><li><a href="#q10-when-deploying-yolov5-detection-boxes-appear-in-a-periodic-pattern-why" class="table-of-contents__link toc-highlight">Q10: When deploying YOLOv5, detection boxes appear in a periodic pattern. Why?</a></li><li><a href="#q11-when-deploying-yolov5-detection-boxes-are-offset-from-their-correct-positions-why" class="table-of-contents__link toc-highlight">Q11: When deploying YOLOv5, detection boxes are offset from their correct positions. Why?</a></li><li><a href="#q12-when-deploying-yolov5-all-detection-boxes-cluster-in-the-top-left-corner-why" class="table-of-contents__link toc-highlight">Q12: When deploying YOLOv5, all detection boxes cluster in the top-left corner. Why?</a></li><li><a href="#q13-when-running-apppydev_demo07_yolov5_sample-with-my-own-model-i-get-a-segmentation-fault-what-should-i-do" class="table-of-contents__link toc-highlight">Q13: When running <code>/app/pydev_demo/07_yolov5_sample</code> with my own model, I get a <code>Segmentation fault</code>. What should I do?</a></li><li><a href="#q14-if-the-model-inference-produces-no-results-or-results-are-far-from-expected-how-should-i-troubleshoot-pipeline-checklist" class="table-of-contents__link toc-highlight">Q14: If the model inference produces no results or results are far from expected, how should I troubleshoot (pipeline checklist)?</a></li><li><a href="#q15-how-can-i-obtain-board-side-hrt_-performance-analysis-tools-eg-hrt_model_exec-hrt_bpu_monitor" class="table-of-contents__link toc-highlight">Q15: How can I obtain board-side <code>hrt_*</code> performance analysis tools (e.g., <code>hrt_model_exec</code>, <code>hrt_bpu_monitor</code>)?</a></li><li><a href="#model_convert_errors_and_solutions" class="table-of-contents__link toc-highlight">Model quantization errors and solutions <code>\</code></a><ul><li><a href="#hb_mapper-checker-01_checksh-model-validation-error" class="table-of-contents__link toc-highlight">hb_mapper checker (01_check.sh) Model Validation Error</a></li><li><a href="#error-in-hb_mapper-makertbin-03_buildsh-model-conversion" class="table-of-contents__link toc-highlight">Error in hb_mapper makertbin (03_build.sh) Model Conversion</a></li></ul></li><li><a href="#algorithm-model-boarding-errors-and-solutions" class="table-of-contents__link toc-highlight">Algorithm Model Boarding Errors and Solutions</a></li><li><a href="#model-quantization-and-board-usage-tips" class="table-of-contents__link toc-highlight">Model Quantization and Board Usage Tips</a><ul><li><a href="#transformer-usage-guide" class="table-of-contents__link toc-highlight">Transformer Usage Guide</a></li><li><a href="#checklist" class="table-of-contents__link toc-highlight">Model Accuracy Optimization Checklist</a><ul><li><a href="#1-validate-the-inference-results-of-the-float-onnx-model" class="table-of-contents__link toc-highlight">1. Validate the inference results of the float ONNX model</a></li><li><a href="#2-verify-the-correctness-of-the-yaml-configuration-file-and-preprocessingpostprocessing-code" class="table-of-contents__link toc-highlight">2. Verify the correctness of the YAML configuration file and preprocessing/postprocessing code</a></li><li><a href="#3-validate-that-no-accuracy-loss-was-introduced-during-graph-optimization" class="table-of-contents__link toc-highlight">3. Validate that no accuracy loss was introduced during graph optimization</a></li><li><a href="#4-verify-the-quantization-accuracy-meets-expectations" class="table-of-contents__link toc-highlight">4. Verify the quantization accuracy meets expectations</a></li></ul></li><li><a href="#quantization-yaml-configuration-file-templates" class="table-of-contents__link toc-highlight">Quantization YAML Configuration File Templates</a><ul><li><a href="#rdk_x3_caffe_yaml_template" class="table-of-contents__link toc-highlight">RDK X3 Caffe Model Quantization YAML Template</a></li><li><a href="#rdk_x3_onnx_yaml_template" class="table-of-contents__link toc-highlight">RDK X3 ONNX Model Quantization YAML Template</a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.guyuehome.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GuYueHome<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact US</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 D-Robotics.</div></div></div></footer></div>
</body>
</html>