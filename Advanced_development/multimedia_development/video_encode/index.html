<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Advanced_development/multimedia_development/video_encode" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">7.3.9 视频编码 | RDK DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/rdk_doc/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/rdk_doc/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/video_encode"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="7.3.9 视频编码 | RDK DOC"><meta data-rh="true" name="description" content="概述"><meta data-rh="true" property="og:description" content="概述"><link data-rh="true" rel="icon" href="/rdk_doc/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/video_encode"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/video_encode" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/multimedia_development/video_encode" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/video_encode" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"7. 进阶开发","item":"https://developer.d-robotics.cc/rdk_doc/Advanced_development"},{"@type":"ListItem","position":2,"name":"7.3 RDK X3 多媒体开发指南","item":"https://developer.d-robotics.cc/rdk_doc/03_multimedia_development"},{"@type":"ListItem","position":3,"name":"7.3.9 视频编码","item":"https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/video_encode"}]}</script><script src="https://hm.baidu.com/hm.js?24dd63cad43b63889ea6bede5fd1ab9e" async></script><link rel="stylesheet" href="/rdk_doc/assets/css/styles.0fbd7d27.css">
<script src="/rdk_doc/assets/js/runtime~main.801292ef.js" defer="defer"></script>
<script src="/rdk_doc/assets/js/main.6fa40d47.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/rdk_doc/img/logo.png" alt="地瓜机器人社区 logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rdk_doc/img/logo.png" alt="地瓜机器人社区 logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rdk_doc/RDK">RDK X3 / X5</a><a class="navbar__item navbar__link" href="/rdk_doc/rdk_s/RDK">RDK S100</a><a href="https://developer.d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>CN</a><ul class="dropdown__menu"><li><a href="/rdk_doc/Advanced_development/multimedia_development/video_encode" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">CN</a></li><li><a href="/rdk_doc/en/Advanced_development/multimedia_development/video_encode" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">EN</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rdk_doc/RDK">D-Robotics RDK套件</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/Quick_start">1. 快速开始</a><button aria-label="展开侧边栏分类 &#x27;1. 快速开始&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/System_configuration">2. 系统配置</a><button aria-label="展开侧边栏分类 &#x27;2. 系统配置&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/Basic_Application">3. 基础应用开发</a><button aria-label="展开侧边栏分类 &#x27;3. 基础应用开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/Basic_Development">4. 算法应用开发</a><button aria-label="展开侧边栏分类 &#x27;4. 算法应用开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/Robot_development">5. 机器人应用开发</a><button aria-label="展开侧边栏分类 &#x27;5. 机器人应用开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/Application_case">6. 应用开发指南</a><button aria-label="展开侧边栏分类 &#x27;6. 应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rdk_doc/Advanced_development">7. 进阶开发</a><button aria-label="折叠侧边栏分类 &#x27;7. 进阶开发&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/hardware_development">7.1 硬件开发指南</a><button aria-label="展开侧边栏分类 &#x27;7.1 硬件开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/linux_development">7.2 Linux开发指南</a><button aria-label="展开侧边栏分类 &#x27;7.2 Linux开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/03_multimedia_development">7.3 RDK X3 多媒体开发指南</a><button aria-label="折叠侧边栏分类 &#x27;7.3 RDK X3 多媒体开发指南&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/overview">7.3.1 系统概述</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/multimedia_samples">7.3.2 示例程序</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/system_control">7.3.3 系统控制</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/video_input">7.3.4 视频输入</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/isp_system">7.3.5 ISP图像系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/video_processing">7.3.6 视频处理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/region_processing">7.3.7 区域处理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/video_output">7.3.8 视频输出</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/video_encode">7.3.9 视频编码</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/video_decode">7.3.10 视频解码</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/debug_info">7.3.11 查询多媒体模块调试信息</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/performance_debug">7.3.12 多媒体性能调试</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/04_toolchain_development">7.4 算法工具链开发指南</a><button aria-label="展开侧边栏分类 &#x27;7.4 算法工具链开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/FAQ">8. 常见问题</a><button aria-label="展开侧边栏分类 &#x27;8. 常见问题&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/Appendix">9. 附录</a><button aria-label="展开侧边栏分类 &#x27;9. 附录&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rdk_doc/Release_Note/release_note">10. 版本发布</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/rdk_doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/Advanced_development"><span>7. 进阶开发</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/03_multimedia_development"><span>7.3 RDK X3 多媒体开发指南</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">7.3.9 视频编码</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>7.3.9 视频编码</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="概述">概述<a href="#概述" class="hash-link" aria-label="概述的直接链接" title="概述的直接链接">​</a></h2>
<p>视频编码模块实现H.264/H.265/JPEG/MJPEG协议硬件编码。该模块支持多通道实时编码，各通道相互独立，常见的使用场景，包括单路录像、多路录像、单路VIO视频流、多路VIO视频流、录像+VIO视频流等。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="功能描述">功能描述<a href="#功能描述" class="hash-link" aria-label="功能描述的直接链接" title="功能描述的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="基础规格">基础规格<a href="#基础规格" class="hash-link" aria-label="基础规格的直接链接" title="基础规格的直接链接">​</a></h3>
<p>X3支持的编码规格如下：</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/image-20220329224946556.png" alt="image-20220329224946556" class="img_ev3q"></p>
<p>H264/H265协议编码性能如下：</p>
<ul>
<li>H.264编解码支持最大分辨率为 8192 x 8192，最小为256 x 128，解码最小为32 x 32</li>
<li>H.265编解码支持最大分辨率为 8192 x 8192，最小为256 x 128，解码最小为8 x 8</li>
<li>H.264/H.265的stride是32字节对齐，width和height都是8字节对齐，如果不是对齐的建议使用VIDEO_CROP_INFO_S去对应裁剪</li>
<li>H.264/H.265均具备多码流实时编码能力</li>
<li>最高能力支持 4K@60fps</li>
<li>带QP map的ROI编码（让用户选择画面中感兴趣的区域，启用ROI功能后，重要的或者移动的区域将会进行高质量无损编码，而对那些不移动，不被选择的区域降低其码率和图像质量，进行标准清晰度视频压缩，甚至是不传输这部分区域视频）</li>
<li>支持旋转和镜像</li>
<li>Multi-instance处理，最多32个</li>
</ul>
<p>JPEG协议编码能力如下：</p>
<ul>
<li>编解码分辨率最大32768 x 32768，最小 16 x 16</li>
<li>MJPEG、JPEG的stride是32字节对齐，width是16字节对齐，height是8字节对齐</li>
<li>对于YUV 4:2:0 格式（例如：NV12），最高能力达到 4K@30fps</li>
<li>JPEG Baseline and Extended sequential ISO/IEC 10918-1</li>
<li>支持一个或三个颜色分量，每个分量可以8位或12位采样</li>
<li>支持YUV 4:0:0，4:2:0，4:2:2，4:4:0 和 4:4:4 颜色格式</li>
<li>支持编解码ROI</li>
<li>支持slice encoding</li>
<li>支持旋转和镜像</li>
<li>Multi-instance，最高支持64个</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="编解码通道">编解码通道<a href="#编解码通道" class="hash-link" aria-label="编解码通道的直接链接" title="编解码通道的直接链接">​</a></h3>
<p>编解码通道即一个特定类型的编解码实例，不同编解码通道的用户参数配置和资源可以相互独立，这样就可以实现多路不同规格的视频编解码，覆盖多种业务场景。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="码率控制">码率控制<a href="#码率控制" class="hash-link" aria-label="码率控制的直接链接" title="码率控制的直接链接">​</a></h3>
<p>码率控制主要指的是对编码码率的控制。码率控制针对连续的视频编码码流而言，对于一个变化的场景，如果要达到图像质量稳定，则编码码率会抖动；如果要达到编码码率稳定，则图像质量会波动。X3针对H264、H265和MJPEG协议支持以下码率控制方式：</p>
<ul>
<li>H264/H265支持编码通道的CBR、VBR、AVBR、FixQp和QpMap五种码率控制方式</li>
<li>MJPGE编码通道的FixQp码率控制方式。</li>
</ul>
<p>CBR能够保证整体的编码码率稳定；</p>
<p>VBR则是保证编码图像的质量稳定；</p>
<p>AVBR会兼顾码率和图像质量，产生码率和图像质量相对稳定的码流；</p>
<p>FixQp是固定每一个I帧、P帧和B帧的QP值；</p>
<p>QPMAP是为一帧图像中的每一个块指定QP值，其中H264块大小为16x16  ，H265块大小为32x32。</p>
<p>对于CBR和AVBR来说，编码器内部会为每一帧图片找到合适的QP值，从而保证恒定码率。</p>
<p>编码器内部支持三种级别的码率控制，分别为帧级别、CTU/MB级别和subCTU/subMB级别。其中帧级别的控制主要会根据目标码率为每一帧图片产生一个QP值，从而保证码率恒定；CTU/MB级别的控制则根据每一个64x64的CTU或16x16的MB的目标码率为每个block产生一个QP值，能够得到更好的码率控制，但是频繁的QP值调整会造成图像质量不稳定的问题；subCTU/subMB级别的控制则为每一个32x32的subCTU或8x8的subMB产生一个QP值，其中复杂的块会得到较高的QP值，静态的块则会得到较低的QP值，因为相比于复杂的区域人眼对于静态的区域更敏感，复杂和静态区域的检测主要依赖于内部硬件模块，这个级别控制主要是为了提高主观图像质量同时保证码率恒定，该模式控制下SSIM得分较高，但是PSNR得分会降低。</p>
<p>CBR、VBR、AVBR可以使能QPMAP，则每个块区域的实际值由以下公式得到：</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/image-20220329234019920.png" alt="image-20220329234019920" class="img_ev3q"></p>
<p>其中MQP为ROI map中的值，RQP为编码器内部码率控制得到的值，ROIAvaQP为ROI map中QP的平均值。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gop结构">GOP结构<a href="#gop结构" class="hash-link" aria-label="GOP结构的直接链接" title="GOP结构的直接链接">​</a></h3>
<p>GOP结构表可定义一组周期性的GOP结构，该GOP结构将用于整个编码过程。单个结构表中的元素如下表所示，其中可以指定该图像的参考帧，如果IDR帧后的其他帧指定的参考帧为IDR帧前的数据帧，编码器内部会自动处理这种情况使其不参考其他帧，用户 无需关心这种情况。用户在自定义GOP结构时需要指明结构表的数量，最多可定义8个结构表，结构表的顺序需要按照解码顺序排列。</p>
<table><thead><tr><th style="text-align:left">Element</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">Type</td><td style="text-align:left">Slice type（I，P or B）</td></tr><tr><td style="text-align:left">POC</td><td style="text-align:left">Display order of the frame within a GOP，ranging from 1 to GOP size</td></tr><tr><td style="text-align:left">QPoffset</td><td style="text-align:left">A quantization parameter of the picture in the custom GOP</td></tr><tr><td style="text-align:left">NUM_REF_PIC_L0</td><td style="text-align:left">Flag to use multi reference picture for P picture<br>It is valid only if PIC_TYPE is P</td></tr><tr><td style="text-align:left">temporal_id</td><td style="text-align:left">Temporal layer of the frame. A frame cannot predict from a frame with a higher temporal id(0~6).</td></tr><tr><td style="text-align:left">1st_ref_POC</td><td style="text-align:left">The POC of the 1st reference picture of L0</td></tr><tr><td style="text-align:left">2nd_ref_POC</td><td style="text-align:left">The POC of 1st reference picture of L1 in case that Type is equal to B<br>The POC of 2nd reference picture of L0 in case that Type is equal to P<br>Note that reference_L1can have the same POC as reference in B slice. But for compression efficiency it is recommended that reference_L1 have a different POC from reference_L0</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="gop预置结构">GOP预置结构<a href="#gop预置结构" class="hash-link" aria-label="GOP预置结构的直接链接" title="GOP预置结构的直接链接">​</a></h4>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/ss_venc_gop_structure.png" alt="VENC_GOP_structure" class="img_ev3q"></p>
<p>下表所示为预置的8种GOP结构</p>
<table><thead><tr><th style="text-align:center">Index</th><th style="text-align:center">GOP <br>Structure</th><th style="text-align:center">Low Delay<br>（encoding<br> order and<br> display<br>order<br> are same）</th><th style="text-align:center">GOP<br> Size</th><th style="text-align:center">Encoding Order</th><th style="text-align:center">Minimum <br>Source <br>Frame <br>Buffer</th><th style="text-align:center">Minimum<br>Decoded<br>Picture<br>Buffer</th><th style="text-align:center">Intra Period<br>（I Frame <br>Interval）<br>Requirement</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">I</td><td style="text-align:center">Yes</td><td style="text-align:center">1</td><td style="text-align:center">I0-I1-I2…</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">P</td><td style="text-align:center">Yes</td><td style="text-align:center">1</td><td style="text-align:center">P0-P1-P2…</td><td style="text-align:center">1</td><td style="text-align:center">2</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">B</td><td style="text-align:center">Yes</td><td style="text-align:center">1</td><td style="text-align:center">B0-B1-B2…</td><td style="text-align:center">1</td><td style="text-align:center">3</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">BP</td><td style="text-align:center">No</td><td style="text-align:center">2</td><td style="text-align:center">B1-P0-B3-P2…</td><td style="text-align:center">4</td><td style="text-align:center">3</td><td style="text-align:center">Multiple of 2</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">BBBP</td><td style="text-align:center">No</td><td style="text-align:center">4</td><td style="text-align:center">B2-B1-B3-P0…</td><td style="text-align:center">7</td><td style="text-align:center">4</td><td style="text-align:center">Multiple of 4</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">PPPP</td><td style="text-align:center">Yes</td><td style="text-align:center">4</td><td style="text-align:center">P0-P1-P2-P3…</td><td style="text-align:center">1</td><td style="text-align:center">2</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">BBBB</td><td style="text-align:center">Yes</td><td style="text-align:center">4</td><td style="text-align:center">B0-B1-B2-B3…</td><td style="text-align:center">1</td><td style="text-align:center">3</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">BBBBBBBB</td><td style="text-align:center">No</td><td style="text-align:center">8</td><td style="text-align:center">B3-B2-B4-B1-B6-B5-B7-B0…</td><td style="text-align:center">12</td><td style="text-align:center">5</td><td style="text-align:center">Multiple of 8</td></tr></tbody></table>
<p>其中</p>
<ul>
<li>
<p>GOP Preset1</p>
<ul>
<li>只有I帧，没有相互参考帧</li>
<li>低延时
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/ss_venc_gop_preset1.png" alt="VENC_GOP_preset1" class="img_ev3q"></li>
</ul>
</li>
<li>
<p>GOP Preset2</p>
<ul>
<li>只有I帧和P帧</li>
<li>P帧参考两个前向参考帧</li>
<li>低延时
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/ss_venc_gop_preset2.png" alt="VENC_GOP_preset2" class="img_ev3q"></li>
</ul>
</li>
<li>
<p>GOP Preset3</p>
<ul>
<li>只有I帧和B帧</li>
<li>B帧参考两个前向参考帧</li>
<li>低延时
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/ss_venc_gop_preset3.png" alt="VENC_GOP_preset3" class="img_ev3q"></li>
</ul>
</li>
<li>
<p>GOP Preset4</p>
<ul>
<li>有I帧、P帧和B帧</li>
<li>P帧参考两个前向参考帧</li>
<li>B帧参考一个前向参考帧和一个后向参考帧
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/ss_venc_gop_preset4.png" alt="VENC_GOP_preset4" class="img_ev3q"></li>
</ul>
</li>
<li>
<p>GOP Preset5</p>
<ul>
<li>有I帧、P帧和B帧</li>
<li>P帧参考两个前向参考帧</li>
<li>B帧参考一个前向参考帧和一个后向参考帧，后向参考帧可为P帧或B帧
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/ss_venc_gop_preset5.png" alt="VENC_GOP_preset5" class="img_ev3q"></li>
</ul>
</li>
<li>
<p>GOP Preset 6</p>
<ul>
<li>只有I帧和P帧；</li>
<li>P帧参考两个前向参考帧；</li>
<li>低延时；
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/ss_venc_gop_preset6.png" alt="VENC_GOP_preset6" class="img_ev3q"></li>
</ul>
</li>
<li>
<p>GOP Preset 7</p>
<ul>
<li>只有I帧和B帧；</li>
<li>B帧参考两个前向参考帧；</li>
<li>低延时；
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/ss_venc_gop_preset7.png" alt="VENC_GOP_preset7" class="img_ev3q"></li>
</ul>
</li>
<li>
<p>GOP Preset 8</p>
<ul>
<li>只有I帧和B帧；</li>
<li>B帧参考一个前向参考帧和一个后向参考帧；
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/ss_venc_gop_preset8.png" alt="VENC_GOP_preset8" class="img_ev3q"></li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="gop和i帧周期关系">GOP和I帧周期关系<a href="#gop和i帧周期关系" class="hash-link" aria-label="GOP和I帧周期关系的直接链接" title="GOP和I帧周期关系的直接链接">​</a></h4>
<p>如下图所示为GOP结构和I帧周期的关系。</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/ss_venc_gop_i-frame.png" alt="VENC_GOP_i-frame" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="roi">ROI<a href="#roi" class="hash-link" aria-label="ROI的直接链接" title="ROI的直接链接">​</a></h3>
<p>ROI编码的实现和QPMAP类似，需要用户按照光栅扫描的方向为每一个块设定QP值，如下图所示为H265的ROI map示例。对于H264编码来说，每一个块的大小为16x16，而H265中则为32x32。在ROI map表中，每一个QP值占用一个字节，大小为0~51。</p>
<p>ROI编码可以和CBR和AVBR一起工作，当不使能CBR或AVBR时，每个块区域的实际QP值就为ROI map中指定的值，当使能CBR或AVBR时，则每个块区域的实际值由以下公式得到</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/image-20220405152959958.png" alt="image-20220405152959958" class="img_ev3q"></p>
<p>其中MQP为ROI map中的值，RQP为编码器内部码率控制得到的值，ROIAvaQP为ROI map中QP的平均值。
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/ss_venc_h265_roi_map.png" alt="VENC_H265_ROI_map" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="intra-refresh">Intra Refresh<a href="#intra-refresh" class="hash-link" aria-label="Intra Refresh的直接链接" title="Intra Refresh的直接链接">​</a></h3>
<p>Intra Refresh模式通过在非I帧内部周期性的插入帧内编码的MB/CTU来提高容错性。它能够为解码器提供更多的修复点来避免时域错误造成的图像损坏。用户可以指定MB/CTU的连续行数、列数或者步长来强制编码器插入帧内编码单元，用户还可指定帧内编码单元的大小由编码器内部决定哪一块需要帧内编码。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="长期参考帧">长期参考帧<a href="#长期参考帧" class="hash-link" aria-label="长期参考帧的直接链接" title="长期参考帧的直接链接">​</a></h3>
<p>用户可指定长期参考帧的周期和参考长期参考帧的周期，如下图所示。
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/ss_venc_long_reference_frame.png" alt="VENC_long_reference_frame" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="smart-background-encoding">Smart background encoding<a href="#smart-background-encoding" class="hash-link" aria-label="Smart background encoding的直接链接" title="Smart background encoding的直接链接">​</a></h3>
<p>在视频监控场景中，很多时候背景是固定的。因此希望编码器在检测到背景区域时采用忽略模式或使用更少的码流来编码该区域。实际场景中由于camera图像存在噪点导致背景区域检测不太容易，很多时候需要ISP检测到背景区域时再通知编码器，这种方案会消耗额外的带宽和系统计算资源。</p>
<p>H264和H265编码提供集成在codec内部的智能背景编码模式，该模式充分利用内部硬件模块和on-the-fly处理，不会消耗额外的带宽和系统资源。如下图所示为背景检测的工作模式，智能背景编码模式下内部硬件模块会将每一个块单元和参考帧的块单元对比决定该块是否为背景。</p>
<p>对 于背景区域的判断，用户可以设置最大的像素差值（推荐值8）和平均像素差值（推荐值1）。用户还可调整Lambda参数来影响编码中的模式选择，当检测到背景区域时，编码器内部会为每个块增加对应的Lambda值，使能编码器内部偏向于采用忽略模式来编码该块单元。对于Lambda控制，用户可设置lambdaQP（推荐值32）和deltaQP（推荐值3），最终的Lambda值按以下公式计算得到。</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/image-20220405153105331.png" alt="image-20220405153105331" class="img_ev3q"></p>
<p>其中QP_TO_LAMBDA_TABLE为lambda转换表，该表也会被用于非背景区域的lambda转换。
<img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/video_encode/ss_venc_smart_bg_encoding.png" alt="VENC_smart_bg_encoding" class="img_ev3q"></p>
<p>需要注意的是当ROI编码使能时，Smart background encoding不会工作。该模式实际能节省的带宽与设定的码率和I帧间隔有很大关系，当码率和I帧间隔变大时，节省的码率越多。此外该模式下可以设置图像质量较好的帧作为长期参考帧来提高背景图像的质量和节省码率。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="帧skip设置">帧skip设置<a href="#帧skip设置" class="hash-link" aria-label="帧skip设置的直接链接" title="帧skip设置的直接链接">​</a></h3>
<p>用户可调用接口设置下一次操作输入的图像的编码模式为skip模式，该模式只对非I帧编码有效；skip模式下编码器内部会忽略输入帧，而是利用上一帧的重构帧生成该次输入的的重构帧，输入帧则被编码成P帧。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="api参考">API参考<a href="#api参考" class="hash-link" aria-label="API参考的直接链接" title="API参考的直接链接">​</a></h2>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_CreateChn：创建编码通道。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_DestroyChn：销毁编码通道。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_ResetChn：复位编码通道。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_StartRecvFrame：开启编码通道接收输入图像。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_StopRecvFrame：停止编码通道接收输入图像。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetChnAttr 设置编码通道的编码属性。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetChnAttr：获取编码通道的编码属性。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetStream：获取编码码流。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_ReleaseStream：释放码流缓存。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SendFrame：支持用户发送原始图像进行编码。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_RequestIDR：请求 IDR 帧。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetRoiAttr：设置编码通道的感兴趣区域编码配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetRoiAttr：获取编码通道的感兴趣区域编码配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetH264SliceSplit：设置 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token plain"> 编码的 slice 分割配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetH264SliceSplit：获取 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token plain"> 编码的 slice 分割配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetH264IntraPred：设置 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token plain"> 编码的帧内预测配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetH264IntraPred：获取 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token plain"> 编码的帧内预测配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetH264Trans：设置 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token plain"> 编码的变换、量化配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetH264Trans：获取 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token plain"> 编码的变换、量化配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetH264Entropy：设置 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token plain"> 编码的熵编码配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetH264Entropy：获取 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token plain"> 编码的熵编码配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetH264Dblk：设置 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token plain"> 编码的 deblocking 配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetH264Dblk：获取 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token plain"> 编码的 deblocking 配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetH264Vui：设置 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token plain"> 编码的 VUI 配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetH264Vui：获取 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token plain"> 编码的 VUI 配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetH265Vui：设置 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 协议编码通道的 VUI 参数。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetH265Vui：获取 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 协议编码通道的 VUI 配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetRcParam：设置通道码率控制高级参数。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetRcParam：获取通道码率控制高级参数。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetRefParam：设置 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 编码通道高级跳帧参考参数。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetRefParam：获取 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">264</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 编码通道高级跳帧参考参数。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetH265SliceSplit：设置 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 编码的 slice 分割配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetH265SliceSplit：获取 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 编码的 slice 分割配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetH265PredUnit：设置 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 编码的 PU 配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetH265PredUnit：获取 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 编码的 PU 配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetH265Trans：设置 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 编码的变换、量化配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetH265Trans：获取 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 编码的变换、量化配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetH265Dblk：设置 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 编码的 deblocking 配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetH265Dblk：获  取 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 编码的 deblocking 配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetH265Sao：设置 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 编码的 SAO 配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetH265Sao：获取 H</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">265</span><span class="token plain"> 编码的 SAO 配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetIntraRefresh：获取 P 帧刷 Islice 的设置参数。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetIntraRefresh：设置 P 帧刷 Islice 的参数。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SetCuPrediction：设置 CU 模式的倾向性。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetCuPrediction：获取 CU 模式的倾向性配置。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_GetFd</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> 获取编码通道对应的设备文件句柄。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_CloseFd：关闭编码通道对应的设备文件句柄。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_QueryStatus：查询编码通道状态。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_InserUserData：插入用户数据。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HB_VENC_SendFrameEx：发送原始图像及该图的QpMap表进行编码</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_createchn">HB_VENC_CreateChn<a href="#hb_venc_createchn" class="hash-link" aria-label="HB_VENC_CreateChn的直接链接" title="HB_VENC_CreateChn的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_CHN_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>创建编码通道。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)。<br>H264/H265 最大支持32通道，JPEG/MJPEG最大支持64通道。</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstAttr</td><td style="text-align:left">编码通道属性指针</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetStream参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_destroychn">HB_VENC_DestroyChn<a href="#hb_venc_destroychn" class="hash-link" aria-label="HB_VENC_DestroyChn的直接链接" title="HB_VENC_DestroyChn的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>销毁编码通道。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetStream参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_resetchn">HB_VENC_ResetChn<a href="#hb_venc_resetchn" class="hash-link" aria-label="HB_VENC_ResetChn的直接链接" title="HB_VENC_ResetChn的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_ResetChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>复位编码通道。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetStream参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_startrecvframe">HB_VENC_StartRecvFrame<a href="#hb_venc_startrecvframe" class="hash-link" aria-label="HB_VENC_StartRecvFrame的直接链接" title="HB_VENC_StartRecvFrame的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_StartRecvFrame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_RECV_PIC_PARAM_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRecvParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>开启编码通道接收输入图像。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstRecvParam</td><td style="text-align:left">接收图像参数结构体指针，用于指定需要接收的图像帧数。	输入</td><td style="text-align:center"></td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>需要在HB_VENC_SetChnAttr设置完通道属性后，才能调用。</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetStream参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_stoprecvframe">HB_VENC_StopRecvFrame<a href="#hb_venc_stoprecvframe" class="hash-link" aria-label="HB_VENC_StopRecvFrame的直接链接" title="HB_VENC_StopRecvFrame的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_StopRecvFrame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>停止编码通道接收输入图像。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetStream参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_setchnattr">HB_VENC_SetChnAttr<a href="#hb_venc_setchnattr" class="hash-link" aria-label="HB_VENC_SetChnAttr的直接链接" title="HB_VENC_SetChnAttr的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_CHN_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置编码通道的编码属性。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstChnAttr</td><td style="text-align:left">编码通道属性指针</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>需要先HB_VENC_CreateChn创建通道。</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetStream参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_getchnattr">HB_VENC_GetChnAttr<a href="#hb_venc_getchnattr" class="hash-link" aria-label="HB_VENC_GetChnAttr的直接链接" title="HB_VENC_GetChnAttr的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_CHN_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取编码通道的编码属性。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstChnAttr</td><td style="text-align:left">编码通道属性指针</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetStream参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_getstream">HB_VENC_GetStream<a href="#hb_venc_getstream" class="hash-link" aria-label="HB_VENC_GetStream的直接链接" title="HB_VENC_GetStream的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VIDEO_STREAM_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstStream</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">int32_t</span><span class="token plain"> s32MilliSec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取编码码流。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">  输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstStream</td><td style="text-align:left">码流结构体指针</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">s32MilliSec</td><td style="text-align:left">获取码流超时时间。<br>取值范围：[-1, + ∞ )<br> -1：阻塞。<br> 0：非阻塞。<br> 大于 0：超时时间。</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">640</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">480</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FILE </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">inFile</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">inputFileName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./venc/yuv/input_640x480_yuv420p.yuv&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inFile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fopen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputFileName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;rb&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">ASSERT_NE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inFile</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nullptr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> mmz_vaddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mmz_vaddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint64_t</span><span class="token plain"> mmz_paddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mmz_paddr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mmz_paddr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> mmz_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VP_CONFIG_S struVpConf</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">struVpConf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x00</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VP_CONFIG_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struVpConf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32MaxPoolCnt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VP_SetConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">struVpConf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VP_Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s32Ret </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;vp_init fail s32Ret = %d !\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">s32Ret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_SYS_Alloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">mmz_paddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">mmz_vaddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mmz_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s32Ret </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;mmzAlloc paddr = 0x%x, vaddr = 0x%x i = %d \n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mmz_paddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mmz_vaddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32ReadLen </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        s32ReadLen </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mmz_vaddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mmz_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> inFile</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;s32ReadLen = %d !!!!!\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s32ReadLen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s32ReadLen </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;read over !!!\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/* if (inFile) fclose(inFile); */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H264</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H264CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RECV_PIC_PARAM_S pstRecvParam</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRecvParam</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32RecvPicNum </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// unchangable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_StartRecvFrame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstRecvParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VIDEO_FRAME_S pstFrame</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VIDEO_STREAM_S pstStream</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstFrame</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VIDEO_FRAME_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstStream</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VIDEO_STREAM_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mmz_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> offset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pstFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">phy_ptr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mmz_paddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pstFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">phy_ptr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mmz_paddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> offset</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pstFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">phy_ptr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mmz_paddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> offset </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pstFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">vir_ptr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mmz_vaddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pstFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">vir_ptr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mmz_vaddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> offset</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pstFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">vir_ptr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mmz_vaddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> offset </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pstFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVFrame</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">frame_end </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SendFrame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstFrame</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">usleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">300000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstStream</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">EXPECT_EQ</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s32Ret</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">int32_t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;i = %d   pstStream.pstPack.size = %d !!!!!\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstStream</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pstPack</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_ReleaseStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstStream</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_StopRecvFrame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_SYS_Free</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mmz_paddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mmz_vaddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s32Ret </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;mmzFree paddr = 0x%x, vaddr = 0x%x i = %d \n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mmz_paddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                mmz_vaddr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VP_Exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s32Ret </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;vp exit ok!\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;GetStream_Test\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inFile</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fclose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inFile</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_releasestream">HB_VENC_ReleaseStream<a href="#hb_venc_releasestream" class="hash-link" aria-label="HB_VENC_ReleaseStream的直接链接" title="HB_VENC_ReleaseStream的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_ReleaseStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VIDEO_STREAM_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstStream</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>释放码流缓存。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstStream</td><td style="text-align:left">码流结构体指针</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetStream参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_sendframe">HB_VENC_SendFrame<a href="#hb_venc_sendframe" class="hash-link" aria-label="HB_VENC_SendFrame的直接链接" title="HB_VENC_SendFrame的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SendFrame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VIDEO_FRAME_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstFrame </span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">int32_t</span><span class="token plain"> s32MilliSec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>支持用户发送原始图像进行编码。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstFrame</td><td style="text-align:left">原始图像信息结构指针。</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">s32MilliSec</td><td style="text-align:left">获取码流超时时间。<br>取值范围：[-1, + ∞ )<br> -1：阻塞。<br> 0：非阻塞。<br> 大于 0：超时时间。</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetStream参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_requestidr">HB_VENC_RequestIDR<a href="#hb_venc_requestidr" class="hash-link" aria-label="HB_VENC_RequestIDR的直接链接" title="HB_VENC_RequestIDR的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_RequestIDR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>请求 IDR 帧。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H264</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H264CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_RequestIDR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_setroiattr">HB_VENC_SetRoiAttr<a href="#hb_venc_setroiattr" class="hash-link" aria-label="HB_VENC_SetRoiAttr的直接链接" title="HB_VENC_SetRoiAttr的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetRoiAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_ROI_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRoiAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置编码通道的感兴趣区域编码配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstRoiAttr</td><td style="text-align:left">ROI区域参数</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetRoiAttr参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_getroiattr">HB_VENC_GetRoiAttr<a href="#hb_venc_getroiattr" class="hash-link" aria-label="HB_VENC_GetRoiAttr的直接链接" title="HB_VENC_GetRoiAttr的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRoiAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_ROI_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRoiAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取编码通道的感兴趣区域编码配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstRoiAttr</td><td style="text-align:left">对应ROI区域的配置</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_ROI_ATTR_S pstRoiAttrTest1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstRoiAttrTest1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_ROI_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> stroi_map_array1</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRoiAttrTest1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">roi_map_array </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> stroi_map_array1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H264</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H264CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_ROI_ATTR_S pstRoiAttrTest2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstRoiAttrTest1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_ROI_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> stroi_map_array</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRoiAttrTest2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">roi_enable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRoiAttrTest2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">roi_map_array </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> stroi_map_array</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRoiAttrTest2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">roi_map_array_count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetRoiAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstRoiAttrTest2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRoiAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstRoiAttrTest1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_seth264slicesplit">HB_VENC_SetH264SliceSplit<a href="#hb_venc_seth264slicesplit" class="hash-link" aria-label="HB_VENC_SetH264SliceSplit的直接链接" title="HB_VENC_SetH264SliceSplit的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH264SliceSplit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_H264_SLICE_SPLIT_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstSliceSplit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置 H.264 编码的 slice 分割配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstSliceSplit</td><td style="text-align:left">H.264 码流 slice 分割参数</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetH264SliceSplit参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_geth264slicesplit">HB_VENC_GetH264SliceSplit<a href="#hb_venc_geth264slicesplit" class="hash-link" aria-label="HB_VENC_GetH264SliceSplit的直接链接" title="HB_VENC_GetH264SliceSplit的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH264SliceSplit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_H264_SLICE_SPLIT_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstSliceSplit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 H.264 编码的 slice 分割配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstSliceSplit</td><td style="text-align:left">H.264 码流 slice 分割参数</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H264_SLICE_SPLIT_S pstSliceSplit1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstSliceSplit1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H264_SLICE_SPLIT_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H264</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H264CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstSliceSplit1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_slice_mode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstSliceSplit1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_slice_arg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstSliceSplit1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">slice_loop_filter_across_slices_enabled_flag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH264SliceSplit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstSliceSplit1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H264_SLICE_SPLIT_S pstSliceSplit2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstSliceSplit2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H264_SLICE_SPLIT_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH264SliceSplit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstSliceSplit2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_seth264intrapred">HB_VENC_SetH264IntraPred<a href="#hb_venc_seth264intrapred" class="hash-link" aria-label="HB_VENC_SetH264IntraPred的直接链接" title="HB_VENC_SetH264IntraPred的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH264IntraPred</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_H264_INTRA_PRED_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH264IntraPred</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置H.264 编码的帧内预测配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH264IntraPred</td><td style="text-align:left">H.264 协议编码通道的帧内预测配置</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetH264IntraPred参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_geth264intrapred">HB_VENC_GetH264IntraPred<a href="#hb_venc_geth264intrapred" class="hash-link" aria-label="HB_VENC_GetH264IntraPred的直接链接" title="HB_VENC_GetH264IntraPred的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH264IntraPred</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_H264_INTRA_PRED_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH264IntraPred</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 H.264 编码的帧内预测配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH264IntraPred</td><td style="text-align:left">H.264 协议编码通道的帧内预测配置</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H264_INTRA_PRED_S pstH264IntraPred1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264IntraPred1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H264_INTRA_PRED_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H264</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H264CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH264IntraPred1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">constrained_intra_pred_flag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH264IntraPred</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264IntraPred1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H264_INTRA_PRED_S pstH264IntraPred2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264IntraPred2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H264_INTRA_PRED_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH264IntraPred</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264IntraPred2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_seth264trans">HB_VENC_SetH264Trans<a href="#hb_venc_seth264trans" class="hash-link" aria-label="HB_VENC_SetH264Trans的直接链接" title="HB_VENC_SetH264Trans的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH264Trans</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_H264_TRANS_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH264Trans</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置H.264 编码的变换、量化配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/  输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH264Trans</td><td style="text-align:left">H.264 协议编码通道的变换、量化属性</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H264_TRANS_S pstH264Trans1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264Trans1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H264_TRANS_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H264</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H264CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH264Trans1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chroma_cb_qp_offset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH264Trans1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chroma_cr_qp_offset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH264Trans1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transform_8x8_enable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH264Trans1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">user_scaling_list_enable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH264Trans</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264Trans1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H264_TRANS_S pstH264Trans2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264Trans2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H264_TRANS_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH264Trans</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264Trans2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_geth264trans">HB_VENC_GetH264Trans<a href="#hb_venc_geth264trans" class="hash-link" aria-label="HB_VENC_GetH264Trans的直接链接" title="HB_VENC_GetH264Trans的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH264Trans</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_H264_TRANS_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH264Trans</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 H.264 编码的变换、量化配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH264Trans</td><td style="text-align:left">H.264 协议编码通道的变换、量化属性</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetH264Trans参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_seth264entropy">HB_VENC_SetH264Entropy<a href="#hb_venc_seth264entropy" class="hash-link" aria-label="HB_VENC_SetH264Entropy的直接链接" title="HB_VENC_SetH264Entropy的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH264Entropy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_H264_ENTROPY_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH264EntropyEnc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置 H.264 编码的熵编码配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH264EntropyEnc</td><td style="text-align:left">H.264 协议编码通道的熵编码模式</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H264_ENTROPY_S pstH264EntropyEnc1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264EntropyEnc1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H264_ENTROPY_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H264</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H264CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH264EntropyEnc1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32EntropyEncMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH264Entropy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264EntropyEnc1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H264_ENTROPY_S pstH264EntropyEnc2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264EntropyEnc2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H264_ENTROPY_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH264Entropy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264EntropyEnc2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_geth264entropy">HB_VENC_GetH264Entropy<a href="#hb_venc_geth264entropy" class="hash-link" aria-label="HB_VENC_GetH264Entropy的直接链接" title="HB_VENC_GetH264Entropy的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH264Entropy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_H264_ENTROPY_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH264EntropyEnc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 H.264 编码的熵编码配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH264EntropyEnc</td><td style="text-align:left">H.264 协议编码通道的熵编码模式</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetH264Entropy参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_seth264dblk">HB_VENC_SetH264Dblk<a href="#hb_venc_seth264dblk" class="hash-link" aria-label="HB_VENC_SetH264Dblk的直接链接" title="HB_VENC_SetH264Dblk的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH264Dblk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_H264_DBLK_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH264Dblk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置获H.264 编码的 deblocking 配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH264Dblk</td><td style="text-align:left">H.264 协议编码通道的 Deblocking 参数</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注 意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H264_DBLK_S pstH264Dblk1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264Dblk1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H264_DBLK_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H264</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H264CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH264Dblk1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">disable_deblocking_filter_idc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH264Dblk1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">slice_alpha_c0_offset_div2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH264Dblk1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">slice_beta_offset_div2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH264Dblk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264Dblk1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H264_DBLK_S pstH264Dblk2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264Dblk2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H264_DBLK_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH264Dblk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264Dblk2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_geth264dblk">HB_VENC_GetH264Dblk<a href="#hb_venc_geth264dblk" class="hash-link" aria-label="HB_VENC_GetH264Dblk的直接链接" title="HB_VENC_GetH264Dblk的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH264Dblk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_H264_DBLK_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH264Dblk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 H.264 编码的 deblocking 配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH264Dblk</td><td style="text-align:left">H.264 协议编码通道的 Deblocking 参数</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetH264Dblk参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_seth264vui">HB_VENC_SetH264Vui<a href="#hb_venc_seth264vui" class="hash-link" aria-label="HB_VENC_SetH264Vui的直接链接" title="HB_VENC_SetH264Vui的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH264Vui</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_H264_VUI_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH264Vui</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置 H.264 编码的 VUI 配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH264Vui</td><td style="text-align:left">H.264 协议编码通道的 Vui 参数</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>Vui参数为静态参数，只能在HB_VENC_SetChnAttr之前调用。</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H264_VUI_S pstH264Vui1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264Vui1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H264_VUI_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H264</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H264CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH264Vui1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVuiTimeInfo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fixed_frame_rate_flag </span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH264Vui1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVuiTimeInfo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">num_units_in_tick </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH264Vui1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVuiTimeInfo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">time_scale </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH264Vui</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264Vui1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H264_VUI_S pstH264Vui2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264Vui2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H264_VUI_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH264Vui</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH264Vui2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_geth264vui">HB_VENC_GetH264Vui<a href="#hb_venc_geth264vui" class="hash-link" aria-label="HB_VENC_GetH264Vui的直接链接" title="HB_VENC_GetH264Vui的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH264Vui</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_H264_VUI_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH264Vui</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 H.264 编码的 VUI 配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH264Vui</td><td style="text-align:left">H.264 协议编码通道的 Vui 参数</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetH264Vui参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_seth265vui">HB_VENC_SetH265Vui<a href="#hb_venc_seth265vui" class="hash-link" aria-label="HB_VENC_SetH265Vui的直接链接" title="HB_VENC_SetH265Vui的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH265Vui</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_H265_VUI_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH265Vui</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置 H.265 协议编码通道的 VUI 配置</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH265Vui</td><td style="text-align:left">H.265 协议编码通道的 Vui 参数</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H265_VUI_S pstH265Vui1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Vui1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H265_VUI_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H265</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H265CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH265Vui1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVuiTimeInfo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">num_ticks_poc_diff_one_minus1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH265Vui1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVuiTimeInfo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">num_units_in_tick </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH265Vui1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVuiTimeInfo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">time_scale </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH265Vui</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Vui1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H265_VUI_S pstH265Vui2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Vui2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H265_VUI_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH265Vui</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Vui2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_geth265vui">HB_VENC_GetH265Vui<a href="#hb_venc_geth265vui" class="hash-link" aria-label="HB_VENC_GetH265Vui的直接链接" title="HB_VENC_GetH265Vui的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH265Vui</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_H265_VUI_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH265Vui</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 H.265 协议编码通道的 VUI 配置</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH265Vui</td><td style="text-align:left">H.265 协议编码通道的 Vui 参数</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetH265Vui参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_setrcparam">HB_VENC_SetRcParam<a href="#hb_venc_setrcparam" class="hash-link" aria-label="HB_VENC_SetRcParam的直接链接" title="HB_VENC_SetRcParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置通道码率控制高级参数。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstRcParam</td><td style="text-align:left">编码通道码率控制器的高级参数</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_getrcparam">HB_VENC_GetRcParam<a href="#hb_venc_getrcparam" class="hash-link" aria-label="HB_VENC_GetRcParam的直接链接" title="HB_VENC_GetRcParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取通道码率控制高级参数。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstRcParam</td><td style="text-align:left">编码通道码率控制器的高级参数</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_setrefparam">HB_VENC_SetRefParam<a href="#hb_venc_setrefparam" class="hash-link" aria-label="HB_VENC_SetRefParam的直接链接" title="HB_VENC_SetRefParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetRefParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_REF_PARAM_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRefParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置 H.264/H.265 编码通道高级跳帧参考参数。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstRefParam</td><td style="text-align:left">H.264/H.265 编码通道高级跳帧参考参数</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_REF_PARAM_S pstRefParam_test1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstRefParam_test1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x00</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_REF_PARAM_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H264</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H264CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRefParam_test1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">use_longterm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRefParam_test1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">longterm_pic_period </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRefParam_test1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">longterm_pic_using_period </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetRefParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstRefParam_test1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_REF_PARAM_S pstRefParam_test2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstRefParam_test2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x00</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_REF_PARAM_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRefParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstRefParam_test2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_getrefparam">HB_VENC_GetRefParam<a href="#hb_venc_getrefparam" class="hash-link" aria-label="HB_VENC_GetRefParam的直接链接" title="HB_VENC_GetRefParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRefParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_REF_PARAM_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRefParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 H.264/H.265 编码通道高级跳帧参考参数。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstRefParam</td><td style="text-align:left">H.264/H.265 编码通道高级跳帧参考参数</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetRefParam参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_enableidr">HB_VENC_EnableIDR<a href="#hb_venc_enableidr" class="hash-link" aria-label="HB_VENC_EnableIDR的直接链接" title="HB_VENC_EnableIDR的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_EnableIDR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> HB_BOOL bEnableIDR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>使能 IDR 帧。</p>
</blockquote>
<p>【参数描述】</p>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>无</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_seth265slicesplit">HB_VENC_SetH265SliceSplit<a href="#hb_venc_seth265slicesplit" class="hash-link" aria-label="HB_VENC_SetH265SliceSplit的直接链接" title="HB_VENC_SetH265SliceSplit的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH265SliceSplit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_H265_SLICE_SPLIT_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstSliceSplit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置 H.265 编码的 slice 分割配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstSliceSplit</td><td style="text-align:left">H.265 码流 slice 分割参数</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H265_SLICE_SPLIT_S pstSliceSplit1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstSliceSplit1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H265_SLICE_SPLIT_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H265</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H265CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstSliceSplit1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h265_dependent_slice_arg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstSliceSplit1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h265_dependent_slice_mode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstSliceSplit1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h265_independent_slice_arg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstSliceSplit1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h265_independent_slice_mode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH265SliceSplit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstSliceSplit1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H265_SLICE_SPLIT_S pstSliceSplit2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstSliceSplit2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H265_SLICE_SPLIT_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH265SliceSplit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstSliceSplit2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_geth265slicesplit">HB_VENC_GetH265SliceSplit<a href="#hb_venc_geth265slicesplit" class="hash-link" aria-label="HB_VENC_GetH265SliceSplit的直接链接" title="HB_VENC_GetH265SliceSplit的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH265SliceSplit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_H265_SLICE_SPLIT_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstSliceSplit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 H.265 编码的 slice 分割配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstSliceSplit</td><td style="text-align:left">H.265 码流 slice 分割参数</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetH265SliceSplit参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_seth265predunit">HB_VENC_SetH265PredUnit<a href="#hb_venc_seth265predunit" class="hash-link" aria-label="HB_VENC_SetH265PredUnit的直接链接" title="HB_VENC_SetH265PredUnit的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH265PredUnit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_H265_PU_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstPredUnit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置H.265 编码的 PU 配置</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstPredUnit</td><td style="text-align:left">H.265 协议编码通道的 PU 配置</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H265_PU_S pstPredUnit1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstPredUnit1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H265_PU_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H265</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H265CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstPredUnit1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">constrained_intra_pred_flag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstPredUnit1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">intra_nxn_enable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstPredUnit1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">max_num_merge </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstPredUnit1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strong_intra_smoothing_enabled_flag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH265PredUnit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstPredUnit1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H265_PU_S pstPredUnit2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstPredUnit2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H265_PU_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH265PredUnit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstPredUnit2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_geth265predunit">HB_VENC_GetH265PredUnit<a href="#hb_venc_geth265predunit" class="hash-link" aria-label="HB_VENC_GetH265PredUnit的直接链接" title="HB_VENC_GetH265PredUnit的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH265PredUnit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_H265_PU_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstPredUnit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 H.265 编码的 PU 配置</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstPredUnit</td><td style="text-align:left">H.265 协议编码通道的 PU 配置</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetH265PredUnit参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_seth265trans">HB_VENC_SetH265Trans<a href="#hb_venc_seth265trans" class="hash-link" aria-label="HB_VENC_SetH265Trans的直接链接" title="HB_VENC_SetH265Trans的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH265Trans</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_H265_TRANS_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH265Trans</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置H.265编码的变换、量化配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH265Trans</td><td style="text-align:left">H.265 协议编码通道的变换量化配置</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H265_TRANS_S pstH265Trans1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Trans1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H265_TRANS_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H265</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H265CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH265Trans1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chroma_cb_qp_offset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH265Trans1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chroma_cr_qp_offset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH265Trans1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">user_scaling_list_enable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH265Trans</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Trans1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H265_TRANS_S pstH265Trans2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Trans2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H265_TRANS_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH265Trans</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Trans2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_geth265trans">HB_VENC_GetH265Trans<a href="#hb_venc_geth265trans" class="hash-link" aria-label="HB_VENC_GetH265Trans的直接链接" title="HB_VENC_GetH265Trans的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH265Trans</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_H265_TRANS_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH265Trans</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 H.265 编码的变换、量化配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH265Trans</td><td style="text-align:left">H.265 协议编码通道的变换量化配置</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetH265Trans参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_seth265dblk">HB_VENC_SetH265Dblk<a href="#hb_venc_seth265dblk" class="hash-link" aria-label="HB_VENC_SetH265Dblk的直接链接" title="HB_VENC_SetH265Dblk的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH265Dblk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_H265_DBLK_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH265Dblk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置 H.265 编码的 deblocking 配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH265Dblk</td><td style="text-align:left">H.265 协议编码通道的 Deblocking 配置</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H265_DBLK_S pstH265Dblk1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Dblk1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H265_DBLK_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H265</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H265CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH265Dblk1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">slice_beta_offset_div2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH265Dblk1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">slice_tc_offset_div2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH265Dblk1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">slice_deblocking_filter_disabled_flag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH265Dblk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Dblk1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H265_DBLK_S pstH265Dblk2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Dblk2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H265_DBLK_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH265Dblk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Dblk2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_geth265dblk">HB_VENC_GetH265Dblk<a href="#hb_venc_geth265dblk" class="hash-link" aria-label="HB_VENC_GetH265Dblk的直接链接" title="HB_VENC_GetH265Dblk的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH265Dblk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_H265_DBLK_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH265Dblk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 H.265 编码的 deblocking 配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH265Dblk</td><td style="text-align:left">H.265 协议编码通道的 Deblocking 配置</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetH265Dblk参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_seth265sao">HB_VENC_SetH265Sao<a href="#hb_venc_seth265sao" class="hash-link" aria-label="HB_VENC_SetH265Sao的直接链接" title="HB_VENC_SetH265Sao的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH265Sao</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_H265_SAO_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH265Sao</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置 H.265 编码的 SAO 配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH265Sao</td><td style="text-align:left">H.265 协议编码通道的 Sao 配置</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H265_SAO_S pstH265Sao1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Sao1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H265_SAO_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H265</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H265CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstH265Sao1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sample_adaptive_offset_enabled_flag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetH265Sao</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Sao1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H265_SAO_S pstH265Sao2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Sao2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_H265_SAO_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH265Sao</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstH265Sao2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_geth265sao">HB_VENC_GetH265Sao<a href="#hb_venc_geth265sao" class="hash-link" aria-label="HB_VENC_GetH265Sao的直接链接" title="HB_VENC_GetH265Sao的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetH265Sao</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_H265_SAO_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstH265Sao</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 H.265 编码的 SAO 配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstH265Sao</td><td style="text-align:left">H.265 协议编码通道的 Sao 配置</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetH265Sao参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_setintrarefresh">HB_VENC_SetIntraRefresh<a href="#hb_venc_setintrarefresh" class="hash-link" aria-label="HB_VENC_SetIntraRefresh的直接链接" title="HB_VENC_SetIntraRefresh的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetIntraRefresh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> HB_VENC_INTRA_REFRESH_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstIntraRefresh</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置 P 帧刷 Islice 的设置参数。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstIntraRefresh</td><td style="text-align:left">刷 Islice 参数</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_INTRA_REFRESH_S pstIntraRefresh1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstIntraRefresh1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_INTRA_REFRESH_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H264</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H264CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstIntraRefresh1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bRefreshEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstIntraRefresh1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enIntraRefreshMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> INTRA_REFRESH_COLUMN</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstIntraRefresh1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32RefreshNum </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetIntraRefresh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstIntraRefresh1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_INTRA_REFRESH_S pstIntraRefresh2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstIntraRefresh2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_INTRA_REFRESH_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetIntraRefresh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstIntraRefresh2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_getintrarefresh">HB_VENC_GetIntraRefresh<a href="#hb_venc_getintrarefresh" class="hash-link" aria-label="HB_VENC_GetIntraRefresh的直接链接" title="HB_VENC_GetIntraRefresh的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetIntraRefresh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_INTRA_REFRESH_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstIntraRefresh</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 P 帧刷 Islice 的参数。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstIntraRefresh</td><td style="text-align:left">刷 Islice 参数</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetIntraRefresh参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_setcuprediction">HB_VENC_SetCuPrediction<a href="#hb_venc_setcuprediction" class="hash-link" aria-label="HB_VENC_SetCuPrediction的直接链接" title="HB_VENC_SetCuPrediction的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetCuPrediction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_CU_PREDICTION_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> pstCuPrediction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置 CU 模式的倾向性。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstCuPrediction</td><td style="text-align:left">CU 模式选择的倾向性参数</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CU_PREDICTION_S pstCuPrediction1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstCuPrediction1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CU_PREDICTION_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H265</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H265CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH265Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstCuPrediction1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mode_decision_enable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstCuPrediction1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pu04_delta_rate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstCuPrediction1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cu32_merge_delta_rate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetCuPrediction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstCuPrediction1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CU_PREDICTION_S pstCuPrediction2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstCuPrediction2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CU_PREDICTION_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetCuPrediction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstCuPrediction2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_getcuprediction">HB_VENC_GetCuPrediction<a href="#hb_venc_getcuprediction" class="hash-link" aria-label="HB_VENC_GetCuPrediction的直接链接" title="HB_VENC_GetCuPrediction的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetCuPrediction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_CU_PREDICTION_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> pstCuPrediction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取 CU 模式的倾向性配置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstCuPrediction</td><td style="text-align:left">CU 模式选择的倾向性参数</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetCuPrediction参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_setjpegparam">HB_VENC_SetJpegParam<a href="#hb_venc_setjpegparam" class="hash-link" aria-label="HB_VENC_SetJpegParam的直接链接" title="HB_VENC_SetJpegParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetJpegParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_JPEG_PARAM_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> pstJpegParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置JPEG协议编码通道的高级参数。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstJpegParam</td><td style="text-align:left">编码通道属性指针</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetJpegParam参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_getjpegparam">HB_VENC_GetJpegParam<a href="#hb_venc_getjpegparam" class="hash-link" aria-label="HB_VENC_GetJpegParam的直接链接" title="HB_VENC_GetJpegParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetJpegParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_JPEG_PARAM_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> pstJpegParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取JPEG协议编码通道的高级参数设置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstJpegParam</td><td style="text-align:left">编码通道属性指针</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetJpegParam参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_setmjpegparam">HB_VENC_SetMjpegParam<a href="#hb_venc_setmjpegparam" class="hash-link" aria-label="HB_VENC_SetMjpegParam的直接链接" title="HB_VENC_SetMjpegParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetJpegParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_MJPEG_PARAM_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> pstMjpegParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置MJPEG协议编码通道的高级参数。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstMjpegParam</td><td style="text-align:left">编码通道属性指针</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn0 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_JPEG_PARAM_S pstJpegParam</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_MJPEG_PARAM_S pstMjpegParam</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstJpegParam</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_JPEG_PARAM_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstMjpegParam</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_MJPEG_PARAM_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_JPEG</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enPixelFormat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pixFmt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitStreamBufferCount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameBufferCount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bExternalFreamBuffer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrJpeg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dcf_enable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrJpeg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">quality_factor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrJpeg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">restart_interval </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitStreamBufSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4096</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">1096</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_MJPEG</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enPixelFormat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pixFmt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitStreamBufferCount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameBufferCount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bExternalFreamBuffer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrJpeg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dcf_enable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrJpeg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">quality_factor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrJpeg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">restart_interval </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitStreamBufSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4096</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">1096</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m0_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m1_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetJpegParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstJpegParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_GetJpegParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstJpegParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetMjpegParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstMjpegParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_GetMjpegParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstMjpegParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_getmjpegparam">HB_VENC_GetMjpegParam<a href="#hb_venc_getmjpegparam" class="hash-link" aria-label="HB_VENC_GetMjpegParam的直接链接" title="HB_VENC_GetMjpegParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetMjpegParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_MJPEG_PARAM_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> pstMjpegParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取MJPEG协议编码通道的高级参数设置。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstMjpegParam</td><td style="text-align:left">编码通道属性指针</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_SetMjpegParam参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_getfd">HB_VENC_GetFd<a href="#hb_venc_getfd" class="hash-link" aria-label="HB_VENC_GetFd的直接链接" title="HB_VENC_GetFd的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetFd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">fd</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取编码通道对应的设备文件句柄。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">fd</td><td style="text-align:left">返回编码通道文件句柄</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN VeChn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1920</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Test_fd1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> Test_fd2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CU_PREDICTION_S pstCuPrediction1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">pstCuPrediction1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CU_PREDICTION_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_CHN_ATTR_S m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> PT_H264</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32PicHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enMirrorFlip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DIRECTION_NONE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CODEC_ROTATION_0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stCropCfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bEnable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> HB_FALSE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_profile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stVencAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stAttrH264</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h264_level </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32GopPresetIdx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stGopAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s32DecodingRefreshType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enRcMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> VENC_RC_MODE_H264CBR</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstRcParam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stRcAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetRcParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pstRcParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32BitRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32FrameRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32IntraPeriod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pstRcParam</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">stH264Cbr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">u32VbvBufferSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CreateChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnAttr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">m_VencChnAttr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetFd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">Test_fd1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetFd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">Test_fd2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CloseFd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Test_fd1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_CloseFd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Test_fd2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s32Ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_DestroyChn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VeChn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_closefd">HB_VENC_CloseFd<a href="#hb_venc_closefd" class="hash-link" aria-label="HB_VENC_CloseFd的直接链接" title="HB_VENC_CloseFd的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetFd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">int32_t</span><span class="token plain"> fd</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>关闭编码通道对应的设备文件句柄。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">fd</td><td style="text-align:left">输入编码通道文件句柄</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>HB_VENC_GetFd参考代码</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_querystatus">HB_VENC_QueryStatus<a href="#hb_venc_querystatus" class="hash-link" aria-label="HB_VENC_QueryStatus的直接链接" title="HB_VENC_QueryStatus的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_QueryStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_CHN_STATUS_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstStatus</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取编码通道状态。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstStatus</td><td style="text-align:left">编码通道的状态指针</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_inseruserdata">HB_VENC_InserUserData<a href="#hb_venc_inseruserdata" class="hash-link" aria-label="HB_VENC_InserUserData的直接链接" title="HB_VENC_InserUserData的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_InserUserData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">uint8_t</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pu8Data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token class-name">uint32_t</span><span class="token plain"> u32Len</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>编码通道插入用户数据。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pu8Data</td><td style="text-align:left">用户数据指针</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">u32Len</td><td style="text-align:left">用户数据长度</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_setchnparam">HB_VENC_SetChnParam<a href="#hb_venc_setchnparam" class="hash-link" aria-label="HB_VENC_SetChnParam的直接链接" title="HB_VENC_SetChnParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetChnParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_CHN_PARAM_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstChnParam</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置编码通道帧率控制参数。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstChnParam</td><td style="text-align:left">帧率控制参数</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>无</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_getchnparam">HB_VENC_GetChnParam<a href="#hb_venc_getchnparam" class="hash-link" aria-label="HB_VENC_GetChnParam的直接链接" title="HB_VENC_GetChnParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetChnParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_CHN_PARAM_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstChnParam</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取编码通道帧率控制参数。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstChnParam</td><td style="text-align:left">帧率控制参数</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<blockquote>
<p>无</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_setmodparam">HB_VENC_SetModParam<a href="#hb_venc_setmodparam" class="hash-link" aria-label="HB_VENC_SetModParam的直接链接" title="HB_VENC_SetModParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetModParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> VENC_PARAM_MOD_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstModParam</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置编码通道VPS、SPS、PPS、IDR是否一帧输出。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstModParam</td><td style="text-align:left">ModParam指针</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_getmodparam">HB_VENC_GetModParam<a href="#hb_venc_getmodparam" class="hash-link" aria-label="HB_VENC_GetModParam的直接链接" title="HB_VENC_GetModParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetModParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_PARAM_MOD_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstModParam</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取编码通道VPS、SPS、PPS、IDR是否一帧输出。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstModParam</td><td style="text-align:left">ModParam指针</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_sendframeex">HB_VENC_SendFrameEx<a href="#hb_venc_sendframeex" class="hash-link" aria-label="HB_VENC_SendFrameEx的直接链接" title="HB_VENC_SendFrameEx的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SendFrameEx</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> USER_FRAME_INFO_S </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">pstFrame</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">int32_t</span><span class="token plain"> s32MilliSec</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>用户发送原始图像及该图的QpMap表进行编码。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">pstFrame</td><td style="text-align:left">原始图像信息结构指针。</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">s32MilliSec</td><td style="text-align:left">超时时间</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_setaverageqp">HB_VENC_SetAverageQp<a href="#hb_venc_setaverageqp" class="hash-link" aria-label="HB_VENC_SetAverageQp的直接链接" title="HB_VENC_SetAverageQp的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_SetAverageQp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> averageQp</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置相对Qpmap averageQp。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">averageQp</td><td style="text-align:left">相对QPMAP averageqp</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_getaverageqp">HB_VENC_GetAverageQp<a href="#hb_venc_getaverageqp" class="hash-link" aria-label="HB_VENC_GetAverageQp的直接链接" title="HB_VENC_GetAverageQp的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_GetAverageQp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">averageQp</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取相对Qpmap averageQp。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">averageQp</td><td style="text-align:left">相对QPMAP averageqp</td><td style="text-align:center">输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_set3dnrparam">HB_VENC_Set3DNRParam<a href="#hb_venc_set3dnrparam" class="hash-link" aria-label="HB_VENC_Set3DNRParam的直接链接" title="HB_VENC_Set3DNRParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_Set3DNRParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_3DNR_PARAMS </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">param</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>设置H265 3DNR 参数。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">param</td><td style="text-align:left">3DNR 参数指针</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_get3dnrparam">HB_VENC_Get3DNRParam<a href="#hb_venc_get3dnrparam" class="hash-link" aria-label="HB_VENC_Get3DNRParam的直接链接" title="HB_VENC_Get3DNRParam的直接链接">​</a></h3>
<p>【函数声明】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">int32_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HB_VENC_Get3DNRParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VENC_CHN VeChn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VENC_3DNR_PARAMS </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">param</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>【功能描述】</p>
<blockquote>
<p>获取H265 3DNR 参数。</p>
</blockquote>
<p>【参数描述】</p>
<table><thead><tr><th style="text-align:center">参数名称</th><th style="text-align:left">描述</th><th style="text-align:center">输入/输出</th></tr></thead><tbody><tr><td style="text-align:center">VeChn</td><td style="text-align:left">编码通道号。<br>取值范围：[0, VENC_MAX_CHN_NUM)</td><td style="text-align:center">输入</td></tr><tr><td style="text-align:center">param</td><td style="text-align:left">3DNR 参数指针</td><td style="text-align:center">输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th style="text-align:center">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:left">成功</td></tr><tr><td style="text-align:center">非0</td><td style="text-align:left">失败，参见错误码。</td></tr></tbody></table>
<p>【注意事项】</p>
<blockquote>
<p>无</p>
</blockquote>
<p>【参考代码】</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据结构">数据结构<a href="#数据结构" class="hash-link" aria-label="数据结构的直接链接" title="数据结构的直接链接">​</a></h2>
<p>结构中不可动态调整变量，需要在HB_VENC_SetChnAttr前设置，可动态设置变量可以随时设置。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_pixel_format_e">HB_PIXEL_FORMAT_E<a href="#hb_pixel_format_e" class="hash-link" aria-label="HB_PIXEL_FORMAT_E的直接链接" title="HB_PIXEL_FORMAT_E的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义编码器输入图像类型枚举。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">HB_PIXEL_FORMAT_E</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_NONE </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_YUV420P</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_NV12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_NV21</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_YUV422P</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_NV16</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_NV61</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_YUYV422</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_YVYU422</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_UYVY422</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_VYUY422</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_YUV444</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_YUV444P</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_NV24</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_NV42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_YUV440P</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_YUV400</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_PIXEL_FORMAT_TOTAL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> PIXEL_FORMAT_E</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="payload_type_e">PAYLOAD_TYPE_E<a href="#payload_type_e" class="hash-link" aria-label="PAYLOAD_TYPE_E的直接链接" title="PAYLOAD_TYPE_E的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义编码器类型枚举。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_PCMU </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_1016 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_G721 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_GSM </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_G723 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_DVI4_8K </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_DVI4_16K </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_LPC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_PCMA </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_G722 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_S16BE_STEREO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_S16BE_MONO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_QCELP </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_CN </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_MPEGAUDIO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_G728 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_DVI4_3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_DVI4_4 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">17</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_G729 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_G711A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">19</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_G711U </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_G726 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_G729A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_LPCM </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_CelB </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">25</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_JPEG </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">26</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_CUSM </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">27</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_NV </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">28</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_PICW </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">29</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_CPV </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_H261 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_MPEGVIDEO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_MPEG2TS </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">33</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_H263 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">34</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_SPEG </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">35</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_MPEG2VIDEO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">36</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_AAC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">37</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_WMA9STD </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">38</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_HEAAC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">39</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_PCM_VOICE </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_PCM_AUDIO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">41</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_AACLC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_MP3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">43</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_ADPCMA </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">49</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_AEC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_X_LD </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">95</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_H264 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">96</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_D_GSM_HR </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_D_GSM_EFR </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_D_L8 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">202</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_D_RED </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">203</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_D_VDVI </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">204</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_D_BT656 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">220</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_D_H263_1998 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">221</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_D_MP1S </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">222</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_D_MP2P </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">223</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_D_BMPEG </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_MP4VIDEO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">230</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_MP4AUDIO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">237</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_VC1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">238</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_JVC_ASF </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">255</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_D_AVI </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_DIVX3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">257</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_AVS </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">258</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_REAL8 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">259</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_REAL9 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">260</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_VP6 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">261</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_VP6F </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">262</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_VP6A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">263</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_SORENSON </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">264</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_H265 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">265</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_MAX </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">266</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_AMR </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1001</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_MJPEG </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_AMRWB </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1003</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PT_BUTT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> PAYLOAD_TYPE_E</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_rotation_e">HB_ROTATION_E<a href="#hb_rotation_e" class="hash-link" aria-label="HB_ROTATION_E的直接链接" title="HB_ROTATION_E的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义旋转角度枚举。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">HB_CODEC_ROTATION_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CODEC_ROTATION_0 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CODEC_ROTATION_90 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CODEC_ROTATION_180 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CODEC_ROTATION_270 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ROTATION_BUTT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> CODEC_ROTATION_E</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">CODEC_ROTATION_0</td><td style="text-align:center">不旋转，旋转 0 度。</td></tr><tr><td style="text-align:center">CODEC_ROTATION_90</td><td style="text-align:center">旋转90度。</td></tr><tr><td style="text-align:center">CODEC_ROTATION_180</td><td style="text-align:center">旋转180度。</td></tr><tr><td style="text-align:center">CODEC_ROTATION_270</td><td style="text-align:center">旋转270度。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mirror_flip_e">MIRROR_FLIP_E<a href="#mirror_flip_e" class="hash-link" aria-label="MIRROR_FLIP_E的直接链接" title="MIRROR_FLIP_E的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义镜像方式枚举。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">HB_MIRROR_FLIP_E</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DIRECTION_NONE </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VERTICAL </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HORIZONTAL </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HOR_VER </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DIRECTION_BUTT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> MIRROR_FLIP_E</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">DIRECTION_NONE</td><td style="text-align:center">不进行镜像操作</td></tr><tr><td style="text-align:center">HORIZONTAL</td><td style="text-align:center">沿着水平方向镜像操作</td></tr><tr><td style="text-align:center">VERTICAL</td><td style="text-align:center">沿着垂直方向镜像操作</td></tr><tr><td style="text-align:center">HOR_VER</td><td style="text-align:center">沿着水平和垂直方向同时镜像操作</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_h264_profile_e">HB_VENC_H264_PROFILE_E<a href="#hb_venc_h264_profile_e" class="hash-link" aria-label="HB_VENC_H264_PROFILE_E的直接链接" title="HB_VENC_H264_PROFILE_E的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义H264 profile枚举。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_PROFILE_E</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_PROFILE_UNSPECIFIED</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_PROFILE_BP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_PROFILE_MP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_PROFILE_EXTENDED</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_PROFILE_HP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_PROFILE_HIGH10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_PROFILE_HIGH422</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_PROFILE_HIGHT444</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H264_PROFILE_E</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_h264_level">HB_VENC_H264_LEVEL<a href="#hb_venc_h264_level" class="hash-link" aria-label="HB_VENC_H264_LEVEL的直接链接" title="HB_VENC_H264_LEVEL的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义H264级别枚举。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_LEVEL</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL_UNSPECIFIED</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL1b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL1_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL1_2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL1_3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL2_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL2_2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL3_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL3_2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL4 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL4_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">41</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL4_2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL5 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL5_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">51</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H264_LEVEL5_2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">52</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> HB_H264_LEVEL_E</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hb_venc_h265_level">HB_VENC_H265_LEVEL<a href="#hb_venc_h265_level" class="hash-link" aria-label="HB_VENC_H265_LEVEL的直接链接" title="HB_VENC_H265_LEVEL的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义H265 级别枚举。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H265_LEVEL</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H265_LEVEL_UNSPECIFIED</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H265_LEVEL1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H265_LEVEL2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H265_LEVEL2_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">63</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H265_LEVEL3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">90</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H265_LEVEL3_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">93</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H265_LEVEL4 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">120</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H265_LEVEL4_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H265_LEVEL5 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">150</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H265_LEVEL5_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">153</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> HB_H265_LEVEL_E</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="codec_rect_s">CODEC_RECT_S<a href="#codec_rect_s" class="hash-link" aria-label="CODEC_RECT_S的直接链接" title="CODEC_RECT_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义矩形区域信息结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_CODEC_RECT_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32X</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32Y</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32Width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32Height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> CODEC_RECT_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">s32X</td><td style="text-align:center">横坐标</td></tr><tr><td style="text-align:center">s32Y</td><td style="text-align:center">纵坐标</td></tr><tr><td style="text-align:center">u32Width</td><td style="text-align:center">宽度</td></tr><tr><td style="text-align:center">u32Height</td><td style="text-align:center">高度</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_attr_h264_s">VENC_ATTR_H264_S<a href="#venc_attr_h264_s" class="hash-link" aria-label="VENC_ATTR_H264_S的直接链接" title="VENC_ATTR_H264_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.264 编码属性结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_ATTR_H264_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_H264_PROFILE_E h264_profile</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_H264_LEVEL_E h264_level</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_ATTR_H264_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">h264_profile</td><td style="text-align:center">H264 profile，不可动态配置。</td></tr><tr><td style="text-align:center">h264_level</td><td style="text-align:center">H264 level，不可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_attr_h265_s">VENC_ATTR_H265_S<a href="#venc_attr_h265_s" class="hash-link" aria-label="VENC_ATTR_H265_S的直接链接" title="VENC_ATTR_H265_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.265 编码属性结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_ATTR_H265_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL main_still_picture_profile_enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32h265_tier</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL transform_skip_enabled_flag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> lossless_mode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> tmvp_Enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> wpp_Enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_H265_LEVEL_E h265_level</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_ATTR_H265_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">main_still_picture_profile_enable</td><td style="text-align:center">使能H265 main still picture profile，不可动态配置。</td></tr><tr><td style="text-align:center">s32h265_tier</td><td style="text-align:center">设置H265 tier信息，不可动态配置。</td></tr><tr><td style="text-align:center">transform_skip_enabled_flag</td><td style="text-align:center">是否使能 transform skip for intra CU，不可动态配置。</td></tr><tr><td style="text-align:center">lossless_mode</td><td style="text-align:center">开启无损编码模式，不可动态配置。</td></tr><tr><td style="text-align:center">tmvp_Enable</td><td style="text-align:center">使能temporal motion vector prediction，不可动态配置。</td></tr><tr><td style="text-align:center">wpp_Enable</td><td style="text-align:center">使能wpp，不可动态配置。</td></tr><tr><td style="text-align:center">h265_level</td><td style="text-align:center">H265 级别，不可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_attr_mjpeg_s">VENC_ATTR_MJPEG_S<a href="#venc_attr_mjpeg_s" class="hash-link" aria-label="VENC_ATTR_MJPEG_S的直接链接" title="VENC_ATTR_MJPEG_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 MJPEG 编码属性结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_ATTR_MJPEG_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> restart_interval</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL huff_table_valid</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_luma_dc_bits</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_luma_dc_val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_luma_ac_bits</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_luma_ac_val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">256</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_chroma_dc_bits</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_chroma_ac_bits</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_chroma_dc_val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_chroma_ac_val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">256</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_BOOL extended_sequential</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_ATTR_MJPEG_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">restart_interval</td><td style="text-align:center">指定在一个独立的扫描序列中包含的MCU的个数，不可动态配置。</td></tr><tr><td style="text-align:center">huff_table_valid</td><td style="text-align:center">是否使能huffman表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_luma_dc_bits</td><td style="text-align:center">uffman 亮度DC bit length 表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_luma_dc_val</td><td style="text-align:center">Huffman 亮度DC huffvalue表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_luma_ac_bits</td><td style="text-align:center">Huffman 亮度AC bit length 表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_luma_ac_val</td><td style="text-align:center">Huffman 亮度AC huffvalue表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_chroma_dc_bits</td><td style="text-align:center">Huffman 色度DC bit length 表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_chroma_ac_bits</td><td style="text-align:center">Huffman 色度AC bit length表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_chroma_dc_val</td><td style="text-align:center">Huffman 亮度DC huffvalue表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_chroma_ac_val</td><td style="text-align:center">Huffman 亮度AC huffvalue表，不可动态配置。</td></tr><tr><td style="text-align:center">extended_sequential</td><td style="text-align:center">12 bit 模式，不可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_attr_jpeg_s">VENC_ATTR_JPEG_S<a href="#venc_attr_jpeg_s" class="hash-link" aria-label="VENC_ATTR_JPEG_S的直接链接" title="VENC_ATTR_JPEG_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 JPEG 编码属性结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_ATTR_JPEG_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL dcf_enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> restart_interval</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> quality_factor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL huff_table_valid</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_luma_dc_bits</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_luma_dc_val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_luma_ac_bits</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_luma_ac_val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">256</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_chroma_dc_bits</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_chroma_ac_bits</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_chroma_dc_val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint8_t</span><span class="token plain"> huff_chroma_ac_val</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">256</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	HB_BOOL extended_sequential</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_ATTR_JPEG_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">dcf_enable</td><td style="text-align:center">是否使能dcf，不可动态配置。</td></tr><tr><td style="text-align:center">restart_interval</td><td style="text-align:center">指定在一个独立的扫描序列中包含的MCU的个数，不可动态配置。</td></tr><tr><td style="text-align:center">quality_factor</td><td style="text-align:center">质量系数，该值越大，压缩率越低，编码质量损失越小，可动态配置。</td></tr><tr><td style="text-align:center">huff_table_valid</td><td style="text-align:center">是否使能huffman表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_luma_dc_bits</td><td style="text-align:center">uffman 亮度DC bit length 表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_luma_dc_val</td><td style="text-align:center">Huffman 亮度DC huffvalue表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_luma_ac_bits</td><td style="text-align:center">Huffman 亮度AC bit length 表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_luma_ac_val</td><td style="text-align:center">Huffman 亮度AC huffvalue表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_chroma_dc_bits</td><td style="text-align:center">Huffman 色度DC bit length 表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_chroma_ac_bits</td><td style="text-align:center">Huffman 色度AC bit length表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_chroma_dc_val</td><td style="text-align:center">Huffman 亮度DC huffvalue表，不可动态配置。</td></tr><tr><td style="text-align:center">huff_chroma_ac_val</td><td style="text-align:center">Huffman 亮度AC huffvalue表，不可动态配置。</td></tr><tr><td style="text-align:center">extended_sequential</td><td style="text-align:center">12 bit 模式，不可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_attr_s">VENC_ATTR_S<a href="#venc_attr_s" class="hash-link" aria-label="VENC_ATTR_S的直接链接" title="VENC_ATTR_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义编码器属性结构体</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_ATTR_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PAYLOAD_TYPE_E enType</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32PicWidth</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32PicHeight</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PIXEL_FORMAT_E enPixelFormat</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32FrameBufferCount</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32BitStreamBufferCount</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bExternalFreamBuffer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32BitStreamBufSize</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CODEC_ROTATION_E enRotation</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MIRROR_FLIP_E enMirrorFlip</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VIDEO_CROP_INFO_S stCropCfg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bEnableUserPts</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> vlc_buf_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32BufJoint</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32BufJointSize</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">union</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_ATTR_H264_S stAttrH264</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_ATTR_H265_S stAttrH265</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_ATTR_MJPEG_S stAttrMjpeg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_ATTR_JPEG_S stAttrJpeg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_ATTR_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">enType</td><td style="text-align:center">编码协议类型，不可动态配置。</td></tr><tr><td style="text-align:center">u32PicWidth</td><td style="text-align:center">编码图像宽度，不可动态配置。</td></tr><tr><td style="text-align:center">u32PicHeight</td><td style="text-align:center">编码图像高度，不可动态配置。</td></tr><tr><td style="text-align:center">enPixelFormat</td><td style="text-align:center">像素格式，不可动态配置。</td></tr><tr><td style="text-align:center">u32FrameBufferCount</td><td style="text-align:center">输入的Framebuffer缓存的个数，不可动态配置。</td></tr><tr><td style="text-align:center">u32BitStreamBufferCount;</td><td style="text-align:center">输出的bitstream缓存区个数，不可动态配置。</td></tr><tr><td style="text-align:center">HB_BOOL</td><td style="text-align:center">bExternalFreamBuffer;	使用用户分配的输入buffer，不可动态配置。</td></tr><tr><td style="text-align:center">u32BitStreamBufSize</td><td style="text-align:center">输出的bitstream缓存大小，不可动态配置。</td></tr><tr><td style="text-align:center">enRotation</td><td style="text-align:center">旋转属性，不可动态配置。</td></tr><tr><td style="text-align:center">enMirrorFlip</td><td style="text-align:center">镜像属性，不可动态配置。</td></tr><tr><td style="text-align:center">stCropCfg</td><td style="text-align:center">裁剪配置，不可动态配置。</td></tr><tr><td style="text-align:center">bEnableUserPts</td><td style="text-align:center">是否使用用户pts，不可动态配置。</td></tr><tr><td style="text-align:center">vlc_buf_size</td><td style="text-align:center">设置编码task vlc buffer大小，不可动态配置。</td></tr><tr><td style="text-align:center">s32BufJoint</td><td style="text-align:center">是否使用连续内存缓  存多帧，不可动态配置。</td></tr><tr><td style="text-align:center">s32BufJointSize</td><td style="text-align:center">使用连续内存大小，范围4M-50M</td></tr><tr><td style="text-align:center">stAttrH264/stAttrMjpeg/<br>stAttrJpeg/stAttrH265</td><td style="text-align:center">某种协议的编码器属性，不可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_rc_mode_e">VENC_RC_MODE_E<a href="#venc_rc_mode_e" class="hash-link" aria-label="VENC_RC_MODE_E的直接链接" title="VENC_RC_MODE_E的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>RC 模式枚举。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">HB_VENC_RC_MODE_E</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_NONE </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_H264CBR </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_H264VBR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_H264AVBR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_H264FIXQP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_H264QPMAP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_H265CBR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_H265VBR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_H265AVBR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_H265FIXQP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_H265QPMAP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_MJPEGFIXQP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_BUTT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_RC_MODE_E</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">VENC_RC_MODE_H264CBR</td><td style="text-align:center">H264 CBR方式。</td></tr><tr><td style="text-align:center">VENC_RC_MODE_H264VBR</td><td style="text-align:center">H264 VBR方式。</td></tr><tr><td style="text-align:center">VENC_RC_MODE_H264AVBR</td><td style="text-align:center">H264 AVBR方式。</td></tr><tr><td style="text-align:center">VENC_RC_MODE_H264FIXQP</td><td style="text-align:center">H264 Fixqp方式。</td></tr><tr><td style="text-align:center">VENC_RC_MODE_H264QPMAP</td><td style="text-align:center">H.264 QPMAP 方式。</td></tr><tr><td style="text-align:center">VENC_RC_MODE_MJPEGFIXQP</td><td style="text-align:center">MJPEG Fixqp 方式。</td></tr><tr><td style="text-align:center">VENC_RC_MODE_H265CBR</td><td style="text-align:center">H265 CBR方式。</td></tr><tr><td style="text-align:center">VENC_RC_MODE_H265VBR</td><td style="text-align:center">H265 VBR方式。</td></tr><tr><td style="text-align:center">VENC_RC_MODE_H265AVBR</td><td style="text-align:center">H265 VBR方式。</td></tr><tr><td style="text-align:center">VENC_RC_MODE_H265FIXQP</td><td style="text-align:center">H265 Fixqp方式。</td></tr><tr><td style="text-align:center">VENC_RC_MODE_H265QPMAP</td><td style="text-align:center">H265 QPMAP方式。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h264_cbr_s">VENC_H264_CBR_S<a href="#venc_h264_cbr_s" class="hash-link" aria-label="VENC_H264_CBR_S的直接链接" title="VENC_H264_CBR_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.264 编码通道 CBR 属性结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_CBR_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32BitRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32FrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32InitialRcQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32VbvBufferSize</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bMbLevelRcEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxIQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MinIQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxPQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MinPQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxBQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MinBQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bHvsQpEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32HvsQpScale</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxDeltaQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bQpMapEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H264_CBR_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32IntraPeriod</td><td style="text-align:center">I帧间隔，可动态配置。</td></tr><tr><td style="text-align:center">u32IntraQp</td><td style="text-align:center">I帧的QP值，可动态配置，值越小反应的图像质量越好。</td></tr><tr><td style="text-align:center">u32BitRate</td><td style="text-align:center">目标平均比特率，单位是kbps，可动态配置。</td></tr><tr><td style="text-align:center">u32FrameRate</td><td style="text-align:center">目标帧率，单位是fps，可动态配置。</td></tr><tr><td style="text-align:center">u32InitialRcQp</td><td style="text-align:center">指定码率控制时的初始QP值，当该值不在[0,51]范围内,编码器内部会决定初始值，不可动态配置。</td></tr><tr><td style="text-align:center">u32VbvBufferSize</td><td style="text-align:center">实际的VBV buffer的空间大小为bit_rate * vbv_buffer_size / 1000（kb），该buffer的大小会影响编码图像质量和码率控制精度。当该buffer比较小时，码率控制精确度高，但图像编码质量较差；当该buffer比较大时，图像编码质量高，但是码率波动大。可动态配置。</td></tr><tr><td style="text-align:center">bMbLevelRcEnable</td><td style="text-align:center">H264的码率控制可以工作在宏块级别的控制，该模式可以达到更高精度的码率控制，但是会损失编码图像质量，该模式不可以和ROI编码一起工作，当使能ROI编码时，该功能自动失效。不可动态配置。</td></tr><tr><td style="text-align:center">u32MaxIQp</td><td style="text-align:center">I帧的最大QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MinIQp</td><td style="text-align:center">I帧的最小QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MaxPQp</td><td style="text-align:center">P帧的最大QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MinPQp</td><td style="text-align:center">P帧的最小QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MaxBQp</td><td style="text-align:center">B帧的最大QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MinBQp</td><td style="text-align:center">B帧的最小QP值，可动态配置。</td></tr><tr><td style="text-align:center">bHvsQpEnable</td><td style="text-align:center">H264的码率控制可以工作在子宏块级别的控制，该模式会调整子宏块的QP值，进而提高主观图像质量。可动态配置。</td></tr><tr><td style="text-align:center">s32HvsQpScale</td><td style="text-align:center">当hvs_qp_enable使能后有效，该值表示QP缩放因子。可动态配置。</td></tr><tr><td style="text-align:center">u32MaxDeltaQp</td><td style="text-align:center">当hvs_qp_enable使能后有效，指定HVS qp值的最大偏差范围。可动态配置。</td></tr><tr><td style="text-align:center">bQpMapEnable</td><td style="text-align:center">是否使能Qp map，可动态配置。</td></tr></tbody></table>
<p>注意：rc模块会计算码率，小于设置的码率，会调小qp值，如果qp小于qpmin，就调整不了，导致图像达不到预期；大于设置的码率，会调大qp值，如果qp大于qpmax，调整不了，码率会一直大于设置的码率，达不到设置的码率。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h264_vbr_s">VENC_H264_VBR_S<a href="#venc_h264_vbr_s" class="hash-link" aria-label="VENC_H264_VBR_S的直接链接" title="VENC_H264_VBR_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.264 编码通道 VBR 属性结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_VBR_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32FrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bQpMapEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H264_VBR_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32IntraPeriod</td><td style="text-align:center">I帧间隔，可动态配置。</td></tr><tr><td style="text-align:center">u32IntraQp</td><td style="text-align:center">I帧的QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32FrameRate</td><td style="text-align:center">帧率，可动态配置。</td></tr><tr><td style="text-align:center">bQpMapEnable</td><td style="text-align:center">是否使能Qp map，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h264_avbr_s">VENC_H264_AVBR_S<a href="#venc_h264_avbr_s" class="hash-link" aria-label="VENC_H264_AVBR_S的直接链接" title="VENC_H264_AVBR_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.264 编码通道 AVBR 属性结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_AVBR_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32BitRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32FrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32InitialRcQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32VbvBufferSize</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bMbLevelRcEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxIQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MinIQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxPQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MinPQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxBQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MinBQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bHvsQpEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32HvsQpScale</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxDeltaQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bQpMapEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H264_AVBR_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32IntraPeriod</td><td style="text-align:center">I帧间隔，可动态配置。</td></tr><tr><td style="text-align:center">u32IntraQp</td><td style="text-align:center">I帧的QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32BitRate</td><td style="text-align:center">目标平均比特率，单位是kbps，可动态配置。</td></tr><tr><td style="text-align:center">u32FrameRate</td><td style="text-align:center">目标帧率，单位是fps，可动态配置。</td></tr><tr><td style="text-align:center">u32InitialRcQp</td><td style="text-align:center">指定码率控制时的初始QP值，当该值不在[0,51]范围内,编码器内部会决定初始值，不可动态配置。</td></tr><tr><td style="text-align:center">u32VbvBufferSize</td><td style="text-align:center">实际的VBV buffer的空间大小为bit_rate * vbv_buffer_size / 1000（kb），该buffer的大小会影响编码图像质量和码率控制精度。当该buffer比较小时，码率控制精确度高，但图像编码质量较差；当该buffer比较大时，图像编码质量高，但是码率波动大，可动态配置。</td></tr><tr><td style="text-align:center">bMbLevelRcEnable</td><td style="text-align:center">H264的码率控制可以工作在宏块级别的控制，该模式可以达到更高精度的码率控制，但是会损失编码图像质量，该模式不可以和ROI编码一起工作，当使能ROI编码时，该功能自动失效。不可动态配置。</td></tr><tr><td style="text-align:center">u32MaxIQp</td><td style="text-align:center">I帧的最大QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MinIQp</td><td style="text-align:center">I帧的最小QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MaxPQp</td><td style="text-align:center">P帧的最大QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MinPQp</td><td style="text-align:center">P帧的最小QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MaxBQp</td><td style="text-align:center">B帧的最大QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MinBQp</td><td style="text-align:center">B帧的最小QP值，可动态配置。</td></tr><tr><td style="text-align:center">bHvsQpEnable</td><td style="text-align:center">H264的码率控制可以工作在子宏块级别的控制，该模式会调整子宏块的QP值，进而提高主观图像质量，可动态配置。</td></tr><tr><td style="text-align:center">s32HvsQpScale</td><td style="text-align:center">当hvs_qp_enable使能后有效，该值表示QP缩放因子，可动态配置。</td></tr><tr><td style="text-align:center">u32MaxDeltaQp</td><td style="text-align:center">当hvs_qp_enable使能后有效，指定HVS qp值的最大偏差范围，可动态配置。</td></tr><tr><td style="text-align:center">bQpMapEnable</td><td style="text-align:center">是否使能Qp map，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h264_fixqp_s">VENC_H264_FIXQP_S<a href="#venc_h264_fixqp_s" class="hash-link" aria-label="VENC_H264_FIXQP_S的直接链接" title="VENC_H264_FIXQP_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.264 编码通道 FIXQP 属性结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_FIXQP_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32FrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32PQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32BQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H264_FIXQP_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32IntraPeriod</td><td style="text-align:center">I帧间隔，可动态配置。</td></tr><tr><td style="text-align:center">u32FrameRate</td><td style="text-align:center">目标帧率，单位是fps，可动态配置。</td></tr><tr><td style="text-align:center">u32IQp</td><td style="text-align:center">强制I帧的QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32PQp</td><td style="text-align:center">强制P帧的QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32BQp</td><td style="text-align:center">强制B帧的QP值，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h264_qpmap_s">VENC_H264_QPMAP_S<a href="#venc_h264_qpmap_s" class="hash-link" aria-label="VENC_H264_QPMAP_S的直接链接" title="VENC_H264_QPMAP_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.264 编码通道 QPMAP 属性结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_QPMAP_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32FrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">  u32QpMapArray</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32QpMapArrayCount</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H264_QPMAP_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32IntraPeriod</td><td style="text-align:center">I帧间隔，可动态配置。</td></tr><tr><td style="text-align:center">u32FrameRate</td><td style="text-align:center">目标帧率，单位是fps，可动态配置。</td></tr><tr><td style="text-align:center">u32QpMapArray</td><td style="text-align:center">指定QP map表，H264的宏块大小为16x16，需要为每一个宏块指定一个QP值，每个QP值占一个字节，并且按照光栅扫描方向排序，可动态配置。</td></tr><tr><td style="text-align:center">u32QpMapArrayCount</td><td style="text-align:center">指定QP map表的大小，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h265_cbr_s">VENC_H265_CBR_S<a href="#venc_h265_cbr_s" class="hash-link" aria-label="VENC_H265_CBR_S的直接链接" title="VENC_H265_CBR_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.265 编码通道 CBR 属性结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H265_CBR_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32BitRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32FrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32InitialRcQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32VbvBufferSize</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bCtuLevelRcEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxIQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MinIQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxPQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MinPQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxBQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MinBQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bHvsQpEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32HvsQpScale</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxDeltaQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bQpMapEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H265_CBR_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32IntraPeriod</td><td style="text-align:center">I帧间隔，可动态配置。</td></tr><tr><td style="text-align:center">u32IntraQp</td><td style="text-align:center">I帧的QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32BitRate</td><td style="text-align:center">目标平均比特率，单位是kbps，可动态配置。</td></tr><tr><td style="text-align:center">u32FrameRate</td><td style="text-align:center">目标帧率，单位是fps，可动态配置。</td></tr><tr><td style="text-align:center">u32InitialRcQp</td><td style="text-align:center">指定码率控制时的初始QP值，当该值不在[0,51]范围内,编码器内部会决定初始值，不可动态配置。</td></tr><tr><td style="text-align:center">u32VbvBufferSize</td><td style="text-align:center">实际的VBV buffer的空间大小为bit_rate * vbv_buffer_size / 1000（kb），该buffer的大小会影响编码图像质量和码率控制精度。当该buffer比较小时，码率控制精确度高，但图像编码质量较差；当该buffer比较大时，图像编码质量高，但是码率波动大，可动态配置。</td></tr><tr><td style="text-align:center">bMbLevelRcEnable</td><td style="text-align:center">H264的码率控制可以工作在宏块级别的控制，该模式可以达到更高精度的码率控制，但是会损失编码图像质量，该模式不可以和ROI编码一起工作，当使能ROI编码时，该功能自动失效，可动态配置。</td></tr><tr><td style="text-align:center">u32MaxIQp</td><td style="text-align:center">I帧的最大QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MinIQp</td><td style="text-align:center">I帧的最小QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MaxPQp</td><td style="text-align:center">P帧的最大QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MinPQp</td><td style="text-align:center">P帧的最小QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MaxBQp</td><td style="text-align:center">B帧的最大QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MinBQp</td><td style="text-align:center">B帧的最小QP值，可动态配置。</td></tr><tr><td style="text-align:center">bHvsQpEnable</td><td style="text-align:center">H264的码率控制可以工作在子宏块级别的控制，该模式会调整子宏块的QP值，进而提高主观图像质量，可动态配置。</td></tr><tr><td style="text-align:center">s32HvsQpScale</td><td style="text-align:center">当hvs_qp_enable使能后有效，该值表示QP缩放因子，可动态配置。</td></tr><tr><td style="text-align:center">u32MaxDeltaQp</td><td style="text-align:center">当hvs_qp_enable使能后有效，指定HVS qp值的最大偏差范围，可动态配置。</td></tr><tr><td style="text-align:center">bQpMapEnable</td><td style="text-align:center">是否使能Qp map，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h265_vbr_s">VENC_H265_VBR_S<a href="#venc_h265_vbr_s" class="hash-link" aria-label="VENC_H265_VBR_S的直接链接" title="VENC_H265_VBR_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.265 编码通道 VBR 属性结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H265_VBR_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32FrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bQpMapEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H265_VBR_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32IntraPeriod</td><td style="text-align:center">I帧间隔，可动态配置。</td></tr><tr><td style="text-align:center">u32IntraQp</td><td style="text-align:center">I帧的QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32FrameRate</td><td style="text-align:center">帧率，可动态配置。</td></tr><tr><td style="text-align:center">bQpMapEnable</td><td style="text-align:center">是否使能Qp map，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h265_avbr_s">VENC_H265_AVBR_S<a href="#venc_h265_avbr_s" class="hash-link" aria-label="VENC_H265_AVBR_S的直接链接" title="VENC_H265_AVBR_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.265 编码通道 AVBR 属性结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H265_AVBR_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32BitRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32FrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32InitialRcQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32VbvBufferSize</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bCtuLevelRcEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxIQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MinIQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxPQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MinPQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxBQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MinBQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bHvsQpEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32HvsQpScale</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32MaxDeltaQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bQpMapEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H265_AVBR_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32IntraPeriod</td><td style="text-align:center">I帧间隔，可动态配置。</td></tr><tr><td style="text-align:center">u32IntraQp</td><td style="text-align:center">I帧的QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32BitRate</td><td style="text-align:center">目标平均比特率，单位是kbps，可动态配置。</td></tr><tr><td style="text-align:center">u32FrameRate</td><td style="text-align:center">目标帧率，单位是fps，可动态配置。</td></tr><tr><td style="text-align:center">u32InitialRcQp</td><td style="text-align:center">指定码率控制时的初始QP值，当该值不在[0,51]范围内,编码器内部会决定初始值，可动态配置。</td></tr><tr><td style="text-align:center">u32VbvBufferSize</td><td style="text-align:center">实际的VBV buffer的空间大小为bit_rate * vbv_buffer_size / 1000（kb），该buffer的大小会影响编码图像质量和码率控制精度。当该buffer比较小时，码率控制精确度高，但图像编码质量较差；当该buffer比较大时，图像编码质量高，但是码率波动大，可动态配置。</td></tr><tr><td style="text-align:center">bMbLevelRcEnable</td><td style="text-align:center">H264的码率控制可以工作在宏块级别的控制，该模式可以达到更高精度的码率控制，但是会损失编码图像质量，该模式不可以和ROI编码一起工作，当使能ROI编码时 ，该功能自动失效，可动态配置。</td></tr><tr><td style="text-align:center">u32MaxIQp</td><td style="text-align:center">I帧的最大QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MinIQp</td><td style="text-align:center">I帧的最小QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MaxPQp</td><td style="text-align:center">P帧的最大QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MinPQp</td><td style="text-align:center">P帧的最小QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MaxBQp</td><td style="text-align:center">B帧的最大QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32MinBQp</td><td style="text-align:center">B帧的最小QP值，可动态配置。</td></tr><tr><td style="text-align:center">bHvsQpEnable</td><td style="text-align:center">H264的码率控制可以工作在子宏块级别的控制，该模式会调整子宏块的QP值，进而提高主观图像质量，可动态配置。</td></tr><tr><td style="text-align:center">s32HvsQpScale</td><td style="text-align:center">当hvs_qp_enable使能后有效，该值表示QP缩放因子，可动态配置。</td></tr><tr><td style="text-align:center">u32MaxDeltaQp</td><td style="text-align:center">当hvs_qp_enable使能后有效，指定HVS qp值的最大偏差范围，可动态配置。</td></tr><tr><td style="text-align:center">bQpMapEnable</td><td style="text-align:center">是否使能Qp map，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h265_fixqp_s">VENC_H265_FIXQP_S<a href="#venc_h265_fixqp_s" class="hash-link" aria-label="VENC_H265_FIXQP_S的直接链接" title="VENC_H265_FIXQP_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.265 编码通道 Fixqp 属性结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H265_FIXQP_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32FrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32PQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32BQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H265_FIXQP_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32IntraPeriod</td><td style="text-align:center">I帧间隔，可动态配置。</td></tr><tr><td style="text-align:center">u32FrameRate</td><td style="text-align:center">目标帧率，单位是fps，可动态配置。</td></tr><tr><td style="text-align:center">u32IQp</td><td style="text-align:center">强制I帧的QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32PQp</td><td style="text-align:center">强制P帧的QP值，可动态配置。</td></tr><tr><td style="text-align:center">u32BQp</td><td style="text-align:center">强制B帧的QP值，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h265_qpmap_s">VENC_H265_QPMAP_S<a href="#venc_h265_qpmap_s" class="hash-link" aria-label="VENC_H265_QPMAP_S的直接链接" title="VENC_H265_QPMAP_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.265 编码通道 QPMAP 属性结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H265_QPMAP_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32IntraPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32FrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> u32QpMapArray</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32QpMapArrayCount</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H265_QPMAP_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32IntraPeriod</td><td style="text-align:center">I帧间隔，可动态配置。</td></tr><tr><td style="text-align:center">u32FrameRate</td><td style="text-align:center">目标帧率，单位是fps，可动态配置。</td></tr><tr><td style="text-align:center">u32QpMapArray</td><td style="text-align:center">指定QP map表，H264的宏块大小为16x16，需要为每一个宏块指定一个QP值，每个QP值占一个字节，并且按照光栅扫描方向排序，可动态配置。</td></tr><tr><td style="text-align:center">u32QpMapArrayCount</td><td style="text-align:center">指定QP map表的大小，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_mjpeg_fixqp_s">VENC_MJPEG_FIXQP_S<a href="#venc_mjpeg_fixqp_s" class="hash-link" aria-label="VENC_MJPEG_FIXQP_S的直接链接" title="VENC_MJPEG_FIXQP_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 MJPEG 编码通道 Fixqp 属性结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_MJPEG_FIXQP_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32FrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32QualityFactort</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_MJPEG_FIXQP_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32FrameRate</td><td style="text-align:center">目标帧率，单位是fps，可动态配置。</td></tr><tr><td style="text-align:center">u32QualityFactort</td><td style="text-align:center">量化因子，当该值为100时，编码的图像质量损失最小但是压缩率很低；当该值为1时，编码的图像质量损失较大，但压缩率高，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_rc_attr_s">VENC_RC_ATTR_S<a href="#venc_rc_attr_s" class="hash-link" aria-label="VENC_RC_ATTR_S的直接链接" title="VENC_RC_ATTR_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义编码通道码率控制器属性。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_RC_ATTR_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_MODE_E enRcMode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">union</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_H264_CBR_S stH264Cbr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_H264_VBR_S stH264Vbr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_H264_AVBR_S stH264AVbr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_H264_FIXQP_S stH264FixQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_H264_QPMAP_S stH264QpMap</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_MJPEG_FIXQP_S stMjpegFixQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_H265_CBR_S stH265Cbr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_H265_VBR_S stH265Vbr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_H265_AVBR_S stH265AVbr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_H265_FIXQP_S stH265FixQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VENC_H265_QPMAP_S stH265QpMap</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_RC_ATTR_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">enRcMode</td><td style="text-align:center">RC 模式，不可动态配置。</td></tr><tr><td style="text-align:center">stH264Cbr</td><td style="text-align:center">H.264 协议编码通道 Cbr 模式属性。</td></tr><tr><td style="text-align:center">stH264Vbr</td><td style="text-align:center">H.264 协议编码通道 Vbr 模式属性。</td></tr><tr><td style="text-align:center">stH264AVbr</td><td style="text-align:center">H.264 协议编码通道 AVbr 模式属性。</td></tr><tr><td style="text-align:center">stH264FixQp</td><td style="text-align:center">H.264 协议编码通道 Fixqp 模式属性。</td></tr><tr><td style="text-align:center">stH264QpMap</td><td style="text-align:center">H.264 协议编码通道 QpMap 模式属性。</td></tr><tr><td style="text-align:center">stMjpegFixQp</td><td style="text-align:center">Mjpeg 协议编码通道 Fixqp 模式属性。</td></tr><tr><td style="text-align:center">stH265Cbr</td><td style="text-align:center">.265 协议编码通道 Cbr 模式属性。</td></tr><tr><td style="text-align:center">stH265Vbr</td><td style="text-align:center">H.265 协议编码通道 Vbr 模式属性。</td></tr><tr><td style="text-align:center">stH265AVbr</td><td style="text-align:center">H.265 协议编码通道 AVbr 模式属性。</td></tr><tr><td style="text-align:center">stH265FixQp</td><td style="text-align:center">H.265 协议编码通道 Fixqp 模式属性。</td></tr><tr><td style="text-align:center">stH265QpMap</td><td style="text-align:center">H.265 协议编码通道 QpMap 模式属性。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_gop_picture_custom_s">VENC_GOP_PICTURE_CUSTOM_S<a href="#venc_gop_picture_custom_s" class="hash-link" aria-label="VENC_GOP_PICTURE_CUSTOM_S的直接链接" title="VENC_GOP_PICTURE_CUSTOM_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义自定义的GOP结构表的数据结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_GOP_PICTURE_CUSTOM_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32PictureType</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32PocOffset</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32PictureQp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32NumRefPictureL0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32RefPocL0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32RefPocL1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32TemporalId</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_GOP_PICTURE_CUSTOM_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32PictureType</td><td style="text-align:center">图像的帧类型，不可动态配置。</td></tr><tr><td style="text-align:center">s32PocOffset</td><td style="text-align:center">图像的POC值，不可动态配置。</td></tr><tr><td style="text-align:center">u32PictureQp</td><td style="text-align:center">图像的QP值，不可动态配置。</td></tr><tr><td style="text-align:center">s32NumRefPictureL0</td><td style="text-align:center">当前图像参考的L0的帧数量，只有当pic_type=1时，该值有效，不可动态配置。</td></tr><tr><td style="text-align:center">s32RefPocL0</td><td style="text-align:center">当前图像的L0参考帧的POC值，不可动态配置。</td></tr><tr><td style="text-align:center">s32RefPocL1</td><td style="text-align:center">当pic_type=2，表示当前图像的L1参考帧的POC值；当pic_type=1，表示当前图像的L0参考帧的POC值，不可动态配置。</td></tr><tr><td style="text-align:center">u32TemporalId</td><td style="text-align:center">图像的temporal id，不可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_gop_custom_s">VENC_GOP_CUSTOM_S<a href="#venc_gop_custom_s" class="hash-link" aria-label="VENC_GOP_CUSTOM_S的直接链接" title="VENC_GOP_CUSTOM_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义自定义的GOP结构的参数集。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_GOP_CUSTOM_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32CustomGopSize</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_GOP_PICTURE_CUSTOM_S stCustomGopPicture</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CUSTOM_MAX_GOP_NUM</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_GOP_CUSTOM_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32CustomGopSize</td><td style="text-align:center">自定义的GOP的大小【0，8】，不可动态配置。</td></tr><tr><td style="text-align:center">stCustomGopPicture</td><td style="text-align:center">自定义的GOP结构表数组，不可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_gop_attr_s">VENC_GOP_ATTR_S<a href="#venc_gop_attr_s" class="hash-link" aria-label="VENC_GOP_ATTR_S的直接链接" title="VENC_GOP_ATTR_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义GOP参数，用户可选择预置的GOP结构和自定义GOP结构。
【结构定义】</p>
</blockquote>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_GOP_ATTR_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32DecodingRefreshType</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32GopPresetIdx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_GOP_CUSTOM_S stCustomGopParam</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_GOP_ATTR_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">s32DecodingRefreshType</td><td style="text-align:center">设置IDR帧的具体类型，该项只对H265 codec有效，不可动态配置。</td></tr><tr><td style="text-align:center">u32GopPresetIdx</td><td style="text-align:center">选择预置的GOP结构，当该值为0时，表示需要自定义GOP结构，不可动态配置。</td></tr><tr><td style="text-align:center">stCustomGopParam</td><td style="text-align:center">自定义的GOP结构，只有当u32GopPresetIdx=0才有效，不可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_chn_attr_s">VENC_CHN_ATTR_S<a href="#venc_chn_attr_s" class="hash-link" aria-label="VENC_CHN_ATTR_S的直接链接" title="VENC_CHN_ATTR_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义编码通道属性结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_CHN_ATTR_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_ATTR_S stVencAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_RC_ATTR_S stRcAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_GOP_ATTR_S stGopAttr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_CHN_ATTR_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">stVencAttr</td><td style="text-align:center">编码器属性。</td></tr><tr><td style="text-align:center">stRcAttr</td><td style="text-align:center">码率控制器属性。</td></tr><tr><td style="text-align:center">stGopAttr</td><td style="text-align:center">Gop Mode 类型的结构体。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_jpeg_param_s">VENC_JPEG_PARAM_S<a href="#venc_jpeg_param_s" class="hash-link" aria-label="VENC_JPEG_PARAM_S的直接链接" title="VENC_JPEG_PARAM_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义JPEG协议编码通道高级参数结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_JPEG_PARAM_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32Qfactor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain">  u8LumaQuantTable</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> u8ChromaQuantTable</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint16_t</span><span class="token plain"> u16LumaQuantEsTable</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint16_t</span><span class="token plain"> u16ChromaQuantEsTable</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32RestartInterval</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VIDEO_CROP_INFO_S stCropCfg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_JPEG_PARAM_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32Qfactor</td><td style="text-align:center">具体含义请参考RFC2435协议, 系统默认为90。取值范围: [1, 99]。</td></tr><tr><td style="text-align:center">u8LumaQuantTable</td><td style="text-align:center">8bit Y量化表<br>取值范围: [0, 255]。</td></tr><tr><td style="text-align:center">u8ChromaQuantTable</td><td style="text-align:center">8bit CbCr量化表<br>取值范围: [0, 255]。</td></tr><tr><td style="text-align:center">u16LumaQuantEsTable</td><td style="text-align:center">12bit Y量化表<br>取值范围: [0, 255]。</td></tr><tr><td style="text-align:center">u16ChromaQuantEsTable</td><td style="text-align:center">12bit CbCr量化表<br>取值范围: [0, 255]。</td></tr><tr><td style="text-align:center">u32RestartInterval</td><td style="text-align:center">u32RestartInterval: [0, (picwidth+15)&gt;&gt;4 x(picheight+15)&gt;&gt;4 x 2]</td></tr><tr><td style="text-align:center">stCropCfg</td><td style="text-align:center">crop配置参数</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_mjpeg_param_s">VENC_MJPEG_PARAM_S<a href="#venc_mjpeg_param_s" class="hash-link" aria-label="VENC_MJPEG_PARAM_S的直接链接" title="VENC_MJPEG_PARAM_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义MJPEG协议编码通道高级参数结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_MJPEG_PARAM_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain">  u8LumaQuantTable </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain">  u8ChromaQuantTable </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint16_t</span><span class="token plain">  u16LumaQuantEsTable </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint16_t</span><span class="token plain"> u16ChromaQuantEsTable</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32RestartInterval</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_MJPEG_PARAM_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u8LumaQuantTable</td><td style="text-align:center">8bit Y量化表<br>取值范围: [0, 255]。</td></tr><tr><td style="text-align:center">u8ChromaQuantTable</td><td style="text-align:center">8bit CbCr量化表<br>取值范围: [0, 255]。</td></tr><tr><td style="text-align:center">u16LumaQuantEsTable</td><td style="text-align:center">12bit Y量化表<br>取值范围: [0, 255]。</td></tr><tr><td style="text-align:center">u16ChromaQuantEsTable</td><td style="text-align:center">12bit CbCr量化表<br>取值范围: [0, 255]。</td></tr><tr><td style="text-align:center">u32RestartInterval</td><td style="text-align:center">u32RestartInterval: [0, (picwidth+15)&gt;&gt;4 x(picheight+15)&gt;&gt;4 x 2]</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_intra_refresh_mode_e">VENC_INTRA_REFRESH_MODE_E<a href="#venc_intra_refresh_mode_e" class="hash-link" aria-label="VENC_INTRA_REFRESH_MODE_E的直接链接" title="VENC_INTRA_REFRESH_MODE_E的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>P 帧刷 Islice 模式定义。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">HB_VENC_INTRA_REFRESH_MODE_E</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    INTRA_REFRESH_ROW </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    INTRA_REFRESH_COLUMN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    INTRA_REFRESH_STEP_SIZE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    INTRA_REFRESH_ADAPTIVE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    INTRA_REFRESH_BUTT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_INTRA_REFRESH_MODE_E</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">INTRA_REFRESH_ROW</td><td style="text-align:center">按行刷新</td></tr><tr><td style="text-align:center">INTRA_REFRESH_COLUMN</td><td style="text-align:center">按列刷新</td></tr><tr><td style="text-align:center">INTRA_REFRESH_STEP_SIZE</td><td style="text-align:center">MB/CTU步长</td></tr><tr><td style="text-align:center">INTRA_REFRESH_ADAPTIVE</td><td style="text-align:center">一帧编码多少个帧内MB/CTU</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_intra_refresh_s">VENC_INTRA_REFRESH_S<a href="#venc_intra_refresh_s" class="hash-link" aria-label="VENC_INTRA_REFRESH_S的直接链接" title="VENC_INTRA_REFRESH_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>P 帧刷 Islice 控制参数。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_INTRA_REFRESH_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bRefreshEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_INTRA_REFRESH_MODE_E enIntraRefreshMode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32RefreshNum</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_INTRA_REFRESH_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">bRefreshEnable</td><td style="text-align:center">是否使能刷 Islice 功能。默认为 0<br>0：不使能<br>1：使能</td></tr><tr><td style="text-align:center">enIntraRefreshMode</td><td style="text-align:center">I 宏块刷新模式，分为按行刷新和按列刷新。</td></tr><tr><td style="text-align:center">u32RefreshNum</td><td style="text-align:center">每次 I 宏块刷新行数或者列数</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h264_entropy_s">VENC_H264_ENTROPY_S<a href="#venc_h264_entropy_s" class="hash-link" aria-label="VENC_H264_ENTROPY_S的直接链接" title="VENC_H264_ENTROPY_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义H264熵编码参数。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_ENTROPY_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32EntropyEncMode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">VENC_H264_ENTROPY_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32EntropyEncMode</td><td style="text-align:center">熵编码模式，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h264_dblk_s">VENC_H264_DBLK_S<a href="#venc_h264_dblk_s" class="hash-link" aria-label="VENC_H264_DBLK_S的直接链接" title="VENC_H264_DBLK_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义H264去块滤波参数。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_DBLK_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> disable_deblocking_filter_idc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> slice_alpha_c0_offset_div2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> slice_beta_offset_div2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H264_DBLK_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">disable_deblocking_filter_idc</td><td style="text-align:center">取值范围：[0, 2], 默认值 0，具体含义请参见 H.264 协议，可动态配置。</td></tr><tr><td style="text-align:center">slice_alpha_c0_offset_div2</td><td style="text-align:center">取值范围：[-6, 6], 默认值 0，具体含义请参见 H.264协议，可动态配置。</td></tr><tr><td style="text-align:center">slice_beta_offset_div2</td><td style="text-align:center">取值范围：[-6, 6], 默认值 0，具体含义请参见 H.264协议，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h265_dblk_s">VENC_H265_DBLK_S<a href="#venc_h265_dblk_s" class="hash-link" aria-label="VENC_H265_DBLK_S的直接链接" title="VENC_H265_DBLK_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义H265去块滤波参数。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H265_DBLK_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> slice_deblocking_filter_disabled_flag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> slice_beta_offset_div2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> slice_tc_offset_div2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> slice_loop_filter_across_slices_enabled_flag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H265_DBLK_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">slice_deblocking_filter_disabled_flag</td><td style="text-align:center">默认为 0。<br>取值范围：0 或 1。可动态配置。</td></tr><tr><td style="text-align:center">slice_tc_offset_div2</td><td style="text-align:center">默认为 0。<br>取值范围：[-6，6]。<br>可动态配置。</td></tr><tr><td style="text-align:center">slice_beta_offset_div2</td><td style="text-align:center">默认为 0。<br>取值范围：[-6，6]。<br>可动态配置。</td></tr><tr><td style="text-align:center">slice_loop_filter_across_slices_enabled_flag</td><td style="text-align:center">使能slice边界滤波，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_vui_h264_time_info_s">VENC_VUI_H264_TIME_INFO_S<a href="#venc_vui_h264_time_info_s" class="hash-link" aria-label="VENC_VUI_H264_TIME_INFO_S的直接链接" title="VENC_VUI_H264_TIME_INFO_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义H264 Timing参数。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_VUI_TIME_INFO_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> fixed_frame_rate_flag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> num_units_in_tick</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> time_scale</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">VENC_VUI_H264_TIME_INFO_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">fixed_frame_rate_flag</td><td style="text-align:center">具体含义请参见 H.264 协议，系统默认为 0。取值范围：0 或 1。</td></tr><tr><td style="text-align:center">num_units_in_tick</td><td style="text-align:center">参考H264规范，不可动态设置参数。</td></tr><tr><td style="text-align:center">time_scale</td><td style="text-align:center">参考H264规范，不可动态设置参数。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h264_vui_s">VENC_H264_VUI_S<a href="#venc_h264_vui_s" class="hash-link" aria-label="VENC_H264_VUI_S的直接链接" title="VENC_H264_VUI_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.264 协议编码通道 Vui 结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_VUI_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_VUI_H264_TIME_INFO_S stVuiTimeInfo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">VENC_H264_VUI_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">stVuiTimeInfo</td><td style="text-align:center">H264</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_vui_h265_time_info_s">VENC_VUI_H265_TIME_INFO_S<a href="#venc_vui_h265_time_info_s" class="hash-link" aria-label="VENC_VUI_H265_TIME_INFO_S的直接链接" title="VENC_VUI_H265_TIME_INFO_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义H265 Timing参数。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_VUI_H265_TIME_INFO_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> num_units_in_tick</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> time_scale</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> num_ticks_poc_diff_one_minus1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">VENC_VUI_H265_TIME_INFO_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">num_units_in_tick</td><td style="text-align:center">参考H265规范，不可动态设置参数。</td></tr><tr><td style="text-align:center">time_scale</td><td style="text-align:center">参考H265规范，不可动态设置参数。</td></tr><tr><td style="text-align:center">num_ticks_poc_diff_one_minus1</td><td style="text-align:center">参考H265规范，不可动态设置参数。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h265_vui_s">VENC_H265_VUI_S<a href="#venc_h265_vui_s" class="hash-link" aria-label="VENC_H265_VUI_S的直接链接" title="VENC_H265_VUI_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.264 协议编码通道 Vui 结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H265_VUI_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_VUI_H265_TIME_INFO_S stVuiTimeInfo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">VENC_H265_VUI_S</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">stVuiTimeInfo</td><td style="text-align:center">H265 Timing参数</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h265_sao_s">VENC_H265_SAO_S<a href="#venc_h265_sao_s" class="hash-link" aria-label="VENC_H265_SAO_S的直接链接" title="VENC_H265_SAO_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.265 协议编码通道 Sao 的结构体</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H265_SAO_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> sample_adaptive_offset_enabled_flag </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H265_SAO_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">sample_adaptive_offset_enabled_flag</td><td style="text-align:center">SAO参数</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h264_slice_split_s">VENC_H264_SLICE_SPLIT_S<a href="#venc_h264_slice_split_s" class="hash-link" aria-label="VENC_H264_SLICE_SPLIT_S的直接链接" title="VENC_H264_SLICE_SPLIT_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.264 协议编码通道 SLICE 分割结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_SLICE_SPLIT_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> h264_slice_mode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> h264_slice_arg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H264_SLICE_SPLIT_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">h264_slice_mode</td><td style="text-align:center">Slice 分割模式，可动态配置</td></tr><tr><td style="text-align:center">h264_slice_arg</td><td style="text-align:center">slice参数，可动态配置，代表一个slice 宏块个数，从左上开始，16x16的像素，定义一个宏块，图像被划分成一个个宏块，进行编码，宏块最大值(h+15)/16 <em>（w+15）/16，同理h265得时候宏块得最大值是(h+63)/64</em>（w+63）/64</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h265_slice_split_s">VENC_H265_SLICE_SPLIT_S<a href="#venc_h265_slice_split_s" class="hash-link" aria-label="VENC_H265_SLICE_SPLIT_S的直接链接" title="VENC_H265_SLICE_SPLIT_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.265 协议编码通道 SLICE 分割结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H265_SLICE_SPLIT_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> h265_independent_slice_mode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> h265_independent_slice_arg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> h265_dependent_slice_mode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> h265_dependent_slice_arg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H265_SLICE_SPLIT_S</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">h265_independent_slice_mode</td><td style="text-align:center">独立slice编码模<br>0：不使能   1：使能, 可动态配置。</td></tr><tr><td style="text-align:center">h265_independent_slice_arg</td><td style="text-align:center">独立slice的大小，单位是编码CTU，取值范围[0, 2^16-1]，</td></tr><tr><td style="text-align:center">h265_dependent_slice_mode</td><td style="text-align:center">非独立slice编码模式<br>0: 不使能  1：slice单位是编码CTU<br>2: slice单位是byte, 可动态配置。</td></tr><tr><td style="text-align:center">h265_dependent_slice_arg</td><td style="text-align:center">独立slice大小，范围是[0, 2^16-1]，, 可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h264_intra_pred_s">VENC_H264_INTRA_PRED_S<a href="#venc_h264_intra_pred_s" class="hash-link" aria-label="VENC_H264_INTRA_PRED_S的直接链接" title="VENC_H264_INTRA_PRED_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.264 协议编码通道帧内预测结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_INTRA_PRED_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> constrained_intra_pred_flag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">VENC_H264_INTRA_PRED_S</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">constrained_intra_pred_flag</td><td style="text-align:center">默认为 0。<br>取值范围：0 或 1。可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h265_pu_s">VENC_H265_PU_S<a href="#venc_h265_pu_s" class="hash-link" aria-label="VENC_H265_PU_S的直接链接" title="VENC_H265_PU_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义 H.265 协议编码通道 PU 参数结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H265_PU_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> intra_nxn_enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> max_num_merge</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> constrained_intra_pred_flag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> strong_intra_smoothing_enabled_flag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">VENC_H265_PU_S</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">intra_nxn_enable</td><td style="text-align:center">是否使能intra NxN PUs in intra Cus，可动态配置</td></tr><tr><td style="text-align:center">max_num_merge</td><td style="text-align:center">指定num of merge candidates in RDO，可动态配置</td></tr><tr><td style="text-align:center">constrained_intra_pred_flag</td><td style="text-align:center">默认为 0<br>取值范围：0 或 1。<br>可动态配置</td></tr><tr><td style="text-align:center">strong_intra_smoothing_enabled_flag<br>默认为 0。<br>取值范围：0 或 1。<br>可动态配置	。</td><td style="text-align:center"></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h264_trans_s">VENC_H264_TRANS_S<a href="#venc_h264_trans_s" class="hash-link" aria-label="VENC_H264_TRANS_S的直接链接" title="VENC_H264_TRANS_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义H264 Transform参数。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H264_TRANS_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> transform_8x8_enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> chroma_cb_qp_offset</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> chroma_cr_qp_offset</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> user_scaling_list_enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> scaling_list_4x4</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">HB_VENC_SL_MATRIX_NUM </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> scaling_list_8x8</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H264_TRANS_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">transform_8x8_enable</td><td style="text-align:center">使能8x8 transform，可动态配置。</td></tr><tr><td style="text-align:center">chroma_cb_qp_offset</td><td style="text-align:center">指定cb分量的QP偏差，可动态配置。</td></tr><tr><td style="text-align:center">chroma_cr_qp_offset</td><td style="text-align:center">指定cr分量的QP偏差，可动态配置。</td></tr><tr><td style="text-align:center">user_scaling_list_enable</td><td style="text-align:center">使能用户指定的scaling list，不可动态配置。</td></tr><tr><td style="text-align:center">scaling_list_4x4</td><td style="text-align:center">指定4x4块的相关系数，每个元素有16个系数，不可动态配置。</td></tr><tr><td style="text-align:center">scaling_list_8x8</td><td style="text-align:center">指定8x8块的相关系数，每个元素有64个系数，不可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_h265_trans_s">VENC_H265_TRANS_S<a href="#venc_h265_trans_s" class="hash-link" aria-label="VENC_H265_TRANS_S的直接链接" title="VENC_H265_TRANS_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义H265 Transform参数。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_H265_TRANSFORM_PARAMS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> chroma_cb_qp_offset</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> chroma_cr_qp_offset</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> user_scaling_list_enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> scaling_list_4x4</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">HB_VENC_SL_MATRIX_NUM </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> scaling_list_8x8</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">HB_VENC_SL_MATRIX_NUM </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> scaling_list_16x16</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">HB_VENC_SL_MATRIX_NUM</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> scaling_list_32x32</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> scaling_list_dc_16x16</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">HB_VENC_SL_MATRIX_NUM </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> scaling_list_dc_32x32</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_H265_TRANS_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">chroma_cb_qp_offset</td><td style="text-align:center">指定cb分量的QP偏差，可动态配置。</td></tr><tr><td style="text-align:center">chroma_cr_qp_offset</td><td style="text-align:center">指定cr分量的QP偏差，可动态配置。</td></tr><tr><td style="text-align:center">user_scaling_list_enable</td><td style="text-align:center">使能用户指定的scaling list，不可动态配置。</td></tr><tr><td style="text-align:center">scaling_list_4x4</td><td style="text-align:center">指定4x4块的相关系数，每个元素有16个系数，不可动态配置。</td></tr><tr><td style="text-align:center">scaling_list_8x8</td><td style="text-align:center">指定8x8块的相关系数，每个元素有64个系数，不可动态配置。</td></tr><tr><td style="text-align:center">scaling_list_16x16</td><td style="text-align:center">指定16x16块的相关系数，每个元素有64个系数，不可动态配置。</td></tr><tr><td style="text-align:center">scaling_list_32x32</td><td style="text-align:center">指定32x32块的相关系数，每个元素有64个系数，不可动态配置。</td></tr><tr><td style="text-align:center">scaling_list_dc_16x16</td><td style="text-align:center">指定16x16的DC系数，不可动态配置。</td></tr><tr><td style="text-align:center">scaling_list_dc_32x32</td><td style="text-align:center">指定32x32的DC系数，不可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_cu_prediction_s">VENC_CU_PREDICTION_S<a href="#venc_cu_prediction_s" class="hash-link" aria-label="VENC_CU_PREDICTION_S的直接链接" title="VENC_CU_PREDICTION_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义H264/H265内部编码模式决 策参数。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_CU_PREDICTION_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">int32_t</span><span class="token plain"> mode_decision_enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu04_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu08_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu16_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu32_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu04_intra_planar_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu04_intra_dc_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu04_intra_angle_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu08_intra_planar_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu08_intra_dc_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu08_intra_angle_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu16_intra_planar_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu16_intra_dc_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu16_intra_angle_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu32_intra_planar_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu32_intra_dc_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pu32_intra_angle_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> cu08_intra_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> cu08_inter_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> cu08_merge_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> cu16_intra_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> cu16_inter_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> cu16_merge_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> cu32_intra_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> cu32_inter_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> cu32_merge_delta_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_CU_PREDICTION_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">mode_decision_enable;</td><td style="text-align:center">使能模式选择，可动态配置。</td></tr><tr><td style="text-align:center">pu04_delta_rate;</td><td style="text-align:center">4x4块cost delta，可动态配置。</td></tr><tr><td style="text-align:center">pu08_delta_rate;</td><td style="text-align:center">8x8块cost delta，可动态配置。</td></tr><tr><td style="text-align:center">pu16_delta_rate;</td><td style="text-align:center">16x16块cost delta，可动态配置。</td></tr><tr><td style="text-align:center">pu32_delta_rate;</td><td style="text-align:center">32x32块cost delta，可动态配置。</td></tr><tr><td style="text-align:center">pu04_intra_planar_delta_rate;</td><td style="text-align:center">帧内预测模式下4x4 intra planar rate delta，可动态配置。</td></tr><tr><td style="text-align:center">pu04_intra_dc_delta_rate;</td><td style="text-align:center">帧内预测模式下4x4 intra dc rate delta，可动态配置。</td></tr><tr><td style="text-align:center">pu04_intra_angle_delta_rate;</td><td style="text-align:center">帧内预测模式下4x4 intra angle rate delta，可动态配置。</td></tr><tr><td style="text-align:center">pu08_intra_planar_delta_rate;</td><td style="text-align:center">帧内预测模式下8x8 intra planar rate delta，可动态配置。</td></tr><tr><td style="text-align:center">pu08_intra_dc_delta_rate;</td><td style="text-align:center">帧内预测模式下8x8 intra dc rate delta，可动态配置。</td></tr><tr><td style="text-align:center">pu08_intra_angle_delta_rate;</td><td style="text-align:center">帧内预测模式下8x8 intra angle rate delta，可动态配置。</td></tr><tr><td style="text-align:center">pu16_intra_planar_delta_rate;</td><td style="text-align:center">帧内预测模式下16x16 intra planar rate delta，可动态配置。</td></tr><tr><td style="text-align:center">pu16_intra_dc_delta_rate;</td><td style="text-align:center">帧内预测模式下16x16 intra dc rate delta，可动态配置。</td></tr><tr><td style="text-align:center">pu16_intra_angle_delta_rate;</td><td style="text-align:center">帧内预测模式下16x16 intra angle rate delta，可动态配置。</td></tr><tr><td style="text-align:center">pu32_intra_planar_delta_rate;</td><td style="text-align:center">帧内预测模式下32x32 intra planar rate delta，可动态配置。</td></tr><tr><td style="text-align:center">pu32_intra_dc_delta_rate;</td><td style="text-align:center">帧内预测模式下32x32 intra dc rate delta，可动态配置。</td></tr><tr><td style="text-align:center">pu32_intra_angle_delta_rate;</td><td style="text-align:center">帧内预测模式下32x32 intra angle rate delta，可动态配置。</td></tr><tr><td style="text-align:center">cu08_intra_delta_rate;</td><td style="text-align:center">帧间CU8x8 intra rate delta，可动态配置。</td></tr><tr><td style="text-align:center">cu08_inter_delta_rate;</td><td style="text-align:center">帧间CU8x8 inter rate delta，可动态配置。</td></tr><tr><td style="text-align:center">cu08_merge_delta_rate;</td><td style="text-align:center">帧间CU8x8 merge rate delta，可动态配置。</td></tr><tr><td style="text-align:center">cu16_intra_delta_rate;</td><td style="text-align:center">帧间CU16x16 intra rate delta，可动态配置。</td></tr><tr><td style="text-align:center">cu16_inter_delta_rate;</td><td style="text-align:center">帧间CU16x16 inter rate delta，可动态配置。</td></tr><tr><td style="text-align:center">cu16_merge_delta_rate;</td><td style="text-align:center">帧间CU16x16 merge rate delta，可动态配置。</td></tr><tr><td style="text-align:center">cu32_intra_delta_rate;</td><td style="text-align:center">帧间CU32x32 intra rate delta，可动态配置。</td></tr><tr><td style="text-align:center">cu32_inter_delta_rate;</td><td style="text-align:center">帧间CU32x32 inter rate delta，可动态配置。</td></tr><tr><td style="text-align:center">cu32_merge_delta_rate;</td><td style="text-align:center">帧间CU32x32 merge rate delta，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="video_crop_info_s">VIDEO_CROP_INFO_S<a href="#video_crop_info_s" class="hash-link" aria-label="VIDEO_CROP_INFO_S的直接链接" title="VIDEO_CROP_INFO_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义通道截取（Crop）参数。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VIDEO_CROP_INFO_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL bEnable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CODEC_RECT_S stRect</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">VIDEO_CROP_INFO_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">bEnable</td><td style="text-align:center">是否进行裁剪。<br>取值范围：[HB_FALSE, HB_TRUE]</td></tr><tr><td style="text-align:center">stRect</td><td style="text-align:center">裁剪的区域，其中s32X，s32Y是8字节对齐，H.264/H.265对应的u32Width，u32Height是2字节对齐，mjpeg、jpeg对应的u32Width，u32Height是1字节对齐</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="video_frame_pack_s">VIDEO_FRAME_PACK_S<a href="#video_frame_pack_s" class="hash-link" aria-label="VIDEO_FRAME_PACK_S的直接链接" title="VIDEO_FRAME_PACK_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义图像帧结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VIDEO_FRAME_PACK_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hb_char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vir_ptr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint64_t</span><span class="token plain"> phy_ptr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PIXEL_FORMAT_E pix_format</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> stride</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> vstride</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> fd</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint64_t</span><span class="token plain"> pts</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL frame_end</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> flags</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> src_idx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VIDEO_FRAME_PACK_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">vir_ptr[3]</td><td style="text-align:center">图像帧虚拟地址指针</td></tr><tr><td style="text-align:center">phy_ptr[3]</td><td style="text-align:center">图像帧物理地址</td></tr><tr><td style="text-align:center">size</td><td style="text-align:center">图像帧大小</td></tr><tr><td style="text-align:center">width</td><td style="text-align:center">图像宽度</td></tr><tr><td style="text-align:center">height</td><td style="text-align:center">图像高度</td></tr><tr><td style="text-align:center">pix_format</td><td style="text-align:center">图像像素格式</td></tr><tr><td style="text-align:center">stride</td><td style="text-align:center">图像横向跨度</td></tr><tr><td style="text-align:center">vstride</td><td style="text-align:center">图像垂直跨度</td></tr><tr><td style="text-align:center">fd[3]</td><td style="text-align:center">图像ion内存句柄</td></tr><tr><td style="text-align:center">pts</td><td style="text-align:center">图像pts</td></tr><tr><td style="text-align:center">frame_end</td><td style="text-align:center">图像是否最后一帧</td></tr><tr><td style="text-align:center">flags</td><td style="text-align:center">图像标志</td></tr><tr><td style="text-align:center">src_idx</td><td style="text-align:center">内部buffer序号</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="video_frame_s">VIDEO_FRAME_S<a href="#video_frame_s" class="hash-link" aria-label="VIDEO_FRAME_S的直接链接" title="VIDEO_FRAME_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义视频原始图像帧结构。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VIDEO_FRAME_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VIDEO_FRAME_PACK_S stVFrame</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">union</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VIDEO_FRAME_INFO_S stFrameInfo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VIDEO_FRAME_INFO_JPEG_S stJpegInfo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VIDEO_FRAME_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">stVFrame</td><td style="text-align:center">视频帧</td></tr><tr><td style="text-align:center">stFrameInfo</td><td style="text-align:center">视频帧信息</td></tr><tr><td style="text-align:center">stJpegInfo</td><td style="text-align:center">Jpeg帧信息</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="video_frame_info_s">VIDEO_FRAME_INFO_S<a href="#video_frame_info_s" class="hash-link" aria-label="VIDEO_FRAME_INFO_S的直接链接" title="VIDEO_FRAME_INFO_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义视频图像帧信息结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VIDEO_FRAME_INFO_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> decode_result</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> frame_display_index</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> frame_decoded_index</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint64_t</span><span class="token plain"> stream_start_addr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> stream_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> nalu_type</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> err_mb_in_frame_decoded</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> total_mb_in_frame_decoded</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> err_mb_in_frame_display</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> total_mb_in_frame_display</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CODEC_RECT_S display_rect</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> display_width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> display_height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CODEC_RECT_S decoded_rect</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> aspect_rate_info</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> frame_rate_numerator</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> frame_rate_denominator</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> display_poc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> decoded_poc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> error_reason</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> warn_info</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> sequence_no</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> temporal_id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> output_flag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> ctu_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VIDEO_FRAME_INFO_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">decode_result</td><td style="text-align:center">解码结果</td></tr><tr><td style="text-align:center">frame_display_index</td><td style="text-align:center">帧显示序号</td></tr><tr><td style="text-align:center">frame_decoded_index</td><td style="text-align:center">帧解码序号</td></tr><tr><td style="text-align:center">stream_start_addr;</td><td style="text-align:center">码流起始地址</td></tr><tr><td style="text-align:center">stream_size;</td><td style="text-align:center">码流大小</td></tr><tr><td style="text-align:center">nalu_type</td><td style="text-align:center">码流帧类型</td></tr><tr><td style="text-align:center">err_mb_in_frame_decoded</td><td style="text-align:center">解码帧错误MB块数量</td></tr><tr><td style="text-align:center">total_mb_in_frame_decoded</td><td style="text-align:center">解码帧总MB块数量</td></tr><tr><td style="text-align:center">err_mb_in_frame_display</td><td style="text-align:center">显示帧错误MB块数量</td></tr><tr><td style="text-align:center">total_mb_in_frame_display</td><td style="text-align:center">显示帧总MB块数量</td></tr><tr><td style="text-align:center">display_rect</td><td style="text-align:center">显示区域</td></tr><tr><td style="text-align:center">display_width</td><td style="text-align:center">显示宽度</td></tr><tr><td style="text-align:center">display_height</td><td style="text-align:center">显示高度</td></tr><tr><td style="text-align:center">decoded_rect</td><td style="text-align:center">解码区域</td></tr><tr><td style="text-align:center">aspect_rate_info</td><td style="text-align:center">纵横比信息</td></tr><tr><td style="text-align:center">frame_rate_numerator</td><td style="text-align:center">帧速率分数的分子部分</td></tr><tr><td style="text-align:center">frame_rate_denominator</td><td style="text-align:center">帧速率分数的分母部分</td></tr><tr><td style="text-align:center">display_poc</td><td style="text-align:center">图像显示序号</td></tr><tr><td style="text-align:center">decoded_poc</td><td style="text-align:center">图像解码序号</td></tr><tr><td style="text-align:center">error_reason</td><td style="text-align:center">解码错误信息</td></tr><tr><td style="text-align:center">warn_info</td><td style="text-align:center">解码告警信息</td></tr><tr><td style="text-align:center">sequence_no</td><td style="text-align:center">图像序号，每帧加1</td></tr><tr><td style="text-align:center">temporal_id</td><td style="text-align:center">custom gop中的tempeoral id</td></tr><tr><td style="text-align:center">output_flag</td><td style="text-align:center">是否输出标志</td></tr><tr><td style="text-align:center">ctu_size</td><td style="text-align:center">ctu size</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="video_frame_info_jpeg_s">VIDEO_FRAME_INFO_JPEG_S<a href="#video_frame_info_jpeg_s" class="hash-link" aria-label="VIDEO_FRAME_INFO_JPEG_S的直接链接" title="VIDEO_FRAME_INFO_JPEG_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义视频图像帧信息结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VIDEO_FRAME_INFO_JPEG_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> decode_result</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> frame_display_index</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint64_t</span><span class="token plain"> stream_start_addr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> stream_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> err_rst_idx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> err_pos_x</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> err_pos_y</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> display_width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> display_height</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VIDEO_FRAME_INFO_JPEG_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">decode_result;</td><td style="text-align:center">解码结果</td></tr><tr><td style="text-align:center">frame_display_index;</td><td style="text-align:center">帧显示序号</td></tr><tr><td style="text-align:center">stream_start_addr;</td><td style="text-align:center">码流起始地址</td></tr><tr><td style="text-align:center">stream_size;</td><td style="text-align:center">码流大小</td></tr><tr><td style="text-align:center">err_rst_idx;</td><td style="text-align:center">JPEG error restart index decode_result 返回成功后可用。</td></tr><tr><td style="text-align:center">err_pos_x;</td><td style="text-align:center">JPEG error MCU position X decode_result 返回成功后可用。</td></tr><tr><td style="text-align:center">err_pos_y;</td><td style="text-align:center">JPEG error MCU position Y decode_result 返回成功后可用。</td></tr><tr><td style="text-align:center">display_width;</td><td style="text-align:center">显示宽度</td></tr><tr><td style="text-align:center">display_height;</td><td style="text-align:center">显示高度</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="video_stream_pack_s">VIDEO_STREAM_PACK_S<a href="#video_stream_pack_s" class="hash-link" aria-label="VIDEO_STREAM_PACK_S的直接链接" title="VIDEO_STREAM_PACK_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义视频流的stream buffer信息。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VIDEO_PACK_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hb_char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vir_ptr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint64_t</span><span class="token plain"> phy_ptr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint64_t</span><span class="token plain"> pts</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> fd</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> src_idx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL stream_end</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VIDEO_STREAM_PACK_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">vir_ptr</td><td style="text-align:center">帧buffer虚拟地址指针</td></tr><tr><td style="text-align:center">phy_ptr</td><td style="text-align:center">帧buffer物理地址</td></tr><tr><td style="text-align:center">size</td><td style="text-align:center">帧buffer总的大小</td></tr><tr><td style="text-align:center">pts</td><td style="text-align:center">帧时间戳</td></tr><tr><td style="text-align:center">fd</td><td style="text-align:center">buffer文件句柄</td></tr><tr><td style="text-align:center">src_idx</td><td style="text-align:center">索引号</td></tr><tr><td style="text-align:center">stream_end</td><td style="text-align:center">最后一段数据数据流</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="video_stream_info_s">VIDEO_STREAM_INFO_S<a href="#video_stream_info_s" class="hash-link" aria-label="VIDEO_STREAM_INFO_S的直接链接" title="VIDEO_STREAM_INFO_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义H264/H265输出码流的额外信息。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VIDEO_STREAM_INFO_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOLframe_index</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint64_t</span><span class="token plain"> frame_start_addr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> frame_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> nalu_type</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> slice_idx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> slice_num</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> dependent_slice_num</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> independent_slice_num</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> pic_skipped</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> intra_block_num</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> skip_block_num</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> avg_mb_qp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> enc_pic_byte</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> enc_gop_pic_idx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> enc_pic_poc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> enc_src_idx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> enc_pic_cnt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> enc_error_reason</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> enc_warn_info</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> frame_cycle</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> temporal_id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> longterm_ref_type</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VIDEO_STREAM_INFO_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">frame_start_addr</td><td style="text-align:center">码流起始地址</td></tr><tr><td style="text-align:center">frame_size</td><td style="text-align:center">码流大小</td></tr><tr><td style="text-align:center">frame_index</td><td style="text-align:center">重构帧的序号</td></tr><tr><td style="text-align:center">nalu_type</td><td style="text-align:center">nalu类型</td></tr><tr><td style="text-align:center">slice_idx</td><td style="text-align:center">slice 序号</td></tr><tr><td style="text-align:center">slice_num</td><td style="text-align:center">slice数量，H264有效</td></tr><tr><td style="text-align:center">dependent_slice_num</td><td style="text-align:center">非独立slice数量，H265有效</td></tr><tr><td style="text-align:center">independent_slice_num</td><td style="text-align:center">独立slice数量，H265有效</td></tr><tr><td style="text-align:center">pic_skipped</td><td style="text-align:center">标记该帧是否被忽略</td></tr><tr><td style="text-align:center">intra_block_num</td><td style="text-align:center">帧内块数量</td></tr><tr><td style="text-align:center">skip_block_num</td><td style="text-align:center">忽略块数量</td></tr><tr><td style="text-align:center">avg_mb_qp</td><td style="text-align:center">平均宏块QP</td></tr><tr><td style="text-align:center">enc_pic_byte</td><td style="text-align:center">编码图像的大小，单位是byte</td></tr><tr><td style="text-align:center">enc_gop_pic_idx</td><td style="text-align:center">编码图像的gop索引</td></tr><tr><td style="text-align:center">enc_pic_poc</td><td style="text-align:center">编码图像的POC值</td></tr><tr><td style="text-align:center">enc_src_idx</td><td style="text-align:center">编码图像的buffer索引</td></tr><tr><td style="text-align:center">enc_pic_cnt</td><td style="text-align:center">编码图像的数量</td></tr><tr><td style="text-align:center">enc_error_reason</td><td style="text-align:center">编码错误信息</td></tr><tr><td style="text-align:center">enc_warn_info</td><td style="text-align:center">编码警告信息</td></tr><tr><td style="text-align:center">frame_cycle</td><td style="text-align:center">编码一帧的周期</td></tr><tr><td style="text-align:center">temporal_id</td><td style="text-align:center">输出码流时域层号</td></tr><tr><td style="text-align:center">longterm_ref_type</td><td style="text-align:center">输出码流帧类型，bit1 bit0有效<br>bit1 为1 表示为长期参考帧<br>bit0位1表示为参考长期参考帧。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="video_stream_info_jpeg_s">VIDEO_STREAM_INFO_JPEG_S<a href="#video_stream_info_jpeg_s" class="hash-link" aria-label="VIDEO_STREAM_INFO_JPEG_S的直接链接" title="VIDEO_STREAM_INFO_JPEG_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义MJPEG/JPEG输出码流的额外信息。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">VIDEO_STREAM_INFO_JPEG_S</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint64_t</span><span class="token plain"> frame_start_addr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">int32_t</span><span class="token plain"> frame_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">uint32_t</span><span class="token plain"> slice_idx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">uint32_t</span><span class="token plain"> slice_num</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> frame_cycle</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">VIDEO_STREAM_INFO_JPEG_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">frame_start_addr</td><td style="text-align:center">码流起始地址</td></tr><tr><td style="text-align:center">frame_size</td><td style="text-align:center">码流大小</td></tr><tr><td style="text-align:center">slice_idx</td><td style="text-align:center">slice 索引</td></tr><tr><td style="text-align:center">slice_num</td><td style="text-align:center">slice 个数</td></tr><tr><td style="text-align:center">frame_cycle</td><td style="text-align:center">编码一帧的周期</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="video_stream_s">VIDEO_STREAM_S<a href="#video_stream_s" class="hash-link" aria-label="VIDEO_STREAM_S的直接链接" title="VIDEO_STREAM_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义帧码流类型结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VIDEO_STREAM_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VIDEO_STREAM_PACK_S pstPack</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">union</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VIDEO_STREAM_INFO_S stStreamInfo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VIDEO_STREAM_INFO_JPEG_S stJpegInfo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">VIDEO_STREAM_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">pstPack</td><td style="text-align:center">帧码流包结构  。</td></tr><tr><td style="text-align:center">stStreamInfo</td><td style="text-align:center">码流特征信息。</td></tr><tr><td style="text-align:center">stJpegInfo</td><td style="text-align:center">码流特征信息。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_recv_pic_param_s">VENC_RECV_PIC_PARAM_S<a href="#venc_recv_pic_param_s" class="hash-link" aria-label="VENC_RECV_PIC_PARAM_S的直接链接" title="VENC_RECV_PIC_PARAM_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义编码通道连续接收并编码的帧数结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_RECV_PIC_PARAM_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32RecvPicNum</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">VENC_RECV_PIC_PARAM_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">s32RecvPicNum</td><td style="text-align:center">编码通道连续接收并编码的帧数。范围：[-1,0)∪(0 ∞]</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_ref_param_s">VENC_REF_PARAM_S<a href="#venc_ref_param_s" class="hash-link" aria-label="VENC_REF_PARAM_S的直接链接" title="VENC_REF_PARAM_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义编码器参考参数结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">typedef struct HB_VENC_REF_PARAM_S</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint32_t use_longterm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint32_t longterm_pic_period;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint32_t longterm_pic_using_period;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} VENC_REF_PARAM_S;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">use_longterm</td><td style="text-align:center">启用长帧参考模式，不可动态配置。</td></tr><tr><td style="text-align:center">longterm_pic_period</td><td style="text-align:center">长帧参考图片周期，可动态配置。</td></tr><tr><td style="text-align:center">longterm_pic_using_period</td><td style="text-align:center">长帧参考图片使用周期，可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_user_rc_attr_s">VENC_USER_RC_ATTR_S<a href="#venc_user_rc_attr_s" class="hash-link" aria-label="VENC_USER_RC_ATTR_S的直接链接" title="VENC_USER_RC_ATTR_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义用户图像帧信息。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_USER_RC_ATTR_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HB_BOOL qp_map_valid</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">qp_map_array</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> qp_map_array_count</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_USER_RC_ATTR_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">qp_map_valid</td><td style="text-align:center">是否使能qp map。</td></tr><tr><td style="text-align:center">qp_map_array	qp</td><td style="text-align:center">map表指针。</td></tr><tr><td style="text-align:center">qp_map_array_count</td><td style="text-align:center">qp map 表长度。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="user_frame_info_s">USER_FRAME_INFO_S<a href="#user_frame_info_s" class="hash-link" aria-label="USER_FRAME_INFO_S的直接链接" title="USER_FRAME_INFO_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义用户图像帧信息。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_USER_FRAME_INFO_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VIDEO_FRAME_S stUserFrame</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_USER_RC_ATTR_S stUserRcInfo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> USER_FRAME_INFO_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">stUserFrame</td><td style="text-align:center">图像帧</td></tr><tr><td style="text-align:center">stUserRcInfo</td><td style="text-align:center">用户RC信息。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_param_mod_s">VENC_PARAM_MOD_S<a href="#venc_param_mod_s" class="hash-link" aria-label="VENC_PARAM_MOD_S的直接链接" title="VENC_PARAM_MOD_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义编码通道帧率控制参数。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_PARAM_MOD_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> u32OneStreamBuffer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_PARAM_MOD_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">u32OneStreamBuffer</td><td style="text-align:center">VPS、SPS、PPS、IDR是否一帧输出<br>默认一帧输出。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_frame_rate_s">VENC_FRAME_RATE_S<a href="#venc_frame_rate_s" class="hash-link" aria-label="VENC_FRAME_RATE_S的直接链接" title="VENC_FRAME_RATE_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义编码通道帧率控制参数。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_FRAME_RATE_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32InputFrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> s32OutputFrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_FRAME_RATE_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">s32InputFrameRate</td><td style="text-align:center">输入帧率</td></tr><tr><td style="text-align:center">s32OutputFrameRate</td><td style="text-align:center">输出帧率，范围[1- s32InputFrameRate）</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_chn_param_s">VENC_CHN_PARAM_S<a href="#venc_chn_param_s" class="hash-link" aria-label="VENC_CHN_PARAM_S的直接链接" title="VENC_CHN_PARAM_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义编码通道参数。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_CHN_PARAM_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VENC_FRAME_RATE_S stFrameRate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_CHN_PARAM_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">stFrameRate</td><td style="text-align:center">帧率控制参数，可动态设置</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_roi_attr_s">VENC_ROI_ATTR_S<a href="#venc_roi_attr_s" class="hash-link" aria-label="VENC_ROI_ATTR_S的直接链接" title="VENC_ROI_ATTR_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义编码感兴趣区域信息。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_ROI_ATTR_S</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> roi_enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> roi_map_array</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> roi_map_array_count</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_ROI_ATTR_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">roi_enable</td><td style="text-align:center">使能roi区域，不可动态配置。</td></tr><tr><td style="text-align:center">roi_map_array</td><td style="text-align:center">roi区域Qp数组，可动态配置。</td></tr><tr><td style="text-align:center">roi_map_array_count</td><td style="text-align:center">roi区域Qp数组个数，不可动态配置。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_chn_status_s">VENC_CHN_STATUS_S<a href="#venc_chn_status_s" class="hash-link" aria-label="VENC_CHN_STATUS_S的直接链接" title="VENC_CHN_STATUS_S的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义编码通道状态结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_CHN_STATUS_S</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> cur_input_buf_cnt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint64_t</span><span class="token plain"> cur_input_buf_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint64_t</span><span class="token plain"> cur_output_buf_cnt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint64_t</span><span class="token plain"> cur_output_buf_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> left_recv_frame</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> left_enc_frame</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> total_input_buf_cnt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> total_output_buf_cnt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">int32_t</span><span class="token plain"> pipeline</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">int32_t</span><span class="token plain"> channel_port_id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_CHN_STATUS_S</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">cur_input_buf_cnt</td><td style="text-align:center">当前输入未编码图像帧个数</td></tr><tr><td style="text-align:center">cur_input_buf_size</td><td style="text-align:center">当前输入帧buffer size</td></tr><tr><td style="text-align:center">cur_output_buf_cnt</td><td style="text-align:center">当前已完成编码图像帧个数</td></tr><tr><td style="text-align:center">cur_output_buf_size</td><td style="text-align:center">当前已编码buffer size</td></tr><tr><td style="text-align:center">left_recv_frame</td><td style="text-align:center">剩余需要接收图像帧数</td></tr><tr><td style="text-align:center">left_enc_frame</td><td style="text-align:center">剩余需要编码图像帧数</td></tr><tr><td style="text-align:center">total_input_buf_cnt</td><td style="text-align:center">总计输入图像帧个数</td></tr><tr><td style="text-align:center">total_output_buf_cnt</td><td style="text-align:center">总计编码图像帧个数</td></tr><tr><td style="text-align:center">pipeline</td><td style="text-align:center">pipeline</td></tr><tr><td style="text-align:center">channel_port_id</td><td style="text-align:center">channel id</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venc_3dnr_params">VENC_3DNR_PARAMS<a href="#venc_3dnr_params" class="hash-link" aria-label="VENC_3DNR_PARAMS的直接链接" title="VENC_3DNR_PARAMS的直接链接">​</a></h3>
<p>【描述】</p>
<blockquote>
<p>定义编码通道状态结构体。</p>
</blockquote>
<p>【结构定义】</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">HB_VENC_3DNR_PARAMS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> nr_y_enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> nr_cb_enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> nr_cr_enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> nr_est_enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> nr_intra_weightY</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> nr_intra_weightCb</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> nr_intra_weightCr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> nr_inter_weightY</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> nr_inter_weightCb</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> nr_inter_weightCr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> nr_noise_sigmaY</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> nr_noise_sigmaCb</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token class-name">uint32_t</span><span class="token plain"> nr_noise_sigmaCr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> VENC_3DNR_PARAMS</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>【成员说明】</p>
<table><thead><tr><th style="text-align:center">成员</th><th style="text-align:center">含义</th></tr></thead></table>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">|</span><span class="token plain">nr_y_enable</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">Y分量是否使能去噪</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">nr_cb_enable</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">Cb分量是否使能去噪</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">nr_cr_enable</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">Cr分量是否使能去噪</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">nr_est_enable</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">是否使能噪声估计</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">nr_intra_weightY</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">帧内图像Y分量加权系数</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">nr_intra_weightCb</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">帧内图像Cb分量加权系数</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">nr_intra_weightCr</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">帧内图像Cr分量加权系数</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">nr_inter_weightY</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">帧间图像Y分量加权系数</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">nr_inter_weightCb</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">帧间图像Cb分量加权系数</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">nr_inter_weightCr</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">帧间图像Cr分量加权系数</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">nr_noise_sigmaY</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">Y分量噪声标准偏差</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">nr_noise_sigmaCb</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">Cb分量噪声标准偏差</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">nr_noise_sigmaCr</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">Cr分量噪声标准偏差</span><span class="token operator" style="color:#393A34">|</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="错误码">错误码<a href="#错误码" class="hash-link" aria-label="错误码的直接链接" title="错误码的直接链接">​</a></h2>
<p>VENC错误码如下表：</p>
<table><thead><tr><th style="text-align:center">错误码</th><th style="text-align:right">宏定义</th><th style="text-align:right">描述</th></tr></thead><tbody><tr><td style="text-align:center">-268958720</td><td style="text-align:right">HB_ERR_VENC_UNKNOWN</td><td style="text-align:right">未知错误</td></tr><tr><td style="text-align:center">-268958721</td><td style="text-align:right">HB_ERR_VENC_NOT_FOUND</td><td style="text-align:right">VENC通道未找到</td></tr><tr><td style="text-align:center">-268958722</td><td style="text-align:right">HB_ERR_VENC_OPEN_FAIL</td><td style="text-align:right">打开VENC通道失败</td></tr><tr><td style="text-align:center">-268958723</td><td style="text-align:right">HB_ERR_VENC_RESPONSE_TIMEOUT</td><td style="text-align:right">操作VENC通道无响应</td></tr><tr><td style="text-align:center">-268958724</td><td style="text-align:right">HB_ERR_VENC_INIT_FAIL</td><td style="text-align:right">初始化VENC模块失败</td></tr><tr><td style="text-align:center">-268958725</td><td style="text-align:right">HB_ERR_VENC_OPERATION_NOT_ALLOWDED</td><td style="text-align:right">操作不允许</td></tr><tr><td style="text-align:center">-268958726</td><td style="text-align:right">HB_ERR_VENC_NOMEM</td><td style="text-align:right">VENC内存不够</td></tr><tr><td style="text-align:center">-268958727</td><td style="text-align:right">HB_ERR_VENC_NO_FREE_CHANNEL</td><td style="text-align:right">没有空的VENC通道</td></tr><tr><td style="text-align:center">-268958728</td><td style="text-align:right">HB_ERR_VENC_ILLEGAL_PARAM</td><td style="text-align:right">参数错误</td></tr><tr><td style="text-align:center">-268958729</td><td style="text-align:right">HB_ERR_VENC_INVALID_CHNID</td><td style="text-align:right">错误的通道号</td></tr><tr><td style="text-align:center">-268958730</td><td style="text-align:right">HB_ERR_VENC_INVALID_BUF</td><td style="text-align:right">错误的buffer块</td></tr><tr><td style="text-align:center">-268958731</td><td style="text-align:right">HB_ERR_VENC_INVALID_CMD</td><td style="text-align:right">错误的命令</td></tr><tr><td style="text-align:center">-268958732</td><td style="text-align:right">HB_ERR_VENC_WAIT_TIMEOUT</td><td style="text-align:right">等待超时</td></tr><tr><td style="text-align:center">-268958733</td><td style="text-align:right">HB_ERR_VENC_FILE_OPERATION_FAIL</td><td style="text-align:right">操作失败</td></tr><tr><td style="text-align:center">-268958734</td><td style="text-align:right">HB_ERR_VENC_PARAMS_SET_FAIL</td><td style="text-align:right">设置参数失败</td></tr><tr><td style="text-align:center">-268958735</td><td style="text-align:right">HB_ERR_VENC_PARAMS_GET_FAIL</td><td style="text-align:right">获取参数失败</td></tr><tr><td style="text-align:center">-268958736</td><td style="text-align:right">HB_ERR_VENC_EXIST</td><td style="text-align:right">VENC 通道已存在</td></tr><tr><td style="text-align:center">-268958737</td><td style="text-align:right">HB_ERR_VENC_UNEXIST</td><td style="text-align:right">VENC 通道不存在</td></tr><tr><td style="text-align:center">-268958738</td><td style="text-align:right">HB_ERR_VENC_NULL_PTR</td><td style="text-align:right">空指针</td></tr><tr><td style="text-align:center">-268958739</td><td style="text-align:right">HB_ERR_VENC_UNSUPPORT</td><td style="text-align:right">不支持</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="参考代码">参考代码<a href="#参考代码" class="hash-link" aria-label="参考代码的直接链接" title="参考代码的直接链接">​</a></h2>
<p>VENC部分示例代码可以参考，<a href="/rdk_doc/Advanced_development/multimedia_development/multimedia_samples#sample_video_codec">sample_video_codec</a>。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2025-09-03T11:55:53.000Z" itemprop="dateModified">2025年9月3日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/rdk_doc/Advanced_development/multimedia_development/video_output"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">7.3.8 视频输出</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rdk_doc/Advanced_development/multimedia_development/video_decode"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">7.3.10 视频解码</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#概述" class="table-of-contents__link toc-highlight">概述</a></li><li><a href="#功能描述" class="table-of-contents__link toc-highlight">功能描述</a><ul><li><a href="#基础规格" class="table-of-contents__link toc-highlight">基础规格</a></li><li><a href="#编解码通道" class="table-of-contents__link toc-highlight">编解码通道</a></li><li><a href="#码率控制" class="table-of-contents__link toc-highlight">码率控制</a></li><li><a href="#gop结构" class="table-of-contents__link toc-highlight">GOP结构</a><ul><li><a href="#gop预置结构" class="table-of-contents__link toc-highlight">GOP预置结构</a></li><li><a href="#gop和i帧周期关系" class="table-of-contents__link toc-highlight">GOP和I帧周期关系</a></li></ul></li><li><a href="#roi" class="table-of-contents__link toc-highlight">ROI</a></li><li><a href="#intra-refresh" class="table-of-contents__link toc-highlight">Intra Refresh</a></li><li><a href="#长期参考帧" class="table-of-contents__link toc-highlight">长期参考帧</a></li><li><a href="#smart-background-encoding" class="table-of-contents__link toc-highlight">Smart background encoding</a></li><li><a href="#帧skip设置" class="table-of-contents__link toc-highlight">帧skip设置</a></li></ul></li><li><a href="#api参考" class="table-of-contents__link toc-highlight">API参考</a><ul><li><a href="#hb_venc_createchn" class="table-of-contents__link toc-highlight">HB_VENC_CreateChn</a></li><li><a href="#hb_venc_destroychn" class="table-of-contents__link toc-highlight">HB_VENC_DestroyChn</a></li><li><a href="#hb_venc_resetchn" class="table-of-contents__link toc-highlight">HB_VENC_ResetChn</a></li><li><a href="#hb_venc_startrecvframe" class="table-of-contents__link toc-highlight">HB_VENC_StartRecvFrame</a></li><li><a href="#hb_venc_stoprecvframe" class="table-of-contents__link toc-highlight">HB_VENC_StopRecvFrame</a></li><li><a href="#hb_venc_setchnattr" class="table-of-contents__link toc-highlight">HB_VENC_SetChnAttr</a></li><li><a href="#hb_venc_getchnattr" class="table-of-contents__link toc-highlight">HB_VENC_GetChnAttr</a></li><li><a href="#hb_venc_getstream" class="table-of-contents__link toc-highlight">HB_VENC_GetStream</a></li><li><a href="#hb_venc_releasestream" class="table-of-contents__link toc-highlight">HB_VENC_ReleaseStream</a></li><li><a href="#hb_venc_sendframe" class="table-of-contents__link toc-highlight">HB_VENC_SendFrame</a></li><li><a href="#hb_venc_requestidr" class="table-of-contents__link toc-highlight">HB_VENC_RequestIDR</a></li><li><a href="#hb_venc_setroiattr" class="table-of-contents__link toc-highlight">HB_VENC_SetRoiAttr</a></li><li><a href="#hb_venc_getroiattr" class="table-of-contents__link toc-highlight">HB_VENC_GetRoiAttr</a></li><li><a href="#hb_venc_seth264slicesplit" class="table-of-contents__link toc-highlight">HB_VENC_SetH264SliceSplit</a></li><li><a href="#hb_venc_geth264slicesplit" class="table-of-contents__link toc-highlight">HB_VENC_GetH264SliceSplit</a></li><li><a href="#hb_venc_seth264intrapred" class="table-of-contents__link toc-highlight">HB_VENC_SetH264IntraPred</a></li><li><a href="#hb_venc_geth264intrapred" class="table-of-contents__link toc-highlight">HB_VENC_GetH264IntraPred</a></li><li><a href="#hb_venc_seth264trans" class="table-of-contents__link toc-highlight">HB_VENC_SetH264Trans</a></li><li><a href="#hb_venc_geth264trans" class="table-of-contents__link toc-highlight">HB_VENC_GetH264Trans</a></li><li><a href="#hb_venc_seth264entropy" class="table-of-contents__link toc-highlight">HB_VENC_SetH264Entropy</a></li><li><a href="#hb_venc_geth264entropy" class="table-of-contents__link toc-highlight">HB_VENC_GetH264Entropy</a></li><li><a href="#hb_venc_seth264dblk" class="table-of-contents__link toc-highlight">HB_VENC_SetH264Dblk</a></li><li><a href="#hb_venc_geth264dblk" class="table-of-contents__link toc-highlight">HB_VENC_GetH264Dblk</a></li><li><a href="#hb_venc_seth264vui" class="table-of-contents__link toc-highlight">HB_VENC_SetH264Vui</a></li><li><a href="#hb_venc_geth264vui" class="table-of-contents__link toc-highlight">HB_VENC_GetH264Vui</a></li><li><a href="#hb_venc_seth265vui" class="table-of-contents__link toc-highlight">HB_VENC_SetH265Vui</a></li><li><a href="#hb_venc_geth265vui" class="table-of-contents__link toc-highlight">HB_VENC_GetH265Vui</a></li><li><a href="#hb_venc_setrcparam" class="table-of-contents__link toc-highlight">HB_VENC_SetRcParam</a></li><li><a href="#hb_venc_getrcparam" class="table-of-contents__link toc-highlight">HB_VENC_GetRcParam</a></li><li><a href="#hb_venc_setrefparam" class="table-of-contents__link toc-highlight">HB_VENC_SetRefParam</a></li><li><a href="#hb_venc_getrefparam" class="table-of-contents__link toc-highlight">HB_VENC_GetRefParam</a></li><li><a href="#hb_venc_enableidr" class="table-of-contents__link toc-highlight">HB_VENC_EnableIDR</a></li><li><a href="#hb_venc_seth265slicesplit" class="table-of-contents__link toc-highlight">HB_VENC_SetH265SliceSplit</a></li><li><a href="#hb_venc_geth265slicesplit" class="table-of-contents__link toc-highlight">HB_VENC_GetH265SliceSplit</a></li><li><a href="#hb_venc_seth265predunit" class="table-of-contents__link toc-highlight">HB_VENC_SetH265PredUnit</a></li><li><a href="#hb_venc_geth265predunit" class="table-of-contents__link toc-highlight">HB_VENC_GetH265PredUnit</a></li><li><a href="#hb_venc_seth265trans" class="table-of-contents__link toc-highlight">HB_VENC_SetH265Trans</a></li><li><a href="#hb_venc_geth265trans" class="table-of-contents__link toc-highlight">HB_VENC_GetH265Trans</a></li><li><a href="#hb_venc_seth265dblk" class="table-of-contents__link toc-highlight">HB_VENC_SetH265Dblk</a></li><li><a href="#hb_venc_geth265dblk" class="table-of-contents__link toc-highlight">HB_VENC_GetH265Dblk</a></li><li><a href="#hb_venc_seth265sao" class="table-of-contents__link toc-highlight">HB_VENC_SetH265Sao</a></li><li><a href="#hb_venc_geth265sao" class="table-of-contents__link toc-highlight">HB_VENC_GetH265Sao</a></li><li><a href="#hb_venc_setintrarefresh" class="table-of-contents__link toc-highlight">HB_VENC_SetIntraRefresh</a></li><li><a href="#hb_venc_getintrarefresh" class="table-of-contents__link toc-highlight">HB_VENC_GetIntraRefresh</a></li><li><a href="#hb_venc_setcuprediction" class="table-of-contents__link toc-highlight">HB_VENC_SetCuPrediction</a></li><li><a href="#hb_venc_getcuprediction" class="table-of-contents__link toc-highlight">HB_VENC_GetCuPrediction</a></li><li><a href="#hb_venc_setjpegparam" class="table-of-contents__link toc-highlight">HB_VENC_SetJpegParam</a></li><li><a href="#hb_venc_getjpegparam" class="table-of-contents__link toc-highlight">HB_VENC_GetJpegParam</a></li><li><a href="#hb_venc_setmjpegparam" class="table-of-contents__link toc-highlight">HB_VENC_SetMjpegParam</a></li><li><a href="#hb_venc_getmjpegparam" class="table-of-contents__link toc-highlight">HB_VENC_GetMjpegParam</a></li><li><a href="#hb_venc_getfd" class="table-of-contents__link toc-highlight">HB_VENC_GetFd</a></li><li><a href="#hb_venc_closefd" class="table-of-contents__link toc-highlight">HB_VENC_CloseFd</a></li><li><a href="#hb_venc_querystatus" class="table-of-contents__link toc-highlight">HB_VENC_QueryStatus</a></li><li><a href="#hb_venc_inseruserdata" class="table-of-contents__link toc-highlight">HB_VENC_InserUserData</a></li><li><a href="#hb_venc_setchnparam" class="table-of-contents__link toc-highlight">HB_VENC_SetChnParam</a></li><li><a href="#hb_venc_getchnparam" class="table-of-contents__link toc-highlight">HB_VENC_GetChnParam</a></li><li><a href="#hb_venc_setmodparam" class="table-of-contents__link toc-highlight">HB_VENC_SetModParam</a></li><li><a href="#hb_venc_getmodparam" class="table-of-contents__link toc-highlight">HB_VENC_GetModParam</a></li><li><a href="#hb_venc_sendframeex" class="table-of-contents__link toc-highlight">HB_VENC_SendFrameEx</a></li><li><a href="#hb_venc_setaverageqp" class="table-of-contents__link toc-highlight">HB_VENC_SetAverageQp</a></li><li><a href="#hb_venc_getaverageqp" class="table-of-contents__link toc-highlight">HB_VENC_GetAverageQp</a></li><li><a href="#hb_venc_set3dnrparam" class="table-of-contents__link toc-highlight">HB_VENC_Set3DNRParam</a></li><li><a href="#hb_venc_get3dnrparam" class="table-of-contents__link toc-highlight">HB_VENC_Get3DNRParam</a></li></ul></li><li><a href="#数据结构" class="table-of-contents__link toc-highlight">数据结构</a><ul><li><a href="#hb_pixel_format_e" class="table-of-contents__link toc-highlight">HB_PIXEL_FORMAT_E</a></li><li><a href="#payload_type_e" class="table-of-contents__link toc-highlight">PAYLOAD_TYPE_E</a></li><li><a href="#hb_rotation_e" class="table-of-contents__link toc-highlight">HB_ROTATION_E</a></li><li><a href="#mirror_flip_e" class="table-of-contents__link toc-highlight">MIRROR_FLIP_E</a></li><li><a href="#hb_venc_h264_profile_e" class="table-of-contents__link toc-highlight">HB_VENC_H264_PROFILE_E</a></li><li><a href="#hb_venc_h264_level" class="table-of-contents__link toc-highlight">HB_VENC_H264_LEVEL</a></li><li><a href="#hb_venc_h265_level" class="table-of-contents__link toc-highlight">HB_VENC_H265_LEVEL</a></li><li><a href="#codec_rect_s" class="table-of-contents__link toc-highlight">CODEC_RECT_S</a></li><li><a href="#venc_attr_h264_s" class="table-of-contents__link toc-highlight">VENC_ATTR_H264_S</a></li><li><a href="#venc_attr_h265_s" class="table-of-contents__link toc-highlight">VENC_ATTR_H265_S</a></li><li><a href="#venc_attr_mjpeg_s" class="table-of-contents__link toc-highlight">VENC_ATTR_MJPEG_S</a></li><li><a href="#venc_attr_jpeg_s" class="table-of-contents__link toc-highlight">VENC_ATTR_JPEG_S</a></li><li><a href="#venc_attr_s" class="table-of-contents__link toc-highlight">VENC_ATTR_S</a></li><li><a href="#venc_rc_mode_e" class="table-of-contents__link toc-highlight">VENC_RC_MODE_E</a></li><li><a href="#venc_h264_cbr_s" class="table-of-contents__link toc-highlight">VENC_H264_CBR_S</a></li><li><a href="#venc_h264_vbr_s" class="table-of-contents__link toc-highlight">VENC_H264_VBR_S</a></li><li><a href="#venc_h264_avbr_s" class="table-of-contents__link toc-highlight">VENC_H264_AVBR_S</a></li><li><a href="#venc_h264_fixqp_s" class="table-of-contents__link toc-highlight">VENC_H264_FIXQP_S</a></li><li><a href="#venc_h264_qpmap_s" class="table-of-contents__link toc-highlight">VENC_H264_QPMAP_S</a></li><li><a href="#venc_h265_cbr_s" class="table-of-contents__link toc-highlight">VENC_H265_CBR_S</a></li><li><a href="#venc_h265_vbr_s" class="table-of-contents__link toc-highlight">VENC_H265_VBR_S</a></li><li><a href="#venc_h265_avbr_s" class="table-of-contents__link toc-highlight">VENC_H265_AVBR_S</a></li><li><a href="#venc_h265_fixqp_s" class="table-of-contents__link toc-highlight">VENC_H265_FIXQP_S</a></li><li><a href="#venc_h265_qpmap_s" class="table-of-contents__link toc-highlight">VENC_H265_QPMAP_S</a></li><li><a href="#venc_mjpeg_fixqp_s" class="table-of-contents__link toc-highlight">VENC_MJPEG_FIXQP_S</a></li><li><a href="#venc_rc_attr_s" class="table-of-contents__link toc-highlight">VENC_RC_ATTR_S</a></li><li><a href="#venc_gop_picture_custom_s" class="table-of-contents__link toc-highlight">VENC_GOP_PICTURE_CUSTOM_S</a></li><li><a href="#venc_gop_custom_s" class="table-of-contents__link toc-highlight">VENC_GOP_CUSTOM_S</a></li><li><a href="#venc_gop_attr_s" class="table-of-contents__link toc-highlight">VENC_GOP_ATTR_S</a></li><li><a href="#venc_chn_attr_s" class="table-of-contents__link toc-highlight">VENC_CHN_ATTR_S</a></li><li><a href="#venc_jpeg_param_s" class="table-of-contents__link toc-highlight">VENC_JPEG_PARAM_S</a></li><li><a href="#venc_mjpeg_param_s" class="table-of-contents__link toc-highlight">VENC_MJPEG_PARAM_S</a></li><li><a href="#venc_intra_refresh_mode_e" class="table-of-contents__link toc-highlight">VENC_INTRA_REFRESH_MODE_E</a></li><li><a href="#venc_intra_refresh_s" class="table-of-contents__link toc-highlight">VENC_INTRA_REFRESH_S</a></li><li><a href="#venc_h264_entropy_s" class="table-of-contents__link toc-highlight">VENC_H264_ENTROPY_S</a></li><li><a href="#venc_h264_dblk_s" class="table-of-contents__link toc-highlight">VENC_H264_DBLK_S</a></li><li><a href="#venc_h265_dblk_s" class="table-of-contents__link toc-highlight">VENC_H265_DBLK_S</a></li><li><a href="#venc_vui_h264_time_info_s" class="table-of-contents__link toc-highlight">VENC_VUI_H264_TIME_INFO_S</a></li><li><a href="#venc_h264_vui_s" class="table-of-contents__link toc-highlight">VENC_H264_VUI_S</a></li><li><a href="#venc_vui_h265_time_info_s" class="table-of-contents__link toc-highlight">VENC_VUI_H265_TIME_INFO_S</a></li><li><a href="#venc_h265_vui_s" class="table-of-contents__link toc-highlight">VENC_H265_VUI_S</a></li><li><a href="#venc_h265_sao_s" class="table-of-contents__link toc-highlight">VENC_H265_SAO_S</a></li><li><a href="#venc_h264_slice_split_s" class="table-of-contents__link toc-highlight">VENC_H264_SLICE_SPLIT_S</a></li><li><a href="#venc_h265_slice_split_s" class="table-of-contents__link toc-highlight">VENC_H265_SLICE_SPLIT_S</a></li><li><a href="#venc_h264_intra_pred_s" class="table-of-contents__link toc-highlight">VENC_H264_INTRA_PRED_S</a></li><li><a href="#venc_h265_pu_s" class="table-of-contents__link toc-highlight">VENC_H265_PU_S</a></li><li><a href="#venc_h264_trans_s" class="table-of-contents__link toc-highlight">VENC_H264_TRANS_S</a></li><li><a href="#venc_h265_trans_s" class="table-of-contents__link toc-highlight">VENC_H265_TRANS_S</a></li><li><a href="#venc_cu_prediction_s" class="table-of-contents__link toc-highlight">VENC_CU_PREDICTION_S</a></li><li><a href="#video_crop_info_s" class="table-of-contents__link toc-highlight">VIDEO_CROP_INFO_S</a></li><li><a href="#video_frame_pack_s" class="table-of-contents__link toc-highlight">VIDEO_FRAME_PACK_S</a></li><li><a href="#video_frame_s" class="table-of-contents__link toc-highlight">VIDEO_FRAME_S</a></li><li><a href="#video_frame_info_s" class="table-of-contents__link toc-highlight">VIDEO_FRAME_INFO_S</a></li><li><a href="#video_frame_info_jpeg_s" class="table-of-contents__link toc-highlight">VIDEO_FRAME_INFO_JPEG_S</a></li><li><a href="#video_stream_pack_s" class="table-of-contents__link toc-highlight">VIDEO_STREAM_PACK_S</a></li><li><a href="#video_stream_info_s" class="table-of-contents__link toc-highlight">VIDEO_STREAM_INFO_S</a></li><li><a href="#video_stream_info_jpeg_s" class="table-of-contents__link toc-highlight">VIDEO_STREAM_INFO_JPEG_S</a></li><li><a href="#video_stream_s" class="table-of-contents__link toc-highlight">VIDEO_STREAM_S</a></li><li><a href="#venc_recv_pic_param_s" class="table-of-contents__link toc-highlight">VENC_RECV_PIC_PARAM_S</a></li><li><a href="#venc_ref_param_s" class="table-of-contents__link toc-highlight">VENC_REF_PARAM_S</a></li><li><a href="#venc_user_rc_attr_s" class="table-of-contents__link toc-highlight">VENC_USER_RC_ATTR_S</a></li><li><a href="#user_frame_info_s" class="table-of-contents__link toc-highlight">USER_FRAME_INFO_S</a></li><li><a href="#venc_param_mod_s" class="table-of-contents__link toc-highlight">VENC_PARAM_MOD_S</a></li><li><a href="#venc_frame_rate_s" class="table-of-contents__link toc-highlight">VENC_FRAME_RATE_S</a></li><li><a href="#venc_chn_param_s" class="table-of-contents__link toc-highlight">VENC_CHN_PARAM_S</a></li><li><a href="#venc_roi_attr_s" class="table-of-contents__link toc-highlight">VENC_ROI_ATTR_S</a></li><li><a href="#venc_chn_status_s" class="table-of-contents__link toc-highlight">VENC_CHN_STATUS_S</a></li><li><a href="#venc_3dnr_params" class="table-of-contents__link toc-highlight">VENC_3DNR_PARAMS</a></li></ul></li><li><a href="#错误码" class="table-of-contents__link toc-highlight">错误码</a></li><li><a href="#参考代码" class="table-of-contents__link toc-highlight">参考代码</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">友情链接</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.guyuehome.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">古月居<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">联系我们</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://space.bilibili.com/437998606" target="_blank" rel="noopener noreferrer" class="footer__link-item">BiLiBiLi<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 D-Robotics.</div></div></div></footer></div>
</body>
</html>