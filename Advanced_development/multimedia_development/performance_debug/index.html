<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Advanced_development/multimedia_development/performance_debug" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">7.3.12 多媒体性能调试 | RDK DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/rdk_doc/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/rdk_doc/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/performance_debug"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="7.3.12 多媒体性能调试 | RDK DOC"><meta data-rh="true" name="description" content="概述"><meta data-rh="true" property="og:description" content="概述"><link data-rh="true" rel="icon" href="/rdk_doc/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/performance_debug"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/performance_debug" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/en/Advanced_development/multimedia_development/performance_debug" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/performance_debug" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"7. 进阶开发","item":"https://developer.d-robotics.cc/rdk_doc/Advanced_development"},{"@type":"ListItem","position":2,"name":"7.3 RDK X3 多媒体开发指南","item":"https://developer.d-robotics.cc/rdk_doc/03_multimedia_development"},{"@type":"ListItem","position":3,"name":"7.3.12 多媒体性能调试","item":"https://developer.d-robotics.cc/rdk_doc/Advanced_development/multimedia_development/performance_debug"}]}</script><script src="https://hm.baidu.com/hm.js?24dd63cad43b63889ea6bede5fd1ab9e" async></script><link rel="stylesheet" href="/rdk_doc/assets/css/styles.0fbd7d27.css">
<script src="/rdk_doc/assets/js/runtime~main.6fa33c9f.js" defer="defer"></script>
<script src="/rdk_doc/assets/js/main.a1064fcc.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/rdk_doc/img/logo.png" alt="地瓜机器人社区 logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rdk_doc/img/logo.png" alt="地瓜机器人社区 logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rdk_doc/RDK">RDK X3 / X5</a><a class="navbar__item navbar__link" href="/rdk_doc/rdk_s/RDK">RDK S100</a><a href="https://developer.d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>CN</a><ul class="dropdown__menu"><li><a href="/rdk_doc/Advanced_development/multimedia_development/performance_debug" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">CN</a></li><li><a href="/rdk_doc/en/Advanced_development/multimedia_development/performance_debug" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">EN</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rdk_doc/RDK">D-Robotics RDK套件</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/Quick_start">1. 快速开始</a><button aria-label="展开侧边栏分类 &#x27;1. 快速开始&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/System_configuration">2. 系统配置</a><button aria-label="展开侧边栏分类 &#x27;2. 系统配置&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/Basic_Application">3. 基础应用开发 </a><button aria-label="展开侧边栏分类 &#x27;3. 基础应用开发 &#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/Basic_Development">4. 算法应用开发</a><button aria-label="展开侧边栏分类 &#x27;4. 算法应用开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/Robot_development">5. 机器人应用开发</a><button aria-label="展开侧边栏分类 &#x27;5. 机器人应用开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/Application_case">6. 应用开发指南</a><button aria-label="展开侧边栏分类 &#x27;6. 应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rdk_doc/Advanced_development">7. 进阶开发</a><button aria-label="折叠侧边栏分类 &#x27;7. 进阶开发&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/hardware_development">7.1 硬件开发指南</a><button aria-label="展开侧边栏分类 &#x27;7.1 硬件开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/linux_development">7.2 Linux开发指南</a><button aria-label="展开侧边栏分类 &#x27;7.2 Linux开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/03_multimedia_development">7.3 RDK X3 多媒体 开发指南</a><button aria-label="折叠侧边栏分类 &#x27;7.3 RDK X3 多媒体开发指南&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/overview">7.3.1 系统概述</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/multimedia_samples">7.3.2 示例程序</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/system_control">7.3.3 系统控制</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/video_input">7.3.4 视频输入</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/isp_system">7.3.5 ISP图像系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/video_processing">7.3.6 视频处理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/region_processing">7.3.7 区域处理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/video_output">7.3.8 视频输出</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/video_encode">7.3.9 视频编码</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/video_decode">7.3.10 视频解码</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/debug_info">7.3.11 查询多媒体模块调试信息</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rdk_doc/Advanced_development/multimedia_development/performance_debug">7.3.12 多媒体性能调试</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/04_toolchain_development">7.4 算法工具链开发指南</a><button aria-label="展开侧边栏分类 &#x27;7.4 算法工具链开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/FAQ">8. 常见问题</a><button aria-label="展开侧边栏分类 &#x27;8. 常见问题&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/Appendix">9. 附录</a><button aria-label="展开侧边栏分类 &#x27;9. 附录&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rdk_doc/Release_Note/release_note">10. 版本发布</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/rdk_doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/Advanced_development"><span>7. 进阶开发</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/03_multimedia_development"><span>7.3 RDK X3 多媒体开发指南</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">7.3.12 多媒体性能调试</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>7.3.12 多媒体性能调试</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="概述">概述<a href="#概述" class="hash-link" aria-label="概述的直接链接" title="概述的直接链接">​</a></h2>
<p>Camera是图像数据的主要外部来源，VIO部分软件是一个相对不透明的内部软件，主要面向提供内部应用软件提供相关的图像以及信息，XJ3芯片内部图像处理IP信息大致如下：</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/performance_debug/multimedia_all.png" alt="image-20220329205706352" class="img_ev3q"></p>
<table><thead><tr><th>输入方式</th><th>IP</th><th>输出方式</th></tr></thead><tbody><tr><td>Online</td><td>MIPI</td><td>Online</td></tr><tr><td>Online/Offline</td><td>SIF</td><td>Online/Offline</td></tr><tr><td>Online</td><td>ISP</td><td>Online/Offline</td></tr><tr><td>Online</td><td>LDC</td><td>Online</td></tr><tr><td>Offline</td><td>GDC</td><td>Offline</td></tr><tr><td>Online/Offline</td><td>IPU</td><td>Online/Offline</td></tr><tr><td>Online/Offline</td><td>PYM</td><td>Offline</td></tr></tbody></table>
<p>注：Online 指硬件通过片内RAM交换数据，Offline指硬件通过DDR交换数据。</p>
<p>本章节主要描述X3芯片关于图像数据处理通路等模块在实际使用的常用场景中，根据DDR带宽和延迟进行各处理模块DDR优先级和其它一些相关参数的调整。</p>
<p>在DDR瞬时带宽不足时会造成视频丢帧，在帧率和丢帧这两个问题之间，可以根据本章节的描述，选择一个合适的配置值来平衡。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ddr-master的qos">DDR Master的QoS<a href="#ddr-master的qos" class="hash-link" aria-label="DDR Master的QoS的直接链接" title="DDR Master的QoS的直接链接">​</a></h2>
<p>XJ3 各模块通过AXI接口访问DDR，XJ3有8个AXI接口，分别为AXI_0 ~ AXI_7，XJ3的模块使用AXI接口关系如下表：</p>
<table><thead><tr><th>端口号</th><th>AXI_0</th><th>AXI_1</th><th>AXI_2</th><th>AXI_3</th><th>AXI_4</th><th>AXI_5</th><th>AXI_6</th><th>AXI_7</th></tr></thead><tbody><tr><td>模块名</td><td>CPU/R5</td><td>NOC</td><td>CNN0</td><td>CNN1</td><td>VIO0</td><td>VPU/JPU</td><td>VIO1</td><td>PERI</td></tr></tbody></table>
<p>AXI_4和AXI_6可配置，可以通过寄存器配置VIO子模块到AXI_4或者AXI_6，AXI_6有更高的优先级。</p>
<p>XJ3 VIO包括如下子模块：SIF_W、ISP0_M0、ISP0_M2、GDC0、DIS、SIF_R、IPU0、PYM、IAR。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="axi-qos控制">AXI QOS控制<a href="#axi-qos控制" class="hash-link" aria-label="AXI QOS控制的直接链接" title="AXI QOS控制的直接链接">​</a></h2>
<p>AXI Qos优先级范围0~15，值越大优先级越高。XJ3系统启动后读写QoS默认配置为0x2021100。</p>
<p>每个Port的优先级值通过Perf Monitor的DDR_PORT_READ/WRITE_QOS_CTRL寄存器设置，Perf
Montior再通过硬件的方式设置到DDR控制器中。软件无需设置DDR控制器。</p>
<p>DDR QoS的值在DDR_Monitor驱动中通过Sysfs的属性文件的方式设置和查询。</p>
<p>可以通过all属性文件一次性设置，最低的4bit对应P0_CPU，最高4bit对应P7_PERI。</p>
<p>也可以通过cpu、bifdma、bpu0、bpu1、vio0、vpu、vio1、peri单独设置和查询各个端口的优先级，如下：</p>
<p><strong>QoS sysfs接口</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#查询读QoS：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CPU port is not allowed to be configured in runtime.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You can run chmod +w as root for debugging purpose.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">****************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">04032221:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P0_CPU:    1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P1_BIFDMA: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P2_CNN0:   2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P3_CNN1:   2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P4_VIO0:   3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P5_VPU:    0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P6_VIO1:   4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P7_PERI:   0</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">****************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CPU port is not allowed to be configured in runtime.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You can run chmod +w as root for debugging purpose.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">****************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">04032211:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P0_CPU:    1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P1_BIFDMA: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P2_CNN0:   2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P3_CNN1:   2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P4_VIO0:   3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P5_VPU:    0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P6_VIO1:   4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P7_PERI:   0</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#设置bifdma读QoS为2：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 2 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/bifdma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#设置bpu0读QoS为1：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/bpu0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#设置bpu1读QoS为1：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/bpu1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#设置vio0读QoS为2：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 2 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#设置vpu读QoS为0：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/vpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#设置vio1读QoS为3：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 3 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/vio1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#设置peri读QoS为0：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/peri </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#设置bifdma写QoS为2：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 2 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/bifdma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#设置bpu0写QoS为1：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/bpu0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#设置bpu1写QoS为1：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/bpu1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#设置vio0写QoS为2：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 2 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#设置vpu写QoS为0：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/vpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#设置vio1写QoS为3：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 3 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/vio1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#设置peri写QoS为0：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/peri</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vio子模块配置">VIO子模块配置<a href="#vio子模块配置" class="hash-link" aria-label="VIO子模块配置的直接链接" title="VIO子模块配置的直接链接">​</a></h2>
<p>XJ3 VIO子模块包括SIF_W、ISP0_M0、ISP0_M2、GDC0、DIS、SIF_R、IPU0、PYM、IAR，分别对应SIF模块写、ISP写、ISP Temper读写、GDC0读写、DIS写、SIF模块读、IPU0模块读写、PYM模块读写、IAR模块读写。</p>
<p>可以通过AXIBUS寄存器将这些子模块配置到VIO0或者VIO1上，XJ3系统启动后默认配置IAR和SIF_W到VIO1，其余模块配置到VIO0。AXIBUS寄存器bit31~bit16对应子模块如下图：</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/performance_debug/vio_config.png" alt="" class="img_ev3q"></p>
<p>其中灰色部分模块不存在，对应bit设置为1，该子模块被配置到VIO1上，否则配置到VIO0上。可以通过all属性一次性配置或查询，查询返回vio1上的模块，别的模块在vio0上。也可以通过子模块属性单独配置或查询。</p>
<p>AXIBUS sys接口</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 设置，值为1配置到vio1，值为0配置到vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0xc0020000 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/sifr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/isp0m0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/isp0m1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/isp0m2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/t21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/gdc0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/gdc1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/iar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/pym</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/sifw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/ipu0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#读取，打印所有配置在vio1上的模块，其余模块为vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/all axibus: 0xc0020000: sifw: vio1 pym: vio1 iar: vio1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#模块读取</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/sifr axibus: 0xc0020000: sifr: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/sifw axibus: 0xc0020000: sif: vio1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/isp0m0 axibus: 0xc0020000: isp_0_m0: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/isp0m1 axibus: 0xc0020000: isp_0_m1: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/isp0m2 axibus: 0xc0020000: isp_0_m2: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/gdc0 axibus: 0xc0020000: gdc_0: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/gdc1 axibus: 0xc0020000: gdc_1: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/t21 axibus: 0xc0020000: t21: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/ipu0 axibus: 0xc0020000: ipu0: vio0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/pym axibus: 0xc0020000: pym: vio1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/iar axibus: 0xc0020000: iar: vio1</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sif的hblank设置">SIF的hblank设置<a href="#sif的hblank设置" class="hash-link" aria-label="SIF的hblank设置的直接链接" title="SIF的hblank设置的直接链接">​</a></h2>
<p>SIF将读取到的图像逐行送给ISP处理，可以通过增加行间隔hblank来延迟下一行的送出，以置换更多时间给ISP或后边的模块做处理。</p>
<p>XJ3 SIF默认的hblank为10。</p>
<p>hblank会影响帧率，与帧率的关系为：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">time = ((width + hblank * 32) * hight）/ (clock * 1000) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># clock为ISP频率，默认为544M。</span><br></span></code></pre></div></div>
<p>以4K为例计算如下：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">time = ((width + hblank * 32) * high) / (clock * 1000)</span><br></span></code></pre></div></div>
<table><thead><tr><th>image width</th><th>hblank(register)</th><th>image high</th><th>clock(MHz)</th><th>time(ms)</th><th>fps</th></tr></thead><tbody><tr><td>3840</td><td>10</td><td>2160</td><td>544</td><td>16.5176</td><td>60.54</td></tr><tr><td>3840</td><td>40</td><td>2160</td><td>544</td><td>20.3294</td><td>49.19</td></tr><tr><td>3840</td><td>70</td><td>2160</td><td>544</td><td>24.1412</td><td>41.42</td></tr><tr><td>3840</td><td>120</td><td>2160</td><td>544</td><td>30.4941</td><td>32.79</td></tr></tbody></table>
<p>提供Sysfs接口设置查询hblank，如下：</p>
<p>设置hblank：echo 120 &gt; /sys/devices/platform/soc/a4001000.sif/hblank</p>
<p>查询hblank：cat /sys/devices/platform/soc/a4001000.sif/hblank</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ipu的设置">IPU的设置<a href="#ipu的设置" class="hash-link" aria-label="IPU的设置的直接链接" title="IPU的设置的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ipu-line_delay-wr_ddr_fifo_thred">IPU Line_delay wr_ddr_fifo_thred<a href="#ipu-line_delay-wr_ddr_fifo_thred" class="hash-link" aria-label="IPU Line_delay wr_ddr_fifo_thred的直接链接" title="IPU Line_delay wr_ddr_fifo_thred的直接链接">​</a></h3>
<p>IPU有个line_delay设置，单位为1行。值越大，代表IPU可以忍受的总线延迟更大，对offline模式下降低frame drop有帮助。</p>
<p>同时wr_ddr_fifo_thred的值越小越能够降低frame drop。</p>
<p>当ipu输出多个通道同时到DDR的时候，建议将line_delay设置为255，wr_ddr_fifo_thred设置为0。</p>
<p>line_delay默认值是16，wr_fifo_thred0默认值是0x30323020，wr_fifo_thred1默认值是0x00003220。</p>
<p>提供sysfs接口设置如下:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo 0x0 &gt; /sys/devices/platform/soc/a4040000.ipu/wr_fifo_thred0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0x0 &gt; /sys/devices/platform/soc/a4040000.ipu/wr_fifo_thred1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 255 &gt; /sys/devices/platform/soc/a4040000.ipu/line_delay</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ipu-clock">IPU Clock<a href="#ipu-clock" class="hash-link" aria-label="IPU Clock的直接链接" title="IPU Clock的直接链接">​</a></h3>
<p>IPU的clock由SIF mclk提供，可以通过sysfs配置SIF clock来改变IPU的频率，IPU频率默认为544MHz，可以配置的频率有544M、408M、326M、272M。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo 544000000 &gt; /sys/module/hobot_dev_ips/parameters/sif_mclk_freq</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ipu-安全尺寸">IPU 安全尺寸<a href="#ipu-安全尺寸" class="hash-link" aria-label="IPU 安全尺寸的直接链接" title="IPU 安全尺寸的直接链接">​</a></h3>
<p>IPU多个通道的FIFO深度不同，安全尺寸如下</p>
<table><thead><tr><th><strong>IPU Scaler #</strong></th><th><strong>Full 深度限制 (Bytes)</strong></th><th><strong>建议分辨率(像素)</strong></th></tr></thead><tbody><tr><td>Scaler 5(IPU US)</td><td>4096</td><td>8M</td></tr><tr><td>Scaler 2(DS2)</td><td>4096</td><td>8M</td></tr><tr><td>Scaler 1(DS1)</td><td>2048</td><td>2M</td></tr><tr><td>Scaler 3(DS3)</td><td>2048</td><td>2M</td></tr><tr><td>Scaler 4(DS4)</td><td>1280</td><td>1M</td></tr><tr><td>Scaler 0(DS0)</td><td>1280</td><td>1M</td></tr></tbody></table>
<p>Scaler0~4对应IPU的ds0~5，Scaler5对应IPU的us。如果输出尺寸超过安全尺寸，可能会造成硬件丢帧概率变大、输出数据中连续二三十字节出错的风险。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="典型场景的设置">典型场景的设置<a href="#典型场景的设置" class="hash-link" aria-label="典型场景的设置的直接链接" title="典型场景的设置的直接  链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="单路4k输入多通道编码">单路4K输入多通道编码<a href="#单路4k输入多通道编码" class="hash-link" aria-label="单路4K输入多通道编码的直接链接" title="单路4K输入多通道编码的直接链接">​</a></h3>
<p>典型场景如下：4k DOL2输入，SIF - offline - ISP - GDC - IPU，IPU出1路4k，2路1080P，2路D1 共5路送编码器编码。同时IPU ds2 online 到PYM，PYM出720P。</p>
<p>SIF hblank和QoS建议配置如下：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo 120 &gt; /sys/devices/platform/soc/a4001000.sif/hblank</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0x10100000 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0x03120000 &gt; /sys/bus/platform/drivers/ddr_monitor/read_qos_ctrl/all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0x03120000 &gt; /sys/bus/platform/drivers/ddr_monitor/write_qos_ctrl/all</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="双路1080p输入">双路1080P输入<a href="#双路1080p输入" class="hash-link" aria-label="双路1080P输入的直接链接" title="双路1080P输入的直接链接">​</a></h3>
<p>典型场景如下：两路1080P输入，SIF-offline-ISP-online-IPU-online-PYM-&gt;DDR(基础层)。</p>
<p>一路pym出来的去编码（1080P）+显示（1080P），另一路开BPU。</p>
<p>SIF hblank和QoS建议配置如下：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo 120 &gt; /sys/devices/platform/soc/a4001000.sif/hblank  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0x40000000 &gt; /sys/bus/platform/drivers/ddr_monitor/axibus_ctrl/all</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="单路1080p输入">单路1080P输入<a href="#单路1080p输入" class="hash-link" aria-label="单路1080P输入的直接链接" title="单路1080P输入的直接链接">​</a></h3>
<p>典型场景如下：单路1080P输入，SIF-offline-ISP-online-IPU，IPU 6通道roi打开。</p>
<p>SIF hblank建议配置如下：</p>
<p>echo 64 &gt; /sys/devices/platform/soc/a4001000.sif/hblank</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多进程共享配置">多进程共享配置<a href="#多进程共享配置" class="hash-link" aria-label="多进程共享配置的直接链接" title="多进程共享配置的直接链接">​</a></h2>
<p>多进程共享目前最多支持8个进程共享一路camera数据，支持从IPU和PYM获取输出数据，多进程共享需要满足：</p>
<ul>
<li>必须是全online的场景：SIF-online-ISP-online-IPU-online-PYM；</li>
<li>输出通道配置BUF个数需要大于等于4，否则会有帧率较低的风险；</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vio延时查看">VIO延时查看<a href="#vio延时查看" class="hash-link" aria-label="VIO延时查看的直接链接" title="VIO延时查看的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="方法一">方法一<a href="#方法一" class="hash-link" aria-label="方法一的直接链接" title="方法一的直接链接">​</a></h3>
<p>1.正常跑vio应用，ls /tmp，可以看到如下在/tmp目录下有vio_group_info_pidxxx，其中xxx是进
程号。</p>
<p>2.在板子命令行输入echo &quot;frame_state&quot; &gt; /tmp/vio_group_info_pidxxx命令，其中xxx对应步骤1
的进程号。</p>
<p>3.步骤2之后，会在/userdata/log/usr/目录下面生成dump的信息
vio_frame_state_pipe[pipeline]_[time].log</p>
<p>4.用Notepad++，通过搜索Frmid xxxxx，其中xxxxx是帧号，会把ISP，IPU，PYM的TimeStp搜索出
来，通过把PYM out free前面对应的xxx时间-ISP out dq前面对应的xxx时间得出模块得处理时间。</p>
<p>如下截图：</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/03_multimedia_development/performance_debug/vio_delay_view.png" alt="image-20220929113655983" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="方法二">方法二<a href="#方法二" class="hash-link" aria-label="方法二的直接链接" title="方法二的直接链接">​</a></h3>
<p>通过HB_VPS_GetChnFrame(int VpsGrp, int VpsChn, void *videoFrame, int ms)接口获取到金字塔得videoFrame，此结构体指针强制转换成pym_buffer_t指针，通过pym_buffer_t找到pym_img_info，pym_img_info包含了struct timeval tv，这个tv是sif得frame start填充得系统时间，使用gettimeofday接口获取到系统当前时间减去tv时间就是sif的frame start-&gt;pym获取到数据的延时。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2025-10-27T02:22:10.000Z" itemprop="dateModified">2025年10月27日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/rdk_doc/Advanced_development/multimedia_development/debug_info"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">7.3.11 查询多媒体模块调试信息</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rdk_doc/04_toolchain_development"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">7.4 算法工具链开发指南</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#概述" class="table-of-contents__link toc-highlight">概述</a></li><li><a href="#ddr-master的qos" class="table-of-contents__link toc-highlight">DDR Master的QoS</a></li><li><a href="#axi-qos控制" class="table-of-contents__link toc-highlight">AXI QOS控制</a></li><li><a href="#vio子模块配置" class="table-of-contents__link toc-highlight">VIO子模块配置</a></li><li><a href="#sif的hblank设置" class="table-of-contents__link toc-highlight">SIF的hblank设置</a></li><li><a href="#ipu的设置" class="table-of-contents__link toc-highlight">IPU的设置</a><ul><li><a href="#ipu-line_delay-wr_ddr_fifo_thred" class="table-of-contents__link toc-highlight">IPU Line_delay wr_ddr_fifo_thred</a></li><li><a href="#ipu-clock" class="table-of-contents__link toc-highlight">IPU Clock</a></li><li><a href="#ipu-安全尺寸" class="table-of-contents__link toc-highlight">IPU 安全尺寸</a></li></ul></li><li><a href="#典型场景的设置" class="table-of-contents__link toc-highlight">典型场景的设置</a><ul><li><a href="#单路4k输入多通道编码" class="table-of-contents__link toc-highlight">单路4K输入多通道编码</a></li><li><a href="#双路1080p输入" class="table-of-contents__link toc-highlight">双路1080P输入</a></li><li><a href="#单路1080p输入" class="table-of-contents__link toc-highlight">单路1080P输入</a></li></ul></li><li><a href="#多进程共享配 置" class="table-of-contents__link toc-highlight">多进程共享配置</a></li><li><a href="#vio延时查看" class="table-of-contents__link toc-highlight">VIO延时查看</a><ul><li><a href="#方法一" class="table-of-contents__link toc-highlight">方法一</a></li><li><a href="#方法二" class="table-of-contents__link toc-highlight">方法二</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">友情链接</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.guyuehome.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">古月居<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">联系我们</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://space.bilibili.com/437998606" target="_blank" rel="noopener noreferrer" class="footer__link-item">BiLiBiLi<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 D-Robotics.</div></div></div></footer></div>
</body>
</html>