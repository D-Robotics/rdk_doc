<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-docs_s docs-version-current docs-doc-page docs-doc-id-Advanced_development/mcu_development/S100/basic_information" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">MCU快速入门指南 | RDK DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/rdk_doc/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/rdk_doc/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/basic_information"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-docs_s-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs_s-current"><meta data-rh="true" property="og:title" content="MCU快速入门指南 | RDK DOC"><meta data-rh="true" name="description" content="范围"><meta data-rh="true" property="og:description" content="范围"><link data-rh="true" rel="icon" href="/rdk_doc/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/basic_information"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/basic_information" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/basic_information" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/basic_information" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"7. 进阶开发","item":"https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development"},{"@type":"ListItem","position":2,"name":"7.5 MCU开发指南","item":"https://developer.d-robotics.cc/rdk_doc/rdk_s/05_MCU_development"},{"@type":"ListItem","position":3,"name":"7.5.1 S100 MCU开发指南","item":"https://developer.d-robotics.cc/rdk_doc/rdk_s/01_S100"},{"@type":"ListItem","position":4,"name":"MCU快速入门指南","item":"https://developer.d-robotics.cc/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/basic_information"}]}</script><script src="https://hm.baidu.com/hm.js?24dd63cad43b63889ea6bede5fd1ab9e" async></script><link rel="stylesheet" href="/rdk_doc/assets/css/styles.50b7a244.css">
<script src="/rdk_doc/assets/js/runtime~main.f6990c5e.js" defer="defer"></script>
<script src="/rdk_doc/assets/js/main.33d84003.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/rdk_doc/img/logo.png" alt="地瓜机器人社区 logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rdk_doc/img/logo.png" alt="地瓜机器人社区 logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a class="navbar__item navbar__link" href="/rdk_doc/RDK">RDK X3 / X5</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rdk_doc/rdk_s/RDK">RDK S100</a><a href="https://developer.d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>CN</a><ul class="dropdown__menu"><li><a href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/basic_information" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">CN</a></li><li><a href="/rdk_doc/en/rdk_s/Advanced_development/mcu_development/S100/basic_information" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">EN</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rdk_doc/rdk_s/RDK">D-Robotics RDK 套件</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/Quick_start">1. 快速开始</a><button aria-label="展开侧边栏分类 &#x27;1. 快速开始&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/System_configuration">2. 系统配置</a><button aria-label="展开侧边栏分类 &#x27;2. 系统配置&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/Basic_Application">3. 基础应用开发</a><button aria-label="展开侧边栏分类 &#x27;3. 基础应用开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/Basic_Development">4. 算法应用开发</a><button aria-label="展开侧边栏分类 &#x27;4. 算法应用开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/Robot_development">5. 机器人应用开发</a><button aria-label="展开侧边栏分类 &#x27;5. 机器人应用开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/Application_case">6. 应用开发指南</a><button aria-label="展开侧边栏分类 &#x27;6. 应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rdk_doc/rdk_s/Advanced_development">7. 进阶开发</a><button aria-label="折叠侧边栏分类 &#x27;7. 进阶开发&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/rdk_s/hardware_development">7.1 硬件开发指南</a><button aria-label="展开侧边栏分类 &#x27;7.1 硬件开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/rdk_s/linux_development">7.2. Linux开发指南</a><button aria-label="展开侧边栏分类 &#x27;7.2. Linux开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/rdk_s/03_multimedia_development">7.3 多媒体开发指南</a><button aria-label="展开侧边栏分类 &#x27;7.3 多媒体开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rdk_doc/rdk_s/04_toolchain_development">7.4 算法工具链开发指南</a><button aria-label="展开侧边栏分类 &#x27;7.4 算法工具链开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/rdk_s/05_MCU_development">7.5 MCU开发指南</a><button aria-label="折叠侧边栏分类 &#x27;7.5 MCU开发指南&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rdk_doc/rdk_s/01_S100">7.5.1 S100 MCU开发指南</a><button aria-label="折叠侧边栏分类 &#x27;7.5.1 S100 MCU开发指南&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/code_release">MCU代码包结构介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/basic_information">MCU快速入门指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/MCU_build_system">MCU系统说明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/FreeRTOS_development">MCU1开发指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_uart">UART使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_pwm">PWM使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_spi">SPI使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_adc">ADC使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_ipc">IPC使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_can">CAN使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_i2c">I2C使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_eth">Eth使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/mcu_port">Port使用指南</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/Advanced_development/rdk_gen">7.6 RDK S100构建系统开发指南</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/FAQ">8. 常见问题</a><button aria-label="展开侧边栏分类 &#x27;8. 常见问题&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/Appendix">9. 附录</a><button aria-label="展开侧边栏分类 &#x27;9. 附录&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rdk_doc/rdk_s/Release_Note/roadmap">10. 版本发布</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/rdk_doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/rdk_s/Advanced_development"><span>7. 进阶开发</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/rdk_s/05_MCU_development"><span>7.5 MCU开发指南</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/rdk_s/01_S100"><span>7.5.1 S100 MCU开发指南</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">MCU快速入门指南</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>MCU快速入门指南</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="范围">范围<a href="#范围" class="hash-link" aria-label="范围的直接链接" title="范围的直接链接">​</a></h2>
<p>本章节概述了 RDK-S100 mcu 系统，用于帮助读者快速了解并掌握，以便进行mcu1相关开发</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="基础信息">基础信息<a href="#基础信息" class="hash-link" aria-label="基础信息的直接链接" title="基础信息的直接链接">​</a></h2>
<ol>
<li>MCU编译工具链为GCC工具链，版本为gcc-arm-none-eabi-10.3-2021.10</li>
<li>MCU核为ARM R52+  ，可以用ARM R52 technical reference manual文档作为参考：<a href="https://developer.arm.com/documentation/100026/latest" target="_blank" rel="noopener noreferrer">官网链接</a></li>
<li>MCU运行的操作系统均为FreeRTOS，版本为FreeRTOS Kernel V10.0.1</li>
<li>MCU主要分为两部分：MCU0和MCU1。MCU0主要负责启动Acore、MCU1以及电源管理等功能，目前不开源；MCU1主要负责跑业务等功能，开源，客户可根据自己需求进行修改</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mcu框架">MCU框架<a href="#mcu框架" class="hash-link" aria-label="MCU框架的直接链接" title="MCU框架的直接链接">​</a></h2>
<p>MCU0是板子启动的开始，也是重中之重。因为MCU0负责启动Acore、MCU1以及电源管理等功能。Acore所运行的linux操作系统是客户开发功能的重要载体，而MCU1运行的FreeRTOS操作系统为客户的实时任务进行保驾护航。
MCU1通过linux的remoteproc框架实现，在Acore的sysfs通过向MCU0发送通知，从而控制MCU1的启动和关闭。同时在RDK-S100的休眠模式下，也是通知Acore通知MCU0从而操作MCU1，实现低功耗休眠功能。</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/MCU_frame.png" alt="" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="开发环境">开发环境<a href="#开发环境" class="hash-link" aria-label="开发环境的直接链接" title="开发环境的直接链接">​</a></h2>
<p>交叉编译是指在主机上开发和构建软件，然后把构建的软件部署到开发板上运行。主机一般拥有比开发板更高的性能和更多的内存，可以高效完成代码的构建，可以安装更多的开发工具。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="主机编译环境要求">主机编译环境要求<a href="#主机编译环境要求" class="hash-link" aria-label="主机编译环境要求的直接链接" title="主机编译环境要求的直接链接">​</a></h3>
<p>推荐使用 Ubuntu 22.04 操作系统，保持和RDK S100相同的系统版本，减少因版本差异产生的依赖问题。</p>
<p>Ubuntu 22.04 系统安装以下软件包：</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">get install </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">y build</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">essential make cmake libpcre3 libpcre3</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">dev bc bison \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        flex python3</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">numpy mtd</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">utils zlib1g</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">dev debootstrap \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        libdata</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">hexdumper</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">perl libncurses5</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">dev zip qemu</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">user</span><span class="token operator" style="color:#393A34">-</span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        curl repo git liblz4</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">tool apt</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cacher</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">ng libssl</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">dev checkpolicy autoconf \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        android</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">sdk</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">libsparse</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">utils mtools parted dosfstools udev rsync python3</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">pip scons</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip install scons</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token number" style="color:#36acaa">4.0</span><span class="token number" style="color:#36acaa">.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip install ecdsa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip install tqdm</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="编译mcu系统">编译MCU系统<a href="#编译mcu系统" class="hash-link" aria-label="编译MCU系统的直接链接" title="编译MCU系统的直接链接">​</a></h2>
<ol>
<li>编译会使用python3，RDK S100开发使用的python3的版本为3.8.10；</li>
<li>mcu1的镜像分为debug和release两个版本。debug版本的镜像会有调试信息，而release版本不含调试信息。</li>
</ol>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/* 编译mcu1 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd mcu</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Build</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">FreeRtos_mcu1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python build_freertos</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">py s100_sip_B debug</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">1.首次编译会从arm官网下载一份工具链然后解压  缩（10min左右），网速不好可能会存在工具链下载不成功或者工具链下载不完整的问题，可删除已下载的工具链，再多尝试下载几次。</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">2.如果已有相关工具链，可以将其移至/Build/ToolChain/Gcc/内，当检测到有工具链，就不会从官网下载。</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">mv 工具链地址/gcc-arm-none-eabi-10.3-2021.10/ 新代码/Build/ToolChain/Gcc/gcc-arm-none-eabi-10.3-2021.10</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*/</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="编译成功标志">编译成功标志<a href="#编译成功标志" class="hash-link" aria-label="编译成功标志的直接链接" title="编译成功标志的直接链接">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/build_success.png" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="编译输出目录">编译输出目录<a href="#编译输出目录" class="hash-link" aria-label="编译输出目录的直接链接" title="编译输出目录的直接链接">​</a></h3>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">output</span><span class="token operator" style="color:#393A34">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── dbg                                 # 该文件夹下包含debug版本的编译生成文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    ├── objs                           # 编译生成的i</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">o文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    └── S100_MCU_SIP_V2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">              # 编译生成的bin</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">map</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">elf等文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">         ├── custom_compiler_flags</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">         ├── S100_MCU_DEBUG</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elf        # mcu1启动文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">         ├── S100_MCU_DEBUG</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">         ├── S100_MCU_SIP_V2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">0.</span><span class="token plain">bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── objs                                # 编译生成的i</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">o文件，根据编译的版本变化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── rel                                 # 该文件夹下包含release版本的编译生成文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    ├── objs                           # 编译生成的i</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">o文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    └── S100_MCU_SIP_V2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">              # 编译生成的bin</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">map</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">elf等文件</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mcu1启动关闭流程">MCU1启动/关闭流程<a href="#mcu1启动关闭流程" class="hash-link" aria-label="MCU1启动/关闭流程的直接链接" title="MCU1启动/关闭流程的直接链接">​</a></h2>
<p>MCU1的启动/关闭是由Acore经过remoteproc框架传递信息给mcu0进而实现启动/关闭mcu1。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mcu1启动原理与步骤">MCU1启动原理与步骤<a href="#mcu1启动原理与步骤" class="hash-link" aria-label="MCU1启动原理与步骤的直接链接" title="MCU1启动原理与步骤的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mcu1启动原理">MCU1启动原理<a href="#mcu1启动原理" class="hash-link" aria-label="MCU1启动原理的直接链接" title="MCU1启动原理的直接链接">​</a></h4>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/mcu1_start.png" alt="" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mcu1启动步骤">MCU1启动步骤<a href="#mcu1启动步骤" class="hash-link" aria-label="MCU1启动步骤的直接链接" title="MCU1启动步骤的直接链接">​</a></h4>
<p>下述启动流程以debug版本为例，release版本与其类似，只是少一些log打印。</p>
<ol>
<li>经过上述编译流程，编译debug版本会在S100_MCU_SIP_V2.0文件夹下产生S100_MCU_DEBUG.elf文件（release版本类似），该文件为mcu1的firmware文件，因此需要将该文件推送到板端的/lib/firmware目录。举例子如下：</li>
</ol>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/push_elf.png" alt="" class="img_ev3q"></p>
<ol start="2">
<li>板端启动流程</li>
</ol>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">sys</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">class</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">remoteproc</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">remoteproc_mcu0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo S100_MCU_DEBUG</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elf </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> firmware</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo start </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> state</span><br></span></code></pre></div></div>
<p>正常启动后，串口log打印下图所示
Acore侧串口打印</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/Acore_start_log.png" alt="" class="img_ev3q"></p>
<p>MCU侧串口打印</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/MCU_start_log.png" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mcu1关闭原理与步骤">MCU1关闭原理与步骤<a href="#mcu1关闭原理与步骤" class="hash-link" aria-label="MCU1关闭原理与步骤的直接链接" title="MCU1关闭原理与步骤的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mcu1关闭原理">MCU1关闭原理<a href="#mcu1关闭原理" class="hash-link" aria-label="MCU1关闭原理的直接链接" title="MCU1关闭原理的直接链接">​</a></h4>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/mcu1_stop.png" alt="" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mcu1关闭步骤">MCU1关闭步骤<a href="#mcu1关闭步骤" class="hash-link" aria-label="MCU1关闭步骤的直接链接" title="MCU1关闭步骤的直接链接">​</a></h4>
<p>下述关闭流程以debug版本为例，release版本与其类似，只是少一些log打印。</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">sys</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">class</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">remoteproc</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">remoteproc_mcu0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo S100_MCU_DEBUG</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elf </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> firmware</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo stop </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> state</span><br></span></code></pre></div></div>
<p>正常关闭后，串口log打印下图所示
Acore侧串口打印</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/Acore_stop_log.png" alt="" class="img_ev3q"></p>
<p>MCU侧串口打印</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/MCU_stop_log.png" alt="" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>警告</div><div class="admonitionContent_BuS1"><p>stop mcu1之后，如果需要再次启动mcu1，必须等待系统进入wfi模式之后，才能再次start mcu1，见下图所示。原因解释：避免系统还没有进入wfi模式时，start mcu1会重新加载firmware至 mcu sram位置导致之前位置代码被覆盖，导致系统运行跑飞挂死</p><p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/mcu1_enter_wfi.png" alt="" class="img_ev3q"></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mcu0mcu1模块划分">MCU0/MCU1模块划分<a href="#mcu0mcu1模块划分" class="hash-link" aria-label="MCU0/MCU1模块划分的直 接链接" title="MCU0/MCU1模块划分的直接链接">​</a></h2>
<p>MCU整个系统含有ICU、RTC、IPC、port、CAN等模块，但是为了用户开发的方便，对于功能进行了划分，划分细节如下图所示。</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/MCU_functions.png" alt="" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mcu在sysfs上debug功能介绍">MCU在sysfs上debug功能介绍<a href="#mcu在sysfs上debug功能介绍" class="hash-link" aria-label="MCU在sysfs上debug功能介绍的直接链接" title="MCU在sysfs上debug功能介绍的直接链接">​</a></h2>
<p>MCU目前在sysfs上支持查看系统状态alive，系统存活时间taskcounter，mcu版本mcu_version，sbl版本sbl_version等功能。</p>
<ol>
<li>系统状态alive：表示mcu0\mcu1所处状态，分别为alive和dead两种。mcu alive状态每1s更新一次，所以获取状态会有1s延迟；</li>
<li>系统存活时间taskcounter：表示mcu启动后持续的时间，单位：秒；</li>
<li>mcu版本mcu_version：可以查看mcu版本信息，包括debug版本还是release版本，以及编译的时间；</li>
<li>sbl版本sbl_version：可以查看sbl版本信息以及编译的时间，但是只有在remoteproc_mcu0下可以查看;</li>
<li>MCU串口log:可以查看MCU串口log信息，分别remoteproc_mcu0对应MCU0，remoteproc_mcu1对应MCU1。</li>
</ol>
<p>系统状态alive，图示：</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/alive_state.png" alt="" class="img_ev3q"></p>
<p>系统存活时间taskcounter，图示：</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/taskcounter_state.png" alt="" class="img_ev3q"></p>
<p>mcu版本mcu_version，图示：</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/mcu_version.png" alt="" class="img_ev3q"></p>
<p>sbl版本sbl_version，图示：</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/sbl_version.png" alt="" class="img_ev3q"></p>
<p>MCU串口log获取，图示：</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/log.png" alt="" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mcu串口使用">MCU串口使用<a href="#mcu串口使用" class="hash-link" aria-label="MCU串口使用的直接链接" title="MCU串口使用的直接链接">​</a></h2>
<p>如果RDK-S100含有连接方式如下，mcu串口和Acore串口共用一个串口，自行查看：设备管理器 -》端口-》MCU-COM-波特率921600</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/MCU_COM1.jpg" alt="" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mcu0烧录流程">MCU0烧录流程<a href="#mcu0烧录流程" class="hash-link" aria-label="MCU0烧录流程的直接链接" title="MCU0烧录流程的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="手动烧录">手动烧录<a href="#手动烧录" class="hash-link" aria-label="手动烧录的直接链接" title="手动烧录的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="非空板烧录">非空板烧录<a href="#非空板烧录" class="hash-link" aria-label="非空板烧录的直接链接" title="非空板烧录的直接链接">​</a></h4>
<ol>
<li>打开板子，板端Acore串口常按enter进入uboot（一定要一直按）</li>
</ol>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fastboot </span><span class="token number" style="color:#36acaa">0</span><br></span></code></pre></div></div>
<ol start="2">
<li>编译好的mcu0 镜像/output_sysmcu/目录下找到相应的mcu0镜像</li>
</ol>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fastboot oem interface</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">mtd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* 编译出来的mcu0镜像：MCU_S100_SIP_V2.0.img */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fastboot flash MCU_a </span><span class="token string" style="color:#e3116c">&quot;xxx/MCU_S100_SIP_V2.0.img&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fastboot flash MCU_b </span><span class="token string" style="color:#e3116c">&quot;xxx/MCU_S100_SIP_V2.0.img&quot;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="空片烧录或烧挂重新烧录">空片烧录或烧挂重新烧 录<a href="#空片烧录或烧挂重新烧录" class="hash-link" aria-label="空片烧录或烧挂重新烧录的直接链接" title="空片烧录或烧挂重新烧录的直接链接">​</a></h4>
<ol>
<li>通过编译RDKS100-acore获取RDKS100镜像包，结构如下所示</li>
</ol>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/acore_product.png" alt="" class="img_ev3q"></p>
<ol start="2">
<li>烧录第一步：进入dfu模式，按照下图拨key即可(烧录完，记得拨回去！！！)</li>
</ol>
<p>a. 左下角有两个按键，在旁边有箭头丝印，箭头的方向表示实现对应功能的拨码方向
b. 电源开关：向下拨动，给板子上电
c. 烧录开关：向上拨动，给板子烧录
d. 上述操作完成后，按图片中按键1，同时2处的灯变为红色</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/board_dfu1.png" alt="" class="img_ev3q"></p>
<ol start="3">
<li>烧录第二步：在你解压的镜像文件夹下执行下面的指令，即dfu下载进入uboot(sec版本)</li>
</ol>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dfu</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">d </span><span class="token number" style="color:#36acaa">3652</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6610</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">a </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">D out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">product</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">xmodem_tools</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">sec</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s100</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">cmd_load_sbl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dfu</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">d </span><span class="token number" style="color:#36acaa">3652</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6610</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">a </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">D out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">product</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">xmodem_tools</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">sec</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s100</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">sbl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pkg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dfu</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">d </span><span class="token number" style="color:#36acaa">3652</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6610</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">a </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">D out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">product</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">xmodem_tools</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">sec</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s100</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">cmd_exit_sbl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dfu</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">d </span><span class="token number" style="color:#36acaa">3652</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6620</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">a </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">R </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">D out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">product</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">xmodem_tools</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">sec</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s100</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">u</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">boot</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">spl_ddr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dfu</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">d </span><span class="token number" style="color:#36acaa">3652</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6620</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">a </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">R </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">D out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">product</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">xmodem_tools</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">sec</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s100</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">S100_MCU_V1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">0.</span><span class="token plain">bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property directive keyword" style="color:#00009f">mcu</span><span class="token macro property expression" style="color:#36acaa">启动可能费时比较久</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dfu</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">d </span><span class="token number" style="color:#36acaa">3652</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6625</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">a </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">D out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">product</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">xmodem_tools</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">sec</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s100</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">hobot</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">s100</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">bl31</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dtb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dfu</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">d </span><span class="token number" style="color:#36acaa">3652</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6625</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">a </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">D out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">product</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">xmodem_tools</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">sec</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s100</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">bl31</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dfu</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">d </span><span class="token number" style="color:#36acaa">3652</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6625</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">a </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">D out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">product</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">xmodem_tools</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">sec</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s100</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">tee</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">pager_v2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dfu</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">d </span><span class="token number" style="color:#36acaa">3652</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6625</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">a </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">R </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">D out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">product</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">xmodem_tools</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">sec</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s100</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">u</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">boot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bin</span><br></span></code></pre></div></div>
<ol start="4">
<li>烧录第三步：整体烧录命令如下：</li>
</ol>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fastboot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe oem interface</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">mtd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fastboot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe flash hb_vspiflash out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">product</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">img_packages</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">disk</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">miniboot_flash_nose</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fastboot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe oem interface</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">blk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fastboot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe oem bootdevice</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">scsi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fastboot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exe flash </span><span class="token number" style="color:#36acaa">0x0</span><span class="token plain"> out</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">product</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">img_packages</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">disk</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">emmc_disk</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">simg</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="自动烧录">自动烧录<a href="#自动烧录" class="hash-link" aria-label="自动烧录的直接链接" title="自动烧录的直接链接">​</a></h3>
<ol>
<li>能够正常进入Uboot，下载模式选择“uboot”</li>
</ol>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/mcu_uboot.png" alt="" class="img_ev3q"></p>
<ol start="2">
<li>不能正常进入UBoot，下载模式选择“usb”</li>
</ol>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/mcu_usb.png" alt="" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mcu1-undefinedabort-异常处理原理">MCU1 Undefined/Abort 异常处理原理<a href="#mcu1-undefinedabort-异常处理原理" class="hash-link" aria-label="MCU1 Undefined/Abort 异常处理原理的直接链接" title="MCU1 Undefined/Abort 异常处理原理的直接链接">​</a></h2>
<p>正常情况下系统在进入undefined/abort异常时，最终会进入死循环状态。只有重新执行上下电流程才能再次正常运行。RDK-S100由于不能对mcu1单独进行上下电，所以需要进行系统流程的修改，以实现上述的预期。
具体原理：当Undefined/Abort异常产生时，也会最终进入死循环状态。通过Acore的sysfs对mcu1进行软件下电，也即通知mcu1进入wfi模式，等下次再次start时，mcu1将重新软件启动，从而实现预期。</p>
<p><img decoding="async" loading="lazy" src="https://rdk-doc.oss-cn-beijing.aliyuncs.com/doc/img/07_Advanced_development/05_mcu_development/01_S100/basic_information/MCU_exception.png" alt="" class="img_ev3q"></p>
<p>以Undefined异常为例子，当Undefined异常产生时，uart串口输出log “EL1_Undefined_Handler”，并进入最终进入S100_Exception_Handler处理函数，并根据exception_on变量进入死循环状态。当Acore通过remoteproc框架stop mcu1后，核间中断修改exception_on变量，进而关闭tick周期性中断，并进入WFI模式（STANDBY模式）：</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Os_Isr_Cross_Core_Ins0_Isr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">LogSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;mcu1 enter WFI mode!\r\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  power_on </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">ClearCrossCoreISR0</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">exception_on</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exception_on </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">S100_Exception_Handler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">LogSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;os enter %s!\r\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">__func__</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">exception_on</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">LogSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;%s enter wfi mode!\r\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">__func__</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">Os_Disable_Millisecond</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">Os_Clear_Millisecond</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">STANDBY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">EL1_Undefined_Handler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">int32_t</span><span class="token plain"> func_ptr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;E&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;L&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;1&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;_&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;U&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;n&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;d&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;e&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;f&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;i&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;n&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;e&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;d&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;_&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;H&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;n&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;d&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;l&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;e&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;r&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;\r&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UART_0_BASE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;\n&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">LogSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;os enter %s!\r\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">__func__</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exception_on </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    func_ptr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">S100_Exception_Handler</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    __asm </span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;mov lr, %[func_ptr]\t&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">func_ptr</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;r&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">uintptr_t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">func_ptr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lr&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    __asm </span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ERET&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mcu1-main函数简介">MCU1 main函数简介<a href="#mcu1-main函数简介" class="hash-link" aria-label="MCU1 main函数简介的直接链接" title="MCU1 main函数简介的直接链接">​</a></h2>
<p>main函数是进入系统后的关键代码，下述代码也是mcu1正常启动的关键，请勿随意删除相关代码，删除可能会导致启动异常。</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ipc_MainPowerUp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TRUE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">/* IPC 上电标志，mcu1默认上电，因为在mcu0已上电 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">PpsIcu_Irq_Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/* PPS相关中断配置为边沿触发函数 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">Uart_Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">/* UART串口初始化，debug用 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">Log_Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">/* log串口初始化，初始化后可在Acore获取相应mcu log信息 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">ifdef</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression" style="color:#36acaa">SHELL_ENABLE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">Shell_Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">/* shell命令初始化，通过SHELL_ENABLE宏进行开关 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">endif</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">Version_into_AonSram</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">/* 获取mcu版本信息，初始化后可在Acore获取相应mcu version信息 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">LogSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;MCU FreeRtos Lite Init Success!\r\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">FreeRtos_Irq_Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">/* FreeRtos 中断初始化 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">FreeRtos_Task_Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">/* FreeRtos 任务初始化以及调度启动 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2025-07-07T12:32:02.000Z" itemprop="dateModified">2025年7月7日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/code_release"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">MCU代码包结构介绍</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rdk_doc/rdk_s/Advanced_development/mcu_development/S100/MCU_build_system"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">MCU系统说明</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#范围" class="table-of-contents__link toc-highlight">范围</a></li><li><a href="#基础信息" class="table-of-contents__link toc-highlight">基础信息</a></li><li><a href="#mcu框架" class="table-of-contents__link toc-highlight">MCU 框架</a></li><li><a href="#开发环境" class="table-of-contents__link toc-highlight">开发环境</a><ul><li><a href="#主机编译环境要求" class="table-of-contents__link toc-highlight">主机编译环境要求</a></li></ul></li><li><a href="#编译mcu系统" class="table-of-contents__link toc-highlight">编译MCU系统</a></li><li><a href="#编译成功标志" class="table-of-contents__link toc-highlight">编译成功标志</a><ul><li><a href="#编译输出目录" class="table-of-contents__link toc-highlight">编译输出目录</a></li></ul></li><li><a href="#mcu1启动关闭流程" class="table-of-contents__link toc-highlight">MCU1启动/关闭流程</a><ul><li><a href="#mcu1启动原理与步骤" class="table-of-contents__link toc-highlight">MCU1启动原理与步骤</a><ul><li><a href="#mcu1启动原理" class="table-of-contents__link toc-highlight">MCU1启动原理</a></li><li><a href="#mcu1启动步骤" class="table-of-contents__link toc-highlight">MCU1启动步骤</a></li></ul></li><li><a href="#mcu1关闭原理与步骤" class="table-of-contents__link toc-highlight">MCU1关闭原理与步骤</a><ul><li><a href="#mcu1关闭原理" class="table-of-contents__link toc-highlight">MCU1关闭原理</a></li><li><a href="#mcu1关闭步骤" class="table-of-contents__link toc-highlight">MCU1关闭步骤</a></li></ul></li></ul></li><li><a href="#mcu0mcu1模块划分" class="table-of-contents__link toc-highlight">MCU0/MCU1模块划分</a></li><li><a href="#mcu在sysfs上debug功能介绍" class="table-of-contents__link toc-highlight">MCU在sysfs上debug功能介绍</a></li><li><a href="#mcu串口使用" class="table-of-contents__link toc-highlight">MCU串口使用</a></li><li><a href="#mcu0烧录流程" class="table-of-contents__link toc-highlight">MCU0烧录流程</a><ul><li><a href="#手动烧录" class="table-of-contents__link toc-highlight">手动烧录</a><ul><li><a href="#非空板烧录" class="table-of-contents__link toc-highlight">非空板烧录</a></li><li><a href="#空片烧录或烧挂重新烧  录" class="table-of-contents__link toc-highlight">空片烧录或烧挂重新烧录</a></li></ul></li><li><a href="#自动烧录" class="table-of-contents__link toc-highlight">自动烧录</a></li></ul></li><li><a href="#mcu1-undefinedabort-异常处理原理" class="table-of-contents__link toc-highlight">MCU1 Undefined/Abort 异常处理原理</a></li><li><a href="#mcu1-main函数简介" class="table-of-contents__link toc-highlight">MCU1 main函数简介</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">友情链接</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.guyuehome.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">古月居<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">联系我们</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://space.bilibili.com/437998606" target="_blank" rel="noopener noreferrer" class="footer__link-item">BiLiBiLi<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 D-Robotics.</div></div></div></footer></div>
</body>
</html>