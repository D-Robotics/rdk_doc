<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-docs_s docs-version-current docs-doc-page docs-doc-id-FAQ/applications_and_examples" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">8.3 应用开发、编译与示例 | RDK DOC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.d-robotics.cc/rdk_doc/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.d-robotics.cc/rdk_doc/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developer.d-robotics.cc/rdk_doc/rdk_s/FAQ/applications_and_examples"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-docs_s-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs_s-current"><meta data-rh="true" property="og:title" content="8.3 应用开发、编译与示例 | RDK DOC"><meta data-rh="true" name="description" content="本节主要解答与在RDK平台上安装/使用第三方库、编译应用程序、运行官方示例以及相关问题。"><meta data-rh="true" property="og:description" content="本节主要解答与在RDK平台上安装/使用第三方库、编译应用程序、运行官方示例以及相关问题。"><link data-rh="true" rel="icon" href="/rdk_doc/img/logo.png"><link data-rh="true" rel="canonical" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/FAQ/applications_and_examples"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/FAQ/applications_and_examples" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/en/rdk_s/FAQ/applications_and_examples" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.d-robotics.cc/rdk_doc/rdk_s/FAQ/applications_and_examples" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"8. 常见问题","item":"https://developer.d-robotics.cc/rdk_doc/rdk_s/FAQ"},{"@type":"ListItem","position":2,"name":"8.3 应用开发、编译与示例","item":"https://developer.d-robotics.cc/rdk_doc/rdk_s/FAQ/applications_and_examples"}]}</script><script src="https://hm.baidu.com/hm.js?24dd63cad43b63889ea6bede5fd1ab9e" async></script><link rel="stylesheet" href="/rdk_doc/assets/css/styles.a6d92e8e.css">
<script src="/rdk_doc/assets/js/runtime~main.74ba35b8.js" defer="defer"></script>
<script src="/rdk_doc/assets/js/main.ca6920fa.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/rdk_doc/img/logo.png" alt="地瓜机器人社区 logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rdk_doc/img/logo.png" alt="地瓜机器人社区 logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">D-Robotics</b></a><a class="navbar__item navbar__link" href="/rdk_doc/RDK">RDK X3 / X5</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rdk_doc/rdk_s/RDK">RDK S100</a><a href="https://developer.d-robotics.cc/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>CN</a><ul class="dropdown__menu"><li><a href="/rdk_doc/rdk_s/FAQ/applications_and_examples" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-Hans">CN</a></li><li><a href="/rdk_doc/en/rdk_s/FAQ/applications_and_examples" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">EN</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rdk_doc/rdk_s/RDK">D-Robotics RDK 套件</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/Quick_start">1. 快速开始</a><button aria-label="展开侧边栏分类 &#x27;1. 快速开始&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/System_configuration">2. 系统配置</a><button aria-label="展开侧边栏分类 &#x27;2. 系统配置&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/Basic_Application">3. 基础应用开发</a><button aria-label="展开侧边栏分类 &#x27;3. 基础应用开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/Basic_Development">4. 算法应用开发</a><button aria-label="展开侧边栏分类 &#x27;4. 算法应用开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/Robot_development">5. 机器人应用开发</a><button aria-label="展开侧边栏分类 &#x27;5. 机器人应用开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/Application_case">6. 应用开发指南</a><button aria-label="展开侧边栏分类 &#x27;6. 应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/Advanced_development">7. 进阶开发</a><button aria-label="展开侧边栏分类 &#x27;7. 进阶开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rdk_doc/rdk_s/FAQ">8. 常见问题</a><button aria-label="折叠侧边栏分类 &#x27;8. 常见问题&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/FAQ/hardware_and_system">8.1 硬件、系统与环境配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/FAQ/interface">8.2 接口、外设与驱动</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rdk_doc/rdk_s/FAQ/applications_and_examples">8.3 应用开发、编译与示例</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/FAQ/multimedia">8.4 多媒体处理与应用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/FAQ/toolchain">8.5 AI模型、算法与工具链</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rdk_doc/rdk_s/FAQ/tros_ros">8.6 TROS/ROS 开发</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rdk_doc/rdk_s/Appendix">9. 附录</a><button aria-label="展开侧边栏分类 &#x27;9. 附录&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rdk_doc/rdk_s/Release_Note/roadmap">10. 版本发布</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/rdk_doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/rdk_doc/rdk_s/FAQ"><span>8. 常见问题</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">8.3 应用开发、编译与示例</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>8.3 应用开发、编译与示例</h1></header>
<p>本节主要解答与在RDK平台上安装/使用第三方库、编译应用程序、运行官方示例以及相关问题。</p>
<p>如需交叉编译部署，请参考<a href="https://developer.d-robotics.cc/forumDetail/112555549341653662" target="_blank" rel="noopener noreferrer">交叉编译环境部署</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q1-第三方库在rdk上的安装交叉编译和使用方法是怎样的">Q1: 第三方库在RDK上的安装/交叉编译和使用方法是怎样的？<a href="#q1-第三方库在rdk上的安装交叉编译和使用方法是怎样的" class="hash-link" aria-label="Q1: 第三方库在RDK上的安装/交叉编译和使用方法是怎样的？的直接链接" title="Q1: 第三方库在RDK上的安装/交叉编译和使用方法是怎样的？的直接链接">​</a></h3>
<p><strong>A:</strong></p>
<ul>
<li><strong>板端直接安装：</strong> 如果第三方库提供了适用于ARM架构的预编译包（例如 <code>.deb</code> 文件），或者可以通过包管理器（如 <code>apt</code>）直接安装，那么可以在RDK板卡上直接进行安装。对于Python库，如果Pypi上有对应的arm64 wheels包，也可以直接 <code>pip install</code>。</li>
<li><strong>交叉编译：</strong> 如果第三方库需要从源码编译，推荐在PC开发主机上进行交叉编译，然后将编译产物部署到RDK板卡上。<!-- -->
<ul>
<li><strong>环境部署：</strong> 详细的交叉编译环境搭建步骤，请参考地平线开发者社区  的教程：<a href="https://developer.d-robotics.cc/forumDetail/112555549341653662" target="_blank" rel="noopener noreferrer">交叉编译环境部署</a></li>
<li><strong>编译步骤：</strong> 通常需要配置CMake Toolchain文件，指定交叉编译器、目标系统Sysroot等。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q2-在编译大型程序如c项目ros功能包的过程中如果系统提示编译进程被kill或出现内存不足相关的错误日志应该如何解决">Q2: 在编译大型程序（如C++项目、ROS功能包）的过程中，如果系统提示编译进程被“kill”或出现内存不足相关的错误日志，应该如何解决？<a href="#q2-在编译大型程序如c项目ros功能包的过程中如果系统提示编译进程被kill或出现内存不足相关的错误日志应该如何解决" class="hash-link" aria-label="Q2: 在编译大型程序（如C++项目、ROS功能包）的过程中，如果系统提示编译进程被“kill”或出现内存不足相关的错误日志，应该如何解决？的直接链接" title="Q2: 在编译大型程序（如C++项目、ROS功能包）的过程中，如果系统提示编译进程被“kill”或出现内存不足相关的错误日志，应该如何解决？的直接链接">​</a></h3>
<p><strong>A:</strong> 编译大型项目时，如果物理内存不足，Linux系统的OOM (Out Of Memory) killer机制可能会杀死消耗内存最多的进程（通常是编译器进程如<code>cc1plus</code>、<code>ld</code>等），导致编译失败。
<strong>解决方法：</strong> 增加系统的交换空间 (Swap)。Swap是硬盘上的一块区域，当物理内存不足时，系统可以将部分不常用的内存数据暂时存放到Swap中，从而释放物理内存供当前任务使用。虽然Swap比物理内存慢，但可以有效防止因瞬时内存不足导致的编译失败。</p>
<p><strong>增加Swap空间的步骤示例 (创建一个1GB的Swap文件)：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. （可选）创建一个目录用于存放Swap文件，或者直接在根目录创建</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkdir -p /swapfile_custom_dir </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd /swapfile_custom_dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. 使用dd命令创建一个指定大小的空文件 (bs=1M表示块大小为1MB, count=1024表示1024个块，即1GB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo dd if=/dev/zero of=swap bs=1M count=1024 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. 设置正确的文件权限 (只有root用户可读写)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod 0600 swap </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 4. 将该文件格式化为Swap分区</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkswap -f swap </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 5. 启用Swap分区</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo swapon swap </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 6. 验证Swap空间是否已启用 (会显示Swap总量和已用量)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">free -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">swapon --show</span><br></span></code></pre></div></div>
<p><strong>使其开机自动挂载 (可选但推荐)：</strong>
编辑 <code>/etc/fstab</code> 文件，在末尾添加一行（假设您的swap文件路径是<code>/swapfile_custom_dir/swap</code>）：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/swapfile_custom_dir/swap none swap sw 0 0</span><br></span></code></pre></div></div>
<p><strong>参考教程：</strong> <a href="https://developer.d-robotics.cc/forumDetail/98129467158916281" target="_blank" rel="noopener noreferrer">Swap使用教程</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q3-如何运行gc4633-mipi摄像头的示例程序">Q3: 如何运行GC4633 MIPI摄像头的示例程序？<a href="#q3-如何运行gc4633-mipi摄像头的示例程序" class="hash-link" aria-label="Q3: 如何运行GC4633 MIPI摄像头的示例程序？的直接链接" title="Q3: 如何运行GC4633 MIPI摄像头的示例程序？的直接链接">​</a></h3>
<p><strong>A:</strong> 地平线官方通常会提供基于常见MIPI摄像头（如F37、GC4663）的AI算法示例（例如FCOS目标检测）。这些示例一般会自动检测连接的摄像头型号并进行算法推理。</p>
<p><strong>运行步骤示例 (以 <code>/app/ai_inference/03_mipi_camera_sample</code> 为例)：</strong></p>
<ol>
<li>确保GC4663（或其他兼容的MIPI摄像头）已正确连接到RDK板卡的MIPI CSI接口，并且板卡已上电。</li>
<li>通过SSH或串口登录到板卡系统。</li>
<li>进入示例程序所在的目录：<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /app/ai_inference/03_mipi_camera_sample </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 注意：具体路径可能因RDK系统版本和镜像内容而略有不同。</span><br></span></code></pre></div></div>
</li>
<li>使用<code>sudo</code>权限运行Python示例脚本：<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo python3 mipi_camera.py</span><br></span></code></pre></div></div>
</li>
<li>如果示例设计为通过HDMI输出，请确保RDK板卡的HDMI接口已连接到显示器。运行后，您应该能在显示器上看到摄像头捕捉的实时画面以及AI算法处理后的结果（例如检测框、分类标签等）。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q4-使用rqt_image_view查看rdk通过ros发布的rgb888-raw图像时感觉非常卡顿甚至无法接收图像是什么原因">Q4: 使用<code>rqt_image_view</code>查看RDK通过ROS发布的RGB888 RAW图像时，感觉非常卡顿，甚至无法接收图像，是什么原因？<a href="#q4-使用rqt_image_view查看rdk通过ros发布的rgb888-raw图像时感觉非常卡顿甚至无法接收图像是什么原因" class="hash-link" aria-label="q4-使用rqt_image_view查看rdk通过ros发布的rgb888-raw图像时感觉非常卡顿甚至无法接收图像是什么原因的直接链接" title="q4-使用rqt_image_view查看rdk通过ros发布的rgb888-raw图像时感觉非常卡顿甚至无法接收图像是什么原因的直接链接">​</a></h3>
<p><strong>A:</strong> 这个问题通常与ROS2中间件DDS的配置以及网络传输效率有关，特别是当传输未压缩的大尺寸原始图像数据时。</p>
<ul>
<li><strong>原因分析：</strong>
<ul>
<li>默认的FastDDS在UDP协议层可能没有实现有效的MTU（最大传输单元）分片。当发布的图像数据包大小超过网络路径上的MTU时，IP层会进行分片。</li>
<li>大量的IP分片对许多常见的路由器、交换机或网卡来说处理负担较重，可能导致无法有效缓冲所有分片。</li>
<li>在UDP传输中，如果任何一个IP分片丢失，整个UDP包（即整个图像帧）通常就会被丢弃，或者需要等待重传（如果上层有相关机制，但ROS图像话题通常不保证可靠传输），这会导致严重的卡顿或图像丢失。这种情况有时被称为“IP fragmentation attack”的类似表现，即大量分片导致网络拥堵和丢包。</li>
</ul>
</li>
<li><strong>解决方法：</strong>
<ol>
<li><strong>更换DDS实现：</strong> 尝试将ROS2的RMW (ROS Middleware) 实现从默认的<code>rmw_fastrtps_cpp</code>切换到<code>rmw_cyclonedds_cpp</code>。CycloneDDS在处理大数据包和网络分片方面有时表现更优  。
在终端执行以下命令来切换DDS（仅对当前终端会话有效，或可加入到<code>.bashrc</code>）：<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp</span><br></span></code></pre></div></div>
<!-- -->然后重新启动您的ROS节点。</li>
<li><strong>降低传输数据量：</strong>
<ul>
<li><strong>发送压缩格式图像：</strong> 考虑在RDK板卡端将原始图像（如RGB888）压缩为JPEG或PNG等格式后再通过ROS话题发布。这会显著减小每帧图像的数据量。您可以在PC端订阅压缩图像话题，并由<code>rqt_image_view</code>（或自定义节点）进行解压显示。</li>
<li><strong>降低分辨率或帧率：</strong> 如果应用允许，适当降低发布图像的分辨率或帧率也能有效减少网络负担。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q5-地平线提供的linux镜像特指经过最小裁剪的系统非完整ubuntu-desktopserver是否支持在板卡端直接进行编译操作">Q5: 地平线提供的Linux镜像（特指经过最小裁剪的系统，非完整Ubuntu Desktop/Server）是否支持在板卡端直接进行编译操作？<a href="#q5-地平线提供的linux镜像特指经过最小裁剪的系统非完整ubuntu-desktopserver是否支持在板卡端直接进行编译操作" class="hash-link" aria-label="Q5: 地平线提供的Linux镜像（特指经过最小裁剪的系统，非完整Ubuntu Desktop/Server）是否支持在板卡端直接进行编译操作？的直接链接" title="Q5: 地平线提供的Linux镜像（特指经过最小裁剪的系统，非完整Ubuntu Desktop/Server）是否支持在板卡端直接进行编译操作？的直接链接">​</a></h3>
<p><strong>A:</strong> 地平线为RDK提供的部分Linux镜像，特别是那些为嵌入式部署而经过最小化裁剪的rootfs（根文件系统），可能<strong>不包含</strong>完整的编译工具链（如GCC, G++, make, CMake等）和开发所需的头文件、库文件。</p>
<ul>
<li><strong>结论：</strong> 这类最小化Linux镜像通常<strong>无法支持或不适合</strong>在板卡端直接进行复杂的源码编译工作。</li>
<li><strong>推荐做法：</strong> 对于需要在RDK上运行的应用程序，推荐采用<strong>交叉编译</strong>的方式。即在PC开发主机（如Ubuntu PC）上配置好针对RDK目标平台的交叉编译环境，在PC上完成编译后，再将生成的可执行文件和相关依赖部署到RDK板卡上运行。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q6-在地平线提供的最小化linux镜像上如何运行官方手册中提供的示例这些示例通常以ubuntu系统环境为例">Q6: 在地平线提供的最小化Linux镜像上如何运行官方手册中提供的示例（这些示例通常以Ubuntu系统环境为例）？<a href="#q6-在地平线提供的最小化linux镜像上如何运行官方手册中提供的示例这些示例通常以ubuntu系统环境为例" class="hash-link" aria-label="Q6: 在地平线提供的最小化Linux镜像上如何运行官方手册中提供的示例（这些示例通常以Ubuntu系统环境为例）？的直接链接" title="Q6: 在地平线提供的最小化Linux镜像上如何运行官方手册中提供的示例（这些示例通常以Ubuntu系统环境为例）？的直接链接">​</a></h3>
<p><strong>A:</strong> 官方手册中的示例（尤其是TROS/ROS相关的示例）通常是在功能更完整的Ubuntu系统环境下演示的。要在最小化的Linux镜像（可能没有预装Python解释器或完整的ROS环境）上运行这些示例（特别是C++编写的ROS节点），需要做一些调整：</p>
<ul>
<li>
<p><strong>Ubuntu系统与Linux镜像启动示例的差异：</strong></p>
<ul>
<li><strong>环境配置：</strong>
<ul>
<li><strong>Ubuntu系统：</strong> 通常使用 <code>source /opt/tros/setup.bash</code> (或对应ROS版本的setup.bash) 来配置TROS/ROS环境，这个脚本会设置大量的环境变量（如<code>PATH</code>, <code>LD_LIBRARY_PATH</code>, <code>AMENT_PREFIX_PATH</code>等）。</li>
<li><strong>Linux镜像：</strong> 可能需要手动设置关键的环境变量，特别是 <code>LD_LIBRARY_PATH</code> 以确保程序能找到所需的共享库。日志路径 <code>ROS_LOG_DIR</code> 也可能需要手动指定到一个可写的位置。</li>
</ul>
</li>
<li><strong>配置文件拷贝：</strong> 无论哪种系统，运行示例前通常都需要将示例依赖的配置文件（如模型配置、参数文件等）从TROS/ROS安装路径下拷贝到当前工作目录或指定路径。</li>
<li><strong>启动方式：</strong>
<ul>
<li><strong>Ubuntu系统：</strong> 常使用 <code>ros2 run &lt;package_name&gt; &lt;executable_name&gt;</code> 或 <code>ros2 launch &lt;package_name&gt; &lt;launch_file_name&gt;</code> 来启动节点或启动文件。</li>
<li><strong>Linux镜像：</strong> 由于可能没有完整的<code>ros2</code>命令行工具或launch系统，通常需要直接运行编译好的C++可执行程序，并通过命令行参数的方式传递原本在launch文件中设置的参数。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>将launch脚本内容转换为Linux镜像上的直接执行命令（以一个C++的<code>dnn_node_example</code>为例）：</strong></p>
<ol>
<li>
<p><strong>分析Ubuntu上的启动命令：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Ubuntu: 配置tros.b环境</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source /opt/tros/setup.bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Ubuntu: 从tros.b的安装路径中拷贝出运行示例需要的配置文件。config中为example使用的模型，回灌使用的本地图片</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp -r /opt/tros/${TROS_DISTRO}/lib/dnn_node_example/config/ .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Ubuntu: 使用本地jpg格式图片进行回灌预测，并存储渲染后的图片</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 launch dnn_node_example dnn_node_example_feedback.launch.py</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>找到launch脚本并分析其内容：</strong></p>
<ul>
<li><strong>查找launch脚本路径：</strong>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># find /opt/tros/ -name dnn_node_example_feedback.launch.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt/tros/share/dnn_node_example/launch/dnn_node_example_feedback.launch.py</span><br></span></code></pre></div></div>
</li>
<li><strong>查看launch脚本内容 (Python launch file)：</strong>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># dnn_node_example_feedback.launch.py (主要内容节选)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">generate_launch_description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config_file_launch_arg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DeclareLaunchArgument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;dnn_example_config_file&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> default_value</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TextSubstitution</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;config/fcosworkconfig.json&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    img_file_launch_arg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DeclareLaunchArgument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;dnn_example_image&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> default_value</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TextSubstitution</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;config/test.jpg&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 拷贝config中文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dnn_node_example_path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        get_package_prefix</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;dnn_node_example&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;lib/dnn_node_example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># print(&quot;dnn_node_example_path is &quot;, dnn_node_example_path) # 这行通常在launch中不直接打印</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># cp_cmd = &quot;cp -r &quot; + dnn_node_example_path + &quot;/config .&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># print(&quot;cp_cmd is &quot;, cp_cmd) # 这行通常在launch中不直接打印</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># os.system(cp_cmd) # launch文件通常不直接执行shell命令拷贝，而是依赖ament_cmake的install规则</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> LaunchDescription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config_file_launch_arg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        img_file_launch_arg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            package</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;dnn_node_example&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            executable</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;example&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 可执行文件名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            output</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;screen&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            parameters</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic"># 传递给可执行程序的参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;feed_type&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;config_file&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> LaunchConfiguration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;dnn_example_config_file&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;image&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> LaunchConfiguration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;dnn_example_image&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;image_type&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;dump_render_img&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            arguments</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;--ros-args&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;--log-level&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;info&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
</li>
</ul>
<p>从launch脚本中，我们可以知道它启动了<code>dnn_node_example</code>包中的名为<code>example</code>的可执行文件，并传递了一系列参数。</p>
</li>
<li>
<p><strong>找到可执行程序路径：</strong>
在TROS安装路径下查找该可执行文件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># find /opt/tros/ -name example -executable -type f </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># (更精确的查找方式可能是基于package名)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 通常位于 /opt/tros/${TROS_DISTRO}/lib/&lt;package_name&gt;/&lt;executable_name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 示例路径: /opt/tros/humble/lib/dnn_node_example/example </span><br></span></code></pre></div></div>
<p>(假设 <code>TROS_DISTRO</code> 环境变量在Linux镜像上未设置，您需要知道实际的发行版名称，如 <code>humble</code> 或 <code>foxy</code>)</p>
</li>
<li>
<p><strong>在Linux镜像上构造启动命令：</strong></p>
<ul>
<li><strong>配置环境：</strong>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 假设TROS库文件位于/opt/tros/humble/lib (具体路径需确认)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/opt/tros/humble/lib/ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 指定一个可写的日志目录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export ROS_LOG_DIR=/userdata/  # 或者 /tmp/roslogs/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $ROS_LOG_DIR</span><br></span></code></pre></div></div>
</li>
<li><strong>拷贝配置文件：</strong> (与Ubuntu上类似)<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 例如，对于humble版本:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp -r /opt/tros/humble/lib/dnn_node_example/config/ .</span><br></span></code></pre></div></div>
</li>
<li><strong>直接运行可执行程序并传递参数：</strong>
ROS2节点参数通常通过 <code>--ros-args -p &lt;param_name&gt;:=&lt;param_value&gt;</code> 的形式传递。<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/tros/humble/lib/dnn_node_example/example \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --ros-args \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -p feed_type:=0 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -p config_file:=&quot;config/fcosworkconfig.json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -p image:=&quot;config/test.jpg&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -p image_type:=0 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -p dump_render_img:=1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --log-level info</span><br></span></code></pre></div></div>
</li>
</ul>
</li>
</ol>
<ul>
<li><strong>完整的Linux镜像上运行示例脚本可能如下：</strong>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 1. 配置环境</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 根据实际TROS版本和安装路径调整</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TROS_DISTRO_NAME=&quot;humble&quot; # 或者 &quot;foxy&quot; 等</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TROS_INSTALL_LIB_DIR=&quot;/opt/tros/${TROS_DISTRO_NAME}/lib&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${TROS_INSTALL_LIB_DIR}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 如果有其他依赖的库路径，也需要加入</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${TROS_INSTALL_LIB_DIR}/aarch64-linux-gnu # 示例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export ROS_LOG_DIR=/userdata/ros_logs_$(date +%s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $ROS_LOG_DIR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;ROS logs will be stored in $ROS_LOG_DIR&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. 准备工作目录和配置文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORK_DIR=&quot;/tmp/dnn_example_run_$(date +%s)&quot; # 使用时间戳避免冲突</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $WORK_DIR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd $WORK_DIR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Working directory: $(pwd)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONFIG_SOURCE_DIR=&quot;${TROS_INSTALL_LIB_DIR}/dnn_node_example/config&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -d &quot;$CONFIG_SOURCE_DIR&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Copying config files from $CONFIG_SOURCE_DIR to $(pwd)/config&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mkdir -p config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cp -r $CONFIG_SOURCE_DIR/* ./config/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Error: Config source directory $CONFIG_SOURCE_DIR not found.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. 运行可执行程序</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXECUTABLE_PATH=&quot;${TROS_INSTALL_LIB_DIR}/dnn_node_example/example&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ ! -f &quot;$EXECUTABLE_PATH&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Error: Executable $EXECUTABLE_PATH not found.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Starting DNN example...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$EXECUTABLE_PATH \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --ros-args \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -p feed_type:=0 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -p config_file:=&quot;config/fcosworkconfig.json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -p image:=&quot;config/test.jpg&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -p image_type:=0 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -p dump_render_img:=1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --log-level info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;DNN example finished. Check $WORK_DIR for output and $ROS_LOG_DIR for logs.&quot;</span><br></span></code></pre></div></div>
</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_BuS1"><ul>
<li>除了使用环境变量<code>ROS_LOG_DIR</code>设置log路径外，还可以通过启动参数<code>--ros-args --disable-external-lib-logs</code>禁止node输出log到文件，使日志直接打印到控制台。
例如：<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$EXECUTABLE_PATH --ros-args --disable-external-lib-logs \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -p feed_type:=0 -p image_type:=0 -p dump_render_img:=1 </span><br></span></code></pre></div></div>
</li>
<li>详细的ROS2日志说明可以参考：<a href="https://docs.ros.org/en/humble/Concepts/Intermediate/About-Logging.html" target="_blank" rel="noopener noreferrer">ROS2官方文档 - About Logging</a></li>
</ul></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q7-如何快速查找rostros中launch启动脚本文件的具体路径">Q7: 如何快速查找ROS/TROS中launch启动脚本文件的具体路径？<a href="#q7-如何快速查找rostros中launch启动脚本文件的具体路径" class="hash-link" aria-label="Q7: 如何快速查找ROS/TROS中launch启动脚本文件的具体路径？的直接链接" title="Q7: 如何快速查找ROS/TROS中launch启动脚本文件的具体路径？的直接链接">​</a></h3>
<p><strong>A:</strong> 当您知道一个launch脚本的文件名（例如 <code>dnn_node_example.launch.py</code>），但需要修改它或查看其内容时，可以在RDK板卡的TROS安装路径（通常是 <code>/opt/tros/</code>）下使用 <code>find</code> 命令来查找。</p>
<p><strong>查找示例：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 查找名为 dnn_node_example.launch.py 的文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">find /opt/tros/ -name dnn_node_example.launch.py</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q8-交叉编译togetherosbot-trosb-完整源码时速度很慢有什么方法可以加速吗">Q8: 交叉编译TogetheROS.Bot (tros.b) 完整源码时速度很慢，有什么方法可以加速吗？<a href="#q8-交叉编译togetherosbot-trosb-完整源码时速度很慢有什么方法可以加速吗" class="hash-link" aria-label="Q8: 交叉编译TogetheROS.Bot (tros.b) 完整源码时速度很慢，有什么方法可以加速吗？的直接链接" title="Q8: 交叉编译TogetheROS.Bot (tros.b) 完整源码时速度很慢，有什么方法可以加速吗？的直接链接">​</a></h3>
<p><strong>A:</strong> 完整编译tros.b的所有package确实需要较长时间（例如，在8核CPU、32GB内存的PC上可能需要20分钟左右）。以下是两种加速编译的方法：</p>
<ol>
<li>
<p><strong>使用最小化编译脚本：</strong></p>
<ul>
<li>地平线提供的tros.b编译脚本中，通常除了<code>all_build.sh</code>（完整编译）之外，还会提供一个<code>minimal_build.sh</code>（最小化编译）的选项。</li>
<li>最小化编译通常会跳过编译算法示例（examples）和测试用例（tests）等非核心功能包，从而显著减少编译时间。</li>
<li><strong>使用方法：</strong> 在您进行交叉编译配置的步骤中，将原本调用<code>./robot_dev_config/all_build.sh</code>的命令替换为调用<code>./robot_dev_config/minimal_build.sh</code>。</li>
</ul>
</li>
<li>
<p><strong>手动忽略不需要编译的package：</strong></p>
<ul>
<li>Colcon（ROS2的构建工具）支持通过在特定package的源码目录下放置一个名为<code>COLCON_IGNORE</code>的空文件来忽略该package的编译。</li>
<li><strong>步骤：</strong>
<ol>
<li>首先，确定您不需要哪些package。这些package的源码通常是在编译前通过<code>.repos</code>文件（例如 <code>robot_dev_config/ros2_release.repos</code> ）下载到<code>src/</code>目录下的。</li>
<li>查看<code>.repos</code>文件，找到您想忽略的package的源码路径。例如，如果<code>.repos</code>文件中有如下配置：<!-- -->
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">ament/google_benchmark_vendor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/ament/google_benchmark_vendor.git</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">(https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/ament/google_benchmark_vendor.git)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 0.0.7</span><br></span></code></pre></div></div>
<!-- -->这说明<code>google_benchmark_vendor</code>这个package的源码会被下载到 <code>src/ament/google_benchmark_vendor/</code> 路径下。</li>
<li>在该package的源码根目录下创建一个空的<code>COLCON_IGNORE</code>文件：<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">touch src/ament/google_benchmark_vendor/COLCON_IGNORE</span><br></span></code></pre></div></div>
</li>
<li>这样，在下次执行<code>colcon build</code>时，这个package就会被跳过。您可以对多个不需要的package执行此操作。</li>
</ol>
</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q9-rdk板卡上安装了官方的trosb之后是否还支持安装和使用其他版本的ros如ros1或不同发行版的ros2">Q9: RDK板卡上安装了官方的tros.b之后，是否还支持安装和使用其他版本的ROS（如ROS1或不同发行版的ROS2）？<a href="#q9-rdk板卡上安装了官方的trosb之后是否还支持安装和使用其他版本的ros如ros1或不同发行版的ros2" class="hash-link" aria-label="Q9: RDK板卡上安装了官方的tros.b之后，是否还支持安装和使用其他版本的ROS（如ROS1或不同发行版的ROS2）？的直接链接" title="Q9: RDK板卡上安装了官方的tros.b之后，是否还支持安装和使用其他版本的ROS（如ROS1或不同发行版的ROS2）？的直接链接">​</a></h3>
<p><strong>A:</strong> <strong>支持。</strong></p>
<ul>
<li>
<p>在RDK板卡上安装了地平线的tros.b（例如基于ROS2 Humble）之后，您仍然可以尝试安装其他版本的ROS，包括ROS1（如Noetic, Melodic）或其他ROS2发行版（如Foxy, Galactic等，如果  它们支持ARM64架构且您能找到或自行编译安装包）。</p>
</li>
<li>
<p>不同的ROS版本可以共存于系统中，它们通常安装在不同的路径下（例如ROS1在<code>/opt/ros/noetic/</code>，ROS2 Humble在<code>/opt/ros/humble/</code>，tros.b可能在<code>/opt/tros/humble/</code>）。</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span><strong>重要注意事项</strong></div><div class="admonitionContent_BuS1"><p><strong>一个终端会话中只能source一个ROS版本的环境！</strong></p><ul>
<li>如果您在一个终端中执行了 <code>source /opt/tros/humble/setup.bash</code> 来激活tros.b (Humble) 的环境，那么在该终端中就<strong>不能</strong>再source其他ROS版本（如 <code>source /opt/ros/foxy/setup.bash</code> 或 <code>source /opt/ros/noetic/setup.bash</code>）的环境，反之亦然。</li>
<li>同时source多个ROS版本的环境会导致环境变量冲突（如<code>PATH</code>, <code>LD_LIBRARY_PATH</code>, <code>PYTHONPATH</code>, <code>AMENT_PREFIX_PATH</code>, <code>ROS_PACKAGE_PATH</code>等），使得ROS命令和程序行为错乱。</li>
<li>如果您需要在不同的ROS版本间切换，请为每个版本打开独立的终端会话，并在各自的会话中source对应的<code>setup.bash</code>文件。</li>
</ul></div></div>
</li>
<li>
<p><strong>tros.b与ROS2 Foxy/Humble的兼容性：</strong></p>
<ul>
<li>地平线的tros.b通常是基于某个ROS2 LTS版本（如Foxy或Humble）进行构建和优化的，并与之保持API接口兼容。这意味着，如果您的tros.b是基于Humble的，那么您通常可以直接使用为标准ROS2 Humble开发的工具和库，而无需再单独安装一遍ROS2 Humble（除非您需要标准ROS2 Desktop完整版中的某些特定工具，而tros.b中未包含）。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q10-使用colcon-build命令编译ros2-package时报错-attributeerror-module-pyparsing-has-no-attribute-operatorprecedence如何解决">Q10: 使用<code>colcon build</code>命令编译ROS2 package时报错 <code>AttributeError: module &#x27;pyparsing&#x27; has no attribute &#x27;operatorPrecedence&#x27;</code>，如何解决？<a href="#q10-使用colcon-build命令编译ros2-package时报错-attributeerror-module-pyparsing-has-no-attribute-operatorprecedence如何解决" class="hash-link" aria-label="q10-使用colcon-build命令编译ros2-package时报错-attributeerror-module-pyparsing-has-no-attribute-operatorprecedence如何解决的直接链接" title="q10-使用colcon-build命令编译ros2-package时报错-attributeerror-module-pyparsing-has-no-attribute-operatorprecedence如何解决的直接链接">​</a></h3>
<p><strong>A:</strong> 这个错误 <code>AttributeError: module &#x27;pyparsing&#x27; has no attribute &#x27;operatorPrecedence&#x27;</code> 通常是由于系统中安装的<code>python3-catkin-pkg</code>（一个用于解析ROS package.xml文件的Python库）版本过低，而它依赖的<code>pyparsing</code>库版本与其不兼容，或者<code>python3-catkin-pkg</code>自身的功能不完备导致的。</p>
<p><strong>解决方法：</strong> 尝试升级<code>python3-catkin-pkg</code>到ROS官方源提供的较新版本。</p>
<p><strong>步骤如下：</strong></p>
<ol>
<li>
<p><strong>添加ROS官方的APT软件源</strong>（如果尚未添加）：
这一步是为了确保能从ROS官方获取到最新兼容的<code>python3-catkin-pkg</code>版本。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update &amp;&amp; sudo apt install curl gnupg2 lsb-release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo curl -sSL [https://raw.githubusercontent.com/ros/rosdistro/master/ros.key](https://raw.githubusercontent.com/ros/rosdistro/master/ros.key) -o /usr/share/keyrings/ros-archive-keyring.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] [http://packages.ros.org/ros2/ubuntu](http://packages.ros.org/ros2/ubuntu) $(source /etc/os-release &amp;&amp; echo $UBUNTU_CODENAME) main&quot; | sudo tee /etc/apt/sources.list.d/ros2.list &gt; /dev/null</span><br></span></code></pre></div></div>
<p>注意：<code>$(source /etc/os-release &amp;&amp; echo $UBUNTU_CODENAME)</code> 会自动获取您当前Ubuntu系统的代号（如 <code>focal</code> for 20.04, <code>jammy</code> for 22.04）。</p>
</li>
<li>
<p><strong>移除旧版本的 <code>python3-catkin-pkg</code></strong>（可选，但有时有助于干净安装）：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt remove python3-catkin-pkg</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>更新APT缓存并安装新版本的 <code>python3-catkin-pkg</code>：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install python3-catkin-pkg</span><br></span></code></pre></div></div>
</li>
<li>
<p>安装/升级完成后，再次尝试执行 <code>colcon build</code> 命令。</p>
</li>
</ol>
<p>如果问题依旧，可能还需要检查 <code>pyparsing</code> 库本身的版本，并确保它与新安装的 <code>python3-catkin-pkg</code> 版本兼容。有时可能需要通过 <code>pip</code> 来管理 <code>pyparsing</code> 的版本。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q11-如何查看trosb的版本信息">Q11: 如何查看tros.b的版本信息？<a href="#q11-如何查看trosb的版本信息" class="hash-link" aria-label="Q11: 如何查看tros.b的版本信息？的直接链接" title="Q11: 如何查看tros.b的版本信息？的直接链接">​</a></h3>
<p><strong>A:</strong> tros.b安装完成后，登录到RDK系统，并使用以下命令查看tros.b元包（meta-package）的版本信息，这通常也代表了整个tros.b发行版的基础版本：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apt show tros</span><br></span></code></pre></div></div>
<p><strong>示例输出 (RDK OS 2.x 版本系统，tros.b 2.0.0):</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Package: tros</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Version: 2.0.0-20230523223852</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Maintainer: kairui.wang &lt;kairui.wang@horizon.ai&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Installed-Size: unknown</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Depends: hobot-models-basic, tros-ros-base, tros-ai-msgs, ... (大量依赖包)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Download-Size: 980 B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APT-Manual-Installed: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APT-Sources: [http://archive.d-robotics.cc/ubuntu-rdk](http://archive.d-robotics.cc/ubuntu-rdk) focal/main arm64 Packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description: TogetheROS Bot</span><br></span></code></pre></div></div>
<p><strong>示例输出 (RDK OS 1.x 版本系统，tros.b 1.1.6):</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Package: tros</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Version: 1.1.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Section: utils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Maintainer: kairui.wang &lt;kairui.wang@horizon.ai&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Installed-Size: 1,536 MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pre-Depends: hhp-verify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Depends: symlinks, locales, hhp-verify, hobot-models-basic, hobot-arm64-libs (&gt;= 1.1.6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Apt-Sources: [http://archive.d-robotics.cc/ubuntu-ports](http://archive.d-robotics.cc/ubuntu-ports) focal/main arm64 Packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date: 2023</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q12-地平线trosb的1x版本和2x版本及更新版本之间有什么主要说明和差异">Q12: 地平线tros.b的1.x版本和2.x版本（及更新版本）之间有什么主要说明和差异？<a href="#q12-地平线trosb的1x版本和2x版本及更新版本之间有什么主要说明和差异" class="hash-link" aria-label="Q12: 地平线tros.b的1.x版本和2.x版本（及更新版本）之间有什么主要说明和差异？的直接链接" title="Q12: 地平线tros.b的1.x版本和2.x版本（及更新版本）之间有什么主要说明和差异？的直接链接">​</a></h3>
<p><strong>A:</strong></p>
<ul>
<li>
<p><strong>和系统版本、RDK平台硬件对应关系：</strong></p>
<ul>
<li><strong>2.x版本tros.b (及后续如3.x等)：</strong>
<ul>
<li>通常仅支持对应大版本的RDK OS系统（例如，tros.b 2.x支持RDK OS 2.x）。</li>
<li>支持RDK X3、RDK X3 Module等较新的全系列硬件。</li>
<li>未来tros.b的新增功能和主要维护会集中在这些较新的版本上。</li>
<li>代码通常托管在GitHub上的 <code>D-Robotics</code> 组织下。</li>
</ul>
</li>
<li><strong>1.x版本tros.b：</strong>
<ul>
<li>属于历史版本。</li>
<li>仅支持较早的1.x版本RDK OS系统和特定的RDK硬件（如早期的RDK X3）。</li>
<li>未来1.x版本tros.b可能仅发布关键问题修复，不再有新功能迭代。</li>
<li>代码曾托管在gitlab或其他内部平台。</li>
<li>参考链接 (历史版本文档)：<a href="https://developer.d-robotics.cc/api/v1/fileData/TogetherROS/index.html" target="_blank" rel="noopener noreferrer">1.x版本tros.b说明</a></li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span><strong>注意</strong></div><div class="admonitionContent_BuS1"><p>1.x版本tros.b<strong>无法</strong>通过<code>apt</code>命令直接升级到2.x或更新版本的tros.b。如果需要使用新版tros.b，必须先将RDK板卡的整个操作系统通过烧录镜像的方式升级到支持新版tros.b的RDK OS版本，然后再安装对应版本的tros.b。
参考：<a href="/rdk_doc/Quick_start/install_os/rdk_x3">安装对应板卡系统</a> (请将链接替换为实际有效的文档路径)</p></div></div>
</li>
<li>
<p><strong>功能差异：</strong></p>
<ul>
<li>基础的ROS2核心功能在兼容版本间是相同的。</li>
<li>地平线针对其硬件特性优化的功能、新增的特定package以及最新的AI算法支持等，通常会优先或仅在2.x及更新版本的tros.b中提供。</li>
</ul>
</li>
<li>
<p><strong>安装包管理方式不同：</strong></p>
<ul>
<li><strong>1.x版本tros.b：</strong> 可能采用一个较大的整体安装包文件。</li>
<li><strong>2.x版本tros.b (及更新版本)：</strong> 通常会根据功能模块将tros.b拆分为多个更细粒度的Debian软件包（如<code>tros-ros-base</code>, <code>tros-dnn-node</code>, <code>tros-mipi-cam</code>等），用户可以按需安装。对于开发者而言，通过<code>apt install tros</code>（元包）或<code>apt install &lt;specific_tros_package&gt;</code>来安装，使用体验上差异不大。</li>
</ul>
</li>
<li>
<p><strong>使用差异：</strong></p>
<ul>
<li><strong>apt安装和升级方法：</strong> 基本的<code>apt</code>命令使用方式是类似的，但软件源和包名可能会有区别。</li>
<li><strong>源码编译方法：</strong> 编译流程和工具（如Colcon）基本一致，但依赖的ROS2基础版本和特定库版本会有所不同。</li>
<li><strong>示例的launch启动脚本：</strong> 2.x及更新版本的tros.b，其示例的launch启动脚本文件名、参数、依赖关系等可能进行了优化和调整，与1.x版本不完全兼容。请务必参考对应tros.b版本的手册来运行示例。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q13-使用web浏览器如chrome-edge-firefox通过ip地址加端口号例如-httprdk_ip8000访问rdk上运行的web服务如tros的websocket可视化示例时页面打开失败可能是什么原因">Q13: 使用WEB浏览器（如Chrome, Edge, Firefox）通过IP地址加端口号（例如 <code>http://&lt;RDK_IP&gt;:8000</code>）访问RDK上运行的WEB服务（如TROS的Websocket可视化示例）时，页面打开失败，可能是什么原因？<a href="#q13-使用web浏览器如chrome-edge-firefox通过ip地址加端口号例如-httprdk_ip8000访问rdk上运行的web服务如tros的websocket可视化示例时页面打开失败可能是什么原因" class="hash-link" aria-label="q13-使用web浏览器如chrome-edge-firefox通过ip地址加端口号例如-httprdk_ip8000访问rdk上运行的web服务如tros的websocket可视化示例时页面打开失败可能是什么原因的直接链接" title="q13-使用web浏览器如chrome-edge-firefox通过ip地址加端口号例如-httprdk_ip8000访问rdk上运行的web服务如tros的websocket可视化示例时页面打开失败可能是什么原因的直接链接">​</a></h3>
<p><strong>A:</strong> 如果浏览器无法打开RDK上托管的WEB页面，可能的原因如下：</p>
<ul>
<li>
<p><strong>Nginx服务冲突或未正确启动 (针对某些依赖Nginx的WEB示例)：</strong></p>
<ul>
<li><strong>问题原因：</strong> 如果RDK板卡上已经因为其他应用（例如，之前运行过某个不带特定端口号的WEB展示示例，它可能已启动了一个全局的Nginx服务监听80端口）而启动了Nginx服务，那么当您尝试启动一个新的、也想使用Nginx（或者特定端口）的WEB示例时，可能会因为Nginx已在运行或端口已被占用而导致新服务无法正常启动或监听在预期端口。</li>
<li><strong>解决方法：</strong>
<ol>
<li><strong>检查并停止现有Nginx进程：</strong> SSH登录到RDK板卡，使用 <code>ps aux | grep nginx</code> 查看是否有Nginx进程在运行。如果有，尝试使用 <code>sudo systemctl stop nginx</code> (如果是systemd服务) 或 <code>sudo pkill nginx</code> 来停止它们。</li>
<li><strong>重启RDK板卡：</strong> 一个简单粗暴但有效的方法是重启板卡，以确保所有旧的服务进程都已关闭。</li>
<li>然后再重新运行您的目标WEB示例。</li>
</ol>
</li>
</ul>
</li>
<li>
<p><strong>网络连接问题：</strong></p>
<ul>
<li>确保您的PC和RDK板卡在同一局域网内，且网络通畅（PC能ping通RDK的IP地址）。</li>
<li>检查RDK板卡的IP地址是否正确。</li>
</ul>
</li>
<li>
<p><strong>防火墙问题：</strong></p>
<ul>
<li>PC端或网络中的防火墙可能阻止了对RDK板卡目标端口（如8000）的 访问。请检查并配置防火墙规则允许该端口的通信。</li>
<li>RDK板卡自身的防火墙（如<code>ufw</code>，虽然默认可能未开启）如果配置不当也可能阻止外部访问。</li>
</ul>
</li>
<li>
<p><strong>WEB服务本身未成功启动或监听错误：</strong></p>
<ul>
<li>SSH登录到RDK板卡，检查您期望运行的WEB服务（例如TROS的<code>hobot_websocket</code>节点或其他Python HTTP服务器等）是否真的已经成功启动，并且正在监听您尝试访问的IP地址和端口号。</li>
<li>查看该服务在板卡端的日志输出，看是否有报错信息。</li>
<li>使用 <code>netstat -tulnp | grep &lt;端口号&gt;</code> (例如 <code>netstat -tulnp | grep 8000</code>) 命令在板卡上查看该端口是否真的处于LISTEN状态。</li>
</ul>
</li>
<li>
<p><strong>浏览器缓存或代理问题：</strong></p>
<ul>
<li>尝试清除浏览器缓存或使用浏览器的隐身/无痕模式访问。</li>
<li>如果您PC的网络配置中使用了代理服务器，请检查代理设置是否影响了对局域网内IP的直接访问。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q14-通过web浏览器访问tros的websocket可视化示例时只显示摄像头图像但没有ai感知结果如检测框骨骼点等被渲染出来是什么原因">Q14: 通过WEB浏览器访问TROS的Websocket可视化示例时，只显示摄像头图像，但没有AI感知结果（如检测框、骨骼点等）被渲染出来，是什么原因？<a href="#q14-通过web浏览器访问tros的websocket可视化示例时只显示摄像头图像但没有ai感知结果如检测框骨骼点等被渲染出来是什么原因" class="hash-link" aria-label="Q14: 通过WEB浏览器访问TROS的Websocket可视化示例时，只显示摄像头图像，但没有AI感知结果（如检测框、骨骼点等）被渲染出来，是什么原因？的直接链接" title="Q14: 通过WEB浏览器访问TROS的Websocket可视化示例时，只显示摄像头图像 ，但没有AI感知结果（如检测框、骨骼点等）被渲染出来，是什么原因？的直接链接">​</a></h3>
<p><strong>A:</strong> 如果Websocket可视化页面能显示图像但没有AI结果，通常表示图像数据流是通畅的，但AI结果数据流可能存在问题，或者前端渲染逻辑未被正确触发。</p>
<ol>
<li>
<p><strong>检查Web Node启动命令参数：</strong></p>
<ul>
<li>许多TROS的Websocket节点（如<code>hobot_websocket</code>）在启动时可以通过参数来控制是否渲染AI感知结果。请仔细检查您启动该节点的<code>ros2 launch</code>或<code>ros2 run</code>命令，确保相关的参数（例如，可能是类似 <code>display_ai_results:=true</code> 或 <code>render_perception:=true</code> 的参数）已正确设置以开启感知结果的渲染。</li>
<li>具体参数名称和用法，请查阅对应Websocket包（如<code>hobot_websocket</code>）的README文档或launch文件。例如：<a href="https://github.com/D-Robotics/hobot_websocket#%E5%8F%82%E6%95%B0" target="_blank" rel="noopener noreferrer">hobot_websocket README 参数说明</a></li>
</ul>
</li>
<li>
<p><strong>检查Web Node启动终端的日志：</strong></p>
<ul>
<li>在RDK板卡上启动Websocket节点的那个终端窗口中，仔细查看是否有任何错误（ERROR）或警告（WARN）日志输出。这些日志可能会提示AI结果处理或发送环节的问题。</li>
</ul>
</li>
<li>
<p><strong>确认是否有AI感知结果数据正在发布：</strong></p>
<ul>
<li>AI感知结果（如检测框、姿态点等）通常是通过另外的ROS话题发布的（例如，类型可能是自定义的AI消息 <code>*_msgs/AiMsg</code>）。</li>
<li>在一个新的终端中（source好TROS环境后），使用 <code>ros2 topic list</code> 查看当前所有活跃的话题列表，确认是否存在发布AI感知结果的话题。</li>
<li>如果话题存在，使用 <code>ros2 topic echo /the_ai_result_topic_name</code> (请替换为实际的AI结果话题名)  来实时查看是否有数据正在该话题上发布。如果长时间没有数据输出，说明上游的AI推理节点可能没有正常工作或没有检测到目标。</li>
</ul>
</li>
<li>
<p><strong>检查是否意外启动了多个Web Node实例：</strong></p>
<ul>
<li>如果因为某些原因，您在板卡上意外地启动了多个Websocket节点实例，它们可能会相互干扰，或者浏览器连接到了一个没有正确接收或处理AI数据的实例。</li>
<li>在板卡上使用 <code>ps aux | grep web</code> (或更具体的进程名) 命令检查是否有多个Websocket服务进程在运行。如果有，请使用 <code>kill &lt;PID&gt;</code> 命令停止所有多余的Websocket进程，然后只启动一个实例。</li>
</ul>
</li>
<li>
<p><strong>前端与后端数据同步或渲染逻辑问题：</strong></p>
<ul>
<li>确保Websocket服务器（后端，在RDK上运行）与浏览器客户端（前端）之间的消息格式和协议版本是匹配的。</li>
<li>检查浏览器开发者工具的控制台（Console）和网络（Network）标签页，看是否有JavaScript错误或Websocket通信错误。</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="q15-在tros-humble版本中如何配置和使用零拷贝zero-copy数据传输">Q15: 在TROS Humble版本中如何配置和使用零拷贝（Zero-Copy）数据传输？<a href="#q15-在tros-humble版本中如何配置和使用零拷贝zero-copy数据传输" class="hash-link" aria-label="Q15: 在TROS Humble版本中如何配置和使用零拷贝（Zero-Copy）数据传输？的直接链接" title="Q15: 在TROS Humble版本中如何配置和使用零拷贝（Zero-Copy）数据传输？的直接链接">​</a></h3>
<p><strong>A:</strong> 零拷贝是一种高效的数据传输机制，它允许数据在ROS节点间传递时避免不必要的内存拷贝，从而降低延迟、减少CPU占用，特别适用于传输大的数据块如图像。TROS Humble版本（基于ROS2 Humble）支持利用Fast DDS（默认  的DDS实现之一）的共享内存 (Shared Memory, SHM) 传输特性来实现零拷贝。</p>
<p><strong>配置步骤 (适用于Ubuntu系统和Linux系统)：</strong></p>
<ol>
<li>
<p><strong>设置必要的环境变量：</strong>
在运行ROS节点的终端中，执行以下命令来配置Fast DDS使用共享内存进行传输：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. 确保RMW实现是Fast DDS (通常Humble默认就是，但显式设置更保险)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export RMW_IMPLEMENTATION=rmw_fastrtps_cpp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. 指定Fast DDS的配置文件路径，该文件启用了共享内存传输</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#    注意：此路径是示例，请根据您实际的TROS Humble安装路径进行调整</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#    通常在 /opt/tros/humble/lib/hobot_shm/config/shm_fastdds.xml 或类似位置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export FASTRTPS_DEFAULT_PROFILES_FILE=/opt/tros/humble/lib/hobot_shm/config/shm_fastdds.xml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. 强制Fast DDS从XML配置文件  中加载QoS设置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export RMW_FASTRTPS_USE_QOS_FROM_XML=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 4. 启用ROS2的借贷消息 (Loaned Messages) 机制，这是实现零拷贝的关键</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export ROS_DISABLE_LOANED_MESSAGES=0 </span><br></span></code></pre></div></div>
<ul>
<li></li>
</ul>
<p>这些环境变量的详细说明可以参考ROS2官方文档或Fast DDS的文档，例如：</p>
<ul>
<li><a href="https://fast-dds.docs.eprosima.com/en/latest/fastdds/ros2/ros2.html" target="_blank" rel="noopener noreferrer">ROS 2 using Fast DDS middleware</a></li>
<li>地平线官方<code>hobot_shm</code>包的README：<a href="https://github.com/D-Robotics/hobot_shm/blob/develop/README_cn.md" target="_blank" rel="noopener noreferrer">hobot_shm README_cn.md</a> (请访问最新的官方链接)</li>
</ul>
</li>
<li>
<p><strong>启动支持零拷贝的ROS节点：</strong></p>
<ul>
<li>发布数据的节点（Publisher）和订阅数据的节点（Subscriber）都需要在其代码中支持并使用借贷消息API。地平线官方提供的部分TROS包（如<code>mipi_cam</code>、<code>hobot_codec</code>等）可能已经适配了零拷贝。</li>
<li>例如，启动<code>mipi_cam</code>节点发布共享内存图像：<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 先source TROS Humble环境</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source /opt/tros/humble/setup.bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># (然后设置上面的环境变量)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 launch mipi_cam mipi_cam.launch.py mipi_video_device:=F37 </span><br></span></code></pre></div></div>
<ul>
<li></li>
</ul>
</li>
<li>启动<code>hobot_codec</code>节点通过共享内存订阅图像并进行处理：<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># (同样需要source环境和设置环境变量)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 launch hobot_codec hobot_codec.launch.py codec_in_mode:=shared_mem codec_in_format:=nv12 codec_out_mode:=ros codec_out_format:=jpeg codec_sub_topic:=/hbmem_img codec_pub_topic:=/image_jpeg</span><br></span></code></pre></div></div>
<ul>
<li></li>
</ul>
</li>
</ul>
</li>
</ol>
<p><strong>检查是否成功使用零拷贝：</strong></p>
<ul>
<li>当支持零拷贝的发布者和订阅者成功通过共享内存进行通信时，系统会在 <code>/dev/shm/</code> 目录下创建一些内存映射文件。您可以通过以下命令查看：<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ls -lthr /dev/shm/fast_datasharing* /dev/shm/fastrtps_*</span><br></span></code></pre></div></div>
<ul>
<li></li>
</ul>
<!-- -->如果看到有类似 <code>fast_datasharing_...</code> 的文件被创建，并且文件大小与传输的数据（如图像帧大小）相关，则表明共享内存传输可能已启用。</li>
<li>还可以使用 <code>lsof</code> 命令查看哪些进程正在使用这些共享内存文件：<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo lsof /dev/shm/fast_datasharing*</span><br></span></code></pre></div></div>
<ul>
<li></li>
</ul>
<!-- -->输出中应该能看到您的发布者和订阅者进程。</li>
</ul>
<p><strong>禁用零拷贝功能：</strong></p>
<ul>
<li>如果因某些原因需要禁用零拷贝（例如调试或兼容性问题），可以通过设置以下环境变量来实现，它具有最高优先级：<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export ROS_DISABLE_LOANED_MESSAGES=1</span><br></span></code></pre></div></div>
<ul>
<li></li>
</ul>
</li>
<li>禁用零拷贝的详细说明参考ROS2官方文档：<a href="https://docs.ros.org/en/humble/How-To-Guides/Configure-ZeroCopy-loaned-messages.html#how-to-disable-loaned-messages" target="_blank" rel="noopener noreferrer">How to disable loaned messages</a></li>
</ul>
<p><strong>注  意：</strong></p>
<ul>
<li>确保<code>FASTRTPS_DEFAULT_PROFILES_FILE</code>指向的XML配置文件 (<code>shm_fastdds.xml</code>) 内容是正确的，并且确实启用了共享内存传输的相关配置。</li>
<li>零拷贝的成功启用依赖于发布者和订阅者两端都正确支持和配置了借贷消息和共享内存传输。</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2025-07-22T06:27:16.000Z" itemprop="dateModified">2025年7月22日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/rdk_doc/FAQ/interface"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">8.2 接口、外设与驱动</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rdk_doc/FAQ/multimedia"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">8.4 多媒体处理与应用</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#q1-第三方库在rdk上的安装交叉编译和使用方法是怎样的" class="table-of-contents__link toc-highlight">Q1: 第三方库在RDK上的安装/交叉编译和使用方法是怎样的？</a></li><li><a href="#q2-在编译大型程序如c项目ros功能包的过程中如果系统提示编译进程被kill或出现内存不足相关的错误日志应该如何解决" class="table-of-contents__link toc-highlight">Q2: 在编译大型程序（如C++项目、ROS功能包）的过程中，如果系统提示编译进程被“kill”或出现内存不足相关的错误日志，应该如何解决？</a></li><li><a href="#q3-如何运行gc4633-mipi摄像头的示例程序" class="table-of-contents__link toc-highlight">Q3: 如何运行GC4633 MIPI摄像头的示例程序？</a></li><li><a href="#q4-使用rqt_image_view查看rdk通过ros发布的rgb888-raw图像时感觉非常卡顿甚至无法接收图像是什么原因" class="table-of-contents__link toc-highlight">Q4: 使用<code>rqt_image_view</code>查看RDK通过ROS发布的RGB888 RAW图像时，感觉非常卡顿，甚至无法接收图像，是什么原因？</a></li><li><a href="#q5-地平线提供的linux镜像特指经过最小裁剪的系统非完整ubuntu-desktopserver是否支持在板卡端直接进行编译操作" class="table-of-contents__link toc-highlight">Q5: 地平线提供的Linux镜像（特指经过最小裁剪的系统，非完整Ubuntu Desktop/Server）是否支持在板卡端直接进行编译操作？</a></li><li><a href="#q6-在地平线提供的最小化linux镜像上如何运行官方手册中提供的示例这些示例通常以ubuntu系统环境为例" class="table-of-contents__link toc-highlight">Q6: 在地平线提供的最小化Linux镜像上如何运行官方手册中提供的示例（这些示例通常以Ubuntu系统环境为例）？</a></li><li><a href="#q7-如何快速查找rostros中launch启动脚本文件的具体路径" class="table-of-contents__link toc-highlight">Q7: 如何快速查找ROS/TROS中launch启动脚本文件的具体路径？</a></li><li><a href="#q8-交叉编译togetherosbot-trosb-完整源码时速度很慢有什么方法可以加速吗" class="table-of-contents__link toc-highlight">Q8: 交叉编译TogetheROS.Bot (tros.b) 完整源码时速度很慢，有什么方法可以加速吗？</a></li><li><a href="#q9-rdk板卡上安装了官方的trosb之后是否还支持安装和使用其他版本的ros如ros1或不同发行版的ros2" class="table-of-contents__link toc-highlight">Q9: RDK板卡上安装了官方的tros.b之后，是否还支持安装和使用其他版本的ROS（如ROS1或不同发行版的ROS2）？</a></li><li><a href="#q10-使用colcon-build命令编译ros2-package时报错-attributeerror-module-pyparsing-has-no-attribute-operatorprecedence如何解决" class="table-of-contents__link toc-highlight">Q10: 使用<code>colcon build</code>命令编译ROS2 package时报错 <code>AttributeError: module &#39;pyparsing&#39; has no attribute &#39;operatorPrecedence&#39;</code>，如何解决？</a></li><li><a href="#q11-如何查看trosb的版本信息" class="table-of-contents__link toc-highlight">Q11: 如何查看tros.b的版本信息？</a></li><li><a href="#q12-地平线trosb的1x版本和2x版本及更新版本之间有什么主要说明和差异" class="table-of-contents__link toc-highlight">Q12: 地平线tros.b的1.x版本和2.x版本（及更新版本）之间有什么主要说明和差异？</a></li><li><a href="#q13-使用web浏览器如chrome-edge-firefox通过ip地址加端口号例如-httprdk_ip8000访问rdk上运行的web服务如tros的websocket可视化示例时页面打开失败可能是什么原因" class="table-of-contents__link toc-highlight">Q13: 使用WEB浏览器（如Chrome, Edge, Firefox）通过IP地址加端口号（例如 <code>http://&lt;RDK_IP&gt;:8000</code>）访问RDK上运行的WEB服务（如TROS的Websocket可视化示例）时，页面打开失败，可能是什么原因？</a></li><li><a href="#q14-通过web浏览器访问tros的websocket可视化示例时只显示摄像头图像但没有ai感知结果如检测框骨骼点等被渲染出来是什么原因" class="table-of-contents__link toc-highlight">Q14: 通过WEB浏览器访问TROS的Websocket可视化示例时，只显示摄像头图像，但没有AI感知结果（如检测框、骨骼点等）被渲染出来，是什么原因？</a></li><li><a href="#q15-在tros-humble版本中如何配置和使用零拷贝zero-copy数据传输" class="table-of-contents__link toc-highlight">Q15: 在TROS Humble版本中如何配置和使用零拷贝（Zero-Copy）数据传输？</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">友情链接</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.guyuehome.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">古月居<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">联系我们</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/D-Robotics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://space.bilibili.com/437998606" target="_blank" rel="noopener noreferrer" class="footer__link-item">BiLiBiLi<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 D-Robotics.</div></div></div></footer></div>
</body>
</html>